\subsection{Groups}\label{subsec:groups}

\paragraph{Inverses in monoids}

\begin{definition}\label{def:monoid_inverse}\mcite[71]{Ляпин1960}
  Let \( M \) be a \hyperref[def:monoid]{monoid}. We say that \( y \) is a \term{left inverse} (resp. \term{right inverse}) of \( x \) if \( yx = e \) (resp. \( xy = e \)).

  If \( y \) is simultaneously a left and right inverse of \( x \), we call a \term[ru=двусторонне обратный (\cite[71]{Ляпин1960})]{two-sided inverse} or simply an \term{inverse} of \( x \) and denote it by \( x^{-1} \). It is unique as a consequence \fullref{thm:monoid_inverse_unique}. This notation is consistent with monoid exponentiation defined in \fullref{def:monoid/exponentiation}.

  We call \( x \) \term{invertible} if it has a two-sided inverse.
\end{definition}

\begin{proposition}\label{thm:monoid_inverse_unique}
  For every element \( x \) of any monoid, the (two-sided) \hyperref[def:monoid_inverse]{inverse} \( x^{-1} \) of \( x \), if it exists, is unique.
\end{proposition}
\begin{proof}
  If \( y \) and \( z \) are both inverses of \( x \), then
  \begin{equation*}
    y = ey = zxy = ze = z.
  \end{equation*}
\end{proof}

\paragraph{Groups}

\begin{definition}\label{def:group}\mcite[29]{Ляпин1960}
  A \term[bg=група (\cite[4]{КоцевСидеров2016}), ru=группа (\cite[sec. 2.6]{Тыртышников2007}), en=group (\cite[118]{Knapp2016BasicAlgebra})]{group} is a \hyperref[def:monoid]{monoid} in which every element has a \hyperref[def:monoid_inverse]{two-sided inverse}. They are the most well-studied and most well-behaved semigroups.

  Groups have the following metamathematical properties:
  \begin{thmenum}
    \thmitem{def:group/theory} To obtain a \hyperref[def:first_order_theory]{first-order theory} for groups, we can extend the \hyperref[def:monoid/theory]{theory of monoids} by adding a unary \hyperref[def:first_order_language/fun]{functional symbol} \( (\anon)^{-1} \) to the language and then adding the axiom
    \begin{equation}\label{eq:def:group/theory/inverse_axiom}
      \qforall \xi (\xi \cdot \xi^{-1} = e \wedge \xi^{-1} \cdot \xi = e).
    \end{equation}

    \Fullref{thm:def:group/involution} will show that this is an \hyperref[def:involution]{involution}.

    \thmitem{def:group/homomorphism} A \hyperref[def:first_order_homomorphism]{first-order homomorphism} between the groups \( G \) and \( H \) is a \hyperref[def:monoid/homomorphism]{monoid homomorphism} \( \varphi: G \to H \) that additionally satisfies the condition \eqref{eq:def:set_with_involution/homomorphism} for involutions.

    As shown in \fullref{thm:group_homomorphism_single_condition}, however, the condition \eqref{eq:def:set_with_involution/homomorphism} for \hyperref[def:set_with_involution/homomorphism]{homomorphism of sets with involution} and the condition \eqref{eq:def:pointed_set/homomorphism} for \hyperref[def:pointed_set/homomorphism]{pointed set homomorphism} are redundant --- it is sufficient for \( \varphi \) to be a \hyperref[def:semigroup/homomorphism]{semigroup homomorphism}, i.e. satisfy \eqref{eq:def:semigroup/homomorphism}.

    \thmitem{def:group/submodel} The set \( A \subseteq G \) is a \hyperref[def:first_order_submodel]{submodel} of \( G \) if it is a \hyperref[def:monoid/submodel]{submonoid} and if \( x \in A \) implies \( x^{-1} \in A \). We say that \( A \) is a \term{subgroup} of \( G \).

    As a consequence of \fullref{thm:positive_formulas_preserved_under_homomorphism}, the image of a group homomorphism is a subgroup of its codomain.

    For an arbitrary subset \( A \) of \( G \), we denote the \hyperref[def:first_order_generated_substructure]{generated submodel} by \( \braket{ A } \). In addition to the elements of \( A \), \( \braket{ A } \) contains their products and inverses, the products of their products and inverses, etc...

    \thmitem{def:group/exponentiation} We extend \hyperref[def:monoid/exponentiation]{monoid exponentiation} to all integers by setting
    \begin{equation*}
      x^{-n} \coloneqq (x^n)^{-1}.
    \end{equation*}

    This operation behaves well as shown in \fullref{thm:def:group/negative_power}.

    \thmitem{def:group/category} We denote the \hyperref[def:category_of_small_first_order_models]{category of \( \mscrU \)-small models} of groups by \( \ucat{Grp} \).

    \begin{itemize}
      \item It is \hyperref[def:concrete_category]{concrete} over \hyperref[def:monoid/category]{\( \ucat{Mon} \)} and hence over \hyperref[def:pointed_set/category]{\( \ucat{Set_*} \)}. The latter allows us to use \fullref{thm:image_coimage_factorization} and \fullref{thm:zero_morphisms_pointed}, as we will soon do --- see \fullref{thm:group_image_and_coimage}.

      \item We will define the \hyperref[def:free_group]{free group} functor in \fullref{subsec:free_groups}. Then from \fullref{thm:injective_group_homomorphisms_are_monomorphisms} it will follow that monomorphisms are precisely the injective homomorphisms, and that the \hyperref[def:subobject_and_quotient]{categorical subobjects} correspond to subgroups.

      \item Unlike in the category \hyperref[def:monoid/category]{\( \ucat{Mon} \)} of monoids, in \( \ucat{Grp} \) every epimorphism is surjective. We will prove this in \fullref{thm:group_epimorphisms_are_surjective}. Along with \fullref{thm:surjective_group_homomorphisms_are_cokernels}, this shows that the \hyperref[def:subobject_and_quotient]{categorical quotient objects} correspond to \hyperref[def:group/quotient]{quotient groups}, which we will discuss shortly.

      \item To avoid circularity, in this section, we will avoid using that monomorphisms are injective and epimorphism are surjective.
    \end{itemize}

    \thmitem{def:group/trivial} Any single-element group, that is, every zero object in \( \ucat{Grp} \), is as trivial object in the sense of \fullref{def:trivial_object}. We often call it \enquote{the} trivial group.

    \thmitem{def:group/kernel} \Fullref{thm:zero_morphisms_pointed/kernel} implies that the \hyperref[def:zero_morphisms/kernel]{categorical kernel} of a group homomorphism \( \varphi: G \to H \) is the subgroup
    \begin{equation*}
      \ker \varphi \coloneqq \varphi^{-1}(e_H) = \set{ x \in G \given \varphi(x) = e_H }.
    \end{equation*}

    \thmitem{def:group/quotient} \hyperref[def:first_order_congruence]{First-order congruences} within a group are very well-behaved. \Fullref{thm:normal_subgroups_and_congruences} shows that congruences correspond exactly to \hyperref[def:normal_subgroup]{normal subgroups}, and \fullref{thm:subgroup_cosets} shows how the corresponding equivalence classes are all equinumerous and have a simple form expressed via normal subgroups.

    It is conventional to consider the quotient \( G / N \) with respect to a normal subgroup \( N \) rather than with respect to a congruence as in the general case for arbitrary first-order structures.
  \end{thmenum}
\end{definition}

\begin{example}\label{ex:power_set_is_not_a_group}
  The \hyperref[ex:def:monoid/power]{power monoid} \( \pow(G) \) of a group \( G \) is a monoid, but it is not a group unless \( G \) is \hyperref[def:group/trivial]{trivial}.

  Indeed, fix an arbitrary set \( A \) and suppose that there exists a set \( B \) such that \( AB = \set{ e_G } \). Then, for any \( a \) in \( A \) and \( b \) in \( B \), we must have \( ab = e_G \). \Fullref{thm:monoid_inverse_unique} implies that inverses are unique, hence \( b = a^{-1} \). Furthermore, there can only be one element in \( A \) because otherwise we would have some \( a' \) in \( A \) distinct from \( a \), and \( a' a^{-1} \) would not equal \( e_G \).

  Therefore, if \( AB = \set{ e_G } \), then \( A \) has a single element and \( B \) contains only the inverse of that element. Any subset of \( G \) that has more than one element does not have an inverse.
\end{example}

\begin{proposition}\label{thm:def:group}
  Every \hyperref[def:group]{group} \( G \) has the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:group/cancellative} The (binary) group operation is \hyperref[def:binary_operation/cancellative]{cancellative}.
    \thmitem{thm:def:group/identity_inverse} The identity \( e \) is its own inverse.
    \thmitem{thm:def:group/inverse_composition} \( (xy)^{-1} = y^{-1} x^{-1} \).
    \thmitem{thm:def:group/involution} \( x = (x^{-1})^{-1} \)
    \thmitem{thm:def:group/negative_power} For any positive integer \( n \), \( (x^n)^{-1} = (x^{-1})^n \)
    \thmitem{thm:def:group/inverse_isomorphism} The map \( x \mapsto x^{-1} \) is a group isomorphism.
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:group/cancellative} If \( x = y \), obviously \( xz = yz \) and \( zx = zy \). Now if \( xz = yz \), we have
  \begin{equation*}
    x = x(zz^{-1}) = (xz)z^{-1} = (yz)z^{-1} = y(zz^{-1}) = y.
  \end{equation*}

  The case \( zx = zy \) is analogous.

  \SubProofOf{thm:def:group/identity_inverse} \( ee = e \).
  \SubProofOf{thm:def:group/inverse_composition}
  \begin{equation*}
    (xy) (y^{-1} x^{-1})
    =
    x (y y^{-1}) x^{-1}
    =
    e
    =
    y^{-1} (x^{-1} x) y
    =
    (y^{-1} x^{-1}) (xy).
  \end{equation*}

  \SubProofOf{thm:def:group/involution}
  \begin{equation*}
    (x^{-1})^{-1}
    =
    x x^{-1} (x^{-1})^{-1}
    =
    x.
  \end{equation*}

  \SubProofOf{thm:def:group/negative_power} Using \fullref{thm:def:group/involution},
  \begin{equation*}
    x^{-n}
    =
    (x^n)^{-1}
    =
    x^{-1} \cdots x^{-1}
    =
    (x^{-1})^n.
  \end{equation*}

  \SubProofOf{thm:def:group/inverse_isomorphism} Trivial.
\end{proof}

\begin{proposition}\label{thm:group_homomorphism_single_condition}
  A function between groups is a \hyperref[def:group/homomorphism]{group homomorphism} if and only if it satisfies the semigroup homomorphism condition \eqref{eq:def:semigroup/homomorphism}.
\end{proposition}
\begin{proof}
  \SufficiencySubProof \eqref{eq:def:semigroup/homomorphism} is required to hold by definition.

  \NecessitySubProof Let the function \( \varphi: G \to H \) satisfy \eqref{eq:def:semigroup/homomorphism}. Then it preserves identities, i.e. is a \hyperref[def:pointed_set/homomorphism]{pointed set homomorphism} because
  \begin{equation*}
    e_H \cdot \varphi(e_G) = \varphi(e_G) = \varphi(e_G \cdot e_G) = \varphi(e_G) \cdot \varphi(e_G).
  \end{equation*}

  By \fullref{thm:def:group/cancellative}, \( \varphi \) is cancellative, and hence \( e_H = \varphi(e_G) \).

  Furthermore, inverses are also preserved because
  \begin{equation*}
    \varphi(x^{-1})
    =
    \varphi(x^{-1}) \cdot e_H
    =
    \varphi(x^{-1}) \cdot \varphi(x) \cdot \varphi(x)^{-1}
    =
    \varphi(x^{-1} x) \cdot \varphi(x)^{-1}
    =
    e_H \cdot \varphi(x)^{-1}
    =
    \varphi(x)^{-1}.
  \end{equation*}

  Therefore, \( \varphi \) is indeed a group homomorphism.
\end{proof}

\begin{proposition}\label{thm:invertible_submonoid_is_group}
  The set of all \hyperref[def:monoid_inverse]{invertible} elements of a \hyperref[def:monoid]{monoid} is a \hyperref[def:group]{group}.
\end{proposition}
\begin{proof}
  Let \( M \) be a monoid and let \( I \) be the set of invertible elements of \( M \).

  \begin{itemize}
    \item The neutral element is invertible, hence \( I \) is closed under the nullary identity operation.
    \item If \( x \) is invertible with inverse \( x^{-1} \), then \( x^{-1} \) is invertible with inverse \( x \), and thus \( I \) is closed under the unary inversion operation.
    \item If \( x \) and \( y \) are invertible, then \( xy \) is invertible with inverse \( y^{-1} x^{-1} \). Thus, \( I \) is closed under the binary monoid operation.
  \end{itemize}

  Therefore, the set \( I \) of invertible elements is a submonoid of \( M \) and, furthermore, it is a group because it contains an inverse for each of its elements.
\end{proof}

\paragraph{Group kernels}

\begin{proposition}\label{thm:group_homomorphism_zero_kernel}
  A group homomorphism is injective if and only if its \hyperref[def:group/kernel]{kernel} is \hyperref[def:group/trivial]{trivial}.
\end{proposition}
\begin{comments}
  \item \Fullref{thm:injective_group_homomorphisms_are_monomorphisms} implies that the injective group homomorphisms are precisely the monomorphisms.
\end{comments}
\begin{proof}
  Fix a homomorphism \( \varphi: G \to H \).

  \SufficiencySubProof Suppose that \( \varphi \) is injective. Then \( \varphi(x) = \varphi(e_G) = e_H \) implies that \( x = e_G \), hence \( \ker \varphi = \set{ e_G } \).

  \NecessitySubProof Suppose that \( \ker \varphi = \set{ e_G } \). If \( \varphi(x) = \varphi(y) \), then
  \begin{equation*}
    e_H = \varphi(x) \cdot \varphi(y)^{-1} = \varphi(xy^{-1}),
  \end{equation*}
  hence \( x y^{-1} \) is in the kernel. But the only element of the kernel is \( e_G \), thus \( x y^{-1} = e_G \) and \( x = y \).

  Therefore, \( \varphi \) is injective.
\end{proof}

\paragraph{Group cosets}

\begin{proposition}\label{thm:subgroup_cosets}
  Fix a group \( G \) and a \hyperref[def:group/submodel]{subgroup} \( H \) of \( G \).

  \begin{thmenum}
    \thmitem{thm:subgroup_cosets/equivalence_relation} The relation \( x \sim y \), defined to hold whenever \( x^{-1} y \in H \), is an \hyperref[def:equivalence_relation]{equivalence relation}.

    \thmitem{thm:subgroup_cosets/translations} For every element \( a \) of any coset \( C \) (under the above relation), we have
    \begin{equation*}
      C = a H = \set{ a \cdot h \given h \in H }.
    \end{equation*}

    \thmitem{thm:subgroup_cosets/translation_congruence} If \( a H = b H \), then \( a \sim b \).

    \thmitem{thm:subgroup_cosets/equinumerous} All cosets are \hyperref[def:equinumerosity]{equinumerous} with \( H \).
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:subgroup_cosets/equivalence_relation} We will show that \( {\sim} \) is an equivalence relation.

  \SubProofOf*[def:binary_relation/reflexive]{reflexivity} Since \( x^{-1} x = e_G \in H \), the relation is obviously reflexive.

  \SubProofOf*[def:binary_relation/symmetric]{symmetry} If \( x \sim y \in H \), \fullref{thm:def:group/inverse_composition} implies that \( (x^{-1} y)^{-1} = y^{-1} x \). As a subgroup, \( H \) contains the inverse of all its elements, and thus \( y \sim x \).

  \SubProofOf*[def:binary_relation/transitive]{transitivity} If \( x \sim y \) and \( y \sim z \), then
  \begin{equation*}
    x^{-1} z
    =
    x^{-1} (y y^{-1}) z
    =
    (x^{-1} y) (y^{-1} z).
  \end{equation*}

  The latter factors are both in \( H \), hence their product \( x^{-1} z \) must also be in \( H \). Thus, \( x \sim z \).

  \SubProofOf{thm:subgroup_cosets/translations} Fix an equivalence class \( C \) and let \( a \) be a member of \( C \).

  If \( x \in C \), then \( x \sim a \) and thus \( a \sim x \). Hence, \( a^{-1} x \in H \) and \( x \in a H \).

  Conversely, if \( x \in a H \), then \( a^{-1} x \in a^{-1} a H \). Thus, \( x \sim a \) and \( x \in C \).

  We conclude that \( C = a H \).

  \SubProofOf{thm:subgroup_cosets/translation_congruence} Suppose that \( a H = b H \).

  Since \( a \in a H \), there must exist some \( h \in H \) such that \( a = b h \). Then \( b^{-1} a = h \), that is, \( b \sim a \).

  \SubProofOf{thm:subgroup_cosets/equinumerous} Suppose we are given a coset \( a H \). Define the function
  \begin{equation*}
    \begin{aligned}
      &f: H \to a H, \\
      &f(x) \coloneqq a x.
    \end{aligned}
  \end{equation*}

  We must show that \( f \) is bijective on \( G \).

  \SubProofOf*[def:function_invertibility/injective/equality]{injectivity} Let \( f(x) = f(y) \). Then \( a x = a y \), which by the cancellative property shown in \fullref{thm:def:group/cancellative} implies that \( x = y \).

  Hence, \( f \) is injective.

  \SubProofOf*[def:function_invertibility/surjective/existence]{surjectivity} Let \( y \in a H \). Then \( a^{-1} y \in H \) and, furthermore,
  \begin{equation*}
    f(a^{-1} y) = a a^{-1} y = y.
  \end{equation*}

  Hence, \( f \) is surjective.
\end{proof}

\begin{remark}\label{rem:subgroup_cosets}
  The gist of \fullref{thm:subgroup_cosets} is that each subgroup \( H \) of \( G \) induces a partition of \( G \) into translations of \( H \).

  We generally use the terms \enquote{coset} and \enquote{equivalence class} interchangeably.

  In this context, some authors like Anthony Knapp in \cite[129]{Knapp2016BasicAlgebra} define \term{left cosets} as sets of the form \( a H \) and \term{right cosets} as sets of the form \( H a \).

  With the relation \( {\sim} \) from \fullref{thm:subgroup_cosets/equivalence_relation}, \fullref{thm:subgroup_cosets/translations} demonstrates how both concepts of cosets coincide --- all equivalence classes are of the form \( a H \) for some \( a \).

  We might have defined the equivalence relation to hold if \( x y^{-1} \in H \) instead of \( x^{-1} y \in H \), which would lead us to right cosets rather than left cosets.
\end{remark}

\paragraph{Group quotients}

\begin{definition}\label{def:group_conjugation}\mcite[165]{Knapp2016BasicAlgebra}
  Given a group \( G \), we define the \term{left conjugate} of \( x \) by \( g \) as \( g x g^{-1} \) and the \term{right conjugate} by \( g \) as \( g^{-1} x g \).
\end{definition}
\begin{comments}
  \item The adjectives \enquote{left} and \enquote{right} reflect the fact that \( x \mapsto g x g^{-1} \) is a \hyperref[def:group_action]{left group action}, while \( x \mapsto g^{-1} x g \) is a \hyperref[def:group_action]{left group action} --- see \fullref{thm:group_conjugation_action}.
\end{comments}

\begin{definition}\label{def:normal_subgroup}\mcite[131]{Knapp2016BasicAlgebra}
  We say that a \hyperref[def:group/submodel]{subgroup} is \term{normal} if it is closed under (left or right) \hyperref[def:group_conjugation]{conjugation} by arbitrary elements.

  Explicitly, the subgroup \( N \) of \( G \) is normal if, for any \( n \) in \( N \) and an arbitrary \( g \) in \( G \), the left conjugate \( gng^{-1} \) belongs to \( N \). An equivalent condition is for the right conjugate \( gng^{-1} \) to belong to \( N \).
\end{definition}

\begin{proposition}\label{thm:kernel_is_normal_subgroup}
  The \hyperref[def:group/kernel]{kernel} of a \hyperref[def:group/homomorphism]{group homomorphism} \( \varphi: G \to H \) is a \hyperref[def:normal_subgroup]{normal subgroup}.
\end{proposition}
\begin{proof}
  For any group element \( g \) and every \( n \) in the kernel of \( \varphi \), the left conjugate \( gng^{-1} \) satisfies
  \begin{equation*}
    \varphi(gng^{-1})
    =
    \varphi(g) \cdot \varphi(n) \cdot \varphi(g^{-1})
    =
    \varphi(g) \cdot e_H \cdot \varphi(g^{-1})
    =
    e_H,
  \end{equation*}
  hence \( gng^{-1} \) is also in the kernel.

  Therefore, the kernel is normal.
\end{proof}

\begin{example}\label{ex:quotient_by_non_normal_subgroup}
  This example uses forward references to \fullref{subsec:group_actions} to demonstrate that the equivalence relations induced by arbitrary subgroups may not be congruences. Only the multiplication table from \fullref{ex:s3} will matter to us.

  Consider the \hyperref[def:symmetric_group]{symmetric group} \( S_3 \) discussed in \fullref{ex:s3} and \fullref{ex:s3_and_a3} and the subgroup
  \begin{equation*}
    H = \set{ \id, \cycle{ 1, 2 } }.
  \end{equation*}

  It is indeed a subgroup:
  \begin{itemize}
    \item \( H \) contains the neutral element.
    \item \( H \) is closed under inverses because, as a transposition, \( \cycle{ 1, 2 } \) is its own inverse.
    \item \( H \) is closed under products for the same reason.
  \end{itemize}

  It is not \hyperref[def:normal_subgroup]{normal}, however, because the conjugate
  \begin{equation*}
    \cycle{ 1, 3 }
    \cdot
    \cycle{ 1, 2 }
    \cdot
    \cycle{ 1, 3 }
    =
    \cycle{ 2, 3 },
  \end{equation*}
  does not belong to \( H \).

  Consider the equivalence relation \( {\sim} \) induced by \( H \) as per \fullref{thm:subgroup_cosets/equivalence_relation}. It is not a congruence, however, as we will now show.

  We have \( \cycle{ 1, 3 } \sim \cycle{ 1, 2, 3 } \) because
  \begin{equation*}
    \cycle{ 1, 3 }^{-1} \bincirc \cycle{ 1, 3, 2 }
    =
    \cycle{ 1, 3 } \bincirc \cycle{ 1, 3, 2 }
    =
    \underbrace{\cycle{ 1, 2 }}_{\in H}.
  \end{equation*}

  Similarly, \( \cycle{ 2, 3 } \sim \cycle{ 1, 3, 2 } \). These are actually the three left cosets:
  \begin{align*}
    \underbrace{ \set{ \id, \cycle{ 1, 2 } } }_{ H },
    &&
    \underbrace{ \set{ \cycle{ 1, 3 }, \cycle{ 1, 2, 3 } } }_{ \cycle{ 1, 3 } H },
    &&
    \underbrace{ \set{ \cycle{ 2, 3 }, \cycle{ 1, 3, 2 } } }_{ \cycle{ 2, 3 } H }.
  \end{align*}

  But \eqref{eq:def:first_order_congruence/functions} is not satisfied because
  \begin{equation*}
    \cycle{ 1, 3 } \bincirc \cycle{ 2, 3 }
    =
    \cycle{ 1, 3, 2 }
    \not\cong
    \id
    =
    \cycle{ 1, 3, 2 } \bincirc \cycle{ 1, 2, 3 }.
  \end{equation*}

  So, if the subgroup is not normal, \fullref{thm:normal_subgroups_and_congruences}, upon which we often rely, does not hold. Furthermore, \fullref{thm:normal_subgroup_left_right_cosets}, which gives us certain consistency conditions, also does not hold because the left cosets above differ from the right cosets:
  \begin{align*}
    \underbrace{ \set{ \id, \cycle{ 1, 2 } } }_{ H },
    &&
    \underbrace{ \set{ \cycle{ 1, 3 }, \cycle{ 1, 3, 2 } } }_{ H \cycle{ 1, 3 } },
    &&
    \underbrace{ \set{ \cycle{ 2, 3 }, \cycle{ 1, 2, 3 } } }_{ H \cycle{ 2, 3 } }.
  \end{align*}
\end{example}

\begin{proposition}\label{thm:normal_subgroups_and_congruences}
  Fix a \hyperref[def:group]{group} \( G \). \hyperref[def:first_order_congruence]{First order congruences} on \( G \) and \hyperref[def:normal_subgroup]{normal subgroup} of \( G \) are related as follows:
  \begin{thmenum}
    \thmitem{thm:normal_subgroups_and_congruences/cong_to_subgroup} For every congruence in \( G \), the coset \( [e_G] \) of the neutral element is a normal subgroup of \( G \).

    \thmitem{thm:normal_subgroups_and_congruences/subgroup_to_cong} Conversely, for every normal subgroup \( N \), the relation \( x \cong y \) defined to hold if \( x^{-1} y \) is in \( N \), is a congruence.

    \thmitem{thm:normal_subgroups_and_congruences/inverse} The procedures for converting a congruence to a normal subgroup and vice versa are inverses.
  \end{thmenum}
\end{proposition}
\begin{comments}
  \item This allows us to consider the quotient \( G / N \) with respect to a normal subgroup rather than \( G / {\cong} \) with respect to a congruence.

  \item This fails for more general structures like monoids --- see \fullref{ex:congruence_with_cosets_of_different_cardinality}.

  \item \Fullref{thm:normal_subgroups_and_congruences/subgroup_to_cong} extends \fullref{thm:subgroup_cosets/equivalence}, which shows that, for arbitrary subgroups, \( {\cong} \) is merely an equivalence relation.
\end{comments}
\begin{proof}
  \SubProofOf{thm:normal_subgroups_and_congruences/cong_to_subgroup} The conditions for congruence imply that all the operations must be preserved by a congruence --- in the case of groups, these are the unary inverse operation and the binary group operation. Hence, \( [e_G] \) contains the inverse of each of its elements, as well as the product of each pair. Furthermore, \( [e_G] \) also contains the neutral element, which means that it is a subgroup of \( G \).

  We will now show that it is a normal subgroup. Fix elements \( g \) from \( G \) and \( n \) from \( [e_G] \). Then
  \begin{equation*}
    g \cdot n \cong \underbrace{g \cdot e_G}_{g},
  \end{equation*}
  hence
  \begin{equation*}
    g \cdot n \cdot g^{-1} \cong e_G.
  \end{equation*}

  \SubProofOf{thm:normal_subgroups_and_congruences/subgroup_to_cong} Let \( N \) be a normal subgroup and consider the relation {\cong} defined above.

  We must verify that it is a congruence. \Fullref{thm:subgroup_cosets/equivalence} already shows that it is an equivalence relation, so it remains to verify that it preserves operations.

  \SubProof*{Proof that \( {\cong} \) preserves inverses} If \( x \cong y \), then \( x^{-1} y \) is in \( N \). Since \( N \) is normal, it contains the left conjugate
  \begin{equation*}
    x (x^{-1} y) x^{-1} = y x^{-1}.
  \end{equation*}

  As a subgroup, \( N \) contains the inverses of its elements, hence it contains
  \begin{equation*}
    (x^{-1})^{-1} (y^{-1}).
  \end{equation*}

  Therefore, \( x^{-1} \cong y^{-1} \).

  \SubProof*{Proof that \( {\cong} \) preserves products} Suppose that \( a \cong b \) and \( x \cong y \).

  We have \( a^{-1} b \in N \). Since \( N \) is normal,
  \begin{equation*}
    y^{-1} (a^{-1} b) y \in N.
  \end{equation*}

  Since \( N \) is a subgroup and contains the products of its elements, \( N \) also contains the following element:
  \begin{equation*}
    (x^{-1} y) y^{-1} (a^{-1} b) y = x^{-1} a^{-1} b y = (a x)^{-1} b y.
  \end{equation*}

  Therefore, \( ax \cong by \).

  \SubProofOf{thm:normal_subgroups_and_congruences/inverse}

  \SubProof*{Congruences can be restored} Suppose we have a congruence \( {\cong} \) on \( G \). Let \( {\congdot} \) be congruence generated by the normal subgroup \( [e_G] \). We must show that \( {\cong} \) and \( {\congdot} \) are equivalent.

  Indeed, \( x \cong y \) if and only if \( x^{-1} y \cong e_G \) if and only if \( x^{-1} y \in [e_G] \) if and only if \( x \congdot y \).

  \SubProof*{Normal subgroups can be restored} Conversely, suppose we have a normal subgroup \( N \) on \( G \). Let \( {\cong} \) be the corresponding congruence and consider the normal subgroup \( [e_G] \). We must show that \( N = [e_G] \).

  For every \( x \) we have \( x = e_G \cdot x = e_G^{-1} \cdot x \), hence \( x \in [e_G] \) if and only if \( x \in N \).
\end{proof}

\begin{example}\label{ex:congruence_with_cosets_of_different_cardinality}
  Consider the monoid \( (\BbbN, \max) \) of zero-based natural numbers with \( \max(a, b) \) as the monoid operation. This is the additive monoid of one of the \enquote{tropical} semirings discussed in \fullref{def:tropical_semiring}.

  Define the relation \( a \cong b \) to hold if \( a \) and \( b \) have the same number of decimal digits. It is clearly an equivalence relation. Furthermore, if \( a \cong a' \) and \( b \cong b' \) and \( a \not\cong b \), then \( b \) and \( b' \) simultaneously have either more or less digits than \( a \) and \( a' \), hence \( \max(a, b) \) should have the same amount of digits as \( \max(a', b') \). Hence, \( {\cong} \) is a congruence on \( (\BbbN, \max) \).

  We have the following cosets under \( {\cong} \):
  \begin{itemize}
    \item \( 10 \) numbers with \( 1 \) digit: \( 0, 1, \ldots, 8, 9 \),
    \item \( 90 \) numbers with \( 2 \) digits: \( 10, 11, \ldots, 98, 99 \),
    \item \( 900 \) numbers with \( 3 \) digits: \( 100, 11, \ldots, 998, 999 \),
    \item \( \cdots \)
    \item \( 9 \cdot 10^n \) numbers with \( (n - 1) \) digits,
    \item \( \cdots \)
  \end{itemize}

  Clearly the distinct cosets have different sizes. This demonstrates show \fullref{thm:subgroup_cosets/equinumerous} may fail to hold more generally.
\end{example}

\begin{proposition}\label{thm:normal_subgroup_left_right_cosets}
  Fix a \hyperref[def:normal_subgroup]{normal subgroup} \( N \) of \( G \). Then, for any \( g \) in \( G \), we have \( gN = Ng \).
\end{proposition}
\begin{comments}
  \item The converse may fail --- see \fullref{ex:quotient_by_non_normal_subgroup}.
\end{comments}
\begin{proof}
  Fix an element \( n \) of \( N \). Since \( N \) is normal, the left conjugate \( gng^{-1} \) is also in \( N \), hence \( gn \) is in \( Ng \). Hence, \( gN \subseteq Ng \).

  Conversely, every element \( ng \) of \( Ng \) is in \( gN \) because \( g^{-1} n g \) is in \( N \), which in turn implies \( gN \subseteq Ng \).

  Therefore, \( gN = Ng \).
\end{proof}

\begin{proposition}\label{thm:group_image_and_coimage}
  Let \( \varphi: G \to H \) be a \hyperref[def:group/homomorphism]{group homomorphism}.

  \begin{thmenum}
    \thmitem{thm:group_image_and_coimage/image} The \hyperref[def:zero_morphisms/image]{categorical image} \( \img \varphi \) of \( \varphi \) is the \hyperref[def:set_valued_map/image]{set-theoretic image} \( \varphi[A] \).

    \thmitem{thm:group_image_and_coimage/coimage} The \hyperref[def:zero_morphisms/coimage]{categorical coimage} of \( \varphi \) is the \hyperref[def:group/quotient]{quotient} of \( G \) by the \hyperref[thm:group/kernel]{kernel} \( \ker \varphi \).

    \thmitem{thm:group_image_and_coimage/isomorphism} The following map is an isomorphism:
    \begin{equation*}
      \begin{aligned}
        &\psi: G / \ker \varphi \to \img \varphi, \\
        &\psi(\pi(x)) \coloneqq \varphi(x).
      \end{aligned}
    \end{equation*}
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:group_image_and_coimage/image} Follows from \fullref{thm:zero_morphisms_pointed/image}.
  \SubProofOf{thm:group_image_and_coimage/coimage} \Fullref{thm:zero_morphisms_pointed/coimage} implies that the categorical coimage of \( \varphi \) is the quotient of \( G \) by the \hyperref[def:first_order_congruence]{congruence} \hyperref[def:first_order_generated_congruence]{generated} by the relation \( {\sim} \) defined as
  \begin{equation*}
    x \sim e_G \T{if and only if} \varphi(x) = e_H.
  \end{equation*}

  Fix any congruence \( {\congdot} \) containing \( {\sim} \). If \( \varphi(x) = \varphi(y) \), then
  \begin{equation*}
    \varphi(x^{-1}) \cdot \varphi(x) = \varphi(x^{-1}) \cdot \varphi(y)
  \end{equation*}
  and
  \begin{equation*}
    e_H = \varphi(x^{-1} y),
  \end{equation*}
  implying
  \begin{equation*}
    x^{-1} y \congdot e_G
  \end{equation*}
  and, since \( {\congdot} \) must be compatible with the group operation
  \begin{equation*}
    (x x^{-1}) y \congdot x.
  \end{equation*}

  Thus, \( \varphi(x) = \varphi(y) \) implies \( x \congdot y \).

  \Fullref{thm:kernel_is_normal_subgroup} implies that the kernel is a normal subgroup, hence \fullref{thm:normal_subgroups_and_congruences/subgroup_to_cong} allows us to construct a congruence \( {\cong} \) by defining
  \begin{equation}\label{eq:thm:group_image_and_coimage/coimage/congruence}
    x \cong y \T{if and only if} \underbrace{\varphi(x) = \varphi(y)}_{\varphi(x^{-1} y) = e_H}.
  \end{equation}

  Therefore, the congruence \( {\cong} \) is necessarily a subset of any congruence \( {\congdot} \) containing \( {\sim} \), making it the smallest congruence containing \( {\sim} \).

  \SubProofOf{thm:group_image_and_coimage/isomorphism} It follows from \eqref{eq:thm:group_image_and_coimage/coimage/congruence} that \( \psi \) is well-defined.

  \SubProofOf[def:function_invertibility/injective/equality]{injectivity} Suppose that \( \psi(\pi(x)) = \psi(\pi(y)) \). Then
  \begin{equation*}
    \psi(\pi(x)) = \varphi(x) = \varphi(y) = \psi(\pi(y)),
  \end{equation*}
  hence \( x \cong y \) and \( \pi(x) = \pi(y) \).

  \SubProofOf[def:function_invertibility/surjective/existence]{surjectivity} Fix some \( h \) from \( \img f \). \Fullref{thm:group_image_and_coimage/image} implies that there exists some \( g \) in \( G \) such that \( h = \varphi(g) \). Thus,
  \begin{equation*}
    \psi(\pi(g)) = \varphi(g) = h.
  \end{equation*}
\end{proof}

\begin{corollary}\label{thm:injective_group_homomorphisms_are_kernels}
  The injective group homomorphism \( \varphi: G \to H \) is the \hyperref[def:zero_morphisms/kernel]{kernel} of the canonical projection \( \pi: G \to G / \ker \varphi \).
\end{corollary}
\begin{proof}
  \Fullref{thm:group_homomorphism_zero_kernel} implies that, since \( \varphi \) is injective, \( \ker \varphi \) is trivial and \( G \) is isomorphic to \( G / \ker \varphi \).

  \Fullref{thm:group_image_and_coimage/coimage} implies that \( G / \ker \varphi \) is the coimage of \( \varphi \).

  By definition, as the coimage pair of \( \varphi \), \( (G, \varphi) \) is the kernel pair of the cokernel pair.
\end{proof}

\begin{corollary}\label{thm:surjective_group_homomorphisms_are_cokernels}
  The surjective group homomorphism \( \varphi: G \to H \) is the \hyperref[def:zero_morphisms/cokernel]{cokernel} of the canonical inclusion \( \iota: \ker \varphi \to G \).
\end{corollary}
\begin{proof}
  The group \( H \) is the set-theoretical image of \( \varphi \), and \fullref{thm:group_image_and_coimage/image} implies that it is also the categorical image of \( \varphi \).

  By definition, as the image pair of \( \varphi \), \( (H, \varphi) \) is the cokernel pair of the kernel pair.
\end{proof}

\begin{theorem}[Lattice theorem for groups]\label{thm:lattice_theorem_for_groups}\mcite[prop. II.8.9]{Aluffi2009}
  Given a \hyperref[def:normal_subgroup]{normal subgroup} \( N \) of \( G \), the function \( H \mapsto H / N \) is an \hyperref[def:semilattice/homomorphism]{isomorphism of complete lattices} between the \hyperref[def:lattice_ideal/principal]{principal filter} of subgroups of \( G \) containing \( N \) and the \hyperref[thm:substructures_form_complete_lattice]{lattice of subgroups} of the \hyperref[def:group/quotient]{quotient} \( G / N \).

  Furthermore, normal subgroups correspond to normal subgroups.
\end{theorem}
\begin{comments}
  \item See \fullref{thm:lattice_theorem_for_substructures} for a very verbose formulation of this theorem in a general setting.
\end{comments}
\begin{proof}
  This theorem mostly follows from \fullref{thm:lattice_theorem_for_substructures}, but we need to first show compatibility.

  Let \( N \) be a normal subgroup of \( G \). \Fullref{thm:normal_subgroups_and_congruences/subgroup_to_cong} induces a congruence \( x \cong y \) that holds if \( x^{-1} y \) is in \( N \).

  \SubProof{Proof that \( S \) is compatible with \( {\cong} \) if and only if it contains \( N \)}

  \SufficiencySubProof* Let \( S \) be a subgroup of \( G \) that is compatible with \( {\cong} \) in the sense of \eqref{eq:thm:lattice_theorem_for_substructures/compatibility}. Then \( x \in S \) and \( x^{-1} y \in N \) together imply that \( y \in S \).

  Let \( n \in N \). We know that \( e \in S \) and \( n = e^{-1} n \in N \), hence \( n \in S \).

  \NecessitySubProof* Let \( S \) be a subgroup of \( G \) containing \( N \).

  If \( x \in S \) and \( x^{-1} y \in N \) both hold, then \( x^{-1} y \in S \) and their product \( y \) is also in \( S \).

  \SubProof{Proof that the join of compatible subgroups is the subgroup generated by their union} This follows directly by noting that the lattice of compatible subgroups of \( G \) is a sublattice of the lattice of all subgroups of \( G \).

  \SubProof{Proof that normal subgroups correspond to normal subgroups}

  \SufficiencySubProof* Let \( S \) be a normal subgroup of \( G \) compatible with \( {\cong} \), that is, containing \( N \). We must show that the quotient \( S / {\cong} \) is normal.

  Fix any member \( g \) of \( G \) and \( s \) of \( S \). Compatibility of \( {\cong} \) with respect to the group operations implies
  \begin{equation*}
    [g] [s] [g]^{-1} = [g s g^{-1}].
  \end{equation*}

  We know that the left conjugate \( g s g^{-1} \) belongs to \( S \), hence the conjugate \( [g] [s] [g]^{-1} \) belongs to \( S / {\cong} \).

  \NecessitySubProof* Let \( Q \) be a normal subgroup of \( G / {\cong} \). Fix again members \( g \) of \( G \) and \( s \) of \( S \). Then \( [g] [s] [g]^{-1} = [g s g^{-1}] \) is a member of \( Q \), hence \( g s g^{-1} \) is a member of \( \bigcup Q \), the subgroup of \( G \) corresponding to \( Q \).

  Therefore, if \( Q \) is normal, \( \bigcup Q \) is also normal.
\end{proof}

\paragraph{Lagrange's theorem}

\begin{definition}\label{def:subgroup_index}\mcite[II.8.12]{Aluffi2009}
  The \term{index} \( [G : H] \) of a subgroup \( H \) in \( G \) is the (\hyperref[def:cardinal]{cardinal}) number of \hyperref[rem:subgroup_cosets]{cosets}.
\end{definition}

\begin{definition}\label{def:group_order}\mimprovised
  We will use the \term{order} \( \ord(G) \) of a group \( G \) as a synonym for its \hyperref[thm:cardinality_existence]{cardinality}.
\end{definition}
\begin{comments}
  \item The order is commonly defined for finite groups only --- for example by Anthony Knapp in \cite[129]{Knapp2016BasicAlgebra}.
\end{comments}

\begin{theorem}[Lagrange's subgroup theorem]\label{thm:lagranges_subgroup_theorem}
  Let \( H \) be a subgroup of \( G \). We have the following equality:
  \begin{equation}\label{eq:thm:lagranges_subgroup_theorem/arbitrary}
    \ord(G) = \ord(H) \cdot [G : H].
  \end{equation}

  For a normal group \( N \), the index \( [G : H] \) is the order of the quotient \( G / N \), and we have
  \begin{equation}\label{eq:thm:lagranges_subgroup_theorem/normal}
    \ord(G) = \ord(N) \cdot \ord(G / N).
  \end{equation}
\end{theorem}
\begin{comments}
  \item This demonstrates that there exists a bijective function from the \hyperref[def:first_order_direct_product]{direct product} \( H \times G / H \) and \( H \), however this may not be a group homomorphism --- see \fullref{ex:lagranges_theorem_for_groups/direct_product_zn}.
\end{comments}
\begin{proof}
  \Fullref{def:subgroup_cosets/equinumerous} implies that every coset of \( G \) with respect to \( H \) is equinumerous with \( H \), and by definition there is a total of \( [G : H] \) cosets. Furthermore, as cosets, all of them are disjoint. Therefore, \eqref{eq:thm:lagranges_theorem_for_arbitrary_subgroups/index} holds.
\end{proof}

\begin{example}\label{ex:subgroups_of_integers}
  Consider the group \( \BbbZ \) of integers with respect to addition.

  Let \( 2\BbbZ \) be the subgroup of all even integers. Then both \( \BbbZ \) and \( 2\BbbZ \) are countably infinite, but their quotient group \( \BbbZ / 2\BbbZ \) has two elements --- the set \( 2\BbbZ \) of all even integers and the set \( 2\BbbZ + 1 \) of all odd integers. Generalizations of this quotient group are discussed in \fullref{thm:group_of_integers_modulo}. \Fullref{thm:lagranges_theorem_for_arbitrary_subgroups} holds, but it gives no insight due to the absorbing properties of transfinite cardinal arithmetic described in \fullref{thm:simplified_cardinal_arithmetic}.

  Now consider the groups \( 4\BbbZ \subseteq 2\BbbZ \subseteq \BbbZ \). As a consequence of \fullref{thm:lagranges_theorem_for_arbitrary_subgroups}, \( 3\BbbZ \) is not a subgroup of \( 2\BbbZ \), and so we consider powers of \( 2 \).

  Since \( 2\BbbZ \) is a subgroup of \( \BbbZ \), the quotient \( 2\BbbZ / 4\BbbZ \) must a subgroup of \( \BbbZ / 4\BbbZ \) as a consequence of \fullref{thm:quotient_structure_lattice_theorem}. We may not know the structure of the quotient groups (although we do, see \fullref{thm:group_of_integers_modulo}), but we know how \( 4\BbbZ \), \( 2\BbbZ \) and \( \BbbZ \) relate to each other, and we are able to determine how the quotient groups relate to each other.
\end{example}
