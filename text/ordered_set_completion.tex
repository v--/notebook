\section{Ordered set completion}\label{sec:ordered_set_completion}

\paragraph{Dedekind cuts}

\begin{definition}\label{def:dedekind_cut}\mimprovised
  A \term[ru=сечение (\cite[34]{Тагамлицки1971Диф}), ru=сечение (\cite[34]{Александров1977Топология}), en=Dedekind cut (\cite[39]{Jech2006Sets})]{Dedekind cut} in an \hyperref[def:extremal_points/bounds]{unbounded} \hyperref[def:totally_ordered_set]{totally ordered set} \( (P, \leq) \) is pair \( (A, B) \) of \hi{nonempty} sets that \hyperref[def:set_partition]{partitions} \( P \), such that \( a < b \) for every \( a \in A \) and \( b \in B \).

  \begin{figure}[!ht]
    \begin{subcaptionblock}{\textwidth}
      \centering
      \includegraphics[page=1]{output/def__dedekind_cut}
    \end{subcaptionblock}

    \begin{subcaptionblock}{\textwidth}
      \centering
      \includegraphics[page=2]{output/def__dedekind_cut}
    \end{subcaptionblock}

    \begin{subcaptionblock}{\textwidth}
      \centering
      \includegraphics[page=3]{output/def__dedekind_cut}
    \end{subcaptionblock}

    \caption{Dedekind cuts over the \hyperref[def:rational_numbers]{rational numbers}}
    \label{fig:def:dedekind_cut}
  \end{figure}
\end{definition}
\begin{comments}
  \item We use the original definition given by \incite[sec. I.IV]{Dedekind1901Essays} (although in greater generality). Dedekind's goal was to define the \hyperref[def:real_numbers]{real numbers} as a certain family of cuts of \hyperref[def:rational_numbers]{rational numbers}. We will develop a more theory reaching \fullref{thm:def:dedekind_macnielle_completion}, and later simplify to lower cuts in order to define Dedekind completions.
\end{comments}

\begin{definition}\label{def:dedekind_completeness}\mcite[sec. I.IV]{Dedekind1901Essays}
  We say that the \hyperref[def:extremal_points/bounds]{unbounded} \hyperref[def:totally_ordered_set]{totally ordered set} \( (P, \leq) \) is \term{Dedekind complete} if, for every \hyperref[def:dedekind_cut]{Dedekind cut} \( (A, B) \), either \( A \) has a maximum or \( B \) has a minimum.
\end{definition}

\begin{proposition}\label{thm:dedekind_completeness_unbounded_characterization}
  An unbounded totally ordered set is \hyperref[def:dedekind_completeness]{Dedekind complete} if and only if every \hi{bounded} \hi{nonempty} subset has both a supremum and an infimum.
\end{proposition}
\begin{proof}
  Let \( (P, \leq) \) be an unbounded totally ordered set.

  \SufficiencySubProof Suppose that \( P \) is Dedekind complete. Let \( S \) be a bounded nonempty set in \( P \).

  \SubProof*{Proof that \( S \) has a supremum} If \( S \) has a maximum, \fullref{thm:def:extremal_points/greatest_is_supremum} implies that it is also a supremum.

  We can further assume that \( S \) has no maximum, and thus all upper bounds of \( S \) are strict. Consider the set \( B \) of all upper bounds of \( S \) and also the set \( A \) of all \hi{strict} lower bounds of \( B \).

  As already discussed, every element \( x \) of \( S \) satisfies \( x < u \) for every upper bound \( u \) of \( S \), thus \( S \subseteq A \).

  Since \( P \) is Dedekind complete, we have two possibilities:
  \begin{itemize}
    \item If \( A \) has a maximum, it is an upper bound of \( S \) since \( S \subseteq A \). But we have defined \( A \) so that it contains no upper bounds of \( S \). Thus, \( A \) cannot have a maximum.

    \item If \( B \) has a minimum, it is the least upper bound of \( S \).
  \end{itemize}

  \SubProof*{Proof that \( S \) has an infimum} Simply take the supremum of the set of lower bounds of \( S \).

  \NecessitySubProof Suppose that every bounded nonempty subset of \( P \) has both a supremum and an infimum.

  Let \( (A, B) \) be a Dedekind cut. Let \( a \) be a member of \( A \) that is not a maximum --- such an element exists because \( A \) is unbounded from below. Then \( P_{>a} \cap A \) is a nonempty bounded set, and our assumption implies that it has a supremum. Furthermore, this supremum is the supremum of \( A \).

  By the totality of the order, \( \sup A \) it is either the maximum of \( A \) or the minimum of \( B \).

  Generalizing on \( (A, B) \), we conclude that \( P \) is Dedekind complete.
\end{proof}

\paragraph{Dedekind-MacNeille completion}

\begin{definition}\label{def:macnielle_closure}\mimprovised
  Let \( (P, \leq) \) be a \hyperref[def:partially_ordered_set]{partially ordered set}. For a given subset \( A \) of \( P \), we introduce notation for all \hyperref[def:extremal_points/bounds]{upper bounds} and all \hyperref[def:extremal_points/bounds]{lower bounds} of \( A \):
  \begin{align*}
    A^U \coloneqq \underbrace{\bigcap_{a \in A} P_{\geq a}}_{\mathclap{\set{ x \in L \given \qforall* {a \in A} x \leq a }}}
    &&
    A^L \coloneqq \underbrace{\bigcap_{a \in A} P_{\leq a}}_{\mathclap{\set{ x \in L \given \qforall* {a \in A} a \leq x }}}
  \end{align*}

  This allows us to introduce the \hyperref[def:moore_closure_operator]{Moore closure operator} \( A \mapsto A^{UL} \), which we call the \term{MacNeille closure} of \( A \).

  \begin{figure}[!ht]
    \centering
    \includegraphics{output/def__dedekind_macnielle_closure}
    \caption{The \hyperref[def:dedekind_macnielle_completion]{MacNeille closure} of \( \set{ b, c } \) is \( \set{ a, b, c } \).}\label{fig:def:macnielle_closure}
  \end{figure}
\end{definition}
\begin{comments}
  \item Like Dedekind, MacNeille developed a theory of completion based on cuts. \incite*[48]{MacNeille1936Completion}, he generalized \hyperref[def:dedekind_cut]{Dedekind cuts} by considering pairs \( (A, B) \) of subsets of a partially ordered set in which every element in \( A \) is less than every element of \( B \), and requiring that every \hyperref[def:extremal_points/bounds]{lower bound} of \( B \) be in \( A \) and every upper bound of \( A \) be in \( B \).

  We present a modern formulation based on \cite[\S 7.37]{DaveyPriestley2002Lattices} and \cite[149]{Владимиров1969БулевыАлгебры} that does not rely on pairs of sets.
\end{comments}
\begin{defproof}
  \SubProofOf[def:extensive_function]{extensiveness} Fix a subset \( A \) of \( P \) and a member \( x \) of \( A \).

  For every \( u \in A^U \), by definition of upper bound we have \( x \leq u \). Then \( x \) is a lower limit of \( A^U \), hence \( x \in A^{UL} \).

  Generalizing on \( x \in A \), we conclude that \( A \subseteq A^{UL} \).

  \SubProofOf[def:idempotent_function]{idempotence} Fix again a subset \( A \) of \( P \).

  We have shown that \( B \subseteq B^{UL} \) for any subset \( B \) of \( P \), in particular for \( B = A \). Dually, we can show that \( B \subseteq B^{LU} \), in particular for \( B = A^U \). Furthermore, \( A \subseteq A^{UL} \) implies \( A^U \supseteq A^{ULU} \) because an upper bound for a set is necessarily an upper bound for a subset.

  Thus,
  \begin{equation*}
    A^U \subseteq A^{ULU} \subseteq A^U.
  \end{equation*}

  Therefore, \( A^U = A^{ULU} \) and \( A^{UL} = A^{ULUL} \).

  \SubProofOf[def:order_function/preserving]{monotonicity} Fix subsets \( A \subseteq B \) of \( P \) and a member \( a \) of \( A^{UL} \). We will show that \( a \) is also a member of \( B^{UL} \).

  First note that \( B^U \subseteq A^U \) because an upper limit of \( B \) is necessarily also an upper limit of \( A \).

  For every member \( u \) of \( A^U \), we have \( a \leq u \), in particular for those \( u \) that belong to \( B^U \). Therefore, \( a \) is a lower bound of \( B^U \), that is, a member of \( B^{UL} \).
\end{defproof}

\begin{proposition}\label{thm:def:macnielle_closure}
  \hyperref[def:dedekind_macnielle_completion]{MacNeille closures} have the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:macnielle_closure/downward_closed} The MacNeille closure of any set is \hyperref[def:closed_ordered_subset]{downward closed}.

    \thmitem{thm:def:macnielle_closure/ideal} The MacNeille closure of any nonempty set in a lattice is a \hyperref[def:lattice_ideal]{lattice ideal}.

    \thmitem{thm:def:macnielle_closure/point_in_closure} In a \hyperref[def:totally_ordered_set]{totally ordered set}, for every point \( x \) in the closure \( A^{UL} \) of a \hyperref[def:closed_ordered_subset]{downward closed} set \( A \), either \( x \) is in \( A \) or is the supremum of \( A \).

    \thmitem{thm:def:macnielle_closure/totally_ordered} In a \hyperref[def:dense_total_order]{dense-in-itself} totally ordered set, suppose that a subset \( A \) is downward closed and, in case \( A \) has a supremum, it contains its supremum. Then \( A \) is MacNeille-closed.

    \thmitem{thm:def:macnielle_closure/totally_ordered_complement} In a \hyperref[def:dense_total_order]{dense-in-itself} totally ordered set \( P \), the subset \( A \) is MacNeille-closed if and only if its complement \( P \setminus A \) is upward closed and has no minimum.
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:macnielle_closure/downward_closed} If \( x \in A^{UL} \) and \( y \leq x \), then \( y \leq u \) for every upper bound \( u \) of \( A \). Thus, \( y \) is a lower bound of \( A^U \), i.e. it belongs to \( A^{UL} \).

  Therefore, \( A^{UL} \) is downward closed.

  \SubProofOf{thm:def:macnielle_closure/ideal} Let \( A \) be an arbitrary subset of the lattice \( X \). \Fullref{thm:def:macnielle_closure/downward_closed} shows that \( A^{UL} \) is downward closed. We will show that \( A^{UL} \) is directed from above. Then from \fullref{thm:def:lattice_ideal/directed_and_closed} it will follow that \( A^{UL} \) is a lattice ideal.

  For any two elements \( x \) and \( y \) of \( A^{UL} \), their supremum \( x \wedge y \) is an upper bound of \( \set{ x, y } \subseteq A^{UL} \). For any upper bound \( u \) of \( A \), we have \( x \wedge y \leq u \), hence \( x \wedge y \) is a lower bound of \( A^{ULU} \). Then \( x \wedge y \) belongs to \( A^{ULUL} = A^{UL} \), demonstrating that \( A^{UL} \) is directed from above.

  \SubProofOf{thm:def:macnielle_closure/point_in_closure} Let \( P \) be a totally ordered set. Fix some downward closed subset \( A \) of \( P \).

  The case where \( A \) is empty is vacuous --- every element of \( P \) is an upper bound and so \( A^{UL} \) is either empty or contains the bottom element of \( P \) (which is the supremum of the empty set \( A \)).

  Suppose that \( A \) is not empty and let \( x \) be a point in \( A^{UL} \). We have the following possibilities:
  \begin{itemize}
    \item There exists a point \( y \) in \( A \) such that \( x \leq y \). Then \( x \) is itself in \( A \) because the latter is downward closed by assumption.
    \item Otherwise, \( x \) is an upper bound of \( A \). Let \( u \) be any upper bound of \( A \). Then \( z \leq u \) for any element \( z \) of \( A^{UL} \), in particular \( x \leq u \). Therefore, \( x \) is the least upper bound of \( A \).
  \end{itemize}

  \SubProofOf{thm:def:macnielle_closure/totally_ordered} Let \( A \) be a downward closed subset of a dense-in-itself totally ordered set \( (P, \leq) \). Suppose additionally that, if \( A \) has a supremum, it contains its supremum. We will show that \( A = A^{UL} \).

  \begin{itemize}
    \item If \( A \) has no supremum, then \fullref{thm:def:closed_ordered_subset/bound_in_complement} implies that \( A^U = P \setminus A \). Furthermore, \fullref{thm:def:closed_ordered_subset/dense_extremum_in_complement} implies that the infimum of \( A^U \) is the supremum of \( A \), thus \( A^U \) has no infimum, and \( A^{UL} = A \).

    \item If \( A \) has a supremum \( s \), then
    \begin{equation*}
      A^U = (P \setminus A) \cup \set{ s }
    \end{equation*}
    and
    \begin{equation*}
      A^{UL}
      =
      P \setminus \parens[\Big]{ (P \setminus A) \cup \set{ s } } \cup \set{ s }.
    \end{equation*}

    Since \( P \setminus A \) does not contain \( s \), we can avoid removing it and re-adding it, thus
    \begin{equation*}
      A^{UL} = P \setminus (P \setminus A) = A.
    \end{equation*}
  \end{itemize}

  Follows from \fullref{thm:def:macnielle_closure/point_in_closure}.

  \SubProofOf{thm:def:macnielle_closure/totally_ordered_complement} Let \( P \) be a dense-in-itself totally ordered set.

  \SufficiencySubProof* Let \( A \) be a MacNeille-closed subset of \( P \).

  \Fullref{thm:def:macnielle_closure/downward_closed} implies that \( A \) is downward closed, and \fullref{thm:def:closed_ordered_subset/closed_complement} implies that \( P \setminus A \) is downward closed.

  \Fullref{thm:def:macnielle_closure/point_in_closure} implies that, if \( A \) has a supremum, it contains it. \Fullref{thm:def:closed_ordered_subset/dense_extremum_in_complement} implies that the supremum of \( A \) is the infimum of \( P \setminus A \), thus \( P \setminus A \) does not have an infimum.

  \NecessitySubProof* Let \( A \) be a subset of \( P \) whose complement \( P \setminus A \) is upward closed and has no infimum.

  \Fullref{thm:def:closed_ordered_subset/closed_complement} implies that \( A \) is downward closed.

  \Fullref{thm:def:closed_ordered_subset/dense_extremum_in_complement} implies that, if \( A \) has a supremum, it coincides with the infimum of \( P \setminus A \). Since the latter has no minimum, \fullref{thm:def:extremal_points/greatest_is_supremum} implies that \( P \setminus A \) does not contain its infimum, hence \( A \) must contain its supremum (if it exists).

  \Fullref{thm:def:macnielle_closure/totally_ordered} then implies that \( A \) is MacNeille-closed.
\end{proof}

\begin{definition}\label{def:dedekind_macnielle_completion}\mcite[166]{DaveyPriestley2002Lattices}
  Let \( (P, \leq) \) be a \hyperref[def:partially_ordered_set]{partially ordered set}. Using the closure operator from \fullref{def:macnielle_closure}, we define the \term{Dedekind-MacNeille completion} of \( P \) as the family
  \begin{equation*}
    D(P, \leq) \coloneqq \set{ A \subseteq P \given A = A^{UL} }
  \end{equation*}
  of \hyperref[def:macnielle_closure]{Dedekind-MacNeille-closed sets} ordered via \hyperref[def:subset]{set inclusion}. In case the order of \( P \) is clear, we simply write \( D(P) \).

  The set \( P \) itself can be embedded via the \hyperref[def:order_function/preserving]{order-preserving map} which sends each member of \( P \) to its \hyperref[def:lattice_ideal/principal]{principal ideal}, that is,
  \begin{equation*}
    \begin{aligned}
      &\iota: P \to D(P), \\
      &\iota(x) \coloneqq P_{\leq x}.
    \end{aligned}
  \end{equation*}
\end{definition}
\begin{comments}
  \item Note that \( P_{\leq x} = \set{ x }^{UL} \).
  \item Joins may misbehave without the closure provided by \( A \mapsto A^{UL} \) --- see \fullref{ex:dedekind_macnielle_join_closure}.
\end{comments}

\begin{theorem}[Dedekind-MacNeilla completion]\label{thm:def:dedekind_macnielle_completion}
  The \hyperref[def:dedekind_macnielle_completion]{Dedekind-MacNeille completion} \( D(P) \) of a partially ordered set \( (P, \leq) \) is a \hyperref[def:lattice]{complete lattice} with the following operations:
  \begin{align}
    \bigvee \mscrA   &\coloneqq \parens[\Big]{ \bigcup \mscrA }^{UL} \label{eq:thm:def:dedekind_macnielle_completion/join} \\
    \bigwedge \mscrA &\coloneqq \bigcap \mscrA.                      \label{eq:thm:def:dedekind_macnielle_completion/meet}
  \end{align}

  Furthermore, joins and meets from \( P \) (whenever they exist) are preserved in \( D(P) \).
\end{theorem}
\begin{proof}
  It is obvious that \( D(P) \) is partially ordered by \( \subseteq \).

  \SubProof{Proof that \( D(P) \) is join-complete} Let \( \mscrA \) be a family of members of \( D(P) \). Then, since we have shown idempotence in \fullref{def:macnielle_closure}, we have
  \begin{equation*}
    \parens[\Big]{ \bigvee \mscrA }^{UL}
    =
    \parens[\Big]{ \bigcup \mscrA }^{ULUL}
    =
    \parens[\Big]{ \bigcup \mscrA }^{UL}
    =
    \bigvee \mscrA.
  \end{equation*}

  Therefore, the join \( \bigvee \mscrA \) of members of \( P \) also belongs to \( D(P) \).

  \SubProof{Proof that \( D(P) \) is meet-complete} For any family \( \mscrB \) of members of \( D(P) \), we have
  \begin{align*}
    \parens[\Big]{ \bigcap \mscrB }^U
    &=
    \set[\Big]{ u \in P \given* \qforall {x \in \bigcap \mscrB} x \leq u }
    = \\ &=
    \set[\Big]{ u \in P \given* \qforall {B \in \mscrB} \qforall {x \in B} x \leq u }
    = \\ &=
    \bigcap_{B \in \mscrB} B^U
  \end{align*}
  and similarly
  \begin{equation*}
    \parens[\Big]{ \bigcap \mscrB }^L
    =
    \bigcap_{B \in \mscrB} B^L.
  \end{equation*}

  Therefore, for a fixed family \( \mscrA \subseteq D(P) \), we have
  \begin{equation*}
    \parens[\Big]{ \bigwedge \mscrA }^{UL}
    =
    \parens[\Big]{ \bigcap \mscrA }^{UL}
    =
    \parens[\Big]{ \bigcap \mscrA }^U
    =
    \bigcap \mscrA.
  \end{equation*}

  Therefore, the meet \( \bigwedge \mscrA \) is also a member of \( D(P) \).

  \SubProof{Proof that \( D(P) \) preserves joins} Let \( A \) be a set in \( P \) such that \( a_0 \coloneqq \bigvee^P A \) exists.

  Then
  \begin{equation*}
    \bigvee\nolimits^{D(P)} \set{ \iota(a) \given a \in A }
    =
    \bigvee\nolimits^{D(P)} \set{ P_{\leq a} \given a \in A }
    =
    \parens[\Big]{ \bigcup_{a \in A} P_{\leq a} }^{UL}
    =
    \parens[\Big]{ P_{\geq a_0} }^L
    =
    P_{\leq a_0}
    =
    \iota(a_0).
  \end{equation*}

  \SubProof{Proof that \( D(P) \) preserves meets} Let \( A \) be a set in \( P \) such that \( a_0 \coloneqq \bigwedge^P A \) exists.

  Then
  \begin{equation*}
    \bigwedge\nolimits^{D(P)} \set{ \iota(a) \given a \in A }
    =
    \bigwedge\nolimits^{D(P)} \set{ P_{\leq a} \given a \in A }
    =
    \bigcap_{a \in A} P_{\leq a}
    =
    P_{\leq a_0}
    =
    \iota(a_0).
  \end{equation*}
\end{proof}

\begin{example}\label{ex:dedekind_macnielle_join_closure}
  Taking the closure of the union in the definition of join for \hyperref[def:dedekind_macnielle_completion]{Dedekind-MacNeille completions} can be justified as follows.

  Consider the sequence of \hyperref[def:rational_numbers]{rational numbers}
  \begin{equation*}
    a_n \coloneqq -\frac 1 n.
  \end{equation*}

  The supremum of this sequence is zero --- it is clearly an upper bound and, for any negative rational number \( -r \), we have a larger negative number from the sequence:
  \begin{equation*}
    -r
    =
    -\frac 1 {1 / r}
    \leq
    -\frac 1 {\floor(1 / r)}
    <
    0.
  \end{equation*}

  Now consider the completion \( D(\BbbQ) \) and take the embeddings of \( \seq{ a_n }_{n=1}^\infty \), the sequence
  \begin{equation*}
    a_n' \coloneqq \iota(a_n) = \set*{ x \in \BbbQ \given* x \leq -\frac 1 n }.
  \end{equation*}

  Then
  \begin{equation*}
    \bigcup a_n' = \set{ x \in \BbbQ \given x < 0 },
  \end{equation*}
  but this is not an upper bound because the set does not itself belong to \( D(\BbbQ) \).

  Taking the closure, however, we obtain
  \begin{equation*}
    \parens[\Big]{ \bigcup a_n' }^{UL}
    =
    \set{ x \in \BbbQ \given x \geq 0 }^L
    =
    \set{ x \in \BbbQ \given x \leq 0 }
    =
    \bigcup a_n' \cup \set{ 0 }
    =
    \iota(0),
  \end{equation*}
  which is actually the supremum of \( \seq{ a_n' }_{n=1}^\infty \) in \( D(\BbbQ) \).
\end{example}

\begin{theorem}[Dedekind-MacNeille completion universal property]\label{thm:dedekind_macneille_completion_universal_property}
  The \hyperref[def:dedekind_macnielle_completion]{Dedekind-MacNeille completion} \( D(P) \) of a \hyperref[def:partially_ordered_set]{partially ordered set} \( (P, \leq) \) satisfies the following \hyperref[rem:universal_mapping_property]{universal mapping property}:
  \begin{displayquote}
    For every \hyperref[def:lattice]{complete lattice} \( L \), every \hyperref[def:order_function/preserving]{order-preserving map} \( \varphi: P \to L \) \hyperref[def:factors_through]{uniquely factors through} \( D(P) \). More precisely, there exists a unique \hyperref[def:complete_lattice/homomorphism]{complete lattice homomorphism} \( \widetilde{\varphi}: D(P) \to L \) such that the following diagram commutes:
    \begin{equation}\label{eq:thm:dedekind_macneille_completion_universal_property/diagram}
      \begin{aligned}
        \includegraphics[page=1]{output/thm__dedekind_macneille_completion_universal_property}
      \end{aligned}
    \end{equation}
  \end{displayquote}
\end{theorem}
\begin{comments}
  \item Via \fullref{rem:universal_mapping_property}, this functor becomes \hyperref[def:category_adjunction]{left adjoint} to the \hyperref[def:concrete_category]{forgetful functor} from complete lattices to partially ordered sets.
\end{comments}
\begin{proof}
  In order for a homomorphism \( \widetilde{\varphi} \) to satisfy the theorem, it must satisfy
  \begin{equation*}
    \widetilde{\varphi}(\iota(x)) = \varphi(x).
  \end{equation*}

  Thus, \( \widetilde{\varphi}(\iota(x)) \) depends on \( \varphi(x) \), which suggests the definition
  \begin{equation*}
    \widetilde{\varphi}(A) \coloneqq \bigvee\nolimits^L \set{ \varphi(a) \given a \in A }.
  \end{equation*}

  Since \( L \) is a complete lattice, it has arbitrary joins and hence the homomorphism is well-defined. Furthermore,
  \begin{equation*}
    \widetilde{\varphi}(\iota(x))
    =
    \widetilde{\varphi}(P_{\leq x})
    =
    \bigvee\nolimits^L \set{ \varphi(a) \given a \in P_{\leq x} }
    \reloset {\eqref{eq:def:order_function/preserving}} =
    \varphi(x).
  \end{equation*}

  The last equality holds because \( \varphi \) is order-preserving and hence \( \varphi(x) \geq \varphi(a) \) for every \( a \leq x \).
\end{proof}

\begin{proposition}\label{thm:dedekind_macnielle_closure_is_totally_ordered}
  The Dedekind-MacNeille completion of a totally ordered set is also totally ordered.
\end{proposition}
\begin{proof}
  Fix a totally ordered set \( (P, \leq) \) and denote by \( D(P) \) its Dedekind-MacNeille completion.

  By \fullref{thm:def:dedekind_macnielle_completion}, \( D(P) \) is a complete lattice, and hence a partially ordered set. It remains only to prove trichotomy on \( D(P) \).

  Fix members \( A \) and \( A' \) of \( D(P) \). Note that both are \hyperref[def:closed_ordered_subset]{downward closed} because \( A = A^{UL} \) and similarly for \( A' \).

  Aiming at a contradiction, suppose that both \( A \setminus A' \) and \( A' \setminus A \) are nonempty, and let \( a \) and \( a' \) be members of the corresponding sets.

  \begin{itemize}
    \item If \( a = a' \), then \( a \) belongs both \( A \) and \( P \setminus A \), which is a contradiction.
    \item If \( a < a' \), then \( a \) is a member of \( A' \) because the latter is downward closed --- again a contradiction.
    \item If \( a > a' \), then \( a' \) is a member of \( A \), which is similar to the above case.
  \end{itemize}

  The obtained contradictions show that either \( A \subseteq A' \) or \( A' \subseteq A \).
\end{proof}

\paragraph{Lower cut completion}

\begin{definition}\label{def:lower_cut}
  We say that a subset \( A \) of an \hyperref[def:extremal_points/bounds]{unbounded} \hyperref[def:dense_total_order]{dense-in-itself} \hyperref[def:totally_ordered_set]{totally ordered set} \( (P, \leq) \) is a \term[en=lower cut (\cite[325]{Mendelson2008NumberSystems})]{lower cut} if it is \hyperref[def:closed_ordered_subset]{downward closed} and has no \hyperref[def:extremal_points/maximum_and_minimum]{maximum}.
\end{definition}
\begin{comments}
  \item We base our definition on \cite[325]{Mendelson2008NumberSystems}, where it is used for constructing the real numbers, but we generalize to unbounded totally ordered sets and allow both \( A \) and its complement to be empty.

  We follow this construction since it is simpler to work with than both \hyperref[def:dedekind_cut]{Dedekind cuts}, which are pairs of sets for which equivalence need to be defined, and \hyperref[def:macnielle_closure]{MacNeille-closed subsets}, which require case analysis based on whether they contain a supremum or not.

  Some other authors, for example \incite[113]{Enderton1977Sets} (who bases his construction on Mendelson's) and \incite[17]{Rudin1976AnalysisPrinciples}, define cuts similarly.

  \item If we allow \( P \) not to be dense-in-itself, then it may happen that some element of \( x \) does not correspond to any lower cut in the \hyperref[def:lower_cut_completion]{lower cut completion}. For example, every set of integers that is bounded from above has a maximum, and thus the only lower cuts is the set of all integers.

  \item If we allow \( P \) to be bounded, then the completion will introduce a new top element, so we explicitly require \( P \) to be unbounded.
\end{comments}

\begin{proposition}\label{thm:lower_cut_complements}
  In an \hyperref[def:extremal_points/bounds]{unbounded} \hyperref[def:dense_total_order]{dense-in-itself} \hyperref[def:totally_ordered_set]{totally ordered set} \( (P, \leq) \), the subset \( A \) is a \hyperref[def:lower_cut]{lower cut} in \( (P, \leq) \) if and only if its complement \( P \setminus A \) is \hyperref[def:macnielle_closure]{MacNeille-closed} in the dual ordered set \( (P, \geq) \).
\end{proposition}
\begin{comments}
  \item Another useful characterization of lower cuts is \fullref{thm:lower_cut_characterization}.
\end{comments}
\begin{proof}
  \SufficiencySubProof Suppose that \( A \) is a lower cut in \( (P, \leq) \). \Fullref{thm:def:closed_ordered_subset/closed_complement} implies that \( P \setminus A \) is upward closed in \( (P, \leq) \), thus downward closed in \( (P, \geq) \).

  Furthermore, if \( A \) has a supremum in \( (P, \leq) \), it is contained in \( P \setminus A \), where, due to \fullref{thm:def:closed_ordered_subset/dense_extremum_in_complement}, it is an infimum. Thus, if \( P \setminus A \) has a supremum in \( (P, \geq) \), it contains it.

  \Fullref{thm:def:macnielle_closure/totally_ordered_complement} thus implies that \( P \setminus A \) is MacNeille-closed in \( (P, \geq) \).

  \NecessitySubProof Conversely, suppose that \( P \setminus A \) is MacNeille-closed in \( (P, \geq) \). \Fullref{thm:def:closed_ordered_subset/closed_complement} implies that \( P \) is downward closed, and \fullref{thm:def:closed_ordered_subset/dense_extremum_in_complement} implies that, if \( P \) has a supremum, it does not contain it.

  Therefore, \( P \) is a lower cut.
\end{proof}

\begin{definition}\label{def:lower_cut_completion}\mimprovised
  We define the \term{bounded lower cut completion} \( L(P, \leq) \) of an \hyperref[def:extremal_points/bounds]{unbounded} \hyperref[def:dense_total_order]{dense-in-itself} \hyperref[def:totally_ordered_set]{totally ordered set} \( (P, \leq) \) as the set of all \hyperref[def:lower_cut]{lower cuts} of \( P \) with the subset ordering.

  In case the order in \( P \) is clear, we use the simplified notation \( L(P) \).

  We embed \( P \) inside \( L(P) \) via
  \begin{equation*}
    \begin{aligned}
      &\iota: P \to L(P), \\
      &\iota(x) \coloneqq P_{<x}.
    \end{aligned}
  \end{equation*}

  We may decide to exclude the bottom \( \varnothing \) and top \( P \), in which case we call the completion \term{unbounded} and denote it by \( U(P, \leq) \) or simply \( U(P) \). The name is justified in \fullref{thm:unbounded_lower_cut_completion/bounded}.
\end{definition}
\begin{comments}
  \item Unlike in the \hyperref[def:dedekind_macneille_completion]{Dedekind-MacNeille completion}, here we consider open initial segments.
  \item It is tempting to call this completion the \enquote{Dedekind completion} instead, however due to possibly ambiguity we prefer to be explicit about not using cuts.
\end{comments}

\begin{definition}\label{def:lower_cut_closure}\mimprovised
  In order to highlight the connection between \hyperref[def:macnielle_closure]{MacNeille-closed} sets and \hyperref[def:lower_cut]{lower cuts}, we define the following mutually inverse operations:

  \begin{thmenum}
    \thmitem{def:lower_cut_closure/sharp} Define \( \sharp(A) \) by adjoining to \( A \) its supremum, if it exists.

    \thmitem{def:lower_cut_closure/flat} Define \( \flat(A) \) by removing from \( A \) its supremum, if it exists.
  \end{thmenum}
\end{definition}

\begin{proposition}\label{thm:def:lower_cut_closure}
  The operators from \fullref{def:lower_cut_closure} have the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:lower_cut_closure/lower} \hyperref[def:lower_cut]{Lower cuts} are fixed points of \( \flat \).

    \thmitem{thm:def:lower_cut_closure/closed} \hyperref[def:macnielle_closure]{MacNille-closed} sets are fixed points of \( \sharp \).

    \thmitem{thm:def:lower_cut_closure/both} Sets with no supremum are fixed points for both \( \flat \) and \( \sharp \).
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:lower_cut_closure/lower} If \( A \) is a lower cut and if it has a supremum, it does not contain it by definition, thus \( \flat(A) = A \).

  \SubProofOf{thm:def:lower_cut_closure/closed} If \( A \) is MacNeille-closed and if it has a supremum, \fullref{thm:def:macnielle_closure/point_in_closure} implies that this supremum is in \( A \), thus \( \sharp(A) = A \).

  \SubProofOf{thm:def:lower_cut_closure/both} If \( A \) has no supremum, \( \sharp \) has nothing to add to \( A \) and \( \flat \) has nothing to remove from \( A \).
\end{proof}

\begin{proposition}\label{thm:lower_cut_characterization}
  Fix an \hyperref[def:extremal_points/bounds]{unbounded} \hyperref[def:dense_total_order]{dense-in-itself} \hyperref[def:totally_ordered_set]{totally ordered set} \( (P, \leq) \).

  Then \( \flat(A) \) is a \hyperref[def:lower_cut]{lower cut} if and only if \( \sharp(A) \) is \hyperref[def:macnielle_closure]{MacNeille-closed}.
\end{proposition}
\begin{proof}
  Note that, if \( A \) has a supremum, it is in \( A \cup M(A) \) but not in \( A \setminus M(A) \).

  \SufficiencySubProof If \( A \setminus M(A) \) is a lower cut, it is downward closed, and \fullref{thm:def:macnielle_closure/totally_ordered} implies that \( A \cup M(A) \) is MacNeille-closed.

  \NecessitySubProof Conversely, if \( A \cup M(A) \) is MacNeille-closed, \fullref{thm:def:macnielle_closure/downward_closed} implies that it is downward closed, hence \( A \setminus M(A) \) is a lower cut.
\end{proof}

\begin{theorem}[Lower cut completion]\label{thm:unbounded_lower_cut_completion}
  Fix an \hyperref[def:extremal_points/bounds]{unbounded} \hyperref[def:dense_total_order]{dense-in-itself} \hyperref[def:totally_ordered_set]{totally ordered set} \( (P, \leq) \). Consider its \hyperref[def:lower_cut_completion]{bounded lower cut completion} \( L(P) \) and its unbounded completion \( U(P) \), both ordered by the subset order.

  \begin{thmenum}
    \thmitem{thm:unbounded_lower_cut_completion/total} Both \( L(P) \) and \( U(P) \) are totally ordered.

    \thmitem{thm:unbounded_lower_cut_completion/bounded} \( L(P) \) is bounded, while \( U(P) \) is unbounded (hence the names).

    \thmitem{thm:unbounded_lower_cut_completion/dense} The set of embeddings of \( P \) is dense in both \( L(P) \) and \( U(P) \).

    \thmitem{thm:unbounded_lower_cut_completion/dual_macneille} The complementation map \( A \mapsto P \setminus A \) is an \hyperref[def:preordered_set/homomorphism]{order isomorphism} between the bounded completion \( L(P, \leq) \) of \( (P, \leq) \) and the \hyperref[def:dedekind_macnielle_completion]{Dedekind-MacNeille completion} \( D(P, \geq) \) of the \hyperref[def:preordered_set/dual]{dual ordered set} \( (P, \geq) \).

    \thmitem{thm:unbounded_lower_cut_completion/sharp_macneille} The operator \( \sharp \) from \fullref{def:lower_cut_closure/sharp} is an order isomorphism between the bounded completion \( L(P, \leq) \) and the Dedekind-MacNeille completion \( D(P, \leq) \).

    \thmitem{thm:unbounded_lower_cut_completion/lattice} \( L(P) \) is a \hyperref[def:complete_lattice]{complete lattice} with respect to the operations
    \begin{align}
      \sup \mscrA &\coloneqq \bigcup \mscrA,                       \label{eq:thm:unbounded_lower_cut_completion/lattice/join} \\
      \inf \mscrA &\coloneqq \flat\parens[\Big]{ \bigcap \mscrA }, \label{eq:thm:unbounded_lower_cut_completion/lattice/meet}.
    \end{align}

    \thmitem{thm:unbounded_lower_cut_completion/dedekind_complete} Both \( L(P) \) and \( U(P) \) are \hyperref[def:dedekind_completeness]{Dedekind complete}.
  \end{thmenum}
\end{theorem}
\begin{comments}
  \item \Fullref{thm:def:complete_lattice/embedding} implies that the order isomorphisms \( A \mapsto P \setminus A \) and \( A \mapsto \sharp(A) \) preserve binary joints and meets, and \fullref{thm:def:complete_lattice/embedding} extends this to arbitrary meets and joins.
\end{comments}
\begin{proof}
  \SubProofOf{thm:unbounded_lower_cut_completion/total} Fix two lower cuts \( A \) and \( B \).

  \begin{itemize}
    \item If \( A = B \), they are clearly comparable.
    \item Otherwise, suppose that \( A \) contains an element \( a \) not in \( B \). For every \( b \) in \( B \), since \( P \) is total, either \( a \leq b \) or \( a > b \).

    If \( a \leq b \), by downward closedness \( a \) belongs to \( B \), which is a contradiction. Thus, \( a > b \). Again, by downward closedness, we conclude that \( B \subsetneq A \).

    \item In case \( B \) contains an element in \( A \), we conclude that \( B \supsetneq A \).
  \end{itemize}

  Therefore, both \( L(P) \) and \( U(P) \) are totally ordered by \( {\subset} \).

  \SubProofOf{thm:unbounded_lower_cut_completion/bounded} Since both \( \varnothing \) and \( P \) are contained in the bounded completion \( L(P) \), it is bounded in the sense of \fullref{def:extremal_points/bounds}, i.e. has a global lower bound and global upper bound.

  If we remove \( \varnothing \) from \( L(P) \), then it has no lower bound. Indeed, if \( A \) is a nonempty lower cut of an unbounded set, it has some element \( a \). Then the lower cut \( P_{<a} \) is a strict subset of \( A \) because \( A \) has no maximum, and thus it contains some element larger than \( a \).

  Similarly, if we remove \( P \) itself, then \( L(P) \) has no upper bound because, given any lower cut \( A \neq P \), \( P \) has an element \( b \) larger than \( A \) since it is unbounded, and \( P_{<b} \) is a strict superset of \( A \).

  \SubProofOf{thm:unbounded_lower_cut_completion/dense} Consider the lower cuts \( A \) and \( B \) of \( P \) and suppose that \( A \subsetneq B \).

  Fix some element \( u \) of \( B \) not in \( A \). Since \( B \) has no maximum, it also contains a larger element \( v \). Then
  \begin{equation*}
    A \subsetneq P_{< u} \subsetneq P_{< v} \subseteq B.
  \end{equation*}

  Therefore, the set of embeddings of \( P \) is dense in \( L(P) \), and also in \( U(P) \).

  \SubProofOf{thm:unbounded_lower_cut_completion/dual_macneille} \Fullref{thm:lower_cut_complements} implies that \( A \mapsto P \setminus A \) is well-defined, i.e. it is a correspondence between \( L(P, \leq) \) and \( D(P, \geq) \).

  Furthermore, \fullref{thm:set_difference/complement} implies that the correspondence is a \hyperref[def:order_function/preserving]{strict order homomorphism}, and \fullref{thm:def:totally_ordered_set/embedding_iff_strict} implies that it is an \hyperref[def:preordered_set/homomorphism]{order embedding}. Since it is surjective, we conclude that it is an order isomorphism.

  \SubProofOf{thm:unbounded_lower_cut_completion/sharp_macneille} If \( A \) is a lower cut, \fullref{def:lower_cut_closure/flat} implies that \( A = \flat(A) \) and \fullref{thm:lower_cut_characterization} implies that \( \sharp(A) \) is MacNeille-closed. Thus, \( \sharp \) is well-defined correspondence between \( L(P, \leq) \) and \( D(P, \leq) \).

  Given lower cuts \( A \subsetneq B \), clearly \( \sharp(A) \subseteq \sharp(B) \). If \( \sharp(A) = \sharp(B) \), both sets have the same supremum, and since both are lower cuts and contain no maximum, it follows that \( A = B \). Then \( \sharp(A) \subsetneq \sharp(B) \), making \( \sharp \) a strict order homomorphism.

  Then \fullref{thm:def:totally_ordered_set/embedding_iff_strict} implies that \( \sharp \) is an order isomorphism between \( L(P, \leq) \) and \( D(P, \leq) \).

  \SubProofOf{thm:unbounded_lower_cut_completion/lattice} Fix a family \( \mscrA \) of lower cuts of \( P \). \Fullref{thm:unbounded_lower_cut_completion/dual_macneille} implies that the complements of cuts in \( \mscrA \) are MacNeille-closed.

  Then \fullref{thm:def:dedekind_macnielle_completion} implies that
  \begin{equation*}
    \bigcap \set{ P \setminus A \given A \in \mscrA }
    \reloset {\eqref{eq:thm:de_morgans_laws_for_sets/complement_of_intersection}} =
    P \setminus \bigcup \mscrA
  \end{equation*}
  is the complement of the meet of the complements of \( \mscrA \) in \( (D(A), \supseteq) \). Then \( \bigcup \mscrA \) is the join of \( \mscrA \) in \( L(P, \leq) \).

  The meet of \( \mscrA \) in \( L(P, \leq) \) is a little more complicated because it requires to possibly exclude the supremum from the intersection. We do this via the \( \flat \) operator from \fullref{def:lower_cut_closure/flat}.  This corresponds exactly to taking the MacNeille closure of the complement of \( \bigcap \mscrA \), as in \fullref{thm:def:dedekind_macnielle_completion/join}.

  \SubProofOf{thm:unbounded_lower_cut_completion/dedekind_complete} \Fullref{thm:unbounded_lower_cut_completion/lattice} implies that the lattice \( L(P) \) is complete, thus every bounded subset \( \mscrF \) of \( L(P) \) has an infimum and a supremum. From \fullref{thm:dedekind_completeness_unbounded_characterization} it follows that \( L(P) \) is Dedekind complete.

  Now consider the bounded completion \( U(P) \). Fix a family \( \mscrF \) in \( U(P) \). We will show that both the supremum and infimum are in \( U(P) \).

  Since \( \mscrF \) is bounded and \( U(P) \) is unbounded, there exist lower cuts \( A \supsetneq \varnothing \) and \( B \subsetneq P \) such that
  \begin{equation*}
    A \subsetneq F \subsetneq B
  \end{equation*}
  for every \( F \) in \( \mscrF \). Then
  \begin{equation*}
    A \subseteq \bigwedge \mscrF \subseteq \bigvee \mscrF \subseteq B.
  \end{equation*}

  It follows that both the supremum and infimum of \( \mscrF \) belong to \( U(P) \). This concludes the proof.
\end{proof}
