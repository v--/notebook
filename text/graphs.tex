\subsection{Graphs}\label{subsec:graphs}

The term \enquote{graph} is unfortunately very ambiguous\footnote{The \hyperref[def:relation/graph]{graph of a relation} or function is unrelated to the ones discussed here, which we will call \enquote{combinatorial graphs}.} - it is a set of vertices connected by either directed arcs or undirected edges. We introduce distinct definitions for the four types of graphs from \fullref{fig:def:graph_functors}, along with comments on how the definitions are used in the literature, and then in \fullref{def:graph_functors} we will define functors that help transparently transform some types of graphs into others. It is an established convention to not go through these hoops and implicitly transfer concepts between different kinds of graphs without even mentioning morphisms and categories. We will later follow this convention, but will nonetheless first describe the details.

\begin{figure}[!ht]
  \caption{Functors between the categories of different kinds of graphs. The dashed functors are actually families of functors and, unlike the rest, are not part of an adjoint pair.}\label{fig:def:graph_functors}
  \smallskip
  \hfill
  \begin{tikzpicture}
    \node[align=center] (dm) at (0, 0) {\hyperref[def:directed_graph/category]{Simple} \\ \hyperref[def:directed_graph/category]{undirected} \\ \hyperref[def:directed_graph/category]{graphs}};
    \node[align=center] (um) at (5cm, 0) {\hyperref[def:undirected_graph/category]{Simple} \\ \hyperref[def:undirected_graph/category]{undirected} \\ \hyperref[def:undirected_graph/category]{graphs}};
    \node[align=center] (ds) at (0, -3cm) {\hyperref[def:directed_multigraph/category]{Directed} \\ \hyperref[def:directed_multigraph/category]{multigraphs}};
    \node[align=center] (us) at (5cm, -3cm) {\hyperref[def:undirected_multigraph/category]{Undirected} \\ \hyperref[def:undirected_multigraph/category]{multigraphs}};
    \draw[->] (dm) to node[midway, above] {\hyperref[def:graph_functors/multi_forgetful]{\( U_S \)}} (um);
    \draw[->, bend left] (um) to node[midway, below] {\hyperref[def:graph_functors/simple_doubling]{\( D_S \)}} (dm);
    \draw[->] (ds) to node[midway, below] {\hyperref[def:graph_functors/multi_forgetful]{\( U_M \)}} (us);
    \draw[->, bend left] (dm) to node[midway, right] {\hyperref[def:graph_functors/directed_forgetful]{\( U_D \)}} (ds);
    \draw[->, bend left] (ds) to node[midway, left] {\hyperref[def:graph_functors/directed_embedding]{\( I_D \)}} (dm);
    \draw[->, bend left] (um) to node[midway, right] {\hyperref[def:graph_functors/undirected_forgetful]{\( U_U \)}} (us);
    \draw[->, bend left] (us) to node[midway, left] {\hyperref[def:graph_functors/undirected_embedding]{\( I_U \)}} (um);
  \end{tikzpicture}
  \hfill\hfill
\end{figure}

\begin{definition}\label{def:directed_multigraph}\mcite[10]{MacLane1998}
  A \term{directed multigraph} \( G \) consists of the following:
  \begin{thmenum}[series=def:directed_multigraph]
    \thmitem{def:directed_multigraph/vertices} A set \( V_G \), whose elements we call \term{vertices}.
    \thmitem{def:directed_multigraph/arcs} A disjoint from \( V_G \) set \( A_G \), whose elements we call \term{arcs}.
    \thmitem{def:directed_multigraph/head} A function \( i_G: A \to V \), giving the \term{initial vertex} of an arc.
    \thmitem{def:directed_multigraph/terminal} A function \( t_G: A \to V \), giving the \term{terminal vertex} of an arc.
  \end{thmenum}

  \Cref{fig:def:directed_multigraph} illustrates this definition. The figure is not merely illustrative --- it is a \hyperref[def:directed_multigraph_geometric_realization/embedding]{graph embedding}.

  \begin{figure}[!ht]
    \begin{equation}\label{eq:fig:def:directed_multigraph}
      \begin{aligned}
        \includegraphics[page=1]{output/def__directed_multigraph}
      \end{aligned}
    \end{equation}
    \caption{A directed multigraph with a pair of parallel arcs, a pair of opposing arcs and a loop. Removing the dashed arcs makes it a \hyperref[def:directed_graph]{simple directed graph}.}\label{fig:def:directed_multigraph}
  \end{figure}

  We will need the following basic notions:
  \begin{thmenum}[resume=def:directed_multigraph]
    \thmitem{def:directed_multigraph/loop}\mcite[28]{Diestel2005} We call the arc \( e \) a \term{loop} if \( i(e) = t(e) \).

    \medskip

    \thmitem{def:directed_multigraph/parallel}\mcite[11]{MacLane1998} We call the arcs \( e \) and \( f \) \term{parallel} if \( i(e) = i(f) \) and \( t(e) = t(f) \) and \term{oppositely directed} if neither is a loop and \( i(e) = t(f) \) and \( t(e) = i(f) \).

    \thmitem{def:directed_multigraph/homomorphism}\mcite[48]{MacLane1998} A \term{homomorphism} between directed multigraphs \( G \) and \( H \) is a pair of functions
    \begin{align*}
      &f_V: V_G \to V_H, \\
      &f_A: A_G \to A_H,
    \end{align*}
    such that
    \begin{align}
      i_H \bincirc f_A &= f_V \bincirc i_G, \label{eq:def:directed_multigraph/homomorphism/initial} \\
      t_H \bincirc f_A &= f_V \bincirc t_G. \label{eq:def:directed_multigraph/homomorphism/terminal}
    \end{align}

    \thmitem{def:directed_multigraph/category}\mcite[48]{MacLane1998} For a Grothendieck universe \( \mscrU \), we can define the \hyperref[def:category]{category} of \( \mscrU \)-small directed multigraphs (where both the vertex and arc sets are \( \mscrU \)-small) and their homomorphisms.

    \thmitem{def:directed_multigraph/subgraph} We say that \( H \) is a \term{subgraph} of \( G \) if \( V_G \subseteq V_H \), \( A_G \subseteq A_H \) and \( i_H \) and \( t_H \) are restrictions of \( i_G \) and \( t_G \) to \( A_H \).

    Subgraphs correspond to \hyperref[def:subobject_and_quotient]{categorical subobjects}.
  \end{thmenum}
\end{definition}
\begin{comments}
  \item Formally, we define a directed multigraph as a quadruple \( G = (V_G, A_G, i_G, t_G) \). We may skip indices when unnecessary, i.e. we may write \( G = (V, A, i, t) \), or we may prefer other symbols like \( H = (W, B, j, u) \) if desired.

  \item Reinhard Diestel defines directed multigraphs in \cite[28]{Diestel2005}, but calls them \enquote{directed graphs}, while reserving the term \enquote{multigraph} for \hyperref[def:undirected_multigraph]{undirected multigraphs}. He also implicitly restricts graphs to finite graphs. Nonetheless, we use his convention of defining directed multigraphs are quadruples, and we use his terminology for arcs, initial and terminal vertices.

  Bela Bollobas defines directed multigraphs in \cite[8]{Bollobas1998}, and calls them as such, but also assumes that they are finite.

  Both books use \hyperref[def:undirected_graph]{simple undirected graphs} almost exclusively.

  Saunders Mac Lane in \cite[10]{MacLane1998} uses the term \enquote{graphs} for what we call directed multigraphs, and uses them to define categories. For the purposes of category theory, he makes no finiteness assumptions.
\end{comments}

\begin{definition}\label{def:directed_graph}\mcite[2]{GodsilRoyle2001}
  A \term{simple directed graph} \( G \) consists of the following:
  \begin{thmenum}[series=def:directed_graph]
    \thmitem{def:directed_graph/vertices} A set \( V_G \), whose elements we call \term{vertices}.
    \thmitem{def:directed_graph/arcs} A set \( A_G \) of \hyperref[def:cartesian_product/kuratowski_pair]{ordered pairs} of \hi{distinct} vertices. As in the case of directed multigraphs, we call the elements of \( A_G \) \term{arcs}.
  \end{thmenum}

  We will use the following basic terminology:
  \begin{thmenum}[resume=def:directed_graph]
    \thmitem{def:directed_graph/homomorphism}\mcite[7]{GodsilRoyle2001} A \term{homomorphism} between the directed graphs \( G \) and \( H \) is a function \( f: V_G \to V_H \) such that \( (v, w) \in A_G \) implies \( (f(v), f(w)) \in A_H \).

    \thmitem{def:directed_graph/category} For a Grothendieck universe \( \mscrU \), we can define the \hyperref[def:category]{category} of \( \mscrU \)-small simple directed graphs and their homomorphisms.

    \thmitem{def:directed_graph/subgraph}\mimprovised We say that \( H \) is a \term{subgraph} of \( G \) if \( V_G \subseteq V_H \) and \( A_G \subseteq A_H \).

    Subgraphs correspond to \hyperref[def:subobject_and_quotient]{categorical subobjects}.
  \end{thmenum}
\end{definition}
\begin{comments}
  \item We can regard directed graphs as directed multigraphs without loops and parallel arcs. This is made precise via the inclusion functor \hyperref[def:graph_functors/directed_inclusion]{\( I_D \)}.

  \item Chris Godsil and Gordon Royle define simple directed graphs in \cite[2]{GodsilRoyle2001}, but call them \enquote{directed graphs}, preferring to use \enquote{simple graph} for what we call \enquote{simple undirected graph}. Bela Bollobas defines directed graphs and directed multigraphs separately in a remark in \cite[8]{Bollobas1998}, but does not give a formal definition. Finiteness is implicitly assumed in both books.

  Michel Gondran and Michel Minoux in \cite[2]{GondranMinoux1984Graphs} use the term \enquote{graph} to refer to what we call (simple) directed graphs, but allow arcs from a vertex to itself (loops).
\end{comments}

\begin{definition}\label{def:undirected_multigraph}\mcite[28]{Diestel2005}
  An \term{undirected multigraph} \( G \) consists of the following:
  \begin{thmenum}[series=def:undirected_multigraph]
    \thmitem{def:undirected_multigraph/vertices} A set \( V_G \), whose elements we call \term{vertices}.
    \thmitem{def:undirected_multigraph/edges} A disjoint from \( V_G \) set \( E_G \), whose elements we call \term{edges}.
    \thmitem{def:undirected_multigraph/endpoints} A map
    \begin{equation*}
      \mscrE: E \to \set[\Big]{ \set{ v, w } \given* v, w \in V },
    \end{equation*}
    giving an unordered pair of \term{endpoints} of an edge.
  \end{thmenum}

  \begin{figure}[!ht]
    \begin{equation}\label{eq:fig:def:undirected_multigraph}
      \begin{aligned}
        \includegraphics[page=1]{output/def__undirected_multigraph}
      \end{aligned}
    \end{equation}
    \caption{An undirected multigraph, which becomes simple after removing the dashed edges.}\label{fig:def:undirected_multigraph}
  \end{figure}

  We will use the following basic terminology:
  \begin{thmenum}[resume=def:undirected_multigraph]
    \thmitem{def:undirected_multigraph/loop}\mcite[29]{Diestel2005} We call the edge \( e \) a \term{loop} if \( \mscrE(e) \) is a one-element set.

    \medskip

    \thmitem{def:undirected_multigraph/parallel}\mcite[29]{Diestel2005} We call the edges \( e \) and \( f \) \term{parallel} if \( \mscrE(e) = \mscrE(f) \).

    \thmitem{def:undirected_multigraph/homomorphism} A \term{homomorphism} between the undirected multigraphs \( G \) and \( H \) is a pair of functions
    \begin{align*}
      &f_V: V_G \to V_H, \\
      &f_E: E_G \to E_H,
    \end{align*}
    such that, for each edge \( e \in E_G \),
    \begin{equation}\label{eq:def:undirected_multigraph/homomorphism}
      \mscrE_H(f_E(e)) = \set[\Big]{ f_V(v) \given* v \in \mscrE_G(e) }.
    \end{equation}

    \thmitem{def:undirected_multigraph/category} For a Grothendieck universe \( \mscrU \), we can define the \hyperref[def:category]{category} of \( \mscrU \)-small undirected multigraphs and their homomorphisms.

    \thmitem{def:undirected_multigraph/subgraph}\mimprovised We say that \( H \) is a \term{subgraph} of \( G \) if \( V_G \subseteq V_H \), \( E_G \subseteq E_H \) and \( \mscrE_H = \mscrE_G\restr_{E_H} \).

    Subgraphs correspond to \hyperref[def:subobject_and_quotient]{categorical subobjects}.
  \end{thmenum}
\end{definition}
\begin{comments}
  \item Reinhard Diestel defines undirected multigraphs in \cite[28]{Diestel2005} and Bela Bollobas defines them in \cite[6]{Bollobas1998}. Both omit the prefix \enquote{undirected}, although Bollobas later explicitly defines directed multigraphs, while Diestel uses the term \enquote{directed graph} for what we call a \hyperref[def:directed_multigraph]{directed multigraph}.

  Michel Gondran and Michel Minoux define multigraphs in \cite[3]{GondranMinoux1984Graphs} without specifying whether they are directed or not, but later implicitly assume that they are undirected.
\end{comments}

\begin{definition}\label{def:undirected_graph}\mcite[28]{Diestel2005}
  A \term{simple undirected graph} \( G \) consists of the following:
  \begin{thmenum}[series=def:undirected_graph]
    \thmitem{def:undirected_graph/vertices} A set \( V_G \), whose elements we call \term{vertices}.
    \thmitem{def:undirected_graph/edges} A set \( E \) of unordered pairs of \hi{distinct} vertices, i.e. sets of the form \( \set{ v, w } \), whose elements we call \term{edges}.
  \end{thmenum}

  We will use the following basic terminology:
  \begin{thmenum}[resume=def:undirected_graph]
    \thmitem{def:undirected_graph/homomorphism}\mcite[7]{GodsilRoyle2001} A \term{homomorphism} between the simple undirected graphs \( G \) and \( H \) is a function \( f: V_G \to V_H \) such that \( \set{ v, w } \in E_G \) implies \( \set{ f(v), f(w) } \in E_H \).

    \thmitem{def:undirected_graph/category} For a Grothendieck universe \( \mscrU \), we can define the \hyperref[def:category]{category} of \( \mscrU \)-small simple undirected graphs and their homomorphisms.

    \thmitem{def:undirected_graph/subgraph} We say that \( H \) is a \term{subgraph} of \( G \) if \( V_G \subseteq V_H \) and \( E_G \subseteq E_H \).
  \end{thmenum}
\end{definition}
\begin{comments}
  \item We can regard undirected graphs as undirected multigraphs without loops and parallel arcs. This is made precise via the inclusion functor \hyperref[def:graph_functors/undirected_inclusion]{\( I_U \)}.

  \item Reinhard Diestel defines simple undirected graphs in \cite[2]{Diestel2005} as \enquote{graphs}, and so do Bela Bollobas in \cite[1]{Bollobas1998} and Chris Godsil and Gordon Royle in \cite[2]{GodsilRoyle2001}. Michel Gondran and Michel Minoux define (simple) undirected graphs in \cite[3]{GondranMinoux1984Graphs}, after already introducing (simple) directed graphs.

  All mentioned authors except for Diestel remark that \enquote{simple graph} may be used to disambiguate when (undirected) multigraphs may otherwise be involved.
\end{comments}

\begin{definition}\label{def:graph_orientation}\mcite[28]{Diestel2005}
  We call the \hyperref[def:directed_multigraph]{directed multigraph} \( D = (V, A, i, t) \) an \term{orientation} of the \hyperref[def:undirected_multigraph]{undirected multigraph} \( G = (U, E, \mscrE) \) if \( U = V \), \( A = E \), and, for every arc \( e \in A \), we have \( \mscrE(e) = \set{ i(e), t(e) } \).
\end{definition}
\begin{comments}
  \item This definition also applies to simple graphs via the inclusion functors \hyperref[def:graph_functors/directed_inclution]{\( I_D \)} and \hyperref[def:graph_functors/undirected_inclusion]{\( I_U \)}.
\end{comments}

\begin{definition}\label{def:graph_functors}\mimprovised
  Different kinds of graphs are related via the following functors (shown graphically in \fullref{fig:def:graph_functors}):
  \begin{thmenum}
    \thmitem{def:graph_functors/directed_forgetful} The simple \hyperref[def:concrete_category]{forgetful functor}:
    \begin{flalign*}
      &U_D: \hyperref[def:directed_multigraph/category]{\T*{Directed multigraphs}} \to \hyperref[def:directed_graph/category]{\T*{Simple directed graphs}}, &&\\
      &U_D(V, A, i, t) \coloneqq \parens[\Big]{ V, \set[\Big]{ \parens[\Big]{ i(a), t(a) } \given* a \in A } }, &&\\
      &U_D(f_V, f_A) \coloneqq f_V.
    \end{flalign*}

    \thmitem{def:graph_functors/directed_inclusion} A \hyperref[def:category_adjunction]{left adjoint}:
    \begin{flalign*}
      &I_D: \hyperref[def:directed_graph/category]{\T*{Simple directed graphs}} \to \hyperref[def:directed_multigraph/category]{\T*{Directed multigraphs}}, &&\\
      &I_D(V, A) \coloneqq \parens[\Big]{ V, A, (u, v) \mapsto u, (u, v) \mapsto v }, &&\\
      &I_D(f) \coloneqq \parens[\Big]{ f, (u, v) \mapsto \parens[\Big]{ f(u), f(v) } }.
    \end{flalign*}

    \thmitem{def:graph_functors/undirected_forgetful} A similar forgetful functor for undirected graphs:
    \begin{flalign*}
      &U_U: \hyperref[def:undirected_multigraph/category]{\T*{Undirected multigraphs}} \to \hyperref[def:undirected_graph/category]{\T*{Simple undirected graphs}}, &&\\
      &U_U(V, E, \mscrE) \coloneqq \parens[\Big]{ V, \set[\Big]{ \mscrE(e) \given* e \in E } }, &&\\
      &U_U(f_V, f_E) \coloneqq f_V.
    \end{flalign*}

    \thmitem{def:graph_functors/undirected_inclusion} A left adjoint:
    \begin{flalign*}
      &I_U: \hyperref[def:undirected_graph/category]{\T*{Simple undirected graphs}} \to \hyperref[def:undirected_multigraph/category]{\T*{Undirected multigraphs}}, &&\\
      &I_U(V, E) \coloneqq \parens[\Big]{ V, E, e \mapsto e }, &&\\
      &I_U(f) \coloneqq \parens[\Big]{ f, \set{ u, v } \mapsto \set{ f(u), f(v) } }.
    \end{flalign*}

    \thmitem{def:graph_functors/multi_forgetful} A functor that forgets the direction of arcs in a multigraph:
    \begin{flalign*}
      &U_M: \hyperref[def:directed_multigraph/category]{\T*{Directed multigraphs}} \to \hyperref[def:undirected_multigraph/category]{\T*{Undirected multigraphs}}, &&\\
      &U_M(V, A, i, t) \coloneqq \parens[\Big]{ V, A, e \mapsto \set{ i(e), t(e) } }, &&\\
      &U_M(f_V, f_A) \coloneqq (f_V, f_A).
    \end{flalign*}

    \thmitem{def:graph_functors/simple_forgetful} A functor that forgets the \hyperref[def:graph_orientation]{orientation} of a simple graph:
    \begin{flalign*}
      &U_S: \hyperref[def:directed_graph/category]{\T*{Simple directed graphs}} \to \hyperref[def:undirected_graph/category]{\T*{Simple undirected multigraphs}}, &&\\
      &U_S(V, A) \coloneqq \parens[\Big]{ V, A, (u, v) \mapsto \set{ u, v } }, &&\\
      &U_S(f) \coloneqq f.
    \end{flalign*}

    \thmitem{def:graph_functors/simple_doubling} A right adjoint to \( U_S \), which doubles each edge to produce arcs in both directions:
    \begin{flalign*}
      &D_S: \hyperref[def:undirected_graph/category]{\T*{Simple undirected multigraphs}} \to \hyperref[def:directed_multigraph/category]{\T*{Simple directed multigraphs}}, &&\\
      &D_S(V, E) \coloneqq \parens[\Big]{ V, \set[\Big]{ (u, v) \in V^2 \given \set{ u, v } \in E } }, &&\\
      &D_S(f) \coloneqq f.
    \end{flalign*}
  \end{thmenum}
\end{definition}
\begin{comments}
  \item \Fullref{ex:def:category_adjunction/us_ds} discussed the doubling functor from \fullref{def:graph_functors/simple_doubling}.
\end{comments}

\begin{remark}\label{rem:arbitrary_graph}
  We will henceforth use the term \term{arbitrary graph} to refer to any of the four kinds of graphs defined in this section.

  The inclusion functors \hyperref[def:graph_functors/directed_inclusion]{\( I_D \)} and \hyperref[def:graph_functors/undirected_inclusion]{\( I_U \)} allow all definitions for multigraphs to apply to simple graphs. The transition between directed and undirected graphs is more complicated, but we will nonetheless utilize \hyperref[def:graph_functors/multi_forgetful]{\( U_M \)}, \hyperref[def:graph_functors/simple_forgetful]{\( U_S \)} and \hyperref[def:graph_functors/simple_doubling]{\( D_S \)} when necessary.

  We will sometimes do handweavy definitions like \fullref{def:subgraph} simultaneously for different kinds of graphs.
\end{remark}

\begin{definition}\label{def:graph_incidence}\mcite[3 \\ 8]{Bollobas1998}
  In an \hyperref[def:undirected_multigraph]{undirected multigraph} \( G = (V, E, \mscrE) \), we defined the \term{endpoints} of the edge \( e \) to be the vertices of \( \mscrE(e) \).

  As the forgetful functor \hyperref[def:graph_functors/multi_forgetful]{\( U_M \)} suggests, we define the endpoints of an arc \( e \) in a \hyperref[def:directed_multigraph]{directed multigraph} \( G = (V, E, i, t) \) to be the vertices \( i(e) \) and \( t(e) \). Additionally, we say that the arc \( e \) \term{starts} at \( i(e) \) and \term{ends} at \( t(e) \).

  We say that the vertex \( v \) and the edge \( e \) are \term{incident} of \( v \) is an endpoint of \( e \).
\end{definition}

\begin{definition}\label{def:graph_cardinality}
  Graphs have the following notions of \hyperref[def:cardinal]{cardinality}:
  \begin{thmenum}
    \thmitem{def:graph_cardinality/order}\mcite[2]{Diestel2005} The \term{order} \( \ord(G) \) of an \hyperref[rem:arbitrary_graph]{arbitrary graph} \( G \) as the (cardinal) number of vertices.

    \medskip

    \thmitem{def:graph_cardinality/undirected_degree}\mcite[3]{Bollobas1998} The \term{degree} \( \deg(v) \) of the vertex \( v \) in an undirected (multi)graph is the number of edges \hyperref[def:graph_incidence]{incident} with \( v \).

    \thmitem{def:graph_cardinality/directed_degree}\mcite[8]{Bollobas1998} The \term{degree} of a vertex in a directed (multi)graph is, similarly, the number of arcs incident with \( v \). Each vertex additionally has an \term{in-degree} \( \deg_{\op{in}}(v) \), the number of arcs ending at \( v \), and an \term{out-degree} \( \deg_{\op{out}}(v) \), the number of arcs starting at \( v \).

    \thmitem{def:graph_cardinality/local}\mcite[196]{Diestel2005} We say that a graph is \term{locally finite} (resp. \term{locally countable}) if the degree of any vertex is finite (resp. countable).
  \end{thmenum}
\end{definition}

\begin{proposition}\label{thm:sum_of_graph_degrees}
  Fix a \hyperref[def:directed_multigraph]{directed multigraph} \( G = (V, A, i, t) \) and a designated vertex \( v \). Denote by \( l \) the number of \hyperref[def:directed_multigraph/loop]{loops} at \( v \). Then
  \begin{equation*}
    \deg(v) = \deg_{\op{in}}(v) + \deg_{\op{out}}(v) - l
  \end{equation*}
\end{proposition}
\begin{proof}
  The set
  \begin{equation*}
    \underbrace{ \set{ e \in A \given i(e) = v \T{or} t(e) = v } }_{\deg(v)}
  \end{equation*}
  is the union of the following three disjoint sets:
  \begin{align*}
    &\underbrace{ \set{ e \in A \given i(e) = t(e) = v } }_{l}, \\
    &\underbrace{ \set{ e \in A \given i(e) = v } \setminus \set{ e \in A \given i(e) = t(e) = v } }_{\deg_{\op{in}}(v) - l}, \\
    &\underbrace{ \set{ e \in A \given t(e) = v } \setminus \set{ e \in A \given i(e) = t(e) = v } }_{\deg_{\op{out}}(v) - l}.
  \end{align*}
\end{proof}

\begin{example}\label{ex:infinite_integer_graphs}
  A very simple example of an infinite \hyperref[def:directed_multigraph]{directed multigraph} is the \hyperref[def:relation_closures/transitive]{transitive reduction} of the positive integers, i.e. the simple directed graph
  \begin{equation}\label{eq:ex:infinite_integer_graphs/positive}
    \begin{aligned}
      \includegraphics[page=1]{output/ex__infinite_integer_graphs}
    \end{aligned}
  \end{equation}

  Since the graph is simple, we have
  \begin{equation*}
    \deg(n) = \begin{cases}
      \deg_{\op{in}}(n) + \deg_{\op{out}}(n) = 0 + 1 = 1, &n = 0, \\
      \deg_{\op{in}}(n) + \deg_{\op{out}}(n) = 2 + 1 = 2, &n > 0 \\
    \end{cases}
  \end{equation*}

  The \hyperref[def:categorical_diagram]{categorical diagrams} corresponding to this directed multigraph is used to define direct limits in \fullref{def:direct_and_inverse_limits/direct}.

  Another related graph is based on the negative integers:
  \begin{equation}\label{eq:ex:infinite_integer_graphs/negative}
    \begin{aligned}
      \includegraphics[page=2]{output/ex__infinite_integer_graphs}
    \end{aligned}
  \end{equation}

  The \hyperref[def:categorical_diagram]{categorical diagrams} corresponding to this directed multigraph is used to define inverse limits in \fullref{def:direct_and_inverse_limits/inverse}.

  Finally, the union of the two with zero added gives us the following directed multigraph:
  \begin{equation}\label{eq:ex:infinite_integer_graphs/two_sided}
    \begin{aligned}
      \includegraphics[page=3]{output/ex__infinite_integer_graphs}
    \end{aligned}
  \end{equation}

  All three graphs are infinite but \hyperref[def:graph_cardinality/local]{locally finite}.
\end{example}

\begin{definition}\label{def:graph_adjacency}\mcite[3]{Diestel2005}
  \begin{thmenum}
    \thmitem{def:graph_adjacency/vertices} We say that two (distinct) vertices in an \hyperref[rem:arbitrary_graph]{arbitrary graph} are \term{adjacent} if they are the endpoints of an edge or arc.
    \thmitem{def:graph_adjacency/arcs} Similarly, two arcs or edges are \term{adjacent} if they have one (but not two) common endpoint.
  \end{thmenum}
\end{definition}

\begin{example}\label{ex:complete_graph}
  For every positive integer \( n \), we define the \term{complete graph} \( K_n \) as the \hyperref[def:undirected_graph]{simple undirected graph} with vertices \( 1, \ldots, n \) and an edge between any two vertices. It is the unique graph of \hyperref[def:graph_cardinality/order]{order} \( n \) in which every pair of vertices is \hyperref[def:graph_adjacency]{adjacent}.

  \begin{figure}[!ht]
    \begin{equation}\label{eq:fig:ex:complete_graph}
      \begin{aligned}
        \includegraphics[page=1]{output/ex__complete_graph}
      \end{aligned}
    \end{equation}
    \caption{The complete graph \( K_4 \).}\label{fig:ex:complete_graph}
  \end{figure}
\end{example}

\begin{remark}\label{rem:graphs_linear_algebra_and_topology}
  As we shall see, the \hyperref[def:graph_adjacency]{adjacency} and \hyperref[def:graph_incidence]{incidence} of a directed multigraph can be studied using linear algebra via \hyperref[def:graph_adjacency_matrix]{adjacency} and \hyperref[def:directed_incidence_matrix]{incidence matrices}, while \hyperref[def:directed_multigraph_connectedness]{connectedness} can be studied using \hyperref[def:directed_multigraph_connectedness]{topology} via \hyperref[def:directed_multigraph_geometric_realization/embedding]{graph embeddings}.
\end{remark}

\begin{definition}\label{def:graph_adjacency_matrix}\mcite[54]{GodsilRoyle2001}
  Let \( G = (V, A) \) be a finite \hyperref[def:directed_graph]{simple directed graph} and let \( l: A \to \BbbR \) be a \hyperref[def:labeled_set]{labeling function}. Without further context, we may assume that \( l(e) = 1 \) for every edge \( e \).

  We define the \term{adjacency matrix}
  \begin{equation*}
    M = \seq{ m_{u,v} }_{u,v \in V}
  \end{equation*}
  of \( (G, l) \) with elements
  \begin{equation*}
    m_{u,v} \coloneqq \begin{cases}
      l(e), &e = (u, v) \in A \\
      0,    &\T{otherwise.}
    \end{cases}
  \end{equation*}
\end{definition}
\begin{comments}
  \item The adjacency matrix is also defined for \hyperref[def:undirected_graph]{simple undirected graphs} due to the doubling functor \hyperref[def:graph_functors/simple_doubling]{\( D_S \)}. The adjacency matrix is \hyperref[def:transpose_matrix]{symmetric} in this case.
\end{comments}

\begin{example}\label{ex:def:graph_adjacency_matrix}
  The \hyperref[def:graph_adjacency_matrix]{adjacency matrix} of the complete graph \hyperref[fig:ex:complete_graph]{\( K_4 \)} is
  \begin{equation}\label{eq:ex:def:graph_adjacency_matrix}
    \begin{blockarray}{ccccc}
        & a & b & c & d \\
    \begin{block}{c(cccc)}
      a & 0 & 1 & 1 & 1 \\
      b & 1 & 0 & 1 & 1 \\
      c & 1 & 1 & 0 & 1 \\
      d & 1 & 1 & 1 & 0 \\
    \end{block}
    \end{blockarray}
  \end{equation}
\end{example}

\begin{definition}\label{def:directed_incidence_matrix}\mcite[167]{GodsilRoyle2001}
  Let \( G = (V, A, i, t) \) be a finite \hyperref[def:directed_multigraph]{directed multigraph}. We define the \term{incidence matrix}
  \begin{equation*}
    M = \seq{ m_{v,e} }_{v \in V, e \in A}
  \end{equation*}
  of \( G \) with elements
  \begin{equation*}
    m_{v,e} \coloneqq \begin{cases}
      1,  &v = i(e), \\
      -1, &v = t(e), \\
      0,  &\T{otherwise.}
    \end{cases}
  \end{equation*}
\end{definition}
\begin{comments}
  \item Compare to incidence matrices for directed graphs defined in \fullref{def:undirected_incidence_matrix}.
\end{comments}

\begin{definition}\label{def:undirected_incidence_matrix}\mcite[166]{GodsilRoyle2001}
  Let \( G = (V, E, \mscrE) \) be a finite \hyperref[def:undirected_multigraph]{undirected multigraph}. We define the \term{incidence matrix}
  \begin{equation*}
    M = \seq{ m_{v,e} }_{v \in V, e \in E}
  \end{equation*}
  of \( G \) as with elements
  \begin{equation*}
    m_{v,e} \coloneqq \begin{cases}
      1,  &v \in \mscrE(e), \\
      0,  &\T{otherwise.}
    \end{cases}
  \end{equation*}
\end{definition}
\begin{comments}
  \item Compare to incidence matrices for directed graphs defined in \fullref{def:directed_incidence_matrix}.
\end{comments}

\begin{example}\label{ex:incidence_matrices}
  The \hyperref[def:directed_incidence_matrix]{incidence matrix} of the simple directed graph \eqref{eq:fig:def:directed_multigraph} is
  \begin{equation}\label{eq:ex:incidence_matrices/directed}
    \begin{blockarray}{cccccccc}
        & e_1       & e_2       & e_3       & e_4       & e_5       & e_6       & e_7       \\
      \begin{block}{c(ccccccc)}
      a & 1         & 1         &           &           &           &           &           \\
      b & \fbox{-1} &           & 1         &           &           &           &           \\
      c &           & \fbox{-1} &           & 1         & 1         &           &           \\
      d &           &           & \fbox{-1} & \fbox{-1} &           & 1         &           \\
      e &           &           &           &           & \fbox{-1} &           & 1         \\
      f &           &           &           &           &           & \fbox{-1} & \fbox{-1} \\
      \end{block}
    \end{blockarray}
  \end{equation}

  It can be read column-by-column. Every column contains exactly two nonzero elements whose rows correspond to the initial (positive) and terminal (negative) vertex.

  To obtain the \hyperref[def:undirected_incidence_matrix]{incidence matrix the undirected graph} \eqref{eq:fig:def:undirected_multigraph}, obtained via \hyperref[def:graph_functors/multi_forgetful]{\( U_S \)}, we need to simply flip the sign of the boxed elements above.

  The \hyperref[def:graph_adjacency_matrix]{adjacency matrix} is
  \begin{equation}\label{ex:directed multigraph_matrices/adjacency}
    \begin{blockarray}{cccccccc}
        & a        & b        & c        & d        & e        & f \\
    \begin{block}{c(ccccccc)}
      a &          & 1        & 1        &          &          &   \\
      b & \fbox{1} &          &          & 1        &          &   \\
      c & \fbox{1} &          &          & 1        & 1        &   \\
      d &          & \fbox{1} & \fbox{1} &          &          & 1 \\
      e &          &          & \fbox{1} &          &          & 1 \\
      f &          &          &          & \fbox{1} & \fbox{1} &   \\
    \end{block}
    \end{blockarray}
  \end{equation}
  where the boxed elements are nonzero for the undirected graph \eqref{eq:fig:def:undirected_multigraph} and zero for the directed graph \eqref{eq:fig:def:directed_multigraph}.

  The matrix can be read either column-by-column or row-by-row.
  \begin{itemize}
    \item The \( v \)-th column lists the vertices \( u \) such that there is an arc from \( u \) to \( v \).
    \item The \( u \)-th row lists the vertices \( v \) such that there is an arc from \( v \) to \( u \).
  \end{itemize}
\end{example}

\begin{definition}\label{def:graph_walk}\mcite[10]{Diestel2005}
  A \term[ru=маршрут (\cite[def. 1.1.14]{Карпов2017})]{walk} of length \( n \) in a \hyperref[def:directed_multigraph]{directed multigraph} is a nonempty alternating sequence
  \begin{equation*}
    v_0 e_1 v_1 e_2 v_2 \cdots e_{n-1} v_{n-1} e_n v_n,
  \end{equation*}
  where \( v_0, \cdots, v_n \) are vertices and \( e_1, \cdots, e_n \) are arcs such that \( i(e_k) = v_{k-1} \) and \( t(e_k) = v_k \) for \( k = 1, \ldots, n \). We will use the notation
  \begin{equation*}
    v_0 \reloset {e_1} \to v_1 \reloset {e_2} \to \cdots \reloset {e_{n-1}} \to v_{n-1} \reloset {e_n} \to v_n.
  \end{equation*}

  In the case of a \hyperref[def:directed_graph]{simple directed graph}, there can be only one arc between two vertices, and thus we may simplify the notation to
  \begin{equation*}
    v_0 \to v_1 \to \cdots \to v_{n-1} \to v_n.
  \end{equation*}

  \begin{thmenum}
    \thmitem{def:graph_walk/undirected} For \hyperref[def:undirected_multigraph]{undirected multigraphs}, \( e_k \) is instead an edge with endpoints \( v_{k-1} \) and \( v_k \).
    \thmitem{def:graph_walk/empty} Each vertex \( v \) induces an \term{empty walk} of length \( 0 \).
    \thmitem{def:graph_walk/endpoints} We call \( v_0 \) and \( v_n \) the \term{endpoints} of the walk --- similarly to arcs, \( v_0 \) is called the \term{head}, and \( v_n \) is called the \term{tail}.
    \thmitem{def:graph_walk/path} We say that the walk is a \term[ru=путь (\cite[def. 1.1.15]{Карпов2017})]{path} if it has no repeated vertices\footnote{Having no repeated vertices also implies having no repeated edges, but not vice versa.}. Paths are often conflated with their induced graphs --- see \fullref{rem:graph_of_graph_walk}.
    \thmitem{def:graph_walk/closed}\mcite[10]{Diestel2005} We say that walk is \term{closed} if the two endpoints coincide.
  \end{thmenum}
\end{definition}
\begin{comments}
  \item This definition is also presented by Bela Bollobas in \cite[4]{Bollobas1998}. Chris Godsil and Gordon Royle in \cite[165]{GodsilRoyle2001} and Jeff Erickson in \cite[191]{Erickson2019} give a simpler definition that involves only vertices (i.e. without arcs and edges), but is ambiguous in the case of multigraphs.

  \item Michel Gondran and Michel Minoux in \cite[13]{GondranMinoux1984Graphs} instead define paths as sequences of adjacent arcs, and call our definition of paths \enquote{elementary paths}.

  \item It may seem tempting to define walks as a sequence of adjacent arcs or edges (without explicitly mentioning any vertices), but this introduces an additional difficulty --- we can no longer distinguish different empty walks. We can define walks as a starting vertex followed by a sequence of arcs or edges, but the definition given above has the advantage of being widely accepted.
\end{comments}

\begin{remark}\label{rem:graph_of_graph_walk}
  We defined walks in \fullref{def:graph_walk} for both directed and undirected graphs. In both cases, walks are directed in a way that can be made precise easily.

  In an \hyperref[rem:arbitrary_graph]{arbitrary graph}, consider the walk
  \begin{equation*}
    v_0 \reloset {e_1} \to v_1 \reloset {e_2} \to \cdots \reloset {e_{n-1}} \to v_{n-1} \reloset {e_n} \to v_n.
  \end{equation*}

  \begin{figure}[!ht]
    \begin{equation}\label{eq:fig:rem:graph_of_graph_walk}
      \begin{aligned}
        \includegraphics[page=1]{output/rem__graph_of_graph_walk}
      \end{aligned}
    \end{equation}
    \caption{A path's induced graph in an undirected multigraph.}\label{fig:rem:graph_of_graph_walk}
  \end{figure}

  It induces a \hyperref[def:directed_graph]{simple directed graph} \( P = (V_P, A_P) \), where
  \begin{align*}
    V_P &= \set{ v_0, \cdots, v_n }
    &
    i(e_k) &= v_{k-1}
    \\
    A_P &= \set{ e_1, \cdots, e_n }
    &
    t(e_k) &= v_k.
  \end{align*}

  Technically, this is a \hyperref[def:directed_multigraph]{directed multigraph} since our definition for simple directed graph requires the arcs to be ordered pairs. What we gain by using the original arcs is that we can distinguish between \hyperref[def:directed_multigraph]{parallel arcs}. Another, more awkward, way to distinguish them is to introduce \hyperref[def:labeled_set]{labels}. For simple graphs, on the other hand, we may skip denoting the arcs entirely.

  Every walk induces a unique such graph. The converse is not true, as can be seen in the following example:
  \begin{equation}\label{eq:rem:graph_of_graph_walk/diamond}
    \begin{aligned}
      \includegraphics[page=2]{output/rem__graph_of_graph_walk}
    \end{aligned}
  \end{equation}

  It corresponds to the walk
  \begin{equation*}
    c \to a \to b \to c \to d \to b
  \end{equation*}
  but also to
  \begin{equation*}
    c \to d \to b \to c \to a \to b
  \end{equation*}
  and to an infinitude of other walk constructed by repeating parts of the walk.

  On the other hand, every \hyperref[def:graph_walk/path]{path} is uniquely determined by its induced graph. For this reason, paths and their induced graphs are sometimes conflated, for example by Reinhard Diestel in \cite[6]{Diestel2005} and by Bela Bollobas in \cite[4]{Bollobas1998}. Both of these authors actually define paths as \hi{undirected} graphs with an implicit ordering of the vertices, and later treat them as special cases of walks.
\end{remark}

\begin{definition}\label{def:directed_multigraph_free_category}\mcite[48]{MacLane1998}
  Let \( G = (V, A, h, t) \) be a \hyperref[def:directed_multigraph]{directed multigraph}. We define the \term{free category} \( F(G) \) generated by \( G \) as follows:
  \begin{itemize}
    \item The \hyperref[def:category/objects]{set of objects} is the set of vertices \( V \).

    \item The \hyperref[def:category/morphisms]{morphisms} between two vertices are the \hyperref[def:graph_walk]{walks} between them.

    \item The \hyperref[def:category/composition]{composition of the morphisms} \( p: u \to v \) and \( q: v \to w \) is their \hyperref[def:graph_walk/path/concatenation]{concatenation}:
    \begin{equation*}
      q \bincirc p = p \cdot q.
    \end{equation*}

    \item The \hyperref[def:category/identity]{identity morphism} on the vertex \( v \) is the \hyperref[def:graph_walk/path/empty]{empty path} at \( v \). This is the primary motivation for having a distinct empty path at every vertex.
  \end{itemize}

  Since \( F(G) \) is already defined for every directed multigraph \( G \), if we also define how it acts on \hyperref[eq:def:directed_multigraphs/homomorphism]{directed multigraph homomorphisms}, this will make \( F \) a \hyperref[def:functor]{functor} from the \hyperref[def:directed_multigraph/category]{category of small directed multigraphs} to the \hyperref[def:directed_multigraph/category]{category of small categories}.

  For every small category \( \cat{C} \) and every directed multigraph homomorphism
  \begin{equation*}
    (g_V, g_A): G \to U(\cat{C}),
  \end{equation*}
  consider the following functor, which \enquote{evaluates} walks from \( G \) inside \( \cat{C} \):
  \begin{equation}\label{eq:def:directed_multigraph_free_category/functor_from_homomorphism}
    \begin{aligned}
      &G: F(G) \to \cat{C}, \\
      &G(v) \coloneqq g_V(v) \\
      &G\parens*{ v \overset {e_1} \to \anon \overset \cdots \to \anon \overset {e_n} \to \anon } \coloneqq \begin{cases}
        \id_v,                                                                                                  &n = 0, \\
        g_A(e_n) \bincirc G(v \overset {e_1} \to \anon \overset \cdots \to \anon \overset {e_{n-1}} \to \anon), &n > 0,
      \end{cases}
    \end{aligned}
  \end{equation}

  Put \( F(f_V, f_A) \coloneqq G \). Parameterized on \( G \) and \( (f_V, f_A) \), \( F \) becomes a functor from directed multigraphs to categories.
\end{definition}
\begin{comments}
  \item We will see in \fullref{ex:def:category_adjunction/dm_cat} that \( F \) is actually left adjoint to the forgetful functor \( U \). The new identity loops are an important part of this adjunction.
\end{comments}
