\subsection{Graphs}\label{subsec:graphs}

The term \enquote{graph} is unfortunately very ambiguous\footnote{The graph of a relation or function is unrelated to the combinatorial graphs discussed here.} - it is a set of vertices connected by either directed arcs or undirected edges. We introduce distinct definitions for the four types of graphs from \fullref{fig:def:graph_functors}, along with comments on how the definitions are used by different authors, and then in \fullref{def:graph_functors} we will define functors that help transparently transform some types of graphs into others. It is an established convention to not go through these hoops and implicitly transfer concepts between different kinds of graphs without even mentioning morphisms and categories. We will later follow this convention, but will nonetheless first describe the details.

\begin{figure}[!ht]
  \caption{Functors between the categories of different kinds of graphs.}\label{fig:def:graph_functors}
  \smallskip
  \hfill
  \begin{tikzpicture}
    \node[align=center] (dm) at (0, 0) {\hyperref[def:directed_graph/category]{Simple} \\ \hyperref[def:directed_graph/category]{undirected} \\ \hyperref[def:directed_graph/category]{graphs}};
    \node[align=center] (um) at (5cm, 0) {\hyperref[def:undirected_graph/category]{Simple} \\ \hyperref[def:undirected_graph/category]{undirected} \\ \hyperref[def:undirected_graph/category]{graphs}};
    \node[align=center] (ds) at (0, -3cm) {\hyperref[def:directed_multigraph/category]{Directed} \\ \hyperref[def:directed_multigraph/category]{multigraphs}};
    \node[align=center] (us) at (5cm, -3cm) {\hyperref[def:undirected_multigraph/category]{Undirected} \\ \hyperref[def:undirected_multigraph/category]{multigraphs}};
    \draw[->] (dm) to node[midway, above] {\hyperref[def:graph_functors/multi_forgetful]{\( U_S \)}} (um);
    \draw[->, bend left] (um) to node[midway, below] {\hyperref[def:graph_functors/simple_doubling]{\( D_S \)}} (dm);
    \draw[->] (ds) to node[midway, below] {\hyperref[def:graph_functors/multi_forgetful]{\( U_M \)}} (us);
    \draw[->, bend left] (dm) to node[midway, right] {\hyperref[def:graph_functors/directed_forgetful]{\( U_D \)}} (ds);
    \draw[->, bend left] (ds) to node[midway, left] {\hyperref[def:graph_functors/directed_inclusion]{\( I_D \)}} (dm);
    \draw[->, bend left] (um) to node[midway, right] {\hyperref[def:graph_functors/undirected_forgetful]{\( U_U \)}} (us);
    \draw[->, bend left] (us) to node[midway, left] {\hyperref[def:graph_functors/undirected_inclusion]{\( I_U \)}} (um);
  \end{tikzpicture}
  \hfill\hfill
\end{figure}

\begin{definition}\label{def:directed_multigraph}\mcite[10]{MacLane1998}
  A \term{directed multigraph} \( G \) consists of the following:
  \begin{thmenum}[series=def:directed_multigraph]
    \thmitem{def:directed_multigraph/vertices} A set \( V_G \), whose elements we call \term{vertices}.
    \thmitem{def:directed_multigraph/arcs} A disjoint from \( V_G \) set \( A_G \), whose elements we call \term{arcs}.
    \thmitem{def:directed_multigraph/head} A function \( h_G: A \to V \), giving the \term{head} or \term{initial endpoint} of an arc.
    \thmitem{def:directed_multigraph/tail} A function \( t_G: A \to V \), giving the \term{tail} or \term{terminal endpoint} of an arc.
  \end{thmenum}

  \Cref{fig:def:directed_multigraph} illustrates this definition. The figure is not merely illustrative --- it is a \hyperref[def:graph_geometric_realization/embedding]{graph embedding}.

  \begin{figure}[!ht]
    \begin{equation}\label{eq:fig:def:directed_multigraph}
      \begin{aligned}
        \includegraphics[page=1]{output/def__directed_multigraph}
      \end{aligned}
    \end{equation}
    \caption{A directed multigraph with a pair of parallel arcs, a pair of oppositely directed arcs and a loop. Removing the dashed arcs makes it a \hyperref[def:directed_graph]{simple directed graph}.}\label{fig:def:directed_multigraph}
  \end{figure}

  We will need the following basic notions:
  \begin{thmenum}[resume=def:directed_multigraph]
    \thmitem{def:directed_multigraph/loop}\mcite[28]{Diestel2005} We call the arc \( e \) a \term{loop} if \( h(e) = t(e) \).

    \medskip

    \thmitem{def:directed_multigraph/parallel}\mcite[11]{MacLane1998} We call the arcs \( e \) and \( f \) \term{parallel} if \( h(e) = h(f) \) and \( t(e) = t(f) \) and \term{oppositely directed} if neither is a loop and \( h(e) = t(f) \) and \( t(e) = h(f) \).

    \thmitem{def:directed_multigraph/homomorphism}\mcite[48]{MacLane1998} A \term{homomorphism} between directed multigraphs \( G \) and \( H \) is a pair of functions
    \begin{align*}
      &f_V: V_G \to V_H, \\
      &f_A: A_G \to A_H,
    \end{align*}
    such that
    \begin{align}
      h_H \bincirc f_A &= f_V \bincirc h_G, \label{eq:def:directed_multigraph/homomorphism/head} \\
      t_H \bincirc f_A &= f_V \bincirc t_G. \label{eq:def:directed_multigraph/homomorphism/tail}
    \end{align}

    \thmitem{def:directed_multigraph/category}\mcite[48]{MacLane1998} For a Grothendieck universe \( \mscrU \), we can define the \hyperref[def:category]{category} of \( \mscrU \)-small directed multigraphs (where both the vertex and arc sets are \( \mscrU \)-small) and their homomorphisms.

    \thmitem{def:directed_multigraph/subgraph} We say that \( H \) is a \term{subgraph} of \( G \) if \( V_G \subseteq V_H \), \( A_G \subseteq A_H \) and \( h_H \) and \( t_H \) are restrictions of \( h_G \) and \( t_G \) to \( A_H \).

    Subgraphs correspond to \hyperref[def:subobject_and_quotient]{categorical subobjects}.
  \end{thmenum}
\end{definition}
\begin{comments}
  \item Formally, we define a directed multigraph as a quadruple \( G = (V_G, A_G, h_G, t_G) \). We may skip indices when unnecessary, i.e. we are free to write \( G = (V, A, h, t) \) or even \( H = (W, B, j, u) \).

  \item Reinhard Diestel defines directed multigraphs in \cite[28]{Diestel2005}, but calls them \enquote{directed graphs}, while reserving the term \enquote{multigraph} for \hyperref[def:undirected_multigraph]{undirected multigraphs}. He also implicitly restricts graphs to finite graphs. Nonetheless, we use his convention of defining directed multigraphs as quadruples.

  Bela Bollobas defines directed multigraphs in \cite[8]{Bollobas1998}, and calls them as such, but also assumes that they are finite.

  Both books use \hyperref[def:undirected_graph]{simple undirected graphs} almost exclusively.

  Saunders Mac Lane in \cite[10]{MacLane1998} uses the term \enquote{graphs} for what we call directed multigraphs, and uses them to define categories. For the purposes of category theory, he makes no finiteness assumptions.
\end{comments}

\begin{definition}\label{def:directed_graph}\mcite[2]{GodsilRoyle2001}
  A \term{simple directed graph} \( G \) consists of the following:
  \begin{thmenum}[series=def:directed_graph]
    \thmitem{def:directed_graph/vertices} A set \( V_G \), whose elements we call \term{vertices}.
    \thmitem{def:directed_graph/arcs} A set \( A_G \) of \hyperref[def:cartesian_product/kuratowski_pair]{ordered pairs} of \hi{distinct} vertices. As in the case of directed multigraphs, we call the elements of \( A_G \) \term{arcs}.
  \end{thmenum}

  We will use the following basic terminology:
  \begin{thmenum}[resume=def:directed_graph]
    \thmitem{def:directed_graph/homomorphism}\mcite[7]{GodsilRoyle2001} A \term{homomorphism} between the directed graphs \( G \) and \( H \) is a function \( f: V_G \to V_H \) such that \( (u, v) \in A_G \) implies \( (f(u), f(v)) \in A_H \).

    \thmitem{def:directed_graph/category} For a Grothendieck universe \( \mscrU \), we can define the \hyperref[def:category]{category} of \( \mscrU \)-small simple directed graphs and their homomorphisms.

    \thmitem{def:directed_graph/subgraph}\mimprovised We say that \( H \) is a \term{subgraph} of \( G \) if \( V_G \subseteq V_H \) and \( A_G \subseteq A_H \).

    Subgraphs correspond to \hyperref[def:subobject_and_quotient]{categorical subobjects}.
  \end{thmenum}
\end{definition}
\begin{comments}
  \item We can regard directed graphs as directed multigraphs without loops and parallel arcs. This is made precise via the inclusion functor \hyperref[def:graph_functors/directed_inclusion]{\( I_D \)}.

  \item Chris Godsil and Gordon Royle define simple directed graphs in \cite[2]{GodsilRoyle2001}, but call them \enquote{directed graphs}, preferring to use \enquote{simple graph} for what we call \enquote{simple undirected graph}. Bela Bollobas defines directed graphs and directed multigraphs separately in a remark in \cite[8]{Bollobas1998}, but does not give a formal definition. Finiteness is implicitly assumed in both books.

  Michel Gondran and Michel Minoux in \cite[2]{GondranMinoux1984Graphs} use the term \enquote{graph} to refer to what we call (simple) directed graphs, but allow loops.
\end{comments}

\begin{definition}\label{def:undirected_multigraph}\mcite[28]{Diestel2005}
  An \term{undirected multigraph} \( G \) consists of the following:
  \begin{thmenum}[series=def:undirected_multigraph]
    \thmitem{def:undirected_multigraph/vertices} A set \( V_G \), whose elements we call \term{vertices}.
    \thmitem{def:undirected_multigraph/edges} A disjoint from \( V_G \) set \( E_G \), whose elements we call \term{edges}.
    \thmitem{def:undirected_multigraph/endpoints} A map
    \begin{equation*}
      \mscrE: E \to \set[\Big]{ \set{ u, v } \given* u, v \in V },
    \end{equation*}
    giving an unordered pair of \term{endpoints} of an edge.
  \end{thmenum}

  \begin{figure}[!ht]
    \begin{equation}\label{eq:fig:def:undirected_multigraph}
      \begin{aligned}
        \includegraphics[page=1]{output/def__undirected_multigraph}
      \end{aligned}
    \end{equation}
    \caption{An undirected multigraph, which becomes simple after removing the dashed edges.}\label{fig:def:undirected_multigraph}
  \end{figure}

  We will use the following basic terminology:
  \begin{thmenum}[resume=def:undirected_multigraph]
    \thmitem{def:undirected_multigraph/loop}\mcite[29]{Diestel2005} We call the edge \( e \) a \term{loop} if \( \mscrE(e) \) is a one-element set.

    \medskip

    \thmitem{def:undirected_multigraph/parallel}\mcite[29]{Diestel2005} We call the edges \( e \) and \( f \) \term{parallel} if \( \mscrE(e) = \mscrE(f) \).

    \thmitem{def:undirected_multigraph/homomorphism} A \term{homomorphism} between the undirected multigraphs \( G \) and \( H \) is a pair of functions
    \begin{align*}
      &f_V: V_G \to V_H, \\
      &f_E: E_G \to E_H,
    \end{align*}
    such that, for each edge \( e \in E_G \),
    \begin{equation}\label{eq:def:undirected_multigraph/homomorphism}
      \mscrE_H(f_E(e)) = \set[\Big]{ f_V(v) \given* v \in \mscrE_G(e) }.
    \end{equation}

    \thmitem{def:undirected_multigraph/category} For a Grothendieck universe \( \mscrU \), we can define the \hyperref[def:category]{category} of \( \mscrU \)-small undirected multigraphs and their homomorphisms.

    \thmitem{def:undirected_multigraph/subgraph}\mimprovised We say that \( H \) is a \term{subgraph} of \( G \) if \( V_G \subseteq V_H \), \( E_G \subseteq E_H \) and \( \mscrE_H = \mscrE_G\restr_{E_H} \).

    Subgraphs correspond to \hyperref[def:subobject_and_quotient]{categorical subobjects}.
  \end{thmenum}
\end{definition}
\begin{comments}
  \item Reinhard Diestel defines undirected multigraphs in \cite[28]{Diestel2005} and Bela Bollobas defines them in \cite[6]{Bollobas1998}. Both omit the prefix \enquote{undirected}, although Bollobas later explicitly defines directed multigraphs, while Diestel uses the term \enquote{directed graph} for what we call a \hyperref[def:directed_multigraph]{directed multigraph}.

  Michel Gondran and Michel Minoux define multigraphs in \cite[3]{GondranMinoux1984Graphs} without specifying whether they are directed or not, but later implicitly assume that they are undirected.
\end{comments}

\begin{definition}\label{def:undirected_graph}\mcite[28]{Diestel2005}
  A \term{simple undirected graph} \( G \) consists of the following:
  \begin{thmenum}[series=def:undirected_graph]
    \thmitem{def:undirected_graph/vertices} A set \( V_G \), whose elements we call \term{vertices}.
    \thmitem{def:undirected_graph/edges} A set \( E \) of unordered pairs of \hi{distinct} vertices, i.e. sets of the form \( \set{ u, v } \), whose elements we call \term{edges}.
  \end{thmenum}

  We will use the following basic terminology:
  \begin{thmenum}[resume=def:undirected_graph]
    \thmitem{def:undirected_graph/homomorphism}\mcite[7]{GodsilRoyle2001} A \term{homomorphism} between the simple undirected graphs \( G \) and \( H \) is a function \( f: V_G \to V_H \) such that \( \set{ u, v } \in E_G \) implies \( \set{ f(u), f(v) } \in E_H \).

    \thmitem{def:undirected_graph/category} For a Grothendieck universe \( \mscrU \), we can define the \hyperref[def:category]{category} of \( \mscrU \)-small simple undirected graphs and their homomorphisms.

    \thmitem{def:undirected_graph/subgraph} We say that \( H \) is a \term{subgraph} of \( G \) if \( V_G \subseteq V_H \) and \( E_G \subseteq E_H \).
  \end{thmenum}
\end{definition}
\begin{comments}
  \item We can regard undirected graphs as undirected multigraphs without loops and parallel arcs. This is made precise via the inclusion functor \hyperref[def:graph_functors/undirected_inclusion]{\( I_U \)}.

  \item Reinhard Diestel defines simple undirected graphs in \cite[2]{Diestel2005} as \enquote{graphs}, and so do Bela Bollobas in \cite[1]{Bollobas1998} and Chris Godsil and Gordon Royle in \cite[2]{GodsilRoyle2001}. Michel Gondran and Michel Minoux define (simple) undirected graphs in \cite[3]{GondranMinoux1984Graphs}, after already introducing (simple) directed graphs.

  All mentioned authors except for Diestel remark that \enquote{simple graph} may be used to disambiguate when (undirected) multigraphs may otherwise be involved.
\end{comments}

\begin{definition}\label{def:multigraph_orientation}\mcite[28]{Diestel2005}
  We call the \hyperref[def:directed_multigraph]{directed multigraph} \( D = (V, A, h, t) \) an \term{orientation} of the \hyperref[def:undirected_multigraph]{undirected multigraph} \( G = (U, E, \mscrE) \) if \( U = V \), \( A = E \), and, for every arc \( e \in A \), we have \( \mscrE(e) = \set{ h(e), t(e) } \).
\end{definition}
\begin{comments}
  \item This definition also applies to simple graphs via the inclusion functors \hyperref[def:graph_functors/directed_inclusion]{\( I_D \)} and \hyperref[def:graph_functors/undirected_inclusion]{\( I_U \)}.
\end{comments}

\begin{definition}\label{def:graph_functors}\mimprovised
  Different kinds of graphs are related via the following functors (shown graphically in \fullref{fig:def:graph_functors}):
  \begin{thmenum}
    \thmitem{def:graph_functors/directed_forgetful} The simple \hyperref[def:concrete_category]{forgetful functor}:
    \begin{flalign*}
      &U_D: \hyperref[def:directed_multigraph/category]{\T*{Directed multigraphs}} \to \hyperref[def:directed_graph/category]{\T*{Simple directed graphs}}, &&\\
      &U_D(V, A, h, t) \coloneqq \parens[\Big]{ V, \set[\Big]{ \parens[\Big]{ h(a), t(a) } \given* a \in A } }, &&\\
      &U_D(f_V, f_A) \coloneqq f_V.
    \end{flalign*}

    \thmitem{def:graph_functors/directed_inclusion} A \hyperref[def:category_adjunction]{left adjoint}:
    \begin{flalign*}
      &I_D: \hyperref[def:directed_graph/category]{\T*{Simple directed graphs}} \to \hyperref[def:directed_multigraph/category]{\T*{Directed multigraphs}}, &&\\
      &I_D(V, A) \coloneqq \parens[\Big]{ V, A, (u, v) \mapsto u, (u, v) \mapsto v }, &&\\
      &I_D(f) \coloneqq \parens[\Big]{ f, (u, v) \mapsto \parens[\Big]{ f(u), f(v) } }.
    \end{flalign*}

    \thmitem{def:graph_functors/undirected_forgetful} A similar forgetful functor for undirected graphs:
    \begin{flalign*}
      &U_U: \hyperref[def:undirected_multigraph/category]{\T*{Undirected multigraphs}} \to \hyperref[def:undirected_graph/category]{\T*{Simple undirected graphs}}, &&\\
      &U_U(V, E, \mscrE) \coloneqq \parens[\Big]{ V, \set[\Big]{ \mscrE(e) \given* e \in E } }, &&\\
      &U_U(f_V, f_E) \coloneqq f_V.
    \end{flalign*}

    \thmitem{def:graph_functors/undirected_inclusion} A left adjoint:
    \begin{flalign*}
      &I_U: \hyperref[def:undirected_graph/category]{\T*{Simple undirected graphs}} \to \hyperref[def:undirected_multigraph/category]{\T*{Undirected multigraphs}}, &&\\
      &I_U(V, E) \coloneqq \parens[\Big]{ V, E, e \mapsto e }, &&\\
      &I_U(f) \coloneqq \parens[\Big]{ f, \set{ u, v } \mapsto \set{ f(u), f(v) } }.
    \end{flalign*}

    \thmitem{def:graph_functors/multi_forgetful} A functor that forgets the \hyperref[def:multigraph_orientation]{orientation} of a multigraph:
    \begin{flalign*}
      &U_M: \hyperref[def:directed_multigraph/category]{\T*{Directed multigraphs}} \to \hyperref[def:undirected_multigraph/category]{\T*{Undirected multigraphs}}, &&\\
      &U_M(V, A, h, t) \coloneqq \parens[\Big]{ V, A, e \mapsto \set{ h(e), t(e) } }, &&\\
      &U_M(f_V, f_A) \coloneqq (f_V, f_A).
    \end{flalign*}

    \thmitem{def:graph_functors/simple_forgetful} A functor that forgets the orientation of a simple graph:
    \begin{flalign*}
      &U_S: \hyperref[def:directed_graph/category]{\T*{Simple directed graphs}} \to \hyperref[def:undirected_graph/category]{\T*{Simple undirected multigraphs}}, &&\\
      &U_S(V, A) \coloneqq \parens[\Big]{ V, A, (u, v) \mapsto \set{ u, v } }, &&\\
      &U_S(f) \coloneqq f.
    \end{flalign*}

    \thmitem{def:graph_functors/simple_doubling} A right adjoint to \( U_S \), which doubles each edge to produce arcs in both directions:
    \begin{flalign*}
      &D_S: \hyperref[def:undirected_graph/category]{\T*{Simple undirected multigraphs}} \to \hyperref[def:directed_multigraph/category]{\T*{Simple directed multigraphs}}, &&\\
      &D_S(V, E) \coloneqq \parens[\Big]{ V, \set[\Big]{ (u, v) \in V^2 \given \set{ u, v } \in E } }, &&\\
      &D_S(f) \coloneqq f.
    \end{flalign*}
  \end{thmenum}
\end{definition}
\begin{comments}
  \item \Fullref{ex:def:category_adjunction/us_ds} discusses the doubling functor from \fullref{def:graph_functors/simple_doubling}.
  \item We can introduce a doubling functor for multigraphs similar to \hyperref[def:graph_functors/simple_doubling]{\( D_S \)} that introduces two opposite copies of each edge in an undirected multigraph.

  Unfortunately, that would require choosing one vertex as the head and the other as a tail, and thus the functor depends on a \hyperref[def:choice_function]{choice function}. This choice function is unnecessary for simple graphs because ordered pairs having a first and second element, while multigraphs have abstract objects as arcs.

  Furthermore, even given a canonical choice function, this functor would not be a right inverse to \hyperref[def:graph_functors/multi_forgetful]{\( U_M \)} --- instead, we would obtain an undirected multigraph with twice as many edges as the original.

  We avoid introducing such a functor altogether.
\end{comments}

\begin{remark}\label{rem:arbitrary_graph}
  We will henceforth use the term \enquote{arbitrary graph} to refer to any of the four kinds of graphs defined in this section.

  The inclusion functors \hyperref[def:graph_functors/directed_inclusion]{\( I_D \)} and \hyperref[def:graph_functors/undirected_inclusion]{\( I_U \)} allow all definitions for multigraphs to apply to simple graphs. The transition between directed and undirected graphs is more complicated, but we will nonetheless utilize \hyperref[def:graph_functors/multi_forgetful]{\( U_M \)}, \hyperref[def:graph_functors/simple_forgetful]{\( U_S \)} and \hyperref[def:graph_functors/simple_doubling]{\( D_S \)} when necessary.
\end{remark}

\begin{definition}\label{def:graph_incidence}\mcite[3]{Diestel2005}
  We say that the vertex \( v \) and the arc/edge \( e \) are \term{incident} of \( v \) is an endpoint of \( e \).
\end{definition}

\begin{definition}\label{def:graph_adjacency}\mcite[3]{Diestel2005}
  If two vertices are incident to a common arc/edge, we say that they are \term{adjacent}.
\end{definition}

\begin{definition}\label{def:graph_cardinality}
  Graphs have the following notions of \hyperref[def:cardinal]{cardinality}:
  \begin{thmenum}
    \thmitem{def:graph_cardinality/order}\mcite[2]{Diestel2005} The \term{order} \( \ord(G) \) of an \hyperref[rem:arbitrary_graph]{arbitrary graph} \( G \) as the (cardinal) number of vertices.

    \medskip

    \thmitem{def:graph_cardinality/undirected_degree}\mcite[3]{Bollobas1998} The \term{degree} \( \deg(v) \) of the vertex \( v \) in an undirected (multi)graph is the number of edges \hyperref[def:graph_incidence]{incident} with \( v \).

    \thmitem{def:graph_cardinality/directed_degree}\mcite[8]{Bollobas1998} The \term{degree} of a vertex in a directed (multi)graph is, similarly, the number of arcs incident with \( v \). Each vertex additionally has an \term{in-degree} \( \deg_{\op{in}}(v) \), the number of arcs ending at \( v \), and an \term{out-degree} \( \deg_{\op{out}}(v) \), the number of arcs starting at \( v \).

    \thmitem{def:graph_cardinality/local}\mcite[196]{Diestel2005} We say that a graph is \term{locally finite} (resp. \term{locally countable}) if the degree of any vertex is finite (resp. countable).
  \end{thmenum}
\end{definition}

\begin{definition}\label{def:isolated_vertex}\mcite[5]{Diestel2005}
  We say that a vertex in a \hyperref[rem:arbitrary_graph]{graph} is \term{isolated} if its \hyperref[def:graph_cardinality/directed_degree]{degree} is zero.
\end{definition}

\begin{proposition}\label{thm:sum_of_graph_degrees}
  Fix a \hyperref[def:directed_multigraph]{directed multigraph} \( G = (V, A, h, t) \) and a designated vertex \( v \). Denote by \( l \) the number of \hyperref[def:directed_multigraph/loop]{loops} at \( v \). Then
  \begin{equation*}
    \deg(v) = \deg_{\op{in}}(v) + \deg_{\op{out}}(v) - l
  \end{equation*}
\end{proposition}
\begin{proof}
  The set
  \begin{equation*}
    \underbrace{ \set{ e \in A \given h(e) = v \T{or} t(e) = v } }_{\deg(v)}
  \end{equation*}
  is the union of the following three disjoint sets:
  \begin{align*}
    &\underbrace{ \set{ e \in A \given h(e) = t(e) = v } }_{l}, \\
    &\underbrace{ \set{ e \in A \given h(e) = v } \setminus \set{ e \in A \given h(e) = t(e) = v } }_{\deg_{\op{in}}(v) - l}, \\
    &\underbrace{ \set{ e \in A \given t(e) = v } \setminus \set{ e \in A \given h(e) = t(e) = v } }_{\deg_{\op{out}}(v) - l}.
  \end{align*}
\end{proof}

\begin{example}\label{ex:infinite_integer_graphs}
  A very simple example of an infinite \hyperref[def:directed_multigraph]{directed multigraph} is the \hyperref[def:transitive_reduction]{transitive reduction} of the positive integers, i.e. the simple directed graph
  \begin{equation}\label{eq:ex:infinite_integer_graphs/positive}
    \begin{aligned}
      \includegraphics[page=1]{output/ex__infinite_integer_graphs}
    \end{aligned}
  \end{equation}

  Since the graph is simple, we have
  \begin{equation*}
    \deg(n) = \begin{cases}
      \deg_{\op{in}}(n) + \deg_{\op{out}}(n) = 0 + 1 = 1, &n = 0, \\
      \deg_{\op{in}}(n) + \deg_{\op{out}}(n) = 2 + 1 = 2, &n > 0 \\
    \end{cases}
  \end{equation*}

  The \hyperref[def:categorical_diagram]{categorical diagrams} corresponding to this directed multigraph is used to define direct limits in \fullref{def:direct_and_inverse_limits/direct}.

  Another related graph is based on the negative integers:
  \begin{equation}\label{eq:ex:infinite_integer_graphs/negative}
    \begin{aligned}
      \includegraphics[page=2]{output/ex__infinite_integer_graphs}
    \end{aligned}
  \end{equation}

  The \hyperref[def:categorical_diagram]{categorical diagrams} corresponding to this directed multigraph is used to define inverse limits in \fullref{def:direct_and_inverse_limits/inverse}.

  Finally, the union of the two with zero added gives us the following directed multigraph:
  \begin{equation}\label{eq:ex:infinite_integer_graphs/two_sided}
    \begin{aligned}
      \includegraphics[page=3]{output/ex__infinite_integer_graphs}
    \end{aligned}
  \end{equation}

  All three graphs are infinite but \hyperref[def:graph_cardinality/local]{locally finite}.
\end{example}

\begin{example}\label{ex:complete_graph}
  For every positive integer \( n \), we define the \term{complete graph} \( K_n \) as the \hyperref[def:undirected_graph]{simple undirected graph} with vertices \( 1, \ldots, n \) and an edge between any two vertices. It is the unique graph of \hyperref[def:graph_cardinality/order]{order} \( n \) in which every pair of vertices is \hyperref[def:graph_adjacency]{adjacent}.

  \begin{figure}[!ht]
    \begin{equation}\label{eq:fig:ex:complete_graph}
      \begin{aligned}
        \includegraphics[page=1]{output/ex__complete_graph}
      \end{aligned}
    \end{equation}
    \caption{The complete graph \( K_4 \).}\label{fig:ex:complete_graph}
  \end{figure}
\end{example}

\begin{remark}\label{rem:trivial_graph}
  Unlike the \hyperref[def:group/trivial]{trivial group} \( \set{ e } \) or \hyperref[def:preordered_set/trivial]{empty ordered set}, which are unique up to an isomorphism, there is no single agreed upon graph called the \enquote{trivial graph}.

  Every graph has a subgraph with \hyperref[def:graph_cardinality/order]{order} zero, and hence up to an isomorphism we have an \term{order-zero graph} (for every kind of graph discussed here).

  Another unambiguous concept is that of an \term{edgeless} (resp. \term{arcless}) graph, in which every vertex is \hyperref[def:isolated_vertex]{isolated}, i.e. the set of edges or arcs is empty (but the set of vertices may or may not be empty). Every \hyperref[ex:complete_graph]{complete graph} has \( 2^n \) edgeless subgraphs (one for each set of edges).
\end{remark}

\begin{remark}\label{rem:graphs_linear_algebra_and_topology}
  As we shall see, the \hyperref[def:graph_adjacency]{adjacency} and \hyperref[def:graph_incidence]{incidence} of a directed multigraph can be studied using linear algebra via \hyperref[def:graph_adjacency_matrix]{adjacency} and \hyperref[def:directed_incidence_matrix]{incidence matrices}, while \hyperref[def:graph_connectedness]{connectedness} can be studied using \hyperref[def:graph_connectedness]{topology} via \hyperref[def:graph_geometric_realization/embedding]{graph embeddings}.
\end{remark}

\begin{definition}\label{def:graph_adjacency_matrix}\mcite[54]{GodsilRoyle2001}
  Let \( G = (V, A) \) be a finite \hyperref[def:directed_graph]{simple directed graph} and let \( l: A \to \BbbR \) be a \hyperref[def:labeled_set]{labeling function}. Without further context, we may assume that \( l(e) = 1 \) for every edge \( e \).

  We define the \term{adjacency matrix}
  \begin{equation*}
    M = \seq{ m_{u,v} }_{u,v \in V}
  \end{equation*}
  of \( (G, l) \) with elements
  \begin{equation*}
    m_{u,v} \coloneqq \begin{cases}
      l(e), &e = (u, v) \in A \\
      0,    &\T{otherwise.}
    \end{cases}
  \end{equation*}
\end{definition}
\begin{comments}
  \item The adjacency matrix is also defined for \hyperref[def:undirected_graph]{simple undirected graphs} due to the doubling functor \hyperref[def:graph_functors/simple_doubling]{\( D_S \)}. The adjacency matrix is \hyperref[def:transpose_matrix]{symmetric} in this case.
\end{comments}

\begin{example}\label{ex:def:graph_adjacency_matrix}
  The \hyperref[def:graph_adjacency_matrix]{adjacency matrix} of the complete graph \hyperref[fig:ex:complete_graph]{\( K_4 \)} is
  \begin{equation}\label{eq:ex:def:graph_adjacency_matrix}
    \begin{blockarray}{ccccc}
        & a & b & c & d \\
    \begin{block}{c(cccc)}
      a & 0 & 1 & 1 & 1 \\
      b & 1 & 0 & 1 & 1 \\
      c & 1 & 1 & 0 & 1 \\
      d & 1 & 1 & 1 & 0 \\
    \end{block}
    \end{blockarray}
  \end{equation}
\end{example}

\begin{definition}\label{def:directed_incidence_matrix}\mcite[167]{GodsilRoyle2001}
  Let \( G = (V, A, h, t) \) be a finite \hyperref[def:directed_multigraph]{directed multigraph}. We define the \term{incidence matrix}
  \begin{equation*}
    M = \seq{ m_{v,e} }_{v \in V, e \in A}
  \end{equation*}
  of \( G \) with elements
  \begin{equation*}
    m_{v,e} \coloneqq \begin{cases}
      1,  &v = h(e), \\
      -1, &v = t(e), \\
      0,  &\T{otherwise.}
    \end{cases}
  \end{equation*}
\end{definition}
\begin{comments}
  \item Compare to incidence matrices for directed graphs defined in \fullref{def:undirected_incidence_matrix}.
\end{comments}

\begin{definition}\label{def:undirected_incidence_matrix}\mcite[166]{GodsilRoyle2001}
  Let \( G = (V, E, \mscrE) \) be a finite \hyperref[def:undirected_multigraph]{undirected multigraph}. We define the \term{incidence matrix}
  \begin{equation*}
    M = \seq{ m_{v,e} }_{v \in V, e \in E}
  \end{equation*}
  of \( G \) as with elements
  \begin{equation*}
    m_{v,e} \coloneqq \begin{cases}
      1,  &v \in \mscrE(e), \\
      0,  &\T{otherwise.}
    \end{cases}
  \end{equation*}
\end{definition}
\begin{comments}
  \item Compare to incidence matrices for directed graphs defined in \fullref{def:directed_incidence_matrix}.
\end{comments}

\begin{example}\label{ex:incidence_matrices}
  The \hyperref[def:directed_incidence_matrix]{incidence matrix} of the simple directed graph \eqref{eq:fig:def:directed_multigraph} is
  \begin{equation}\label{eq:ex:incidence_matrices/directed}
    \begin{blockarray}{cccccccc}
        & e_1       & e_2       & e_3       & e_4       & e_5       & e_6       & e_7       \\
      \begin{block}{c(ccccccc)}
      a & 1         & 1         &           &           &           &           &           \\
      b & \fbox{-1} &           & 1         &           &           &           &           \\
      c &           & \fbox{-1} &           & 1         & 1         &           &           \\
      d &           &           & \fbox{-1} & \fbox{-1} &           & 1         &           \\
      e &           &           &           &           & \fbox{-1} &           & 1         \\
      f &           &           &           &           &           & \fbox{-1} & \fbox{-1} \\
      \end{block}
    \end{blockarray}
  \end{equation}

  It can be read column-by-column. Every column contains exactly two nonzero elements whose rows correspond to the initial (positive) and terminal (negative) vertex.

  To obtain the \hyperref[def:undirected_incidence_matrix]{incidence matrix the undirected graph} \eqref{eq:fig:def:undirected_multigraph}, obtained via \hyperref[def:graph_functors/multi_forgetful]{\( U_S \)}, we need to simply flip the sign of the boxed elements above.

  The \hyperref[def:graph_adjacency_matrix]{adjacency matrix} is
  \begin{equation}\label{ex:directed multigraph_matrices/adjacency}
    \begin{blockarray}{cccccccc}
        & a        & b        & c        & d        & e        & f \\
    \begin{block}{c(ccccccc)}
      a &          & 1        & 1        &          &          &   \\
      b & \fbox{1} &          &          & 1        &          &   \\
      c & \fbox{1} &          &          & 1        & 1        &   \\
      d &          & \fbox{1} & \fbox{1} &          &          & 1 \\
      e &          &          & \fbox{1} &          &          & 1 \\
      f &          &          &          & \fbox{1} & \fbox{1} &   \\
    \end{block}
    \end{blockarray}
  \end{equation}
  where the boxed elements are nonzero for the undirected graph \eqref{eq:fig:def:undirected_multigraph} and zero for the directed graph \eqref{eq:fig:def:directed_multigraph}.

  The matrix can be read either column-by-column or row-by-row.
  \begin{itemize}
    \item The \( v \)-th column lists the vertices \( u \) such that there is an arc from \( u \) to \( v \).
    \item The \( u \)-th row lists the vertices \( v \) such that there is an arc from \( v \) to \( u \).
  \end{itemize}
\end{example}

\begin{definition}\label{def:graph_walk}\mcite[10]{Diestel2005}
  We will define several related notions, all of which are commonly called \term[ru=маршрут (\cite[def. 1.1.14]{Карпов2017})]{walks}. The relationship between them is discussed in \fullref{rem:undirected_walks} and \fullref{thm:walk_in_undirected_counterpart}.

  Consider a nonempty alternating sequence
  \begin{equation}\label{eq:def:graph_walk}
    v_0, e_1, v_1, e_2, v_2, \cdots, e_{n-1}, v_{n-1}, e_n, v_n,
  \end{equation}
  where \( v_0, \cdots, v_n \) are vertices and \( e_1, \cdots, e_n \) are arcs or edges.

  \begin{thmenum}[series=def:graph_walk]
    \thmitem{def:graph_walk/directed} In a \hyperref[def:directed_multigraph]{directed multigraph}, we say that \eqref{eq:def:graph_walk} is a \term{directed walk} if \( h(e_k) = v_{k-1} \) and \( t(e_k) = v_k \) for \( k = 1, \ldots, n \). We usually avoid the adjective \enquote{directed} and refer to \enquote{walks}. This suggests the notation
    \begin{equation*}
      v_0 \reloset {e_1} \to v_1 \reloset {e_2} \to \cdots \reloset {e_{n-1}} \to v_{n-1} \reloset {e_n} \to v_n
    \end{equation*}
    or, in the case of \hyperref[def:directed_graph]{simple directed graphs},
    \begin{equation*}
      v_0 \to v_1 \to \cdots \to v_{n-1} \to v_n.
    \end{equation*}

    \thmitem{def:graph_walk/generalized}\mimprovised Again in a directed multigraph, we say that \eqref{eq:def:graph_walk} is a \term{generalized walk} if \( \set{ h(e_k), t(e_k) } = \set{ v_{k-1}, v_k } \) for every \( k = 1, \ldots, n \). We call the arc \( e_k \) \term{positively oriented} if \( h(e_k) = v_{k-1} \) and \term{negatively oriented} otherwise.

    We can reverse negatively oriented arrows, e.g.
    \begin{equation*}
      v_0 \reloset {e_1} \to v_1 \reloset {e_2} \leftarrow v_2 \reloset {e_2} \to v_3.
    \end{equation*}

    \thmitem{def:graph_walk/undirected} In an \hyperref[def:undirected_multigraph]{undirected multigraph}, trying to adapt both \hyperref[def:graph_walk/directed]{directed walks} and \hyperref[def:graph_walk/generalized]{generalized walks} leads to the same definition. We say that \eqref{eq:def:graph_walk} is a \term{walk} if \( e_k \) is edge with endpoints \( v_{k-1} \) and \( v_k \) for \( k = 1, \ldots, n \).

    Since walks in undirected graphs are directed in nature, we use the notations for directed paths and, when speaking about arbitrary graphs, refer to them as \enquote{directed walks} (e.g. in \fullref{def:graph_cycle}).
  \end{thmenum}

  \begin{figure}[!ht]
    \begin{equation}\label{eq:fig:def:graph_walk}
      \begin{aligned}
        \includegraphics[page=1]{output/def__graph_walk}
      \end{aligned}
    \end{equation}
    \caption{A path's induced graph in an undirected multigraph.}\label{fig:def:graph_walk}
  \end{figure}

  All walks introduced above have the following properties:
  \begin{thmenum}[resume=def:graph_walk]
    \thmitem{def:graph_walk/subgraph} Each walk induces a \hyperref[def:directed_multigraph/subgraph]{subgraph} consisting of only those vertices and edges in the walk.
    \thmitem{def:graph_walk/length} We define the \term{length} of a walk as the number of arcs or edges in it.
    \thmitem{def:graph_walk/empty} Each vertex \( v \) induces an \term{empty walk} of length \( 0 \).
    \thmitem{def:graph_walk/endpoints} We call \( v_0 \) and \( v_n \) the \term{endpoints} of the walk --- similarly to arcs, we call \( v_0 \) the \term{head}, and \( v_n \) --- the \term{tail}.
    \thmitem{def:graph_walk/closed}\mcite[10]{Diestel2005} We say that walk is \term{closed} if the two endpoints coincide.
    \thmitem{def:graph_walk/path} We say that the walk is a \term[ru=путь (\cite[def. 1.1.15]{Карпов2017})]{path} if it has no repeated vertices\footnote{Having no repeated vertices also implies having no repeated edges, but not vice versa.}. Unless the path is closed, it can be fully recovered from its induced subgraph, for which reason we often conflate the two.
    \thmitem{def:graph_walk/reachable} We say that the vertex \( v \) is \term{reachable} from \( u \) if there exists a path from \( u \) to \( v \).
    \thmitem{def:graph_walk/concatenation} The \term{concatenation} of two walks
    \begin{equation*}
      v_0 \reloset {e_1} \to v_1 \reloset {e_2} \to \cdots \reloset {e_{n-1}} \to v_{n-1} \reloset {e_n} \to v_n
    \end{equation*}
    and
    \begin{equation*}
      v_n \reloset {e_{n+1}} \to v_{n+1} \reloset {e_{n+2}} \to \cdots \reloset {e_{m-1}} \to v_{m-1} \reloset {e_m} \to v_m
    \end{equation*}
    is the walk
    \begin{equation*}
      v_0 \reloset {e_1} \to v_1 \reloset {e_2} \to \cdots \reloset {e_n} \to v_n \reloset {e_{n+1}} \to \cdots \reloset {e_m} \to v_m.
    \end{equation*}

    Note that the tail of the first walk must be the head of the second.
  \end{thmenum}
\end{definition}
\begin{comments}
  \item Reinhard Diestel in \cite[6]{Diestel2005} and Bela Bollobas in \cite[4]{Bollobas1998} define paths as \hi{undirected} graphs with an implicit ordering of the vertices, and later treat them as special cases of walks. Chris Godsil and Gordon Royle in \cite[165]{GodsilRoyle2001} and Jeff Erickson in \cite[191]{Erickson2019} give a simpler definition that involves only vertices (i.e. without arcs and edges), but is ambiguous in the case of multigraphs.

  \item Chris Godsil and Gordon Royle in \cite[29]{GodsilRoyle2001} use the temporary term \term{weak path} for what we call a generalized path.

  \item Michel Gondran and Michel Minoux in \cite[13]{GondranMinoux1984Graphs} instead define paths as sequences of adjacent arcs, and call our definition of paths \enquote{elementary paths}.

  \item It may seem tempting to define walks as sequences of adjacent arcs (without explicitly mentioning any vertices), but this introduces an additional difficulty --- we can no longer distinguish different empty walks. We can define walks as a starting vertex followed by a sequence of arcs or edges, but the definition given above has the advantage of being widely accepted.
\end{comments}

\begin{remark}\label{rem:undirected_walks}
  We will discuss two topics related to the direction of graph walks.

  Consider the path
  \begin{equation*}
    a \to b \to c
  \end{equation*}
  in the graph
  \begin{equation*}
    \begin{aligned}
      \includegraphics[page=1]{output/rem__undirected_walk}
    \end{aligned}
  \end{equation*}

  Denote this graph by \( D \). The path discussed can be drawn graphically as
  \begin{equation*}
    \begin{aligned}
      \includegraphics[page=2]{output/rem__undirected_walk}
    \end{aligned}
  \end{equation*}

  The doubling functor \( D_S \) from \fullref{def:graph_functors/simple_doubling} suggests defining walks in a \hyperref[def:undirected_graph]{simple undirected graph} \( G \) as walks in \( D_S(G) \). The following is the same path in the graph's undirected counterpart \hyperref[def:graph_functors/simple_forgetful]{\( U_S(D) \)}:
  \begin{equation*}
    \begin{aligned}
      \includegraphics[page=3]{output/rem__undirected_walk}
    \end{aligned}
  \end{equation*}

  This leads to \fullref{def:graph_walk/undirected}.

  The following is the path discussed above in the doubling \( D_S(U_S(D)) \):
  \begin{equation*}
    \begin{aligned}
      \includegraphics[page=4]{output/rem__undirected_walk}
    \end{aligned}
  \end{equation*}

  Roughly speaking, directed walks in the doubling \( D_S(U_S(D)) \) allow stringing together arcs that are opposite in \( D \). For example, consider the generalized walk
  \begin{equation}\label{eq:def:graph_walk/generalized/example}
    c \leftarrow b \leftarrow a.
  \end{equation}

  It can easily be drawn graphically in \( D_S(U_S(D)) \)
  \begin{equation*}
    \begin{aligned}
      \includegraphics[page=5]{output/rem__undirected_walk}
    \end{aligned}
  \end{equation*}

  But if we want to consider this walk in \( D \), we cannot, because has no arc from \( c \) to \( b \) nor from \( b \) to \( a \). This leads to the generalized walks, which we call \enquote{generalized walks} and define in \fullref{def:graph_walk/generalized}. Such a concept may seem unnecessary, but it is sometimes used, and so we introduce \fullref{def:graph_walk/generalized}.

  Thus, \eqref{eq:def:graph_walk/generalized/example} is an undirected path in \( D \). It is technically also an undirected in \( D_S(U_S(D)) \). It is, however, also a directed path in \( D_S(U_S(D)) \), and we prefer not to use both terms simultaneously.
\end{remark}

\begin{proposition}\label{thm:walk_in_undirected_counterpart}
  Let \( D \) be a \hyperref[def:directed_multigraph]{directed multigraph} and \( \hyperref[def:graph_functors/multi_forgetful]{U_M}(D) \) be its undirected counterpart. Then the sequence
  \begin{equation*}
    v_0, e_1, v_1, e_2, v_2, \cdots, e_{n-1}, v_{n-1}, e_n, v_n
  \end{equation*}
  is a \hyperref[def:graph_walk/undirected]{walk} in \( \hyperref[def:graph_functors/multi_forgetful]{U_M}(D) \) if and only if it is an \hyperref[def:graph_walk/generalized]{generalized walk} in \( D \).
\end{proposition}
\begin{proof}
  Trivial.
\end{proof}

\begin{definition}\label{def:directed_multigraph_free_category}\mcite[48]{MacLane1998}
  Let \( G = (V, A, h, t) \) be a \hyperref[def:directed_multigraph]{directed multigraph}. We define the \term{free category} \( F(G) \) generated by \( G \) as follows:
  \begin{itemize}
    \item The \hyperref[def:category/objects]{set of objects} is the set of vertices \( V \).

    \item The \hyperref[def:category/morphisms]{morphisms} between two vertices are the \hyperref[def:graph_walk/directed]{directed walks} between them.

    \item The \hyperref[def:category/composition]{composition of the morphisms} \( p: u \to v \) and \( q: v \to w \) is their \hyperref[def:graph_walk/concatenation]{concatenation}:
    \begin{equation*}
      q \bincirc p = p \cdot q.
    \end{equation*}

    \item The \hyperref[def:category/identity]{identity morphism} on the vertex \( v \) is the \hyperref[def:graph_walk/empty]{empty path} at \( v \). This is the primary motivation for having a distinct empty path at every vertex.
  \end{itemize}

  Since \( F(G) \) is already defined for every directed multigraph \( G \), if we also define how it acts on \hyperref[def:directed_multigraph/homomorphism]{directed multigraph homomorphisms}, this will make \( F \) a \hyperref[def:functor]{functor} from the \hyperref[def:directed_multigraph/category]{category of small directed multigraphs} to the \hyperref[def:directed_multigraph/category]{category of small categories}.

  For every small category \( \cat{C} \) and every directed multigraph homomorphism
  \begin{equation*}
    (g_V, g_A): G \to U(\cat{C}),
  \end{equation*}
  consider the following functor, which \enquote{evaluates} walks from \( G \) inside \( \cat{C} \):
  \begin{equation}\label{eq:def:directed_multigraph_free_category/functor_from_homomorphism}
    \begin{aligned}
      &G: F(G) \to \cat{C}, \\
      &G(v) \coloneqq g_V(v) \\
      &G\parens*{ v \overset {e_1} \to \anon \overset \cdots \to \anon \overset {e_n} \to \anon } \coloneqq \begin{cases}
        \id_v,                                                                                                  &n = 0, \\
        g_A(e_n) \bincirc G(v \overset {e_1} \to \anon \overset \cdots \to \anon \overset {e_{n-1}} \to \anon), &n > 0,
      \end{cases}
    \end{aligned}
  \end{equation}

  Put \( F(f_V, f_A) \coloneqq G \). Parameterized on \( G \) and \( (f_V, f_A) \), \( F \) becomes a functor from directed multigraphs to categories.
\end{definition}
\begin{comments}
  \item We will see in \fullref{ex:def:category_adjunction/dm_cat} that \( F \) is actually left adjoint to the forgetful functor \( U \). The new identity loops are an important part of this adjunction.
\end{comments}

\begin{definition}\label{def:graph_connectedness}\mcite[29]{GodsilRoyle2001}
  \hyperref[rem:arbitrary_graph]{Graphs} have the following notions of connectedness:
  \begin{thmenum}
    \thmitem{def:graph_connectedness/strong} We say that a \hyperref[def:directed_multigraph]{directed multigraph} is \term{strongly connected} if there exists a \hyperref[def:graph_walk/path]{directed path} between every pair of distinct vertices.

    \thmitem{def:graph_connectedness/weak} If there exists a \hyperref[def:graph_walk/generalized]{generalized path} between every pair of distinct vertices, we say that the graph is \term{weakly connected}.

    \thmitem{def:graph_connectedness/undirected}\mcite[4]{GodsilRoyle2001} We say that an \hyperref[def:undirected_multigraph]{undirected multigraph} is \term{connected} if there exists a \hyperref[def:graph_walk/undirected]{path} between every pair of distinct vertices.

    We say that an undirected multigraph is \term{disconnected} if it is not connected. We avoid similar concepts for directed graph because of ambiguity.
  \end{thmenum}
\end{definition}
\begin{comments}
  \item A strongly connected graph is necessarily weakly connected, hence it makes sense to skip the adjective \enquote{weakly} in this context.
\end{comments}

\begin{definition}\label{def:graph_connected_component}\mcite[29]{GodsilRoyle2001}
  It often happens that a graph is not connected, but can be partitioned into distinct connected subgraphs. A (weakly/strongly) \term{connected component} is a maximal subgraph that is (weakly/strongly) \hyperref[def:graph_connectedness]{connected}.
\end{definition}

\begin{proposition}\label{thm:connected_components_partition_graph}
  The (weak/strong) \hyperref[def:graph_connected_component]{connected components} of a \hyperref[rem:arbitrary_graph]{graph} \hyperref[def:set_partition]{partition} its vertices.
\end{proposition}
\begin{proof}
  Trivial.
\end{proof}

\begin{remark}\label{rem:graph_condensation}
  In the weak partition of a graph discussed in \fullref{thm:connected_components_partition_graph}, there is no arc or edge between vertices in different connected components. The same holds for partitioning an undirected graph into components.

  The partition into strong components, however, can result in a graph that captures relationships between the different components. This leads to \fullref{def:directed_graph_condensation}.
\end{remark}

\begin{definition}\label{def:directed_graph_condensation}\mcite[237]{Erickson2019}
  Let \( G = (V, A, h, t) \) be a \hyperref[def:directed_multigraph]{directed multigraph}.

  Define the equivalence relation
  \begin{equation*}
    v \sim w \iff v \T{is \hyperref[def:graph_walk/reachable]{reachable} from} w \T{and} w \T{is reachable from} v.
  \end{equation*}

  Consider the \hyperref[def:equivalence_relation/quotient]{quotient set} \( \widetilde{V} \coloneqq V / {\sim} \) of \hyperref[def:graph_connectedness/strong]{strongly connected components}. Fefine the \hyperref[def:binary_relation]{binary relation} \( \widetilde{A} \) on \( \widetilde{V} \) as
  \begin{equation*}
    ([u], [v]) \in \widetilde{A} \iff v \T{is reachable from} w \T{but not vice versa}.
  \end{equation*}

  Irreflexive relations over sets can be regarded as \hyperref[def:directed_graph]{simple directed graphs}. Therefore, the pair \( \widetilde{G} \coloneqq (\widetilde{V}, \widetilde{A}) \) is a directed graph. We call it the \term{condensation} of the directed multigraph \( G \).
\end{definition}
\begin{defproof}
  The relationship is well-defined because if \( ([v_1], [w_1]) \in \widetilde{A} \), \( v_2 \in [v_1] \) and \( w_2 \in [w_1] \), then by the transitivity of reachability we have that \( w_2 \) is reachable from \( v_2 \) and thus \( ([v_2], [w_2]) \in \widetilde{A} \).
\end{defproof}

\begin{example}\label{ex:def:directed_graph_condensation}
  The \hyperref[def:directed_graph_condensation]{condensation} of the directed multigraph \eqref{eq:fig:def:directed_multigraph} is (isomorphic to) the graph itself. If we add the arc \( f \to a \) to \eqref{eq:fig:def:directed_multigraph}, the condensation would be an edgeless directed multigraph with a single vertex.

  We can instead add new arcs \( e_8 \) and \( e_9 \) to \eqref{eq:fig:def:directed_multigraph} to make the example more interesting:
  \begin{equation}\label{eq:ex:def:directed_graph_condensation/uncondensed}
    \begin{aligned}
      \includegraphics[page=1]{output/ex__def__directed_graph_condensation.pdf}
    \end{aligned}
  \end{equation}

  Its condensation is
  \begin{equation}\label{eq:ex:def:directed_graph_condensation/condensed}
    \begin{aligned}
      \includegraphics[page=2]{output/ex__def__directed_graph_condensation.pdf}
    \end{aligned}
  \end{equation}

  These are the \hyperref[def:graph_connectedness/strong]{strongly connected components} of \eqref{eq:ex:def:directed_graph_condensation/uncondensed}.
\end{example}

\begin{definition}\label{def:graph_cycle}\mcite[4]{GodsilRoyle2001}
  We say that a \hyperref[def:graph_walk]{walk} is a \term{cycle} if every vertex has \hyperref[def:graph_cardinality/directed_degree]{degree} \( 2 \) (in its \hyperref[def:graph_walk/subgraph]{induced subgraph}).
\end{definition}
\begin{comments}
  \item Chris Godsil and Gordon Royle in \cite[4]{GodsilRoyle2001} actually define a cycle as a \hyperref[def:graph_connectedness]{connected graph} in which every vertex has degree \( 2 \). This differs from our definition in that walks have endpoints, while their subgraphs do not.

  Jeff Erickson in \cite[191]{Erickson2019} defines a cycle as \enquote{a closed walk that enters and leaves each vertex at most once}, which is a less technical formulation of our definition.

  Reinhard Diestel in \cite[7]{Diestel2005} and Bela Bollobas in \cite[5]{Bollobas1998} both define them as a graph constructed from a path with its head connecting to its tail, and require them to have at least three vertices. This latter condition filters out degenerate cases like \( a \to b \to a \).
\end{comments}

\begin{definition}\label{def:acyclic_graph}\mcite[4]{GodsilRoyle2001}
  If a \hyperref[rem:arbitrary_graph]{graph} does not have a (directed) \hyperref[def:graph_cycle]{cycle}, we say that it is \term{acyclic}.
\end{definition}

\begin{example}\label{ex:well_founded_graphs}
  We can regard any set \( A \) in the sense of \hyperref[def:zfc]{\logic{ZFC}} as the \hyperref[def:directed_graph]{simple directed graph} \( (A, \in) \).

  The \hyperref[def:zfc/foundation]{axiom of foundation} via \fullref{thm:set_membership_is_well_founded} then implies that the relation \( \in \) is \hyperref[def:well_founded_relation]{well-founded}.

  In the terminology if graph theory, this well-foundedness means that, for every vertex \( v \), there exists no infinite \hyperref[def:graph_walk/path]{path} that ends with \( v \).

  This implies, in particular, that the graph is \hyperref[def:acyclic_graph]{acyclic}. For finite graphs the converse holds, but an infinite graph this is not so. For example, the chain \eqref{eq:ex:infinite_integer_graphs/positive} is acyclic but not well-founded.
\end{example}

\begin{proposition}\label{thm:graph_condensation_is_acyclic_dag}
  The \hyperref[def:directed_graph_condensation]{condensation} of a directed multigraph is a \hyperref[def:acyclic_graph]{directed acyclic graph}.
\end{proposition}
\begin{proof}
  Let \( \widetilde{G} = (\widetilde{V}, \widetilde{E}) \) be the condensation of the directed multigraph \( Q = (V, A, h, t) \). It is, by definition, a simple directed graph. It remains to show that it is acyclic.

  Aiming at a contradiction, suppose that there exists a cycle
  \begin{equation}\label{eq:thm:graph_condensation_is_acyclic_dag/cycle}
    [v_0] \to [v_1] \to \cdots \to [v_{n-1}] \to [v_n].
  \end{equation}

  Thus, there exists a path from \( v_0 \) to \( v_1 \), another path from \( v_1 \) to \( v_2 \), etc. We can \hyperref[def:graph_walk/concatenation]{concatenate} them to obtain a path from \( v_0 \) to \( v_n \).

  But since \eqref{eq:thm:graph_condensation_is_acyclic_dag/cycle} is a cycle, there also exists a path from \( v_n \) to \( v_0 \).

  Thus, the vertices \( v_0 \) and \( v_n \) are reachable from each other, implying that they should belong to the same strongly connected component. The obtained contradiction shows that \( \widetilde{G} \) should be acyclic.
\end{proof}
