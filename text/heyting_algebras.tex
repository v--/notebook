\section{Heyting algebras}\label{sec:heyting_algebras}

\paragraph{Relatively pseudocomplement ideals}

Our purpose here is to study lattice ideals which we will use to define \hyperref[def:heyting_algebra]{relative pseudocomplements}.

\begin{proposition}\label{thm:relative_pseudocomplement_set_is_ideal}
  In any \hyperref[def:lattice]{lattice} \( X \), for any two elements \( x \) and \( y \), the following set is nonempty and \hyperref[def:closed_ordered_subset]{downward closed}:
  \begin{equation*}
    H_{x,y} \coloneqq \set{ c \in X \given x \wedge c \leq y }.
  \end{equation*}

  If \( X \) is \hyperref[def:distributive_lattice]{distributive}, then \( H_{x,y} \) is \hyperref[def:directed_set]{directed from above} and hence a \hyperref[def:lattice_ideal]{lattice ideal}.
\end{proposition}
\begin{proof}
  The set \( H_{x,y} \) is nonempty --- it contains \( y \) because \( x \wedge y \leq y \). Furthermore, if \( a \) belongs to \( H_{x,y} \) and \( b \leq a \), then \( x \wedge b \leq x \wedge a \leq y \), thus \( b \) also belongs to \( H_{x,y} \).

  If \( X \) is distributive and if \( a \) and \( b \) belong to \( H_{x,y} \), then
  \begin{equation*}
    x \wedge (a \vee b)
    \reloset {\eqref{eq:def:distributive_lattice/meet_over_join}} =
    (x \wedge a) \vee (x \wedge b)
    \reloset {\ref{thm:def:lattice/operations_preserve_order}} \leq
    y \vee y
    =
    y,
  \end{equation*}
  hence their least upper bound \( a \vee b \) is also in \( H_{x,y} \).
\end{proof}

\begin{example}\label{ex:heyting_conditional_ideal}
  We list several examples related to \cref{thm:relative_pseudocomplement_set_is_ideal}.

  \begin{thmenum}
    \thmitem{ex:heyting_conditional_ideal/pentagon} Without the assumption of distributivity, \cref{thm:relative_pseudocomplement_set_is_ideal} may not hold. Indeed, consider the pentagon lattice \eqref{eq:ex:def:modular_lattice/pentagon}. We have
    \begin{equation*}
      H_{a,b} = \set{ \bot, b, c },
    \end{equation*}
    but
    \begin{equation*}
      a \wedge (b \vee c) = a \wedge \top = a
    \end{equation*}
    is not in \( H_{a,b} \).

    Nevertheless, \( H_{b,c} = \set{ \bot, c } \) is an ideal --- in fact, the principal ideal of \( c \).

    \thmitem{ex:heyting_conditional_ideal/diamond} Consider the diamond lattice \eqref{eq:ex:def:distributive_lattice/diamond}. We have
    \begin{equation*}
      H_{a,c} = \set{ \bot, b, c }
    \end{equation*}
    but, again,
    \begin{equation*}
      a \wedge (b \vee c) = a \wedge \top = a,
    \end{equation*}
    so \( H_{a,c} \) is also not an ideal.

    \thmitem{ex:heyting_conditional_ideal/nonprincipal_ideal} Adjoin to the \hyperref[def:ordinal]{ordinal} \( \omega + 1 \) an auxiliary element \( a \) that is comparable only to the bottom \( 0 \) and the top \( \omega \). The following is a fragment of the Hasse diagram of \( \omega \cup \set{ a } \):
    \begin{equation*}
      \includegraphics[page=2]{output/ex__heyting_conditional_ideal}
    \end{equation*}

    It is a distributive lattice as a consequence of \cref{thm:distributive_lattice_characterization}.

    We have \( H_{a,0} = \omega \), which is an ideal of \( \omega \cup \set{ a } \). It is not, however, a principal ideal, because it contains no greatest element.

    On the other hand, the ideal \( H_{\omega,a} = \set{ 0, a } \) is principal.
  \end{thmenum}
\end{example}

\begin{proposition}\label{thm:relative_pseudocomplement_set}
  For every two \hyperref[def:lattice]{lattice} elements \( x \) and \( y \), the following are equivalent for a third element \( z \):
  \begin{thmenum}
    \thmitem{thm:relative_pseudocomplement_set/iff} We have \( c \leq z \) if and only if \( x \wedge c \leq y \).
    \thmitem{thm:relative_pseudocomplement_set/greatest} We have \( x \wedge z \leq y \) and \( z \) is the greatest among all such elements.
    \thmitem{thm:relative_pseudocomplement_set/ideal} The set\fnote{We have not required the lattice to be distributive, hence \( H_{x,y} \) may fail to be an ideal in general.} \( H_{x,y} \) from \cref{thm:relative_pseudocomplement_set_is_ideal} is a \hyperref[def:lattice_ideal/principal]{principal ideal} generated by \( z \).
  \end{thmenum}
\end{proposition}
\begin{comments}
  \item In particular, if \( z \) exists, it is unique.
\end{comments}
\begin{proof}
  \ImplicationSubProof{thm:relative_pseudocomplement_set/iff}{thm:relative_pseudocomplement_set/greatest} If \( c \) is an element such that \( x \wedge c \leq y \), by assumption \( c \leq z \). Then \( z \) is the greatest among all such elements.

  \ImplicationSubProof{thm:relative_pseudocomplement_set/greatest}{thm:relative_pseudocomplement_set/ideal} Trivial.

  \ImplicationSubProof{thm:relative_pseudocomplement_set/ideal}{thm:relative_pseudocomplement_set/iff} If \( c \leq z \), then \( c \) is in \( H_{x,y} \) and hence \( x \wedge c \leq y \). Conversely, if \( x \wedge c \leq y \), then \( c \) is in \( H_{x,y} \) and thus \( c \leq z \).
\end{proof}

\paragraph{Heyting algebras}

\begin{definition}\label{def:heyting_algebra}\mcite[331]{PicadoPultr2012FramesAndLocales}
  A \term{Heyting algebra} is a \hyperref[def:bounded_lattice]{bounded lattice} \( X \) with an additional \hyperref[def:binary_operation]{binary operation} \( {\rightarrow} \), which we call a \term{relative pseudocomplement} in accordance to \cite[51]{Birkhoff1967LatticeTheory}, such that any of the following equivalent conditions hold:
  \begin{thmenum}[series=def:heyting_algebra]
    \thmitem{def:heyting_algebra/ideal} The element \( x \rightarrow y \) satisfies the equivalent conditions in \cref{thm:relative_pseudocomplement_set}.

    \thmitem{def:heyting_algebra/axioms} The following first-order axioms hold:
    \begin{thmenum}
      \thmitem{def:heyting_algebra/axioms/self} The following adaptation of \cref{thm:intuitionistic_tautologies/self}:
      \begin{equation}\label{eq:def:heyting_algebra/axioms/self}
        \mathllap{\synx \rightarrow \synx} \syneq \mathrlap{\top.}
      \end{equation}

      \thmitem{def:heyting_algebra/axioms/modus_ponens} The following variation of \ref{inf:def:axiomatic_derivation_as_natural_deduction/mp}:
      \begin{equation}\label{eq:def:heyting_algebra/axioms/modus_ponens}
        \mathllap{\synx \wedge (\synx \rightarrow \syny)} \syneq \mathrlap{\synx \wedge \syny.}
      \end{equation}

      \thmitem{def:heyting_algebra/axioms/modular} The following consequence of the modular identity \eqref{eq:def:modular_lattice}\fnote
        {
          If \( \varphi \) and \( \psi \) are \hyperref[def:propositional_formula]{propositional formulas}, then
          \begin{equation*}
            \varphi \synwedge (\psi \synimplies \varphi)
            \reloset {\eqref{eq:thm:classical_equivalences/conditional_as_disjunction}} \gleichstark
            \varphi \synwedge (\synneg \psi \synvee \varphi)
            \reloset {\eqref{eq:def:modular_lattice}} \gleichstark
            (\varphi \synwedge \synneg \psi) \synvee \varphi
            \gleichstark
            \varphi.
          \end{equation*}
        }:
      \begin{equation}\label{eq:def:heyting_algebra/axioms/modular}
        \mathllap{\syny \wedge (\synx \rightarrow \syny)} \syneq \mathrlap{\syny.}
      \end{equation}

      \thmitem{def:heyting_algebra/axioms/distributive} Distributivity of the relative pseudocomplement over conjunction:
      \begin{equation}\label{eq:def:heyting_algebra/axioms/distributive}
        \mathllap{\synx \rightarrow (\syny \wedge \synz)} \syneq \mathrlap{(\synx \rightarrow \syny) \wedge (\synx \rightarrow \synz).}
      \end{equation}
    \end{thmenum}
  \end{thmenum}

  Heyting algebras also have the following additional structure:
  \begin{thmenum}[resume=def:heyting_algebra]
    \thmitem{def:heyting_algebra/pseudocomplement} A unary operation \( {\oline {\anon}} \), which we call the \term{pseudocomplement}, for which the following axiom holds:
    \begin{equation}\label{eq:def:heyting_algebra/pseudocomplement}
      \oline \synx \syneq \synx \rightarrow \bot.
    \end{equation}

    \thmitem{def:heyting_algebra/biconditional}\mimprovised For the sake of formalizing semantics for \hyperref[def:propositional_alphabet/connectives/biconditional]{biconditionals}, following \incite[33]{HalmosGivant2009BooleanAlgebras}, we adapt from propositional logic to lattices the following operation:
    \begin{equation}\label{eq:def:heyting_algebra/biconditional}
      \synx \leftrightarrow \syny \syneq (\synx \rightarrow \syny) \wedge (\syny \rightarrow \synx).
    \end{equation}
  \end{thmenum}

  Heyting algebras have the following metamathematical properties:
  \begin{thmenum}[resume=def:heyting_algebra]
    \thmitem{def:heyting_algebra/theory} We extend the \hyperref[def:lattice/theory]{first-order theory of lattices} by adding:
    \begin{itemize}
      \item The nullary functional symbols \( \top \) and \( \bot \) along with the axioms \eqref{eq:def:bounded_lattice/theory/top} and \eqref{eq:def:bounded_lattice/theory/bot}.

      \item The infix binary functional symbols \( \rightarrow \) along with the axioms \eqref{eq:def:heyting_algebra/axioms/self}, \eqref{eq:def:heyting_algebra/axioms/modus_ponens}, \eqref{eq:def:heyting_algebra/axioms/modular} and \eqref{eq:def:heyting_algebra/axioms/distributive}.

      \item The auxiliary binary functional symbol \( \leftrightarrow \) along with the axiom \eqref{eq:def:heyting_algebra/biconditional}.

      \item The unary functional symbol \( {\oline {\anon}} \) along with the axiom \eqref{eq:def:heyting_algebra/pseudocomplement}.
    \end{itemize}

    \thmitem{def:heyting_algebra/submodel} In addition to containing the joins and meets of all its members, a \hyperref[def:first_order_submodel]{first-order submodel} of a Heyting algebra must also contain the top, bottom and be closed with respect to the relative pseudocomplement\fnote{It follows from \eqref{eq:def:heyting_algebra/pseudocomplement} that if a Heyting subalgebra is closed under relative pseudocomplements and it contains the bottom element, then it is also closed under pseudocomplements.}. We call such submodels \term{Heyting subalgebras}.

    \thmitem{def:heyting_algebra/homomorphism} A function \( f: X \to Y \) between Heyting algebras is a \hyperref[def:fol_homomorphism]{first-order homomorphisms} if it is a \hyperref[def:lattice/homomorphism]{lattice homomorphism} that additionally satisfies
    \begin{align}\label{eq:def:heyting_algebra/homomorphism/top_bottom}
      f(\top) = \top
      &&
      f(\bot) = \bot
    \end{align}
    and
    \begin{equation}\label{eq:def:heyting_algebra/homomorphism/operation}
      f(x_1 \rightarrow x_2) = f(x_1) \rightarrow f(x_2).
    \end{equation}

    \thmitem{def:heyting_algebra/opposite} The \hyperref[def:lattice/opposite]{dual lattice} \( X^\oppos \) of a Heyting algebra may not be a Heyting algebra.

    \thmitem{def:heyting_algebra/category} We denote the \hyperref[def:category_of_small_first_order_models]{category of \( \mscrU \)-small models} for Heyting algebras by \( \cat{Heyt} \). It is a subcategory of the \hyperref[def:lattice/category]{category \( \cat{Lat} \) of lattices}.
  \end{thmenum}
\end{definition}
\begin{comments}
  \item What we call a Heyting algebra is called a \enquote{Brouwerian lattice} by \incite[147]{Birkhoff1967LatticeTheory} and a \enquote{browerian algebra} \incite[7]{Golan1999Semirings}. The latter uses \enquote{Heyting algebras} for what we call a \hyperref[def:complete_lattice]{complete} Heyting algebra.
\end{comments}
\begin{defproof}
  \ImplicationSubProof{def:heyting_algebra/ideal}{def:heyting_algebra/axioms} Suppose that, for any elements \( x \) and \( y \), we have
  \begin{equation}\label{eq:def:heyting_algebra/proof/iff}
    c \leq (x \rightarrow y) \T{if and only if} x \wedge c \leq y.
  \end{equation}

  \SubProofOf*{def:heyting_algebra/axioms/self} Clearly \( x \wedge \top = x \), thus \( \top \leq (x \rightarrow x) \) and hence \( x \rightarrow x \) is the top element.

  \SubProofOf*{def:heyting_algebra/axioms/modus_ponens} \eqref{eq:def:heyting_algebra/proof/iff} implies
  \begin{equation*}
    x \wedge (x \rightarrow y) \leq y.
  \end{equation*}

  Then, since \( x \wedge \anon \) preserves order,
  \begin{equation*}
    \underbrace{x \wedge (x \wedge (x \rightarrow y))}_{x \wedge (x \rightarrow y)} \leq x \wedge y.
  \end{equation*}

  Conversely, since \( x \wedge y \leq y \), \eqref{eq:def:heyting_algebra/proof/iff} implies that \( y \leq (x \rightarrow y) \). Hence,
  \begin{equation*}
    x \wedge y \leq x \wedge (x \rightarrow y).
  \end{equation*}

  Then \eqref{eq:def:heyting_algebra/axioms/modus_ponens} follows.

  \SubProofOf*{def:heyting_algebra/axioms/modular} Since \( y \leq (x \rightarrow y) \), obviously
  \begin{equation*}
    y \wedge (x \rightarrow y) = y.
  \end{equation*}

  \SubProofOf*{def:heyting_algebra/axioms/distributive} \eqref{eq:def:heyting_algebra/proof/iff} implies
  \begin{equation*}
    x \wedge (x \rightarrow y) \leq y
  \end{equation*}
  and similarly
  \begin{equation*}
    x \wedge (x \rightarrow z) \leq z.
  \end{equation*}

  Then \cref{thm:def:lattice/operations_preserve_order} implies that
  \begin{equation*}
    x \wedge \parens[\big]{ (x \rightarrow y) \wedge (x \rightarrow z) } \leq y \wedge z.
  \end{equation*}

  Hence,
  \begin{equation}\label{eq:def:heyting_algebra/proof/distributive_backward}
    (x \rightarrow y) \wedge (x \rightarrow z) \leq x \rightarrow (y \wedge z).
  \end{equation}

  Conversely, we have
  \begin{equation*}
    x \wedge (x \rightarrow (y \wedge z)) \leq y \wedge z \leq y,
  \end{equation*}
  thus
  \begin{equation*}
    x \rightarrow (y \wedge z) \leq (x \rightarrow y)
  \end{equation*}
  and similarly
  \begin{equation*}
    x \rightarrow (y \wedge z) \leq (x \rightarrow z).
  \end{equation*}

  Therefore,
  \begin{equation}\label{eq:def:heyting_algebra/proof/distributive_forward}
    x \rightarrow (y \wedge z) \leq (x \rightarrow y) \wedge (x \rightarrow z).
  \end{equation}

  Combining \eqref{eq:def:heyting_algebra/proof/distributive_backward} and \eqref{eq:def:heyting_algebra/proof/distributive_forward}, we obtain \eqref{eq:def:heyting_algebra/axioms/distributive}.

  \ImplicationSubProof{def:heyting_algebra/axioms}{def:heyting_algebra/ideal} Suppose that the axioms from \cref{def:heyting_algebra/axioms} hold.

  First let \( c \leq (x \rightarrow y) \). \Cref{thm:def:lattice/operations_preserve_order} implies that
  \begin{equation*}
    x \wedge c
    \leq
    x \wedge (x \rightarrow y)
    \reloset {\eqref{eq:def:heyting_algebra/axioms/modus_ponens}} =
    x \wedge y
    \leq
    y.
  \end{equation*}

  Conversely, if \( x \wedge c \leq y \), we have
  \begin{equation*}
    c
    \reloset {\eqref{eq:def:heyting_algebra/axioms/modular}} =
    c \wedge (x \rightarrow c)
    \leq
    \top \wedge (x \rightarrow c)
    \reloset {\eqref{eq:def:heyting_algebra/axioms/self}} =
    (x \rightarrow x) \wedge (x \rightarrow c)
    \reloset {\eqref{eq:def:heyting_algebra/axioms/distributive}} =
    x \rightarrow (\underbrace{x \wedge c}_{\leq y})
    \leq
    x \rightarrow y.
  \end{equation*}
\end{defproof}

\begin{proposition}\label{thm:def:heyting_algebra}
  \hyperref[def:heyting_algebra]{Heyting algebras} have the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:heyting_algebra/distributive} Every Heyting algebra is a \hyperref[def:distributive_lattice]{distributive lattice}.
    \thmitem{thm:def:heyting_algebra/totally_ordered} Every \hyperref[def:extremal_points/bounds]{bounded from above} \hyperref[def:totally_ordered_set]{totally ordered set} is a Heyting algebra with relative pseudocomplement
    \begin{equation}\label{eq:thm:def:heyting_algebra/totally}
      (x \rightarrow y) \coloneqq \begin{cases}
        \top, &x \leq y \\
        y,    &x > y.
      \end{cases}
    \end{equation}

    \thmitem{thm:def:heyting_algebra/leq} The inequality \( x \leq y \) holds if and only if \( x \rightarrow y = \top \).
    \thmitem{thm:def:heyting_algebra/eq} The equality \( x = y \) holds if and only if \( x \leftrightarrow y = \top \).
    \thmitem{thm:def:heyting_algebra/leq_right} We always have \( y \leq (x \rightarrow y) \).
    \thmitem{thm:def:heyting_algebra/semicomplement} We always have \( x \wedge \oline{x} = \bot \).
    \thmitem{thm:def:heyting_algebra/top_right} We always have \( x \rightarrow \top = \top \).
    \thmitem{thm:def:heyting_algebra/top_left} We can \enquote{eliminate} the top element: \( \top \rightarrow x = x \).
    \thmitem{thm:def:heyting_algebra/extrema_pseudocomplement} We have \( \oline{\bot} = \top \) and \( \oline{\top} = \bot \).
    \thmitem{thm:def:heyting_algebra/add_antecedent} If \( x \leq y \), then, for any \( z \), we have \( z \rightarrow x \leq z \rightarrow y \).
    \thmitem{thm:def:heyting_algebra/add_consequent} If \( x \leq y \), then, for any \( z \), we have \( y \rightarrow z \leq x \rightarrow z \).
    \thmitem{thm:def:heyting_algebra/dist} We always have \( x \rightarrow (y \rightarrow z) \leq (x \rightarrow y) \rightarrow (x \rightarrow z) \).
    \thmitem{thm:def:heyting_algebra/dni} We have \( x \leq \doline{x} \)
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:heyting_algebra/distributive} \Cref{ex:heyting_conditional_ideal/pentagon} implies that the pentagon lattice \eqref{eq:ex:def:modular_lattice/pentagon} is not a Heyting algebra, and \cref{ex:heyting_conditional_ideal/diamond} implies that the diamond lattice \eqref{eq:ex:def:distributive_lattice/diamond} is not a Heyting algebra. Therefore, no Heyting algebra contains as a sublattice either \( N_5 \) or \( M_3 \).

  Then \cref{thm:distributive_lattice_characterization} implies that Heyting algebras are distributive.

  \SubProofOf{thm:def:heyting_algebra/totally_ordered} We have
  \begin{equation*}
    (x \rightarrow y)
    =
    \bigvee\set{ z \given x \wedge z \leq y }
    =
    \sup\set{ z \given \min\set{ x, z } \leq y }
    =
    \begin{cases}
      \top, &x \leq y \\
      y,    &x > y.
    \end{cases}
  \end{equation*}

  \SubProofOf{thm:def:heyting_algebra/leq}

  \SufficiencySubProof* Suppose that \( x \leq y \) holds. Then \( x = (x \wedge \top) \leq y \), hence \( \top \in H_{x,y} \), and thus \( x \rightarrow y = \top \).

  \NecessitySubProof* Suppose that \( x \rightarrow y = \top \) holds. Then \( x \wedge \top \leq y \). Furthermore, \eqref{eq:def:bounded_lattice/theory/top} implies that \( x \wedge \top = x \), so \( x \leq y \).

  \SubProofOf{thm:def:heyting_algebra/eq} We have, by definition,
  \begin{equation*}
    (x \leftrightarrow y) = (x \rightarrow y) \wedge (y \rightarrow x),
  \end{equation*}
  which equals \( \top \) if and only if \( (x \rightarrow y) = (y \rightarrow x) = T \). \Fullref{thm:def:heyting_algebra/leq} implies that the latter is equivalent to \( x \leq y \) and \( y \leq x \), which is equivalent to \( x = y \) due to antisymmetry.

  \SubProofOf{thm:def:heyting_algebra/leq_right} Clearly \( y \in H_{x,y} \) because \( x \wedge y \leq y \).

  \SubProofOf{thm:def:heyting_algebra/semicomplement}
  \begin{equation*}
    x \wedge \oline{x}
    =
    x \wedge (x \rightarrow \bot)
    \reloset {\eqref{eq:def:heyting_algebra/axioms/modus_ponens}} =
    x \wedge \bot
    =
    \bot.
  \end{equation*}

  \SubProofOf{thm:def:heyting_algebra/top_right} \Cref{thm:def:heyting_algebra/leq_right} implies that \( \top \leq (x \rightarrow \top) \).

  \SubProofOf{thm:def:heyting_algebra/top_left} Follows from \cref{thm:def:heyting_algebra/leq}.

  \SubProofOf{thm:def:heyting_algebra/extrema_pseudocomplement} We have
  \begin{equation*}
    \oline{\bot}
    =
    \bot \rightarrow \bot
    \reloset {\eqref{eq:def:heyting_algebra/axioms/self}} =
    \top
  \end{equation*}
  and
  \begin{equation*}
    \oline{\top}
    =
    \top \rightarrow \bot
    \reloset {\ref{thm:def:heyting_algebra/top_left}} =
    \bot
  \end{equation*}

  \SubProofOf{thm:def:heyting_algebra/add_antecedent} Suppose that \( x \leq y \). Then \( z \rightarrow y \) is in \( H_{z,x} \) because
  \begin{equation*}
    z \wedge (z \rightarrow x)
    \reloset {\eqref{eq:def:heyting_algebra/axioms/modus_ponens}} =
    z \wedge x
    \reloset {\ref{thm:def:lattice/operations_preserve_order}} \leq
    z \wedge y
    \leq
    y.
  \end{equation*}

  Therefore, \( (z \rightarrow x) \leq (z \rightarrow y) \).

  \SubProofOf{thm:def:heyting_algebra/add_consequent} Suppose that \( x \leq y \). Then \( y \rightarrow z \) is in \( H_{x,z} \) because
  \begin{equation*}
    x \wedge (y \rightarrow z)
    \reloset {\ref{thm:def:lattice/operations_preserve_order}} \leq
    y \wedge (y \rightarrow z)
    \reloset {\eqref{eq:def:heyting_algebra/axioms/modus_ponens}} =
    y \wedge z
    \leq
    z.
  \end{equation*}

  Therefore, \( (y \rightarrow z) \leq (x \rightarrow z) \).

  \SubProofOf{thm:def:heyting_algebra/dist} The set \( H_{(x \rightarrow y),(x \rightarrow z)} \) contains \( x \rightarrow (y \rightarrow z) \) because
  \begin{equation*}
    (x \rightarrow y) \wedge (x \rightarrow (y \rightarrow z))
    \reloset {\eqref{eq:def:heyting_algebra/axioms/distributive}} =
    x \rightarrow (y \wedge (y \rightarrow z))
    \reloset {\eqref{eq:def:heyting_algebra/axioms/modus_ponens}} =
    x \rightarrow (y \wedge z)
    \reloset {\ref{thm:def:heyting_algebra/add_consequent}} \leq
    x \rightarrow z.
  \end{equation*}

  \SubProofOf{thm:def:heyting_algebra/dni} Clearly
  \begin{equation*}
    \bot \leq (x \rightarrow \doline{x}),
  \end{equation*}
  and \cref{thm:def:heyting_algebra/leq} implies that
  \begin{equation*}
    \bot \rightarrow (x \rightarrow \doline{x}) = \top.
  \end{equation*}

  \Cref{thm:def:heyting_algebra/dist} implies that
  \begin{equation*}
    \underbrace{\bot \rightarrow (x \rightarrow \doline{x})}_\top \leq \parens[\big]{ \underbrace{(\bot \rightarrow x)}_\top \rightarrow (x \rightarrow \doline{x}) }.
  \end{equation*}

  \Cref{thm:def:heyting_algebra/top_left} allows us to conclude that
  \begin{equation*}
    x \rightarrow \doline{x} = \top,
  \end{equation*}
  from which we can deduce via \cref{thm:def:heyting_algebra/leq} that
  \begin{equation*}
    x \leq \doline{x}.
  \end{equation*}
\end{proof}

\begin{proposition}\label{thm:complete_heyting_algebra}
  A \hyperref[def:complete_lattice]{complete lattice} is a \hyperref[def:heyting_algebra]{Heyting algebra} if and only if the following infinite distributive law holds:
  \begin{equation}\label{eq:thm:complete_heyting_algebra/infinite_distributive}
    \parens*{ \bigvee_{k \in \mscrK} x_k } \wedge y = \bigvee_{k \in \mscrK} (x_k \wedge y).
  \end{equation}

  Furthermore,
  \begin{equation}\label{eq:thm:complete_heyting_algebra/relative_pseudocomplement}
    (x \rightarrow y) = \bigvee\set{ c \in X \given x \wedge c \leq y }.
  \end{equation}
\end{proposition}
\begin{proof}
  Fix a complete lattice \( X \).

  \SufficiencySubProof Suppose that \( X \) is a Heyting algebra, i.e. there exists a relative pseudocomplement satisfying the equivalent conditions from \cref{thm:relative_pseudocomplement_set}.

  Fix some element \( y \) and an arbitrary indexed family \( \seq{ x_k }_{k \in \mscrK} \) from \( X \). Then, for every \( a \) in \( X \),
  \begin{equation}\label{eq:thm:complete_heyting_algebra/proof/first}
    y \wedge \parens*{ \bigvee_{k \in \mscrK} x_k } \leq a
  \end{equation}
  if and only if
  \begin{equation*}
    \bigvee_{k \in \mscrK} x_k \leq (y \rightarrow a).
  \end{equation*}

  The latter can be expressed componentwise: for every \( k \in \mscrK \), we must have
  \begin{equation*}
    x_k \leq (y \rightarrow a)
  \end{equation*}
  which is equivalent to
  \begin{equation}\label{eq:thm:complete_heyting_algebra/proof/last}
    y \wedge x_k \leq a.
  \end{equation}

  The smallest element \( a \) satisfying \eqref{eq:thm:complete_heyting_algebra/proof/last} is, by definition of supremum,
  \begin{equation*}
    a = \bigvee_{k \in \mscrK} (y \wedge x_k).
  \end{equation*}

  This element then satisfies \eqref{eq:thm:complete_heyting_algebra/proof/first}:
  \begin{equation*}
    y \wedge \parens*{ \bigvee_{k \in \mscrK} x_k } \leq \bigvee_{k \in \mscrK} (y \wedge x_k).
  \end{equation*}

  The converse inequality follows from \cref{thm:def:complete_lattice/distributive_inequality}.

  \NecessitySubProof Suppose that \eqref{eq:thm:complete_heyting_algebra/infinite_distributive} holds in a complete lattice. Consider the definition \eqref{eq:thm:complete_heyting_algebra/relative_pseudocomplement}:
  \begin{equation*}
    (x \rightarrow y) \coloneqq \bigvee\set{ c \in X \given x \wedge c \leq y }.
  \end{equation*}

  We will show that it satisfies \cref{thm:relative_pseudocomplement_set/iff}. One direction is obvious: \( x \wedge a \leq y \) implies \( a \leq (x \rightarrow y) \) by definition of \( x \rightarrow y \). Conversely, for an arbitrary element \( a \) such that \( a \leq (x \rightarrow y) \), we have
  \begin{equation*}
    x \wedge a
    \leq
    x \wedge (x \rightarrow y)
    =
    x \wedge \bigvee\set{ c \in X \given x \wedge c \leq y }
    \reloset {\eqref{eq:thm:complete_heyting_algebra/infinite_distributive}} =
    \bigvee\set{ x \wedge c \given x \wedge c \leq y }
    =
    y.
  \end{equation*}

  Generalizing on \( x \) and \( y \), we conclude that \( {\rightarrow} \) is indeed a relative pseudocomplement and thus \( X \) is a Heyting algebra.
\end{proof}

\begin{example}\label{ex:def:heyting_algebra}
  We list examples of \hyperref[def:heyting_algebra]{Heyting algebras}:
  \begin{thmenum}
    \thmitem{ex:def:heyting_algebra/three_valued} Consider the ternary Heyting algebra with values \( \sembot < \mathbfsf{N} < \semtop \). We can regard \( \semtop \) and \( \sembot \) as \hyperref[def:truth_value_algebra]{Boolean values} and \( \mathbfsf{N} \) as some \enquote{intermediate} truth value.

    The relative pseudocomplement \( x \rightarrow y \) can be described via the \hyperref[def:cayley_table]{Cayley table}
    \begin{equation*}
      \begin{array}{c !{\quad} *{3}{c}}
        \toprule
        x \rightarrow y & \multicolumn{3}{c}{y} \\
        \cmidrule{2-4}
        x               & \sembot & \mathbfsf{N} & \semtop \\
        \midrule
        \sembot         & \semtop & \semtop      & \semtop \\
        \mathbfsf{N}    & \sembot & \semtop      & \semtop \\
        \semtop         & \sembot & \mathbfsf{N} & \semtop \\
        \bottomrule
      \end{array}
    \end{equation*}

    \begin{itemize}
      \item On and above the main diagonal all values are \( \semtop \) due to \Cref{thm:def:heyting_algebra/leq}.
      \item The bottom row is due to \Cref{thm:def:heyting_algebra/top_left}.
      \item It remains to determine \( \mathbfsf{N} \rightarrow \sembot \): we have \( \mathbfsf{N} \wedge x \leq \sembot \) if and only if \( x = \sembot \).
    \end{itemize}

    If \( \mathbfsf{N} \rightarrow \sembot \) is \( \mathbfsf{N} \) instead, we obtain Åukasiewicz's three valued logic, described in \cite[\S 3.2.2]{CitkinMuravitsky2022ConsequenceRelations}. This is however no longer a Heyting algebra.

    \thmitem{ex:def:heyting_algebra/lindenbaum_tarski} As shown in \cref{thm:lindenbaum_tarski_algebras}, every \hyperref[def:lindenbaum_tarski_algebra]{Lindenbaum-Tarski algebra} for the \hyperref[def:propositional_natural_deduction_systems]{intuitionistic propositional deduction system} is a Heyting algebra.

    \thmitem{ex:def:heyting_algebra/topology} As shown in \cref{thm:topology_is_heyting_algebra}, the topology \( \mscrT \) of a \hyperref[def:topological_space]{topological space} \( (X, \mscrT) \) is a complete Heyting algebra. This can be used for topological propositional semantics defined in \cref{def:truth_value_algebra/topological}.

    \thmitem{ex:def:heyting_algebra/totally_ordered} \Cref{thm:def:complete_lattice/closed_interval} implies that any \hyperref[def:order_interval/closed]{closed interval} \( [a, b] \) of \hyperref[def:real_numbers]{real numbers} is a \hyperref[def:complete_lattice]{complete lattice}.

    \Cref{thm:def:heyting_algebra/totally_ordered} implies that this interval is a Heyting algebra with relative pseudocomplement
    \begin{equation*}
      (x \rightarrow y) = \begin{cases}
        b, &x \leq y, \\
        y, &x > y.
      \end{cases}
    \end{equation*}

    The corresponding pseudocomplement is
    \begin{equation*}
      \oline{x}
      =
      x \rightarrow a
      =
      \begin{cases}
        b, &x = a, \\
        a, &x > a.
      \end{cases}
    \end{equation*}
  \end{thmenum}
\end{example}

\begin{theorem}[De Morgan's laws for Heyting algebras]\label{thm:de_morgans_laws_for_heyting_algebras}
  In a \hyperref[def:heyting_algebra]{Heyting algebra}, the following hold for any finite family \( \set{ x_k }_{k \in \mscrK} \):
  \begin{align}
    \oline{\bigvee_{k \in \mscrK} x_k}   &=    \bigwedge_{k \in \mscrK} \oline{x_k}, \label{eq:thm:de_morgans_laws_for_heyting_algebras/complement_of_join} \\
    \oline{\bigwedge_{k \in \mscrK} x_k} &\geq \bigvee_{k \in \mscrK} \oline{x_k}.   \label{eq:thm:de_morgans_laws_for_heyting_algebras/complement_of_meet}
  \end{align}

  If the algebra is a \hyperref[def:complete_lattice]{complete lattice}, \( \mscrK \) can be any family, not necessarily finite.
\end{theorem}
\begin{comments}
  \item This is one of several variants of De Morgan's laws presented here --- see \cref{rem:de_morgans_laws/heyting}.
\end{comments}
\begin{proof}
  \SubProof{Proof that \( y \leq \bigwedge_{m \in \mscrK} \oline{x_m} \) if and only if \( \parens*{ \bigvee_{k \in \mscrK} x_k } \wedge y = \bot \)}

  \SufficiencySubProof* If \( y \leq \bigwedge_{m \in \mscrK} \oline{x_m} \), we have
  \begin{align*}
    y \wedge \parens*{ \bigvee_{k \in \mscrK} x_k }
    &\reloset {\ref{thm:def:lattice/operations_preserve_order}} \leq
    \parens*{ \bigwedge_{m \in \mscrK} \oline{x_m} } \wedge \parens*{ \bigvee_{k \in \mscrK} x_k }
    \reloset {\eqref{eq:thm:complete_heyting_algebra/infinite_distributive}} = \\ &=
    \bigvee_{k \in \mscrK} \parens*{ \parens*{ \bigwedge_{m \in \mscrK} x_m } \wedge x_k }
    = \\ &=
    \bigvee_{k \in \mscrK} \parens*{ \parens*{ \bigwedge_{m \neq k} x_m } \wedge \underbrace{\oline {x_k} \wedge x_k}_\bot }
    = \\ &=
    \bigvee_{k \in \mscrK} \bot
    = \\ &=
    \bot,
  \end{align*}
  where we have used \cref{thm:def:heyting_algebra/semicomplement} to conclude that \( x_k \wedge \oline {x_k} = \bot \).

  \NecessitySubProof* Conversely, suppose that \( \parens*{ \bigvee_{k \in \mscrK} x_k } \wedge y = \bot \). We have
  \begin{equation*}
    \parens*{ \bigvee_{k \in \mscrK} x_k } \wedge y
    \reloset {\eqref{eq:thm:def:complete_lattice/distributive_inequality/meet_over_join}} \geq
    \bigvee_{k \in \mscrK} (x_k \wedge y),
  \end{equation*}
  hence \( x_k \wedge y = \bot \) for every \( k \in \mscrK \). Then \( y \leq \oline{x_k} = (x_k \rightarrow \bot) \) for every \( k \in \mscrK \), implying that
  \begin{equation*}
    y \leq \bigwedge_{m \in \mscrK} \oline{x_m}.
  \end{equation*}

  \SubProof{Proof that \( \bigvee_{m \in \mscrK} \oline{x_m} \leq \oline{\bigwedge_{k \in \mscrK} x_k} \)} We have
  \begin{equation*}
    \parens*{ \bigvee_{m \in \mscrK} \oline{x_m} } \wedge \parens*{ \bigwedge_{k \in \mscrK} x_k }
    \reloset {\eqref{eq:thm:complete_heyting_algebra/infinite_distributive}} =
    \bigvee_{m \in \mscrK} \parens*{ \oline {x_m} \parens*{ \bigwedge_{m \in \mscrK} x_m } \wedge x_k }
    =
    \bigvee_{m \in \mscrK} \parens*{ \underbrace{\oline {x_m} \wedge x_m}_\bot \parens*{ \bigwedge_{m \neq k} x_m } }
    =
    \bot.
  \end{equation*}
\end{proof}

\begin{remark}\label{rem:de_morgans_laws}
  We prove in this monograph the following variation of De Morgan's laws:
  \begin{thmenum}
    \thmitem{rem:de_morgans_laws/heyting} \Fullref{thm:de_morgans_laws_for_heyting_algebras}.
    \thmitem{rem:de_morgans_laws/boolean} \Fullref{thm:de_morgans_laws}.
    \thmitem{rem:de_morgans_laws/sets} \Fullref{thm:de_morgans_laws_for_sets}.
    \thmitem{rem:de_morgans_laws/propositional} \Cref{thm:classical_equivalences/de_morgan} for \hyperref[def:propositional_formula]{propositional formulas}.
  \end{thmenum}
\end{remark}
