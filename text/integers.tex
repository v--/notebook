\section{Integers}\label{sec:integers}

\paragraph{Ring of integers}

\begin{definition}\label{def:integers}\mimprovised
  We define the \hyperref[def:ring]{ring} \( \BbbZ \) of \term[bg=цели числа (\cite[374]{ГеновМиховскиМоллов1991Алгебра}), ru=целые числа (\cite[def. 20.1]{АлександровМаркушевичХинчин1951ЭнциклопедияТом1})]{integers} as the \hyperref[thm:grothendieck_semiring_completion]{Grothendieck completion} of the \hyperref[def:semiring/commutative]{commutative semiring} \( \BbbN \) of zero-based \hyperref[def:natural_numbers]{natural numbers}.
\end{definition}
\begin{comments}
  \item We consider the following an indispensable part of \( \BbbZ \):
  \begin{itemize}
    \item The ordering defined in \fullref{def:integer_ordering}, which makes \( \BbbZ \) an \hyperref[def:ordered_semiring]{ordered (semi)ring}.
    \item The Euclidean domain structure discussed in \fullref{rem:integer_domain_chain}.
    \item The order topology discussed in \fullref{thm:order_topology_on_integers_is_discrete}.
  \end{itemize}
\end{comments}

\begin{proposition}\label{thm:integers_are_integral_domain}
  The ring of integers is \hyperref[def:entire_semiring]{entire}, i.e. an \hyperref[def:integral_domain]{integral domain}.
\end{proposition}
\begin{proof}
  Suppose that \( nm = 0 \).

  \begin{itemize}
    \item If \( n = \iota(a) \) and \( m = \iota(b) \), since \( \BbbN \) is entire and since \( \iota \) is a homomorphism, then \( nm = \iota(a) \cdot \iota(b) = \iota(ab) = \iota(0_\BbbN) \) implies that at least one of \( a \) or \( b \) is zero.
    \item If \( n = \iota(a) \) and \( m = -\iota(b) \), this reduces to the previous case since \( nm = 0 = n(-m) \).
    \item The other cases are similar.
  \end{itemize}

  Therefore, \( n = 0 \) or \( m = 0 \).
\end{proof}

\paragraph{Order of integers}

Rather than defining an order from first principles and then using the signum function from \fullref{def:totally_ordered_ring_signum} with its established properties, it will be more convenient for us to define the signum function, prove its properties, and then define the order itself.

\begin{lemma}\label{thm:integer_signum_lemma}
  Consider the canonical embedding \( \iota: \BbbN \to \BbbZ \). For every nonzero integer \( n \), there either exists a unique natural number \( a \) such that \( n = \iota(a) \), or a unique natural number \( a \) such that \( n = -\iota(a) \).
\end{lemma}
\begin{proof}
  \ExistenceSubProof Due to the trichotomy on natural numbers shown in \fullref{def:natural_numbers_ordering}, we have the following mutually exclusive possibilities:
  \begin{itemize}
    \item If \( a = b \), then \( x = [(a, a)] = [(0_\BbbN, 0_\BbbN)] \), hence \( x \) is zero.
    \item If \( a < b \), by \fullref{def:natural_numbers_ordering}, there exists some natural number \( c > 0 \) such that \( a + c = 0_\BbbN + b \). Then
    \begin{equation*}
      x = [(a, b)] = [(c, 0_\BbbN)] = \iota(c).
    \end{equation*}

    \item If \( a > b \), there exists some natural number \( d \) such that \( 0_\BbbN + a = b + d \). Then
    \begin{equation*}
      x = [(a, b)] = [(0_\BbbN, d)] = -[(d, 0_\BbbN)] = -\iota(d).
    \end{equation*}
  \end{itemize}

  \UniquenessSubProof If \( \iota(a) = \iota(b) \), then there exists some natural number \( u \) such that
  \begin{equation*}
     a + 0_\BbbN + u = 0_\BbbN + b + u.
  \end{equation*}

  By \fullref{thm:natural_number_addition_properties}, \( \BbbN \) is cancellative, so \( a = b \).

  \SubProof{Proof of exclusive conditions} Finally, suppose that \( n = \iota(a) = -\iota(b) \). Then \( a + b = 0_\BbbN \). Since \( \BbbN \) is \hyperref[def:zerosumfree]{zerosumfree} by \fullref{thm:natural_number_addition_properties}, it follows that \( a = b = 0_\BbbN \), and hence \( n \) is zero.

  Therefore, if \( n \) is nonzero, either \( n = \iota(a) \) for some \( a \) or \( n = -\iota(b) \) for some \( b \).
\end{proof}

\begin{definition}\label{def:integer_signum}\mimprovised
  Consider the canonical embedding \( \iota: \BbbN \to \BbbZ \). Define the \term{signum} function
  \begin{equation*}
    \begin{aligned}
      &\sgn: \BbbZ \to \BbbZ \\
      &\sgn(n) \coloneqq \begin{cases}
        0,  &n = \iota(0_\BbbN), \\
        1,  &n = \iota(a) \T{for some nonzero natural number} a, \\
        -1, &n = -\iota(a) \T{for some nonzero natural number} a.
      \end{cases}
    \end{aligned}
  \end{equation*}

  This is a well-defined \hyperref[def:set_valued_map/partial]{total function} due to \fullref{thm:integer_signum_lemma}.
\end{definition}
\begin{comments}
  \item We will later show that this matches the signum function on \( \BbbZ \) defined in \fullref{def:totally_ordered_ring_signum}.
\end{comments}

\begin{proposition}\label{thm:def:integer_signum}
  \hyperref[def:integer_signum]{Integer signs} have the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:integer_signum/sum} If two integers have the same sign, their sum also has the same sign.

    This is an analog of \fullref{thm:def:ordered_semiring/sum}.

    \thmitem{thm:def:integer_signum/product} \( \sgn(nm) = \sgn(n) \cdot \sgn(m) \).

    This is an analog of \fullref{thm:def:totally_ordered_ring_signum}.

    \thmitem{thm:def:integer_signum/inverse} \( \sgn(-n) = -\sgn(n) \).

    This is an analog of \fullref{thm:ordered_ring_inversion}.
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:integer_signum/sum} Fix two integers \( n \) and \( m \).

  \begin{itemize}
    \item If \( n \) and \( m \) are both zero, their sum is also zero.
    \item If \( n = \iota(a) \) and \( m = \iota(b) \), then \( n + m = \iota(a + b) \), so \( \sgn(n + m) \) is also \( 1 \).
    \item If \( n = -\iota(a) \) and \( m = -\iota(b) \) are both negative, then \( n + m = -\iota(a + b) \), so \( \sgn(n + m) \) is also \( -1 \).
  \end{itemize}

  \SubProofOf{thm:def:integer_signum/product} Fix two integers \( n \) and \( m \).

  \begin{itemize}
    \item If either \( n \) or \( m \) is zero, the product \( nm \) is again zero, so
    \begin{equation*}
      \sgn(nm) = \sgn(n) \cdot \sgn(m) = 0.
    \end{equation*}

    \item If \( n = \iota(a) \) and \( m = \iota(b) \) are both nonzero, then \( nm = \iota(ab) \) and \( \sgn(nm) \geq 0 \). Furthermore, \( nm \) cannot be zero because \( \BbbZ \) is \hyperref[def:entire_semiring]{entire}. Hence,
    \begin{equation*}
      \sgn(nm) = \sgn(n) \cdot \sgn(m) = 1.
    \end{equation*}

    \item If \( n = \iota(a) \) and \( m = -\iota(b) \) are both nonzero, then \( n(-m) = \iota(ab) \). Furthermore, \( nm = -n(-m) = -\iota(ab) \), and hence \( \sgn(nm) \leq 0 \). Again, \( nm \) cannot be zero because \( \BbbZ \) is entire. Then
    \begin{equation*}
      \sgn(nm) = \underbrace{\sgn(n)}_1 \cdot \underbrace{\sgn(m)}_{-1} = -1.
    \end{equation*}

    The case where \( \sgn(n) = -1 \) and \( \sgn(m) = 1 \) follows from this one due to commutativity.

    \item If \( n = -\iota(a) \) and \( m = -\iota(b) \) are both nonzero, then \( nm = (-n)(-m) = \iota(ab) \) and \( \sgn(nm) \geq 0 \). Thus,
    \begin{equation*}
      \sgn(nm) = \underbrace{\sgn(n)}_{-1} \cdot \underbrace{\sgn(m)}_{-1} = 1.
    \end{equation*}
  \end{itemize}

  \SubProofOf{thm:def:integer_signum/inverse} From \fullref{thm:def:integer_signum/product} it follows that \( \sgn(-n) = \sgn(-1) \cdot \sgn(n) = -\sgn(n) \).
\end{proof}

\begin{definition}\label{def:integer_ordering}\mimprovised
  We extend the \hyperref[def:natural_numbers_ordering]{natural number ordering} \( \leq_\BbbN \) to the \hyperref[def:integers]{integers} \( \BbbZ \) via the following truth table:
  \begin{equation*}
    \begin{array}{c !{\thickspace} c !{\thickspace} c}
      \toprule
      \sgn(n)    & \sgn(m)    & n \leq m         \\
      \midrule
      0 \T{or} 1 & 0 \T{or} 1 & n \leq_\BbbN m   \\
      0 \T{or} 1 & -1         & F                \\
      -1         & 0 \T{or} 1 & T                \\
      -1         & -1         & -m \leq_\BbbN -n \\
      \bottomrule
    \end{array}
  \end{equation*}
\end{definition}
\begin{comments}
  \item We will now use terms like \enquote{positive} and \enquote{negative} from \fullref{def:ordered_semiring}, although we are yet to prove that this ordering is compatible with the algebraic structure.
\end{comments}

\begin{proposition}\label{thm:def:integer_ordering}
  \hyperref[def:integer_ordering]{Integer ordering} has the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:integer_ordering/positive} \( n < 0 \) if and only if \( \sgn(n) = 1 \).

    This partially ensures compatibility with the signum function from \fullref{def:totally_ordered_ring_signum}.

    \thmitem{thm:def:integer_ordering/negative} \( 0 < n \) if and only if \( \sgn(n) = -1 \).

    This also ensures compatibility with the signum function from \fullref{def:totally_ordered_ring_signum}.

    \thmitem{thm:def:integer_ordering/inverse} \( n \leq m \) if and only if \( -m \leq -n \).

    This is an analog of \fullref{thm:ordered_ring_order_inversion}

    \thmitem{thm:def:integer_ordering/total} It is a \hyperref[def:totally_ordered_set]{total order}.

    \thmitem{thm:def:integer_ordering/ordered_ring} It makes \( \BbbZ \) an \hyperref[def:ordered_semiring]{ordered (semi)ring}.
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:integer_ordering/positive} Trivial.
  \SubProofOf{thm:def:integer_ordering/negative} Trivial.

  \SubProofOf{thm:def:integer_ordering/inverse} Let \( n \leq m \).
  \begin{itemize}
    \item If \( n \) and \( m \) are both either nonnegative or negative, then \( -m \leq -n \) by definition.
    \item If \( n \) is negative and \( m \) is not, then by \fullref{thm:def:integer_signum/inverse} \( -m \) is negative and \( -n \) is not. Hence, \( -m \leq -n \).
  \end{itemize}

  The converse direction of the proof is identical.

  \SubProofOf{thm:def:integer_ordering/total} The order \( \leq \) is clearly defined for every pair of integers, so it remains to show that it is a partial order.

  \SubProofOf*[def:binary_relation/reflexive]{reflexivity} If \( n \) is positive, then \( n \leq n \) since \( n \leq_\BbbN n \). Otherwise, \( n \leq n \) since \( -n \leq_\BbbN -n \).

  \SubProofOf*[def:binary_relation/antisymmetric]{antisymmetry} Suppose that \( n \leq m \) and \( m \leq n \).
  \begin{itemize}
    \item If \( n \) and \( m \) are both nonnegative, then \( n = m \) from the antisymmetry of the natural number ordering.
    \item If \( n \) and \( m \) are both negative, then \( -n = -m \) from the antisymmetry of the natural number ordering.
    \item If \( n \) is nonnegative and \( m \) is negative, we have \( m \leq n \) but not \( n \leq m \). This contradicts our assumption.
    \item If \( n \) is negative and \( m \) is nonnegative, we have \( n \leq m \) but not \( m \leq n \). This contradicts our assumption.
  \end{itemize}

  \SubProofOf*[def:binary_relation/transitive]{transitivity} Suppose that \( n \leq m \) and \( m \leq k \).
  \begin{itemize}
    \item If \( n \), \( m \) and \( k \) are nonnegative, then \( n \leq k \) from the transitivity of the natural number ordering.
    \item If \( n \), \( m \) and \( k \) are negative, then \( -k \leq -n \) and, by \fullref{thm:def:integer_ordering/inverse}, \( n \leq k \).
    \item If \( n \) is negative and \( k \) is nonnegative, then \( n \leq k \) by definition.
  \end{itemize}

  \SubProofOf{thm:def:integer_ordering/ordered_ring} We will show that \( \BbbZ \) is an ordered ring:
  \SubProofOf*[def:ordered_semigroup]{addition compatibility} If \( n \leq m \), we will prove that \( n + k \leq m + k \) for any integer \( k \).

  We have \( n + (m - n) = m \), and hence \( n + (m - n) + k = m + k \). \( n \leq m \) implies that \( m - n \) is nonnegative, hence can use induction on it to show that \( n + k \leq m + k \). More precisely, we will use induction on \( s \) to show that \( n \leq n + s \) implies that \( n + k \leq n + s + k \).

  \begin{itemize}
    \item The case \( s = 0 \) is trivial.
    \item If \( n + k \leq n + s + k \), then we have the following cases:
    \begin{itemize}
      \item If \( n + s + k \) is nonnegative, then \( n + s + k \leq n + (s + 1) + k \) by \fullref{thm:natural_numbers_are_well_ordered}, even without the inductive hypothesis.
      \item If \( n + s + k \) is negative, then \( -n - s - k \) is positive, and, again by \fullref{thm:natural_numbers_are_well_ordered},
      \begin{equation*}
        -n - (s + 1) - k \leq -n - (s + 1) - k + 1 = -n - s - k.
      \end{equation*}

      \Fullref{thm:def:integer_ordering/inverse} then implies that
      \begin{equation*}
        n + s + k \leq n + (s + 1) + k.
      \end{equation*}
    \end{itemize}

    In both cases,
    \begin{equation*}
      n + k \leq n + s + k \leq n + (s + 1) + k.
    \end{equation*}
  \end{itemize}

  \SubProofOf*[def:ordered_semiring]{multiplication compatibility} If \( n \leq m \), we will prove that \( nk \leq mk \) for any nonnegative integer \( k \).

  \begin{itemize}
    \item If both \( n \) and \( m \) are nonnegative, the statement follows from \fullref{thm:natural_numbers_are_well_ordered}.
    \item If both \( n \) and \( m \) are negative, \fullref{thm:def:integer_ordering/inverse} implies that \( -m \leq -n \), then the previous case implies that \( (-m)k \leq (-n)k \), and finally \( nk \leq mk \).
    \item If \( n \) is negative and \( m \) is nonnegative, we have two cases:
      \begin{itemize}
        \item The case \( k = 0 \) is trivial due to the absorption property \eqref{eq:def:semiring/absorption}.

        \item If \( k > 0 \), \fullref{thm:def:integer_signum/product} implies that
        \begin{equation*}
          \sgn(nk) = \sgn(n) \sgn(k) = \sgn(n) < \sgn(m) = \sgn(m) \sgn(k) = \sgn(mk),
        \end{equation*}
        hence \( nk \) is negative and \( mk \) is nonnegative.
    \end{itemize}
  \end{itemize}
\end{proof}

\paragraph{Topology of integers}

\begin{proposition}\label{thm:order_topology_on_integers_is_discrete}
  The \hyperref[def:order_topology]{order topology} on the set of integers is \hyperref[def:discrete_topology]{discrete}.
\end{proposition}
\begin{proof}
  The base \eqref{eq:def:order_topology/base} contains, among others, intervals of the form \( \set{ n } = (n - 1, n + 1) \) for any integer \( n \). The union of such sets give all possible subsets of \( \BbbZ \).
\end{proof}

\begin{corollary}\label{thm:order_topology_on_natural_numbers_is_discrete}
  The \hyperref[def:order_topology]{order topology} on the set of natural numbers is \hyperref[def:discrete_topology]{discrete}.
\end{corollary}
\begin{proof}
  Follows from the same argument as our proof in \fullref{thm:order_topology_on_integers_is_discrete} by noting that the subbase \eqref{eq:def:order_topology/subbase} contains the interval \( \set{ 0 } = (-\infty, 1) \).
\end{proof}

\paragraph{Integer division}

\begin{definition}\label{def:integer_absolute_value}\mimprovised
  We will define absolute values for general complex numbers in \fullref{def:complex_absolute_value}, but we will find absolute values useful for proving some structural properties of the ring of integers. So, we will introduce the auxiliary definition
  \begin{equation*}
    \begin{aligned}
      &\abs{\anon}_\BbbZ: \BbbZ \to \BbbZ \\
      &\abs{n}_\BbbZ \coloneqq \sgn(n) \cdot n.
    \end{aligned}
  \end{equation*}
\end{definition}

\begin{remark}\label{rem:integer_division_uniqueness}
  Fix two integers \( n \) and \( m \), and assume that \( m \) is nonzero. There are multiple ways to define \hyperref[def:euclidean_domain]{Euclidean division} of \( n \) by \( m \), that is, an algorithm producing integers \( q \) and \( r \) such that
  \begin{equation*}
    n = mq + r
  \end{equation*}
  and
  \begin{equation}\label{eq:rem:integer_division_uniqueness/rem_inequality}
    0 \leq \abs{r}_\BbbZ < \abs{m}_\BbbZ.
  \end{equation}

  We have chosen the \hyperref[def:integer_absolute_value]{integer absolute value} as a Euclidean degree functions. We will not consider other possibilities.

  Because of the restriction \eqref{eq:rem:integer_division_uniqueness/rem_inequality} on \( r \), we have two possibilities: \( r \geq 0 \) and \( r \leq 0 \).

  \begin{thmenum}
    \thmitem{rem:integer_division_uniqueness/max} \incite[23]{Jacobson1985AlgebraPart1}, \incite[thm. A-2.2]{Rotman2015AlgebraVol1}, \incite[prop. 1.1]{Knapp2016BasicAlgebra}, \incite[83]{Aluffi2009Algebra} and \incite[sec. 2.12]{Тыртышников2007ЛинАлгебра} assume that
    \begin{equation*}
      0 \leq r < \abs{m}_\BbbZ.
    \end{equation*}

    This is a commonly accepted convention among mathematicians, and this is the choice we make for \fullref{alg:integer_division} and \cite{notebook:code}.

    Based on \cite[prop. 1.1]{Knapp2016BasicAlgebra}, we can define the quotient as
    \begin{equation}\label{eq:rem:integer_division_uniqueness/max/q_cases}
      q_{\max} \coloneqq \begin{cases}
        \max\set{ k \in \BbbZ \given km \leq n }, &m > 0, \\
        \min\set{ k \in \BbbZ \given km \leq n }, &m < 0
      \end{cases}
    \end{equation}
    or, more succinctly,
    \begin{equation}\label{eq:rem:integer_division_uniqueness/max/q}
      q_{\max} \coloneqq \sgn(m) \cdot \max\set[\Big]{ \sgn(m) \cdot k \given* k \in \BbbZ \T{and} km \leq n }.
    \end{equation}

    Then \( m \cdot q_{\max} \leq n \), hence the remainder
    \begin{equation*}
      r_{\max} \coloneqq n - q_{\max} m
    \end{equation*}
    is nonnegative.

    This definition handles different signs as follows:
    \begin{equation*}
      \begin{array}{*{4}{c}}
        \toprule
        n   & m  & q_{\max} & r_{\max} \\
        \midrule
        10  & 3  & 3        & 1        \\
        10  & -3 & -3       & 1        \\
        -10 & 3  & -4       & 2        \\
        -10 & -3 & 4        & 2        \\
        \bottomrule
      \end{array}
    \end{equation*}

    \thmitem{rem:integer_division_uniqueness/trunc} The C programming language standard, \cite[66]{ISO:9899:2018}, suggests using \enquote{truncation towards zero}, which it describes as \enquote{the algebraic quotient with any fractional part discarded}.

    The quotient can be defined as follows:
    \begin{equation}\label{eq:rem:integer_division_uniqueness/trunc/q}
      q_{\T{trunc}} \coloneqq \sgn(mn) \cdot \max\set[\Big]{ k \geq 0 \given* k \cdot \abs{m}_\BbbZ \leq \abs{n}_\BbbZ }.
    \end{equation}

    The sign of the remainder
    \begin{equation*}
      r_{\T{trunc}} \coloneqq n - q_{\T{trunc}} m
    \end{equation*}
    is either \( 0 \) or it matches the sign of \( n \). Indeed,
    \begin{align*}
      n - m \cdot q_{\T{trunc}}
      &=
      \sgn(n) \abs{n}_\BbbZ - \underbrace{\sgn(m) \abs{m}_\BbbZ \cdot \sgn(mn)}_{\sgn(n) \cdot \abs{m}_\BbbZ} \cdot \max\set{ k \geq 0 \given k \cdot \abs{m}_\BbbZ \leq \abs{n}_\BbbZ }
      = \\ &=
      \sgn(n) \parens[\Big]{ \abs{n}_\BbbZ - \underbrace{\abs{m}_\BbbZ \cdot \max\set{ k \geq 0 \given k \cdot \abs{m}_\BbbZ \leq \abs{n}_\BbbZ }}_{\leq \abs{n}_\BbbZ} },
    \end{align*}

    Division with truncation handles different signs as follows:
    \begin{equation*}
      \begin{array}{*{4}{c}}
        \toprule
        n   & m  & q_{\T{trunc}} & r_{\T{trunc}} \\
        \midrule
        10  & 3  & 3             & 1             \\
        10  & -3 & -3            & 1             \\
        -10 & 3  & -3            & -1            \\
        -10 & -3 & 3             & -1            \\
        \bottomrule
      \end{array}
    \end{equation*}

    \thmitem{rem:integer_division_uniqueness/dist} The standard for floating-point arithmetic, \cite[31]{IEEE:754:2019}, defines the quotient of \( n \) and \( m \) as the integer \( q_{\T{dist}} \) minimizing
    \begin{equation}\label{eq:rem:integer_division_uniqueness/dist/q}
      \abs{n - m \cdot q_{\T{dist}}}_\BbbZ,
    \end{equation}
    with the special case that if two values are equally close, the even one must be chosen.

    \begin{itemize}
      \item It is sometimes the case that \eqref{eq:rem:integer_division_uniqueness/trunc/q} minimizes this distance, like above where \( \abs{n}_\BbbZ = 10 \) and \( \abs{3}_\BbbZ \). In general, we have
      \begin{equation*}
        \abs{ n - m \cdot q_{\T{trunc}} }_\BbbZ
        =
        \abs[\Big]{ \abs{n}_\BbbZ - \abs{m}_\BbbZ \cdot \max\set[\Big]{ k \geq 0 \given* k \cdot \abs{m}_\BbbZ \leq \abs{n}_\BbbZ } }_\BbbZ.
      \end{equation*}

      \item In other cases, like when the shortest distance is ambiguous, the two may differ:
      \begin{equation*}
        \begin{array}{c c !{\quad} c c !{\quad} c c}
          \toprule
          n  & m & q_{\T{dist}} & r_{\T{dist}} & q_{\T{trunc}} & r_{\T{trunc}} \\
          \midrule
          1  & 2 & 0            & 1            & 0             & 1             \\
          -1 & 2 & 0            & -1           & 0             & -1            \\
          3  & 2 & 2            & -1           & 1             & 1             \\
          -3 & 2 & -2           & 1            & -1            & -1            \\
          \bottomrule
        \end{array}
      \end{equation*}

      \item Even if the shortest distance is not ambiguous, the two may again differ:
      \begin{equation*}
        \begin{array}{c c !{\quad} c c !{\quad} c c}
          \toprule
          n   & m   & q_{\T{dist}} & r_{\T{dist}} & q_{\T{trunc}} & r_{\T{trunc}} \\
          \midrule
          10  & 12  & 1            & -2           & 0             & 10            \\
          -10 & 12  & -1           & 2            & 0             & -10           \\
          10  & -12 & -1           & -2           & 0             & 10            \\
          -10 & -12 & 1            & 2            & 0             & -10           \\
          \bottomrule
        \end{array}
      \end{equation*}
    \end{itemize}

    The Python programming language uses \enquote{floor division}, discussed below, however it provides the function \identifier{math.remainder}, which computes \( r_{\T{dist}} \coloneqq n - q_{\T{dist}} m \). On the other hand, even though the ECMAScript standard \cite[\S 6.1.6.1.5]{ECMA:262} dictates that remainders should follow the aforementioned \cite{IEEE:754:2019}, which defines quotients via \( q_{\T{dist}} \), actual ECMAScript implementations like V8 v12.9.43 and SpiderMonkey v115 use \( q_{\T{trunc}} \).

    \thmitem{rem:integer_division_uniqueness/floor} Python has \enquote{floor division}, where the quotient of \( n \) and \( m \) is defined as the \hyperref[def:real_floor_ceiling]{floor} of the \hyperref[def:rational_numbers]{rational number} \( n / m \). This is discussed in \cite{PythonDocs:3.12:math} \cite{PEP:238}.

    We can define floor division as follows:
    \begin{equation}\label{eq:rem:integer_division_uniqueness/floor/q_cases}
      q_{\floor} \coloneqq \begin{cases}
        \max\set{ k \in \BbbZ \given km \leq n }, &m > 0, \\
        \max\set{ k \in \BbbZ \given km \geq n }, &m < 0
      \end{cases}
    \end{equation}
    or, more succinctly,
    \begin{equation}\label{eq:rem:integer_division_uniqueness/floor/q}
      q_{\floor} \coloneqq \max\set[\Big]{ k \in \BbbZ \given* k \cdot \abs{m}_\BbbZ \leq \sgn(m) \cdot n }.
    \end{equation}

    The sign of the remainder
    \begin{equation*}
      r_{\floor} \coloneqq n - q_{\floor} m
    \end{equation*}
    is either \( 0 \) or it matches the sign of \( m \). Indeed,
    \begin{itemize}
      \item \( m > 0 \) implies that
      \begin{equation*}
        n - m \cdot q_{\floor}
        =
        n - \underbrace{m \cdot \max\set{ k \in \BbbZ \given km \leq n }}_{\leq n}
        \geq
        0.
      \end{equation*}

      \item \( m < 0 \) implies that
      \begin{equation*}
        n - m \cdot q_{\floor}
        =
        n - \underbrace{m \cdot \max\set{ k \in \BbbZ \given km \geq n }}_{\geq n}
        \leq
        0.
      \end{equation*}
    \end{itemize}

    Floor division handles different signs as follows:
    \begin{equation*}
      \begin{array}{*{4}{c}}
        \toprule
        n   & m  & q_{\floor} & r_{\floor} \\
        \midrule
        10  & 3  & 3          & 1          \\
        10  & -3 & -4         & -2         \\
        -10 & 3  & -4         & 2          \\
        -10 & -3 & 3          & -1         \\
        \bottomrule
      \end{array}
    \end{equation*}

    Finally, we note that \( q_{\max} \) and \( q_{\floor} \) coincide for \( m > 0 \) and, if \( m < 0 \),
    \begin{align*}
      -q_{\max}
      &=
      -\min\set{ k \in \BbbZ \given km \leq n }
      = \\ &=
      -\min\set{ -(-k) \in \BbbZ \given -km \geq -n }
      = \\ &=
      \max\set{ -k \in \BbbZ \given (-k)m \geq -n }
      = \\ &=
      \max\set{ k \in \BbbZ \given km \geq -n },
    \end{align*}
    which is the floor quotient of \( -n \) and \( m \).
  \end{thmenum}
\end{remark}
\begin{comments}
  \item All these quotient algorithms can be found in \identifier{arithmetic.divisibility} in \cite{notebook:code}.
\end{comments}

\begin{algorithm}[Integer division]\label{alg:integer_division}
  Fix two integers \( n \) and \( m \), and assume that \( m \) is nonzero. There exists a unique pair \( \quot(n, m) \) and \( \rem(n, m) \) of integers such that
  \begin{equation}
    n = m \cdot \quot(n, m) + \rem(n, m)
  \end{equation}
  and
  \begin{equation*}
    0 \leq \rem(n, m) < \abs{m}.
  \end{equation*}

  We simply define
  \begin{equation}\label{eq:alg:integer_division/quot}
    \quot(n, m) \coloneqq \begin{cases}
      \max\set{ k \in \BbbZ \given km \leq n }, &m > 0, \\
      \min\set{ k \in \BbbZ \given km \leq n }, &m < 0
    \end{cases}
  \end{equation}
  and remainder
  \begin{equation}\label{eq:alg:integer_division/rem}
    \rem(n, m) \coloneqq n - m \cdot \quot(n, m).
  \end{equation}
\end{algorithm}
\begin{comments}
  \item We use the notation \( \quot(n, m) \) and \( \rem(n, m) \) from \fullref{def:euclidean_domain}.
  \item This is \( q_{\max} \) and \( r_{\max} \) from \fullref{rem:integer_division_uniqueness}, where Euclidean division of integers is extensively discussed.
\end{comments}
\begin{defproof}
  \UniquenessSubProof Suppose that \( n = mq + r = mq' + r' \), where \( 0 \leq r < \abs{m}_\BbbZ \) and \( 0 \leq r' < \abs{m}_\BbbZ \). Then
  \begin{equation*}
    m(q - q') = -(r - r').
  \end{equation*}

  Thus, \( m \) divides \( r - r' \). Then \( m \) divides \( r \) and \( r' \) contradicting the assumption that \( \abs{r}_\BbbZ < \abs{m}_\BbbZ \).
\end{defproof}

\begin{proposition}\label{thm:integers_are_euclidean_domain}
  The \hyperref[def:integers]{ring of integers} is an \hyperref[def:euclidean_domain]{Euclidean domain} with division given by \fullref{alg:integer_division} and degree function \( \abs{\anon}_\BbbZ \).
\end{proposition}
\begin{proof}
  By \fullref{thm:integers_are_integral_domain}, \( \BbbZ \) is entire. The Euclidean domain structure is described by \fullref{alg:integer_division}.
\end{proof}

\begin{proposition}\label{thm:alg:integer_division}
  \Fullref{alg:integer_division} has the following basic properties:
  \begin{thmenum}
    \thmitem{thm:alg:integer_division/nested_quot} For positive integers \( b \) and \( c \) and an arbitrary integer \( a \) we have
    \begin{equation}\label{eq:thm:alg:integer_division/nested_quot}
      \quot(\quot(a, b), c) = \quot(a, bc).
    \end{equation}
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:alg:integer_division/nested_quot} We have
  \begin{equation}\label{eq:thm:alg:integer_division/nested_quot/proof/simple}
    a = bc \cdot \quot(a, bc) + \rem(a, bc).
  \end{equation}

  Also,
  \begin{equation*}
    a = b \cdot \quot(a, b) + \rem(a, b)
  \end{equation*}
  and
  \begin{align*}
    \quot(a, b) = c \cdot \quot(\quot(a, b), c) + \rem(\quot(a, b), c),
  \end{align*}
  thus
  \begin{equation}\label{eq:thm:alg:integer_division/nested_quot/proof/nested}
    a = bc \cdot \quot(\quot(a, b), c) + b \cdot \rem(\quot(a, b), c) + \rem(a, b).
  \end{equation}

  We have
  \begin{equation*}
    b \cdot \rem(\quot(a, b), c) + \rem(a, b)
    \leq
    b(c - 1) + (b - 1)
    =
    bc - 1,
  \end{equation*}
  hence, the sum of the remainders in \eqref{eq:thm:alg:integer_division/nested_quot/proof/nested} do not contribute to the quotient.

  Because of the uniqueness in \fullref{alg:integer_division}, we conclude from \eqref{eq:thm:alg:integer_division/nested_quot/proof/simple} and \eqref{eq:thm:alg:integer_division/nested_quot/proof/nested} that
  \begin{equation*}
    \quot(a, bc) = \quot(\quot(a, b), c).
  \end{equation*}
\end{proof}

\begin{lemma}[Bezout's lemma]\label{thm:bezout_lemma}
  For any two integers \( n \) and \( m \), there exist \( a \) and \( b \) such that
  \begin{equation*}
    \gcd(n, m) = an + bm.
  \end{equation*}
\end{lemma}
\begin{proof}
  Since \( \BbbZ \) is a principal ideal domain, it is also a Bezout domain by \fullref{def:principal_ideal_domain/bezout}.
\end{proof}

\begin{remark}\label{rem:integer_domain_chain}\hfill
  We have the following hierarchy:
  \begin{itemize}
    \item \( \BbbZ \) is a \hyperref[def:euclidean_domain]{Euclidean domain} as shown in \fullref{thm:integers_are_euclidean_domain}.
    \item As an Euclidean domain, \( \BbbZ \) is a \hyperref[def:principal_ideal_domain]{principal ideal domain} as a consequence of \fullref{thm:def:euclidean_domain/pid}.
    \item As a PID, \( \BbbZ \) is, by definition, both a \hyperref[def:factorial_domain]{factorial domain} and a \hyperref[def:bezout_domain]{Bezout domain}.
    \item As a factorial domain (or as a Bezout domain), \( \BbbZ \) is a \hyperref[def:gcd_domain]{GCD domain}.
  \end{itemize}
\end{remark}

\begin{remark}\label{rem:integer_gcd}
  We discuss in \fullref{rem:choice_of_associates}, in general \hyperref[def:gcd_domain]{GCD domain}, the \hyperref[def:gcd]{greatest common divisors} are not unique.

  The \hyperref[def:gcd]{greatest common divisor} of integers of is, by convention, \hi{positive}. This leaves a canonical choice for both the greatest common divisor and the least common multiple. By \fullref{thm:natural_number_divisibility_lattice}, the \hyperref[thm:semiring_divisibility_order]{divisibility order} of positive integers is compatible with the usual \hyperref[def:integer_ordering]{integer ordering}.

  \Fullref{alg:euclidean_algorithm} allows us to explicitly compute both GCDs and LCMs.
\end{remark}

\paragraph{Prime numbers}

\begin{definition}\label{def:prime_number}\mcite[2]{Knapp2016BasicAlgebra}
  A \term[ru=простое число (\cite[45]{Зорич2019АнализТом1})]{prime number} is an integer greater than \( 1 \) whose only proper \hyperref[def:divisibility]{divisor} is \( 1 \). Non-prime integers greater than \( 1 \) are called \term{composite numbers}.
\end{definition}

\begin{remark}\label{rem:prime_numbers}
  The definition of a prime number given in \fullref{def:prime_number} is standard, however it seems quite inconsistent with \fullref{sec:integral_domains}.

  First, \fullref{sec:integral_domains} actually defines \hyperref[def:domain_divisibility/irreducible]{irreducible elements} rather than \hyperref[def:domain_divisibility/prime]{prime elements} of the domain \( \BbbZ \). Second, if \( p \) is a prime number, \( -p \) is also a prime number.

  Fortunately, prime and irreducible elements coincide in \hyperref[def:gcd_domain]{GCD domains} due to \fullref{thm:def:gcd_domain/irreducible_is_prime} and \fullref{thm:def:gcd_domain/irreducible_is_prime}. Unfortunately, calling negative prime elements of \( \BbbZ \) \enquote{prime numbers} is not accepted.

  Coprime integers are, fortunately, defined as in general GCD domains via \fullref{def:coprime_elements}.
\end{remark}

\begin{lemma}[Euclid's lemma]\label{thm:euclids_lemma}
  If \( p \) is a \hyperref[def:prime_number]{prime number}, then \( p \mid nm \) implies \( p \mid n \) or \( p \mid m \).
\end{lemma}
\begin{proof}
  Since \( \BbbZ \) is a GCD domain, the lemma follows from \fullref{thm:def:gcd_domain/irreducible_is_prime}.
\end{proof}

\begin{algorithm}[Sieve of Eratosthenes]\label{alg:sieve_of_eratosthenes}\mcite[exer. 4.5.4.8]{Knuth1997ArtVol2}
  We can construct approximations to the sequence
  \begin{equation*}
    s_k \coloneqq \begin{cases}
      1, &k \T{is prime}, \\
      0, &\T{otherwise}.
    \end{cases}
  \end{equation*}

  Via recursion on \( n \), we will build the sequence \( \seq{ s_{n,k} }_{k=0}^\infty \) such that, for \( 0 \leq k < n \), \( s_{n,k} \) is \( 1 \) if \( k \) is prime and \( 0 \) otherwise.

  \begin{thmenum}
    \thmitem{alg:sieve_of_eratosthenes/base} We start with the constant sequence
    \begin{equation*}
      s_{0,k} \coloneqq 1.
    \end{equation*}

    \thmitem{alg:sieve_of_eratosthenes/one} We need to handle one special case: for \( n = 1 \) we also consider the same sequence.
    \begin{equation*}
      s_{1,k} \coloneqq 1.
    \end{equation*}

    \thmitem{alg:sieve_of_eratosthenes/recursive} For \( n > 1 \), let
    \begin{equation*}
      s_{n,k} \coloneqq \begin{cases}
        0,         &n \T{divides} k \\
        s_{n-1,k}, &\T{otherwise}.
      \end{cases}
    \end{equation*}
  \end{thmenum}
\end{algorithm}
\begin{comments}
  \item Rather than working with infinite sequences, we may restrict ourselves to lists of length \( n \) at step \( n \).
  \item This algorithm can be found as \identifier{arithmetic.primes.build_erathostenes_sieve} in \cite{notebook:code}.
\end{comments}

\begin{theorem}[Fundamental theorem of arithmetic]\label{thm:fundamental_theorem_of_arithmetic}
  Every integer greater than \( 1 \) can be \hyperref[def:irreducible_factorization]{factored} into a product of \hyperref[def:prime_number]{prime} powers.
\end{theorem}
\begin{comments}
  \item The factorization is unique when regarded as a \hyperref[def:multiset]{multiset} of prime numbers.
\end{comments}
\begin{proof}
  As discussed in \fullref{rem:integer_domain_chain}, \( \BbbZ \) is a factorial domain.
\end{proof}

\begin{definition}\label{def:coprime_numbers}
  We say that the integers \( n \) and \( m \) are \term[ru=взаимно простые (числа) (\cite[45]{Зорич2019АнализТом1}), en=coprime / relatively prime (\cite[231]{Rosen2018DiscreteHandbook})]{coprime} if any of the following equivalent conditions hold:
  \begin{thmenum}
    \thmitem{def:coprime_numbers/abstract} They are \hyperref[def:coprime_elements]{coprime elements} of \( \BbbZ \).
    \thmitem{def:coprime_numbers/concrete}\mcite[45]{Зорич2019АнализТом1} Their only common divisors are \( 1 \) and \( -1 \).
  \end{thmenum}
\end{definition}

\begin{proposition}\label{thm:n_plus_1_coprime}
  Given any integer greater \( n \) than \( 1 \), the numbers \( n \) and \( n + 1 \) are \hyperref[def:coprime_elements]{coprime}.
\end{proposition}
\begin{proof}
  Let \( m \) be a common divisor of \( n \) and \( n + 1 \). Then there exists some integer \( k \) such that \( n = km \) and some integer \( l \) such that \( n + 1 = lm \). Then
  \begin{equation*}
    n + 1 = lm = km + 1,
  \end{equation*}
  thus \( m \) divides \( 1 \).

  Therefore, \( m = 1 \).
\end{proof}

\paragraph{Euler's totient theorem}\hfill

\begin{definition}\label{def:eulers_totient_function}\mcite[7]{Knapp2016BasicAlgebra}
  For any positive integer \( n \), denote by \( \varphi(n) \) the number of strictly smaller than \( n \) positive integers that are \hyperref[def:coprime_elements]{coprime} to \( n \). We call \( \varphi \) \term{Euler's totient function}.
\end{definition}

\begin{proposition}\label{thm:def:eulers_totient_function}
  \hyperref[def:eulers_totient_function]{Euler's totient function} \( \varphi \) has the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:eulers_totient_function/one} \( \varphi(1) = 0 \).
    \thmitem{thm:def:eulers_totient_function/prime} If \( p \) is \hyperref[def:prime_number]{prime}, then \( \varphi(p) = p - 1 \).
    \thmitem{thm:def:eulers_totient_function/zn} The \hyperref[def:semiring]{multiplicative group} \( \BbbZ_n^\times \) of the ring \hyperref[def:ring_of_integers_modulo]{\( \BbbZ_n \)} of integers modulo \( n > 1 \) has order \( \varphi(n) \).
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:eulers_totient_function/one} There are no positive integers smaller than \( 1 \).

  \SubProofOf{thm:def:eulers_totient_function/prime} Every positive integer smaller than \( p \) is coprime to \( p \), and there are exactly \( p - 1 \) positive integers smaller than \( p \) --- \( 1, 2, \ldots, p - 1 \).

  \SubProofOf{thm:def:eulers_totient_function/zn} Follows from \fullref{thm:multiplicative_group_of_integers_modulo}.
\end{proof}

\begin{theorem}[Euler's totient theorem]\label{thm:eulers_totient_theorem}
  For positive coprime integers \( n \) and \( x \), we have
  \begin{equation*}
    x^{\varphi(n)} \cong 1 \pmod n,
  \end{equation*}
  where \( \varphi \) is \hyperref[def:eulers_totient_function]{Euler's totient function}.
\end{theorem}
\begin{proof}
  This is vacuous for \( n = 1 \) since all integers are equal modulo \( 1 \).

  Suppose that \( n > 1 \). First, use \fullref{alg:integer_division} to obtain integers \( q \) and \( y < n \) such that
  \begin{equation*}
    x = nq + y.
  \end{equation*}

  Since \( x \) is, by assumption, coprime with \( n \), then \( y \) is also coprime with \( n \). Indeed, every common divisor \( d \) of \( y \) and \( n \) is also a common divisor \( x \), and the largest such possible value is \( \gcd(n, x) = 1 \).

  Now consider the \hyperref[def:semiring]{multiplicative group} \( \BbbZ_n^\times \) of the ring \hyperref[def:ring_of_integers_modulo]{\( \BbbZ_n \)} of integers modulo \( n \) and the \hyperref[def:cyclic_group]{cyclic subgroup} \( \set{ 1, y, y^2, \ldots } \) (modulo \( n \)). It is necessarily finite as a subgroup of \( \BbbZ_n^\times \). Furthermore, by \fullref{thm:lagranges_subgroup_theorem}, its order \( k \) divides the order of \( \BbbZ_n^\times \). By \fullref{thm:def:eulers_totient_function/zn}, the order of \( \BbbZ_n^\times \) is \( \varphi(n) \).

  We have \( y^k \cong 1 \pmod n \) since \( k \) is the order of a cyclic group. If \( \varphi(n) = km \), then
  \begin{equation*}
    y^{\varphi(n)}
    =
    y^{km}
    \reloset {\eqref{eq:thm:semigroup_exponentiation_properties/repeated}} =
    (y^k)^m
    \cong
    1^m
    \pmod n.
  \end{equation*}
\end{proof}

\begin{corollary}\label{thm:division_modulo}
  Given positive integers \( n \) and \( m \), we can apply \fullref{alg:integer_division} to obtain \( n = q \varphi(m) + r \), where \( \varphi \) is \hyperref[def:eulers_totient_function]{Euler's totient function}.

  Then, for a positive integer \( x \) coprime to \( m \), we have
  \begin{equation*}
    x^n \cong x^r \pmod m,
  \end{equation*}
\end{corollary}
\begin{proof}
  By \fullref{thm:eulers_totient_theorem}, \( x^{\varphi(m)} \cong 1 \pmod m \). Then
  \begin{equation*}
    x^n = (x^{\varphi(m)})^q x^r \cong x^r \pmod m.
  \end{equation*}
\end{proof}

\begin{example}\label{ex:division_modulo}
  The integers \( 9 \) and \( 10 \) are coprime. We have \( \varphi(9) = 6 \) and \( 1000 = 166 \cdot 6 + 4 \). By \fullref{thm:division_modulo},
  \begin{equation*}
    9^{1000} \cong 9^4 \cong 6561 \cong 1 \pmod {10}.
  \end{equation*}

  We can thus vastly simplify finding the last digit of the decimal representation of \( 9^{1000} \).
\end{example}

\begin{theorem}[Fermat's little theorem]\label{thm:fermats_little_theorem}
  For a \hyperref[def:prime_number]{prime number} \( p \) and for any positive integer \( x \), we have
  \begin{equation*}
    x^p \cong x \pmod p.
  \end{equation*}
\end{theorem}
\begin{proof}
  If \( p \mid x \), then both \( x^p \) and \( x \) and congruent to \( 0 \) modulo \( p \).

  Otherwise, by \fullref{thm:eulers_totient_theorem}, we have \( x^{\varphi(p) + 1} \cong x \pmod p \), and by \fullref{thm:def:eulers_totient_function/prime}, we have \( \varphi(p) + 1 = p \).
\end{proof}
