\section{Augmented sets}\label{sec:augmented_sets}

Sets in the sense of \fullref{ch:set_theory} are ubiquitous. It is sometimes convenient, however, to augment a set with additional structure. We have only used the word \enquote{augmented} informally --- in order to stick to established terminology, we will not use it henceforth, but rather rely on more concrete definitions.

\begin{remark}\label{rem:set_labeling_terminology}
  We will define several related notions --- labeled sets in \cref{def:labeled_set}, set coloring in \cref{def:set_coloring}, weighted sets in \cref{def:weighted_set} and multisets in \cref{def:multiset}. We consider fuzzy sets in more detail, for which reason we dedicate \fullref{sec:fuzzy_sets} to them. They are all defined as generalizations of sets --- in all cases, instead of a set \( A \), we consider a function \( l: A \to L \), which assigns auxiliary information to elements of \( A \). Given an element \( x \) of \( A \), we will refer to \( l(a) \) as a \enquote{label} in general and as \enquote{weight} if \( l(a) \) is a real number.

  Similar terms are common in our cited literature, although rarely are formal definitions given, which leaves a lot of room for ambiguity. Generally the terms are ambiguous, except for different authors using \enquote{multiset} to refer to nearly the same concept.

  \begin{itemize}
    \item \enquote{Label} is used by
    \begin{itemize}
      \item \incite[3]{Bollobás1998ModernGraphTheory}, \incite{Salomaa1973FormalLanguages} \incite{Mimram2020ProgramEqualsProof}, \incite{CitkinMuravitsky2022ConsequenceRelations} and \incite{Erickson2019Algorithms} without explicit definitions for labels of graph vertices and edges.

      \item \incite[20]{Harary1969GraphTheory} for distinct strings, \enquote{names}, assigned to the vertices of a graph.

      \item \incite{Rosen2019DiscreteMathematics}, \incite{Stanley2012EnumerativeCombinatoricsVol1} and \incite[315]{Knuth1997ArtVol1} as an informal notion for attaching information.

      \item \incite[242]{Diestel2017GraphTheory} for ordinal number labels of graph vertices.
    \end{itemize}

    \item \enquote{Marking} is used by
    \begin{itemize}
      \item \incite[4]{Harary1969GraphTheory} for general labels of graph vertices.

      \item \incite[def. 1.3.9]{Knauer2019AlgebraicGraphTheory} for general labels of tree nodes.

      \item \incite{Rosen2019DiscreteMathematics} for general labels.

      \item \incite[def. 5.13]{БелоусовТкачёв2004ДискретнаяМатематика} (as \enquote{функция разметки}) for a function labeling edges with nonzero elements of an idempotent semiring.
    \end{itemize}

    \item \enquote{Valuation} is used by
    \begin{itemize}
      \item \incite[def. 6.8.1]{Knauer2019AlgebraicGraphTheory} for labeling with natural numbers or positive infinity.
    \end{itemize}

    \item \enquote{Coloring} is used by
    \begin{itemize}
      \item \incite[7]{Birkhoff1967LatticeTheory}, \incite[145]{Bollobás1998ModernGraphTheory}, \incite[139]{Knauer2019AlgebraicGraphTheory}, \incite[500]{Jacobson1985BasicAlgebraI}, \incite{Stanley2012EnumerativeCombinatoricsVol1}, \incite{Rosen2019DiscreteMathematics}, \incite{БарановСтечкин2004ЭкстремальнаяКомбинаторика} (as \enquote{раскраска}) and \incite[141]{Мирчев2001Графи} (as \enquote{оцветяване}) without an explicit definition as way of classifying objects.

      \item \incite[395]{Erickson2019Algorithms}, \incite[\S 5.4]{Harzheim2005OrderedSets}, \incite[124]{Aigner1997CombinatorialTheory}, \incite[28]{Зыков2004ТеорияГрафов} (as \enquote{раскраска}), \incite[235]{ЕмеличевИПр1990ТеорияГрафов} (as \enquote{раскраска}) and \incite[\S 10.7.1]{Новиков2013ДискретнаяМатематика} (as \enquote{раскраска}) as an explicit function labeling graph vertices with positive integers.

      \item \incite[595]{ButlerEtAl2016RainbowArithmeticProgressions} as an explicit function labeling the elements of initial segments of an \hyperref[def:arithmetic_progression]{arithmetic progression}.

      \item \incite[21]{Rotman2017AdvancedModernAlgebraPart2} as an \hyperref[def:group_action_orbit]{orbit} of a \hyperref[def:group_action]{group action} on a finite set.

      \item \incite[174]{Cayley1878Graphs} and \incite[156]{König1990GraphTheory} for the labels of \hyperref[def:cayley_graph]{Cayley graphs}.
    \end{itemize}

    \item \enquote{Weight} is used by
    \begin{itemize}
      \item \incite[def. 5.13]{БелоусовТкачёв2004ДискретнаяМатематика} (as \enquote{весовая функция}) for a function labeling edges with nonzero elements of an idempotent semiring.

      \item \incite[exerc. 8.4]{Новиков2013ДискретнаяМатематика} (as \enquote{нагрузка}) and \incite[59]{ЕмеличевИПр1990ТеорияГрафов} (as \enquote{вес}) for labeling graph vertices with nonnegative real values.

      \item \incite[500]{Stanley2012EnumerativeCombinatoricsVol1} for a function taking values in a commutative ring.


      \item \incite[def. 1.1.2]{Knauer2019AlgebraicGraphTheory} and \incite[62]{Зыков2004ТеорияГрафов} for general labels of either vertices or edges of graphs.

      \item \incite{Rosen2019DiscreteMathematics} without an explicit definition for numeric labels.

      \item \incite{Bollobás1998ModernGraphTheory} and \incite{Erickson2019Algorithms}, also without an explicit definition, for numeric labels for vertices.

      \item \incite[9]{GondranMinoux1984GraphsAndAlgorithms} and \incite[12]{Мирчев2001Графи} for number-valued graph edge labels (without specifying which kind of numbers) of edges of graphs, although Mirchev also allows vertices to be labeled.

      \item \incite[298]{Diestel2017GraphTheory} (in \enquote{weighted with a probability}) for numbers form the unit interval.

      \item \incite[387]{Knuth1997ArtVol1} and \incite[35]{Harary1969GraphTheory} for the number of nodes in a subtree, but later in \incite[417]{Knuth1997ArtVol1} as number-valued labels of nodes.

      \item \incite[180]{Harary1969GraphTheory} for explicit labeling with real numbers, with the intention to label \hyperref[def:group_action_orbit]{group action orbits}.

      \item \incite[37]{Blizard1988MultisetTheory} for specifying that \enquote{weighted set} is an obsolete synonym for \enquote{multiset}.
    \end{itemize}

    \item \enquote{Multiset} is used by
    \begin{itemize}
      \item \incite[473]{Knuth1997ArtVol2}, \incite[143]{Rosen2019DiscreteMathematics}, \incite[2]{Aluffi2009Algebra} and \incite[28]{Новиков2013ДискретнаяМатематика} as an informal notion of \enquote{generalized sets} allowing each element to be repeated finitely many times.

      \item \incite[6]{TroelstraSchwichtenberg2000BasicProofTheory} as similar generalized sets with an additional restriction of finiteness.

      \item \incite[37]{Blizard1988MultisetTheory}, \incite[18]{Stanley2012EnumerativeCombinatoricsVol1}, \incite[309]{Barendregt1984LambdaCalculus}, \incite[20]{Golan1999Semirings} and \incite[\S A.3.5]{Mimram2020ProgramEqualsProof} for explicit labeling with positive integers.

      \item \incite[def. 1]{Hickman1980Multisets} for explicit labeling with nonzero cardinals.
    \end{itemize}
  \end{itemize}
\end{remark}

\paragraph{General labels}

\begin{remark}\label{rem:ast_labeling}
  Consider the \hyperref[def:propositional_formula_ast]{abstract syntax tree} of the formula \( (\varphi \synimplies \varphi) \) from \eqref{eq:ex:minimal_implication_logic_identity/derivations/final}:
  \begin{equation*}
    \includegraphics[page=1]{output/rem__ast_labeling}
  \end{equation*}

  In order for this to fit our definition of ordered tree from \cref{def:ordered_tree}, we must somehow distinguish between the two occurrences of \( \varphi \). Otherwise, we would obtain the following \hyperref[def:hypergraph/multigraph]{multigraph}:
  \begin{equation*}
    \includegraphics[page=2]{output/rem__ast_labeling}
  \end{equation*}

  We are only interested in how the nodes are connected, thus one possible underlying tree is
  \begin{equation*}
    \includegraphics[page=3]{output/rem__ast_labeling}
  \end{equation*}

  Rather than the strings \enquote{\( \varphi \)} and \enquote{\( \synimplies \)} themselves being nodes, they simply become labels. This leads to the definition of labeled set in \cref{def:labeled_set}.

  \Cref{rem:tree_grafting_nodes} describes how we use \hyperref[def:ordered_tree_grafting_product]{grafting products} to build abstract syntax trees.

  As a note, while there is often no harm in regarding \hyperref[def:labeled_tree/homomorphism]{isomorphic} trees as equal, we must be careful when we want isomorphic trees to be distinct, e.g. as subtrees.
\end{remark}
\begin{comments}
  \item See \cref{rem:tree_grafting_nodes} for a more thorough discussion of how we actually choose underlying nodes for \hyperref[def:labeled_tree]{labeled trees}.
\end{comments}

\begin{definition}\label{def:labeled_set}\mimprovised
  A \term{labeled set} is a \hyperref[def:function]{function} \( l: A \to L \) that \enquote{labels} the elements of \( A \) with elements of \( L \).
\end{definition}
\begin{comments}
  \item This definition allows us to provide an interface for an object from \( A \) independent of its other properties. One such interface is labeling tree nodes in syntax trees --- see \cref{rem:ast_labeling} --- or the more elaborate labels in proof trees --- see \cref{def:propositional_natural_deduction_proof_tree}. We will now discuss several special cases.

  \item We discuss in \cref{rem:set_labeling_terminology} how related terminology is used in the literature.
\end{comments}

\paragraph{Coloring}

\begin{definition}\label{def:set_coloring}\mcite[246]{GowersEtAl2008PrincetonCompanion}
  Fix a nonempty set \( Q \) whose elements we will call \term[bg=цветове (\cite[141]{Мирчев2001Графи}), ru=цвета (\cite[\S 10.7.1]{Новиков2013ДискретнаяМатематика})]{colors}. A \( Q \)-\term[bg=оцветяване (\cite[141]{Мирчев2001Графи}), ru=раскраска (\cite[\S 10.7.1]{Новиков2013ДискретнаяМатематика})]{coloring} of the \hyperref[def:set]{plain set} is simply a \hyperref[def:labeled_set]{labeling} of \( S \) with elements of \( Q \).

  \begin{thmenum}
    \thmitem{def:set_coloring/monochromatic}\mcite[567]{GowersEtAl2008PrincetonCompanion} We say that a subset of \( S \) is \term[ru=одноцветный (класс) (\cite[\S 10.7.1]{Новиков2013ДискретнаяМатематика}), en=monochromatic (\cite[567]{GowersEtAl2008PrincetonCompanion})]{monochromatic} if all its elements have the same color.

    \thmitem{def:set_coloring/rainbow} We say that a subset of \( S \) is \term{rainbow-colored} if each of its elements has a different color.
  \end{thmenum}
\end{definition}
\begin{comments}
  \item We discuss in \cref{rem:set_labeling_terminology} how related terminology is used in the literature.
\end{comments}

\begin{remark}\label{rem:cardinal_colorings}
  By \cref{thm:ordinal_is_set_of_smaller_ordinals}, a nonzero \hyperref[def:cardinal]{cardinal number} \( \rho \) is the set of ordinals smaller than \( \rho \), thus a \hyperref[def:set_coloring]{\( \rho \)-coloring} is a coloring with ordinals. In particular, for a positive integer \( r \), an \( r \)-coloring is simply a coloring with \( \set{ 0, \ldots, r - 1 } \).

  As mentioned in \cref{rem:peano_arithmetic_zero}, we usually prefer our indexing to start at \( 1 \). Thus, it would be more natural to define \( r \)-colorings via the set \( \set{ 1, \ldots, r } \). We will mostly avoid referring to concrete numbers as colors, and utilizing general cardinal numbers generally simplifies the exposition.

  The same considerations hold in other cases like when defining ordered tuples in \cref{def:ordered_tuple} or multi-indices in \cref{def:ordered_tuple}.
\end{remark}

\paragraph{Weighted sets}

\begin{definition}\label{def:weighted_set}\mimprovised
  For any \hyperref[def:semiring]{semiring} \( R \), an \( R \)-\term{weighted set} is a \hyperref[def:set]{set} \hyperref[def:labeled_set]{labeled} with elements of \( R \).
\end{definition}
\begin{comments}
  \item We require \( R \) to be a semiring so that we have both \( 0 \) and \( 1 \) and so that we can perform arithmetic operations. Although it is usually sufficient to consider real numbers, \hyperref[def:tropical_semiring]{tropical semirings} are also sometimes useful --- see \cref{thm:adjacency_matrix_tropical_power}.

  \item We discuss in \cref{rem:set_labeling_terminology} how related terminology is used in the literature.
\end{comments}

\paragraph{Multisets}

\begin{definition}\label{def:multiset}\mcite[def. 1]{Hickman1980Multisets}
  A \term[ru=мультимножество (\incite[28]{Новиков2013ДискретнаяМатематика})]{multiset} \( M \) is a \hyperref[def:set]{set} \hyperref[def:labeled_set]{labeled} with nonzero \hyperref[def:cardinal]{cardinal numbers}. We call the number \( M(x) \) the \term[en=multiplicity (\cite[36]{Blizard1988MultisetTheory})]{multiplicity} of \( x \).

  Generalizing the notation from \incite[40]{Blizard1988MultisetTheory}, we will use \( x \in^\alpha M \) rather than \( M(x) = \alpha \).
\end{definition}
\begin{comments}
  \item \incite{Blizard1988MultisetTheory} describes a \hyperref[def:first_order_theory]{first-order theory} of multisets based on generalizing \hyperref[def:zfc]{\logic{ZFC}}. For our occasional use of multisets, our simple definition is sufficient. We do, however, unlike Blizard allow membership of transfinite multiplicity.

  \item Based on the exact same abstraction, \incite{Hickman1980Multisets} extends basic set-theoretic relations and operations to multisets. We will not find use for these, however, so we avoid introducing additional formalisms.

  \item We discuss in \cref{rem:set_labeling_terminology} how related terminology is used in the literature.
\end{comments}

\begin{remark}\label{rem:syntax_of_multisets}
  Following \incite[309]{Barendregt1984LambdaCalculus}, we can reuse the set list notation from \cref{def:set_notation} for \hyperref[def:multiset]{multisets} by interpreting the set-theoretic expression
  \begin{equation*}
    \set{ a, b, c, a, b, a }
  \end{equation*}
  as the multiset \( M \) with \( a \in^3 M \), \( b \in^2 M \) and \( c \in^1 M \) rather than the set consisting of \( a \), \( b \) and \( c \).
\end{remark}

\begin{example}\label{ex:def:multiset}
  We list several examples of \hyperref[def:labeled_set]{weighted sets}.

  \begin{itemize}
    \thmitem{ex:def:multiset/polynomial_roots} The roots of any polynomial form a multiset with multiplicities given by \cref{def:polynomial_root_multiplicity}.

    \thmitem{ex:def:multiset/factorization} Any \hyperref[def:irreducible_factorization]{factorization} in an \hyperref[def:integral_domain]{integral domain} produces a multiset.

    \thmitem{ex:def:multiset/eigenvalues} The \hyperref[def:eigenpair]{point spectrum} of a linear operator produces a multiset.
  \end{itemize}
\end{example}

\begin{definition}\label{def:multiset_cardinality}\mimprovised
  We define the \term{total cardinality} of the \hyperref[def:multiset]{multiset} \( M \) as follows:
  \begin{thmenum}
    \thmitem{def:multiset_cardinality/finite} If \( M \) has finitely many elements, we simply take the \hyperref[def:cardinal_arithmetic/addition]{cardinal sum} of their multiplicities.

    \thmitem{def:multiset_cardinality/infinite} Otherwise, we take the set-theoretic union of the multiplicities.
  \end{thmenum}
\end{definition}
\begin{comments}
  \item This definition is based on the following. \incite[def. 1]{Hickman1980Multisets} avoids providing a concept of cardinality, but for our usage we will find it necessary. We are mostly concerned with the cardinality of multisets with finitely many elements with finite multiplicities, which, following the introductory discussion in \incite[1]{Blizard1988MultisetTheory}, should simply be the sum of all multiplicities.

  If \( M \) has finitely many elements, this extends straightforwardly to cardinal sums. \Cref{thm:simplified_cardinal_arithmetic/infinite} implies that, if one of the elements is an infinite cardinal, we might just as well take the supremum of all multiplicities. \Cref{thm:union_of_set_of_cardinals} implies that the supremum is precisely the set-theoretic union of the multiplicities. This is the approach we take when \( M \) has infinitely many elements.
\end{comments}

\begin{definition}\label{def:multiset_enumeration}\mimprovised
  An \term{enumeration} of the \hyperref[def:multiset]{multiset} \( M \) is an \hyperref[def:ordered_tuple]{ordered tuple} or \hyperref[def:sequence]{infinite sequence} over \( A \) that is bijective with the set
  \begin{equation*}
    \set{ (x, i) \given x \in^\alpha M \T{and} i < \alpha }
  \end{equation*}
\end{definition}
\begin{comments}
  \item We generalize enumerations of plain sets from \cref{def:multiset_enumeration}.
\end{comments}
