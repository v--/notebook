\section{Unification}\label{sec:unification}

\paragraph{Equality}

\begin{remark}\label{rem:identity_of_indiscernibles}
  Stephen Kleene suggests in \cite[163]{Kleene2002Logic} that, in \hyperref[def:nth_order_logic]{second order logic}, the \hyperref[con:equality]{equality} formula \( \synx \syneq \syny \) can be regarded as an abbreviation for the \hyperref[con:schemas_and_instances]{formula schema}
  \begin{equation}\taglabel[\op{Indiscernible}]{eq:rem:identity_of_indiscernibles/indiscernible}
    \ref{eq:rem:identity_of_indiscernibles/indiscernible}[\synx, \syny] \coloneqq \qforall {\synp^{\syn\iota \to \syn\omicron}} \synp\synx \syniff \synp\syny
  \end{equation}
  expressing the assertion that \( \synx \) and \( \syny \) are indistinguishable from the perspective of any property \( \synp \) supported by the system.

  Kleene claims that this an instance of the \enquote{identity of indiscernibles} principle attributed to Gottfried Leibniz. Kleene himself phrases the principle as follows:
  \begin{displayquote}
    \textellipsis if we can discern no property \( P \) in which \( x \) and \( y \) differ, \( x \) and \( y \) are identical.
  \end{displayquote}

  In \cite[54]{Russell1900LeibnizPhilosophy}, a book discussing Leibniz' philosophy, Bertrand Russell describes the principle using Leibniz' own words (translated into English):
  \begin{displayquote}
    \textellipsis there are not in nature two indiscernible real absolute beings
  \end{displayquote}
  and
  \begin{displayquote}
    \textellipsis no two substances are completely similar, or differ solely in number
  \end{displayquote}

  While the interpretation of the second sentence is ambiguous, we can confidently express the first as
  \begin{equation*}
    \neg \qexists {\synx^{\syn\iota}} \qexists {\syny^{\syn\iota}} (\ref{eq:rem:identity_of_indiscernibles/indiscernible}[\synx, \syny] \synwedge \neg (\synx \syneq \syny)),
  \end{equation*}
  which, due to the classical equivalences from \fullref{thm:classical_equivalences} and \fullref{thm:first_order_quantifiers_are_dual} (adapted to second-order logic), can be rewritten as
  \begin{equation}\label{eq:rem:identity_of_indiscernibles/forward}
    \qforall {\synx^{\syn\iota}} \qforall {\syny^{\syn\iota}} (\ref{eq:rem:identity_of_indiscernibles/indiscernible}[\synx, \syny] \synimplies \synx \syneq \syny).
  \end{equation}

  The \hyperref[def:conditional_formula/converse]{converse} is sometimes used. For example, \incite[278]{Farmer2008STTVirtues} states that
  \begin{displayquote}
    Leibniz' Law says that if two things are equal they satisfy exactly the same properties.
  \end{displayquote}
  and formalizes the law as
  \begin{equation}\label{eq:rem:identity_of_indiscernibles/backward}
    \qforall {\synx^{\syn\iota}} \qforall {\syny^{\syn\iota}} (\synx \syneq \syny \synimplies \ref{eq:rem:identity_of_indiscernibles/indiscernible}[\synx, \syny]).
  \end{equation}

  \incite[\S 9.1.4]{Mimram2020ProgramEqualsProof} refers to the former as the \enquote{identity of indiscernibles} and to the latter as the \enquote{indiscernibility of identicals}. He defines \enquote{Leibniz equality} in line with the above suggestion by Kleene and with the formalization by \incite[ex. 22.1]{BoolosEtAl2002ComputabilityAndLogic}:
  \begin{equation}\label{eq:rem:identity_of_indiscernibles/bi}
    \qforall {\synx^{\syn\iota}} \qforall {\syny^{\syn\iota}} (\ref{eq:rem:identity_of_indiscernibles/indiscernible}[\synx, \syny] \syniff \synx \syneq \syny).
  \end{equation}

  In alignment with Kleene (but not the others), Boolos et al. refer to \eqref{eq:rem:identity_of_indiscernibles/bi} as \enquote{identity of indiscernibles}.
\end{remark}

\begin{concept}\label{con:extensionality}
  When discussing \hyperref[def:inference_rule]{inference rules} akin to \ref{inf:def:first_order_natural_deduction_systems/eq/sub}, \incite[164]{Kleene2002Logic} describes \term{extensionality} as follows:
  \begin{displayquote}
    The same property is also sometimes described as \enquote{extensionality}, from the standpoint of the contexts in which \( x = y \) justifies the replacement of \( x \) by \( y \). A context in which such replacement is justified is called \textit{extensional}; one in which it is not, \textit{nonextensional} or sometimes \textit{intensional}.
  \end{displayquote}
\end{concept}
\begin{comments}
  \item Leibniz' \hyperref[rem:identity_of_indiscernibles]{\enquote{identity of indiscernibles}} principle allows us to derive equality of \( x \) and \( y \), while extensionality allows us to use this equality to substitute \( x \) for \( y \).
\end{comments}

\begin{concept}\label{con:equality}
  In addition to judgments, discussed in \fullref{con:judgment}, another essentially undefinable fundamental notion is that of \term{equality}. It is a primordial \hyperref[def:equivalence_relation]{equivalence relation} that can, in some cases, be characterized formally.

  \tcite{In his essay #2, #1 writes}[222]{Mazur2008Equality}
  \begin{displayquote}
    One can't do mathematics for more than ten minutes without grappling, in some way or other, with the slippery notion of equality. Slippery, because the way in which objects are presented to us hardly ever, perhaps never, immediately tells us --- without further commentary --- when two of them are to be considered equal.
  \end{displayquote}

  On a \hyperref[con:syntax_semantics_duality]{syntactic level}, following \cite[19]{UnivalentFoundationsProgram2024OctoberHoTT}, for a given \hyperref[con:metalogic]{object language} we can distinguish between \term{judgmental equality}, dictated by a judgment asserting that two expressions in the object language are equal, and \term{propositional equality}, an equality \hyperref[con:proposition]{proposition} within the object language itself. The latter is formalized in \fullref{def:identity_type}.

  When introducing his type theory in \cite[85]{MartinLöf1984IntuitionisticTypeTheory}, Per Martin-L\"of calls \term{definitional equality} what is essentially judgmental equality. In his later work \cite[40]{MartinLöf1984IntuitionisticTypeTheory}, Martin-L\"of describes definitional equality as follows:
  \begin{displayquote}
    Definitional equality is the equivalence relation generated by abbreviatory definitions, changes of bound variables and the principle of substituting equals for equals.
  \end{displayquote}

  We use the symbol \( {\coloneqq} \) for definitional equality, \( {=} \) for propositional equality within the metalanguage and \( {\doteq} \) for propositional equality within the object language.

  On a \hyperref[con:syntax_semantics_duality]{semantic level}, we can utilize Leibniz' \enquote{identity of indiscernibles} principle discussed in \fullref{rem:identity_of_indiscernibles} to justify equating objects that have identical properties. On a metatheoretic level two objects may be distinct, but as long as they satisfy the same collection of desired properties, we can construct an equivalence relation that will be used to interpret equality propositions in the object language.
\end{concept}

\begin{definition}\label{def:equation}\mimprovised
  For expressing \hyperref[con:equality]{propositional equality}, we will find useful the following general definition.

  Consider the strings generated by the following \hyperref[def:formal_grammar/schema]{grammar schema}:
  \begin{bnf*}
    \bnfprod{left side}  {\bnfpn{term}}, \\
    \bnfprod{right side} {\bnfpn{term}}, \\
    \bnfprod{equation}   {\bnfpn{left side} \bnfsp \bnftsq{\( \syneq \)} \bnfsp \bnfpn{right side}},
  \end{bnf*}
  where, as in \fullref{def:logical_context}, we have purposefully not specified rules for the nonterminal \( \bnfpn{term} \) in order to encompass different kinds of terms.

  \begin{thmenum}
    \thmitem{def:equation/solution} Equations are by fiat assumed to be \hyperref[con:hypothetical_judgment]{hypothetical} judgments or propositions, where the task of finding the hypotheses is implicit. We call this process \term{equation solving} and refer to a viable collection of hypotheses as a \term{solution}.

    We can easily formalize this at the level of generality of \hyperref[def:simply_typed_hol]{simply typed higher-order logic}. Let \( M \) and \( N \) be two terms that have the same type with respect to the \hyperref[def:type_context]{type context} \( x_1: \tau_1, \ldots, x_n: \tau_n \). Then, in for a fixed model, the solution set is simply the \hyperref[def:equalizers]{equalizer set} of \( \Bracks{M} \) and \( \Bracks{N} \):
    \begin{equation}\label{eq:def:equation/solution}
      \set[\Big]{ (a_1, \ldots, a_n) \in \Bracks{\tau_1} \times \cdots \times \Bracks{\tau_n} \given* \Bracks{M}(a_1, \ldots, a_n) = \Bracks{N}(a_1, \ldots, a_n) }.
    \end{equation}

    \thmitem{def:equation/system} We refer to nonempty sets of equations as \term{systems}.

    We define the solution set of a system of equations as the intersection of the individual solution sets.

    \thmitem{def:equation/equivalent} We say that two equation systems are \term{equivalent} if they have the same solutions.

    \thmitem{def:equation/identity} If, regarded as a judgment, an equation has no hypotheses, solving it becomes meaningless. We will refer to such equations as \term[bg=тъждества (\cite[2]{Обрешков1962ВисшаАлгебра}), en=identities (\cite[50]{BaaderNipkow2012TermRewriting})]{identities}.

    Within the formalisms of \fullref{def:equation/solution}, for an identity the solution set coincides with the entirety of \( X \).
  \end{thmenum}
\end{definition}
\begin{comments}
  \item Equations are \hyperref[con:assumed_knowledge]{assumed knowledge}, so definitions across the literature to base this one upon can hardly be found. We do, however, have some hints that our definitions are suitable.

  \begin{itemize}
    \item In the context of \hyperref[con:unification]{unification}, where equations are only regarded as syntactic objects, they are defined similarly as pairs of first-order terms by \incite[def. 7.2.6]{TroelstraSchwichtenberg2000BasicProofTheory}, \incite[252]{Mimram2020ProgramEqualsProof} and \incite[39]{BaaderNipkow2012TermRewriting}. The latter call them \enquote{identities}, and later, in \incite[50]{BaaderNipkow2012TermRewriting}, remark
    \begin{displayquote}
      We use the name \enquote{identity} for a pair of terms \( s \approx t \) to express that this equation is assumed to \textit{hold} in an algebra, and distinguish this from the notion of an \enquote{equation}, which must be \enquote{solved} in an algebra.
    \end{displayquote}

    \item The sides of an identity are equal by Leibniz' \hyperref[rem:identity_of_indiscernibles]{\enquote{identity of indiscernibles}} principle.

    \item In the context of \hyperref[def:nth_order_logic]{first-order logic}, \incite[103]{Kleene2002Logic} distinguishes between \enquote{identical equations}, which are valid in the sense of \fullref{def:first_order_model}, and \enquote{conditional equations} which depend on the \hyperref[def:first_order_valuation/variable_assignment]{variable assignment}.
  \end{itemize}

  \item While it is possible to entirely avoid the concept of systems of equations, this leads to syntax that is more difficult to handle since now multiple left sides and multiple right sides have to be combined.

  This highlights the difference between a matrix equation and a system of linear equations, which are used interchangeably but are nevertheless distinct.
\end{comments}

\begin{example}\label{ex:def:equation}
  \hyperref[def:equation]{Equations} provide a simple way to specify rich semantic structure using simple syntactic objects. A remarkable portion of mathematics concerns the study of different kinds equations.

  \begin{thmenum}
    \thmitem{ex:def:equation/linear} Matrix theory can be regarded as the study of \hyperref[def:system_of_linear_equations]{systems of linear equations}. See \fullref{ch:linear_algebra}.

    \thmitem{ex:def:equation/dynamical} \hyperref[def:dynamical_system]{Dynamical systems} are often specified via equations, for example \hyperref[def:recurrence_relation]{recurrence relations}, \hyperref[def:difference_equation]{difference equations} or differential equations. See \fullref{ch:dynamical_systems}.

    \thmitem{ex:def:equation/nonsmooth} \hyperref[def:zero_of_function]{Zeros} of generalized derivatives are studied in optimization. See \fullref{sec:nonsmooth_derivatives}.

    \thmitem{ex:def:equation/fixed} \hyperref[def:function_fixed_point]{Fixed points} of functions are studied in different branches of mathematics. See \fullref{thm:fixed_point_existence}.

    \thmitem{ex:def:equation/algebraic} \hyperref[def:algebraic_equation]{Algebraic equations} are useful across different branches of mathematics.
  \end{thmenum}
\end{example}

\paragraph{Unification}

\begin{concept}\label{con:unification}
  \term[en=unification, ru=унификация (\cite[152]{Герасимов2011Вычислимость})]{unification}
  \todo{}
\end{concept}
