\section{Categories}\label{sec:categories}

\begin{definition}\label{def:category}\mimprovised
  A \term{category} is a \hyperref[def:directed_multigraph]{directed multigraph} \( \cat{C} \) equipped with a \hyperref[def:set_valued_map/partial]{partial operation} \( \bincirc \) on the arrows of \( \cat{C} \) and another operation \( \id \) that selects a distinguished arrow for each vertex.

  In tradition regarding \hyperref[def:concrete_category]{forgetful functors}, we denote the underlying multigraph of \( \cat{C} \) by \( U(\cat{C}) \).

  \begin{thmenum}[series=def:category]
    \thmitem{def:category/objects} We call the vertices of the graph \term{objects} and denote the set of all objects by \( \obj(\cat{C}) \). We will often write \( A \in \cat{C} \) as a shorthand for \( A \in \obj(\cat{C}) \).

    \thmitem{def:category/morphisms} We call the arrows of the graph \term{morphisms} or sometimes \term{maps}. If \( f \) is a morphism, we call its initial vertex its \term{domain} \( \dom(f) \) and its terminal vertex its \term{codomain} \( \co\dom(f) \). We denote a morphism from \( A \) to \( B \) by \( f: A \to B \) or \( A \reloset f \to B \).

    We call the set \( \cat{C}(A, B) \) of all morphisms from \( A \) to \( B \) a \term{morphism set} or \term{\( \hom \)-set}. We use the shorthand \( \cat{C}(A) \) for \( \cat{C}(A, A) \). Another established notation is \( \op{hom}(A, B) \) instead of \( \cat{C}(A, B) \).

    Both of these notations highlight that \( \cat{C}(A, B) \), when parameterized by \( A \) and \( B \), is a \hyperref[def:functor]{functor}, as discussed in \cref{def:hom_functor}.

    \thmitem{def:category/composition} We require the \term{composition} \( \bincirc \) of the arrows \( f \) and \( g \) to be defined only if \( \co\dom(f) = \dom(g) \). In this case, we require \( g \bincirc f \) to be a morphism from \( \dom(f) \) to \( \co\dom(g) \).

    Note how the order of \( f \) and \( g \) may seem confusing: we write the composition of \( f: A \to B \) and \( g: B \to C \) as \( g \bincirc f: A \to C \). This is set up so that it matches \hyperref[def:set_valued_map/composition]{function composition}. The order may seem different compared to multiplication in \hyperref[def:group]{groups}, for example, however \cref{def:monoid_delooping} shows that this is actually a generalization of multiplication.

    This order of composition is used in \cite[7]{MacLane1998CategoryTheory}, \cite[def. 1.1.1]{Leinster2014BasicCategoryTheory} and \cite[def. I.3.1]{Aluffi2009Algebra}.

    \thmitem{def:category/identity} We denote the \term{identity morphism} of an object \( A \) by \( \id_A \).
  \end{thmenum}

  The definition of a category additionally requires the following conditions to hold:
  \begin{thmenum}[resume=def:category]
    \thmitem[def:category/C1]{C1} For any morphism \( f: A \to B \), the identities \( \id_A \) and \( \id_B \) must satisfy
    \begin{equation}\label{eq:def:category/C1}\tag{\logic{C1}}
      f \bincirc \id_A = \id_B \bincirc f = f.
    \end{equation}

    \thmitem[def:category/C2]{C2} Composition must be associative. That is, for each triple of morphism \( f: A \to B \), \( g: B \to C \) and \( h: C \to D \), the following must hold:
    \begin{equation}\label{eq:def:category/C2}\tag{\logic{C2}}
      (h \bincirc g) \bincirc f = h \bincirc (g \bincirc f).
    \end{equation}
  \end{thmenum}
\end{definition}

\begin{remark}\label{rem:categorical_morphism_notation}

\end{remark}

\begin{example}\label{ex:def:category}
  Examples of categories include:

  \begin{itemize}
    \item The category \( \cat{Set} \) of \hyperref[def:large_and_small_sets]{small} \hyperref[def:set]{sets} and \hyperref[def:function]{functions} defined in \cref{def:category_of_small_sets}.

    \item The category \( \cat{Cat} \) of small categories defined in \cref{def:category_of_small_categories}.

    \item All the \hyperref[def:fol_theory_model_functor/obj]{categories of small first-order models} listed in \cref{ex:def:fol_theory_model_functor}

    \item The category \( \cat{Top} \) of small \hyperref[def:topological_space]{topological spaces} and \hyperref[def:global_continuity]{continuous functions} defined in \cref{def:category_of_small_topological_spaces}.

    \item For every topological space, the fundamental groupoid defined in \cref{def:fundamental_groupoid}.

    \item The category of small \hyperref[def:directed_multigraph]{directed multigraphs} defined in \cref{def:directed_multigraph/category}, as well as related categories discussed in \cref{def:graph_functors}.

    \item For every directed multigraph, the free category defined in \cref{def:directed_multigraph_free_category}.

    \item For every \hyperref[def:preordered_set]{preordered set}, the induced category defined in \fullref{thm:order_category_isomorphism}.
  \end{itemize}
\end{example}

\begin{definition}\label{def:category_size}
  As can be seen from \cref{ex:def:category}, some of the categories we are working with, like \( \cat{Set} \), contain as objects all \hyperref[def:large_and_small_sets]{small sets}. As mentioned in \cref{def:large_and_small_sets}, the concept of a small set is defined relative to the smallest Grothendieck universe that suits our needs.

  \Fullref{thm:russels_paradox} demonstrates that the set of all sets easily leads to a paradox, which is the reason we restrict our attention only to sets within some Grothendieck universe. This universe is implicit by default, however we will occasionally need to make it explicit.

  We will say that the category \( \cat{C} \) is \term{locally \( \mscrU \)-small} if the morphism set \( \cat{C}(A, B) \) is \( \mscrU \)-small for every pair of objects \( A \) and \( B \). If, in addition, the set \( \obj(\cat{C}) \) of objects is also \( \mscrU \)-small, we will say that the category \( \cat{C} \) is \term{\( \mscrU \)-small}. If a category is not \( \mscrU \)-small, we say that it is \term{\( \mscrU \)-large}.

  In particular, \term{finite} and \term{locally finite} categories are ones who are \( V_\omega \)-small and \( V_\omega \)-locally small for the universe of hereditarily finite sets \hyperref[def:universe_of_hereditary_finite_sets]{\( V_\omega \)}. This notion of local finiteness is unrelated to local finiteness of graphs defined in \cref{def:graph_cardinality/local}.

  Universes are crucial to be able to do a lot of categorical constructions within set theory, most importantly \( \mscrU \)-large \hyperref[def:functor_category]{functor categories} but also \hyperref[def:product_category]{product categories} and, as discussed in \cref{rem:functor_size}, even the \hyperref[def:functor]{functors} themselves.

  Note that, even if a category is \( \mscrU \)-small, the category itself as the tuple \( (Q, \bincirc, \id) \) from \cref{def:category} may not be a \( \mscrU \)-small set.

  Also note that, in a locally small category, it is possible for the set of all morphisms to be \( \mscrU \)-large. This is impossible for small categories due to \ref{def:grothendieck_universe/union}.

  We sometimes skip the prefix \enquote{\( \mscrU \)-} if it is unimportant, and simply speak of \enquote{large categories} or \enquote{locally small categories}.
\end{definition}

\begin{definition}\label{def:category_of_small_sets}
  Suppose that we are given a \hyperref[def:grothendieck_universe]{Grothendieck universe} \( \mscrU \), which is safe to assume to be the smallest suitable one as explained in \cref{def:large_and_small_sets}.

  We denote the \hyperref[def:category]{category} of \( \mscrU \)-small \hyperref[def:set]{sets} by \( \ucat{Set} \) or, if the universe is clear from the context, simply by \( \cat{Set} \). See \cref{def:category_size} for a further discussion of universes and categories.

  \begin{itemize}
    \item The \hyperref[def:category/objects]{set of objects} \( \obj(\cat{Set}) \) is \( \mscrU \) itself.

    \item The \hyperref[def:category/morphisms]{set of morphisms} \( \cat{Set}(A, B) \) from \( A \) to \( B \) is the set \hyperref[def:set_of_all_functions]{\( \fun(A, B) \)} of all total single-valued functions from \( A \) to \( B \).

    \item The \hyperref[def:category/composition]{composition of morphisms} is the usual \hyperref[def:set_valued_map/composition]{function composition}.

    \item The \hyperref[def:category/identity]{identity morphism} on the set \( A \) is the \hyperref[def:set_valued_map/identity]{identity function}
    \begin{equation*}
      \begin{aligned}
        &\id_A: A \to A \\
        &\id_A(x) \coloneqq A.
      \end{aligned}
    \end{equation*}
  \end{itemize}
\end{definition}
\begin{defproof}
  To see that \( \ucat{Set} \) is indeed a category, we verify the conditions \ref{def:category/C1} and \ref{def:category/C2}.

  \SubProofOf{def:category/C1} For every two sets \( A, B \in \mscrU \) and every function \( f: A \to B \), for all \( x \in A \) we have
  \begin{equation*}
    [\id_B \bincirc f](x)
    =
    \id_B(f(x))
    =
    f(x)
    =
    f(\id_A(x))
    =
    [f \bincirc \id_A](x).
  \end{equation*}

  Therefore, \( \id_A \) and \( \id_B \) satisfy \eqref{eq:def:category/C1}.

  \SubProofOf{def:category/C2} Associativity of function composition is proved in \cref{thm:def:set_valued_map/associative}.
\end{defproof}

\begin{proposition}\label{thm:def:category_of_small_sets}
  We collect here important properties of the category \hyperref[def:category_of_small_sets]{\( \ucat{Set} \)} of \( \mscrU \)-small sets. Most of them require forward references.

  \begin{thmenum}
    \thmitem{thm:def:category_of_small_sets/large} It is a \( \mscrU \)-large category in the sense of \cref{def:category_size} because \( \mscrU \) itself is the set of objects and, defined as a \hyperref[def:directed_multigraph]{directed multigraph} with additional operations, the category is a \( \mscrU \)-large set in the sense of \cref{def:large_and_small_sets}.

    \thmitem{thm:def:category_of_small_sets/locally_small} It is a \hyperref[def:category_size]{\( \mscrU \)-locally small category} because \( \mscrU \) is a model of \hyperref[def:zfc]{\( \logic{ZFC} \)} and \cref{thm:zfc_existence_theorems/set_of_functions} holds.

    \thmitem{thm:def:category_of_small_sets/morphism_invertibility} All \hyperref[def:morphism_invertibility/right_cancellative]{epimorphisms} and \hyperref[def:set_valued_map/empty]{nonempty} \hyperref[def:morphism_invertibility/left_cancellative]{monomorphisms} \hyperref[def:morphism_invertibility/left_invertible]{split} and are precisely the \hyperref[def:function_invertibility/surjective]{surjective} and nonempty \hyperref[def:function_invertibility/injective]{injective functions}, respectively.

    This is stated in \cref{thm:function_invertibility_categorical}. See also \fullref{thm:epimorphisms_split_in_set}.

    \thmitem{thm:def:category_of_small_sets/universal_objects} The empty set \( \varnothing \) is an \hyperref[def:universal_objects/initial]{initial object} and the singleton set \( \set{ A } \) is a \hyperref[def:universal_objects/terminal]{terminal object} for every \( A \in \ucat{Set} \). No \hyperref[def:universal_objects/zero]{zero objects} exist in \( \ucat{Set} \) by \cref{thm:def:universal_objects/no_zero}.

    This is discussed in \cref{ex:def:universal_objects}.

    \thmitem{thm:def:category_of_small_sets/discrete_category} The \hyperref[def:discrete_category]{discrete category} functor \( D: \ucat{Set} \to \ucat{Cat} \) is left adjoint to the forgetful functor \( U: \ucat{Cat} \to \ucat{Set} \)

    This is discussed in \cref{ex:def:category_adjunction/set_cat}.

    \thmitem{thm:def:category_of_small_sets/limits} The \hyperref[def:discrete_category_limits]{products} and \hyperref[def:discrete_category_limits]{coproducts} are the \hyperref[def:cartesian_product]{Cartesian products} and the \hyperref[def:disjoint_union]{disjoint unions}, respectively.

    This is shown in \fullref{thm:cartesian_product_universal_property} and \fullref{thm:disjoint_union_universal_property}.
  \end{thmenum}
\end{proposition}

\begin{definition}\label{def:opposite_directed_multigraph}\mcite[def. 1.1.8]{Knauer2019AlgebraicGraphTheory}
  The \term{opposite} or \term{dual} of the \hyperref[def:directed_multigraph]{directed multigraph} \( G = (V, A, i, t) \) is obtained by swapping \( i \) and \( t \).
\end{definition}

\begin{definition}\label{def:opposite_category}\mcite[def. 1.1.9]{Leinster2014BasicCategoryTheory}
  The \term{opposite} category of \( \cat{C} \) is obtained by \enquote{reversing} all arrows. This reversing is merely a relabeling of the domain and codomain --- the underlying morphisms are the same. This concept is quite powerful because it allows performing constructions and proofs by duality --- see \cref{thm:categorical_principle_of_duality}.

  Formally, the category \( \cat{C}^\oppos \) is based on the \hyperref[def:opposite_directed_multigraph]{opposite multigraph} and is defined as follows:
  \begin{itemize}
    \item The \hyperref[def:category/objects]{set of objects} \( \obj(\cat{C}^\oppos) \) is the set of objects \( \obj(\cat{C}) \) of \( \cat{C} \).

    \item The \hyperref[def:category/morphisms]{set of morphisms} \( \cat{C}^\oppos(A, B) \) is the set \( \cat{C}(B, A) \). Thus, any morphism \( f^\oppos: A \to B \) in the opposite category \( \cat{C}^\oppos \) is a morphism \( f: B \to A \) in \( \cat{C}^\oppos \).

    The superscript here is used solely to distinguish between \( f \) being regarded as a morphism of \( \cat{C} \) and of \( \cat{C}^\oppos \) --- the morphisms in \( \cat{C} \) are exactly those of \( \cat{C}^\oppos \), simply relabeled.

    \item The \hyperref[def:category/composition]{composition of the morphisms}
    \begin{align*}
      f^\oppos &\in \cat{C}^\oppos(A, B) = \cat{C}(B, A) \\
      g^\oppos &\in \cat{C}^\oppos(B, C) = \cat{C}(C, B)
    \end{align*}
    is the morphism
    \begin{equation*}
      \underbrace{g^\oppos \bincirc f^\oppos}_{\cat{C}^\oppos(A, C)} \coloneqq \underbrace{f \bincirc g}_{\cat{C}(C, A)}.
    \end{equation*}

    \item The \hyperref[def:category/identity]{identity morphism} on the object \( A \in \cat{C} \) is again \( \id_A \).
  \end{itemize}
\end{definition}

\begin{remark}\label{rem:double_opposite_category}
  The double-opposite of a category or morphism is obviously the original. This is made precise with the oppositization functor defined in \cref{def:opposite_functor}.
\end{remark}

\begin{example}\label{ex:def:opposite_category}
  A morphism \( f^\oppos: A \to B \) in the category \( \cat{Set}^\oppos \) is a function from the set \( B \) to the set \( A \). We cannot apply \( f \) to a point in \( B \) unless \( B \subseteq A \). Thus, we cannot regard, in general, the morphism \( f^\oppos \) as a function, although only the \hyperref[def:function]{signature} of \( f \) is different from that of \( f^\oppos \) --- their \hyperref[def:set_valued_map/graph]{graphs} are the same.
\end{example}

\begin{proposition}\label{thm:categorical_principle_of_duality}
  We can extend the principle of duality for preordered sets discussed in \fullref{thm:order_duality} to categories. Since we have defined categories in \hyperref[def:axiom_of_universes]{\logic{ZFC+U}} rather than as a first-order theory, we will state this principle informally:
  \begin{displayquote}
    If a statement holds for every category, its dual statement obtained by \enquote{reversing} all morphisms as in \cref{def:opposite_category}, also holds for every category.
  \end{displayquote}

  See \cref{thm:def:morphism_invertibility/split_epimorphism} for how this principle can be utilized easily.

  We list here results that heavily utilize this principle. Note that it is now always obvious what exactly needs to reversed in order for this principle to hold. For example, as discussed in \cref{def:opposite_functor}, for opposite functors we have
  \begin{equation*}
    [F \bincirc G]^\oppos = F^\oppos \bincirc G^\oppos,
  \end{equation*}
  which is somewhat unexpected.

  \begin{thmenum}
    \thmitem{thm:categorical_principle_of_duality/morphism_invertibility} \Cref{thm:morphism_invertibility_duality}: A morphism \( f: A \to B \) in \( \cat{C} \) is a \hyperref[def:morphism_invertibility/left_invertible]{(split)} \hyperref[def:morphism_invertibility/left_cancellative]{monomorphism} if and only if \( f^\oppos: B \to A \) in the opposite category \( \cat{C}^\oppos \) is a \hyperref[def:morphism_invertibility/right_invertible]{(split)} \hyperref[def:morphism_invertibility/right_cancellative]{epimorphism}.

    In particular, \( f \) is an \hyperref[def:morphism_invertibility/isomorphism]{isomorphism} in \( \cat{C} \) if and only if \( f^\oppos \) is an isomorphism in \( \cat{C}^\oppos \).

    \thmitem{thm:categorical_principle_of_duality/universal_objects} \Cref{thm:universal_object_duality}: An object is \hyperref[def:universal_objects/initial]{initial} if and only if it is a \hyperref[def:universal_objects/terminal]{terminal object} the \hyperref[def:opposite_category]{opposite category}.

    \thmitem{thm:categorical_principle_of_duality/functor_categories} \Cref{thm:opposite_of_functor_category}: For the \hyperref[def:opposite_category]{opposite} of the \hyperref[def:functor_category]{functor category} \( [\cat{C}, \cat{D}] \) we have
    \begin{equation*}
      [\cat{C}, \cat{D}]^\oppos = [\cat{C}^\oppos, \cat{D}^\oppos].
    \end{equation*}

    \thmitem{thm:categorical_principle_of_duality/equivalences} \Cref{thm:opposite_of_category_equivalence}: The \hyperref[def:opposite_category]{duals} of \hyperref[def:category_equivalence]{equivalent categories} are equivalent.

    \thmitem{thm:categorical_principle_of_duality/adjunctions} \Cref{thm:category_adjunction_duality}: The functor \( F \) is \hyperref[def:category_adjunction]{left adjoint} to \( G \) if and only if the \hyperref[def:opposite_functor]{dual functor} \( F^\oppos \) is right adjoint to \( G^\oppos \).

    \thmitem{thm:categorical_principle_of_duality/limits} \Cref{thm:categorical_limit_duality}: For every \hyperref[def:category_of_cones/cone]{cone} \( (A, \alpha) \) of the \hyperref[def:categorical_diagram]{diagram} \( D \) in \( \cat{C} \), \( (A, \alpha^\oppos) \) is a \hyperref[def:category_of_cones/cone]{cocone} of \( D^\oppos \) in \( \cat{C}^\oppos \).

    Even more, for every \hyperref[def:category_of_cones/limit]{limit} \( (L, \pi) \) of \( D \) in \( \cat{C} \), \( (L, \pi^\oppos) \) is a \hyperref[def:category_of_cones/colimit]{colimit} of \( D^\oppos \) in \( \cat{C}^\oppos \).
  \end{thmenum}
\end{proposition}

\begin{definition}\label{def:morphism_invertibility}
  In connection with \cref{def:function_invertibility} and \cref{def:fol_embedding}, we introduce the following terminology:
  \begin{thmenum}
    \thmitem{def:morphism_invertibility/left_cancellative} The morphism \( g: B \to C \) is \term{left-cancellative} if, for any pair of morphisms \( f_1, f_2: A \to B \), the equality \( g \bincirc f_1 = g \bincirc f_2 \) implies \( f_1 = f_2 \).

    Left-cancellative morphisms are also called \term{monic morphisms} or \term{monomorphisms}.

    \thmitem{def:morphism_invertibility/left_invertible} The morphism \( f: A \to B \) is \term{left-invertible} if there exists a morphism \( g: B \to A \) such that \( g \bincirc f = \id_A \). We call \( g \) a \term{left inverse} of \( f \).

    Using forward references to \cref{def:categorical_diagram}, we can restate this condition by saying that the following diagram commutes:
    \begin{equation}\label{eq:def:morphism_invertibility/left_invertible}
      \begin{aligned}
        \includegraphics[page=1]{output/def__morphism_invertibility}
      \end{aligned}
    \end{equation}

    Left-invertible morphisms are sometimes called \term{split monomorphisms} because they \enquote{split} the identity \( \id_A \) into a composition of \( f \) and \( g \).

    \thmitem{def:morphism_invertibility/right_cancellative} \hyperref[thm:categorical_principle_of_duality]{Dually}, the morphism \( f: A \to B \) is \term{right-cancellative} if, for any pair of morphisms \( g_1, g_2: B \to C \), the equality \( g_1 \bincirc f = g_2 \bincirc f \) implies \( g_1 = g_2 \).

    Right-cancellative morphisms are also called \term{epic morphisms} or \term{epimorphisms}.

    \thmitem{def:morphism_invertibility/right_invertible} The morphism \( g: B \to A \) is \term{right-invertible} if there exists a morphism \( f: A \to B \) such that \( f \bincirc g = \id_B \). We call \( g \) a \term{right inverse} of \( f \).

    Using forward references to \cref{def:categorical_diagram}, we can restate this condition by saying that the following diagram commutes:
    \begin{equation}\label{eq:def:morphism_invertibility/right_invertible}
      \begin{aligned}
        \includegraphics[page=2]{output/def__morphism_invertibility}
      \end{aligned}
    \end{equation}

    Right-invertible morphisms are sometimes called \term{split epimorphisms} because they \enquote{split} the identity \( \id_B \) into a composition of \( g \) and \( f \).

    \thmitem{def:morphism_invertibility/isomorphism} The morphism \( f: A \to B \) is \term{fully invertible} it is both left-invertible and right-invertible. By \cref{thm:def:morphism_invertibility/left_and_right}, in this case, there exists a unique morphism \( f^{-1}: B \to A \) that is a \term{two-sided inverse}, i.e. it is both a left inverse and a right inverse.

    A fully invertible morphism is usually called an \term{isomorphism}. If there exists an isomorphism between \( A \) and \( B \), we say that they are \term{isomorphic} and write \( A \cong B \).

    \thmitem{def:morphism_invertibility/endomorphism} A morphism \( f: A \to A \) from an object to itself is called an \term{endomorphism}.

    \thmitem{def:morphism_invertibility/automorphism} A morphism that is both an endomorphism and an isomorphism is called an \term{automorphism}.

    \thmitem{def:morphism_invertibility/involution} If an automorphism is its own inverse, we call it an \term[ru=инволюция (\cite[97]{Розенфельд1963ОсновныеПонятиеГеометрии}), en=involution (\cite[36]{Schechter1997AnalysisHandbook})]{involution}.
  \end{thmenum}
\end{definition}
\begin{comments}
  \item The term \enquote{involution} is also used for self-inverse group elements; see \cref{def:group_element_order}.
\end{comments}

\begin{example}\label{ex:def:morphism_invertibility}
  \Cref{thm:function_invertibility_categorical} characterizes the cancellative and invertible morphisms defined in \cref{def:morphism_invertibility} for \hyperref[def:category_of_small_sets]{\( \cat{Set} \)} in terms of \hyperref[def:function_invertibility/injective]{injectivity} and \hyperref[def:function_invertibility/surjective]{surjectivity}.

  A very simple example of a monomorphism which does not split is the empty function with nonempty domain. These are discussed in \cref{thm:function_invertibility_categorical/empty}.

  \Fullref{thm:surjective_functions_are_right_invertible} is important enough to have a categorical interpretation via \fullref{thm:epimorphisms_split_in_set}, where its relation to the \hyperref[def:zfc/choice]{axiom of choice} is also discussed.
\end{example}

\begin{proposition}\label{thm:morphism_invertibility_duality}
  A morphism \( f: A \to B \) in \( \cat{C} \) is a \hyperref[def:morphism_invertibility/left_invertible]{(split)} \hyperref[def:morphism_invertibility/left_cancellative]{monomorphism} if and only if \( f^\oppos: B \to A \) in the opposite category \( \cat{C}^\oppos \) is a \hyperref[def:morphism_invertibility/right_invertible]{(split)} \hyperref[def:morphism_invertibility/right_cancellative]{epimorphism}.

  In particular, \( f \) is an \hyperref[def:morphism_invertibility/isomorphism]{isomorphism} in \( \cat{C} \) if and only if \( f^\oppos \) is an isomorphism in \( \cat{C}^\oppos \).

  This is part of the duality principles listed in \cref{thm:categorical_principle_of_duality}.
\end{proposition}
\begin{proof}
  Trivial.
\end{proof}

\begin{proposition}\label{thm:def:morphism_invertibility}
  Morphisms have the following basic properties regarding their \hyperref[def:morphism_invertibility]{invertibility} (compare to \cref{thm:function_composition_invertibility}):

  \begin{thmenum}
    \thmitem{thm:def:morphism_invertibility/split_monomorphism} Any \hyperref[def:morphism_invertibility/left_invertible]{left-invertible morphism} is \hyperref[def:morphism_invertibility/left_cancellative]{left-cancellative}.

    In more categorical terms, every split monomorphism is a monomorphism.

    \thmitem{thm:def:morphism_invertibility/split_epimorphism} Any \hyperref[def:morphism_invertibility/right_invertible]{right-invertible morphism} is \hyperref[def:morphism_invertibility/right_cancellative]{right-cancellative}.

    In more categorical terms, every split epimorphism is an epimorphism.

    \thmitem{thm:def:morphism_invertibility/at_most_one_inverse}\mcite[exerc. 1.1.13]{Leinster2014BasicCategoryTheory} Any morphism has at most one two-sided inverse.

    \thmitem{thm:def:morphism_invertibility/left_and_right} If a morphism is both left-invertible and right-invertible, the two inverses are equal, and the morphism is fully invertible.

    \thmitem{thm:def:morphism_invertibility/inverse_interchanges} The morphism \( f: A \to B \) is a right inverse of \( g: B \to A \) if and only if \( g \) is a left inverse of \( f \).

    \thmitem{thm:def:morphism_invertibility/monomorphism_and_split_epimorphism} If a morphism left-cancellative and right-invertible, it is an isomorphism.

    \thmitem{thm:def:morphism_invertibility/split_monomorphism_and_epimorphism} If a morphism left-invertible and right-cancellative, it is an isomorphism.

    \thmitem{thm:def:morphism_invertibility/cancellative_composition} The composition of two monomorphisms (resp. epimorphisms) is again a monomorphism (resp. epimorphism).

    \thmitem{thm:def:morphism_invertibility/invertible_composition} The composition of two split monomorphisms (resp. epimorphisms) is again a split monomorphism (resp. epimorphism).
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:morphism_invertibility/split_monomorphism} Suppose that \( g: B \to C \) is left-invertible with inverse \( h: C \to B \). Suppose that \( f_1, f_2: A \to B \) are morphisms such that
  \begin{equation*}
    g \bincirc f_1 = g \bincirc f_2.
  \end{equation*}

  Then
  \begin{equation*}
    f_1
    \reloset {\eqref{eq:def:category/C1}} =
    \id_B \bincirc f_1
    =
    (h \bincirc g) \bincirc f_1
    \reloset {\eqref{eq:def:category/C2}} =
    h \bincirc (g \bincirc f_1)
    =
    h \bincirc (g \bincirc f_2)
    =
    \cdots
    =
    f_2.
  \end{equation*}

  \SubProofOf{thm:def:morphism_invertibility/split_epimorphism} This is an exemplar proof using duality. By \cref{thm:morphism_invertibility_duality}, every split epimorphism \( f: A \to B \) in \( \cat{C} \) is a split monomorphism in \( \cat{C}^\oppos \). By \cref{thm:def:morphism_invertibility/split_monomorphism}, \( f^\oppos \) is a monomorphism. Then gain by \cref{thm:morphism_invertibility_duality}, \( f \) is an epimorphism.

  \SubProofOf{thm:def:morphism_invertibility/at_most_one_inverse} If \( f: A \to B \) has no inverse, it vacuously has at most one inverse.

  Now assume that \( f: A \to B \) has two inverses \( g_1: B \to A \) and \( g_2: B \to A \):
  \begin{align*}
    g_1 \bincirc f = \id_A &&& f \bincirc g_1 = \id_B, \\
    g_2 \bincirc f = \id_A &&& f \bincirc g_2 = \id_B.
  \end{align*}

  Then
  \begin{equation*}
    g_1
    \reloset {\eqref{eq:def:category/C1}} =
    g_1 \bincirc \id_B
    =
    g_1 \bincirc (f \bincirc g_2)
    \reloset {\eqref{eq:def:category/C2}} =
    (g_1 \bincirc f) \bincirc g_2
    =
    \id_A \bincirc g_2
    \reloset {\eqref{eq:def:category/C1}} =
    g_2.
  \end{equation*}

  \SubProofOf{thm:def:morphism_invertibility/left_and_right} Suppose that \( f: A \to B \) has a left-inverse \( l: B \to A \) and a right-inverse \( r: B \to A \). Then

  \SubProofOf{thm:def:morphism_invertibility/inverse_interchanges} Trivial.

  \SubProofOf{thm:def:morphism_invertibility/monomorphism_and_split_epimorphism} Let \( g: B \to A \) be left-cancellative and right-invertible. Let \( f: A \to B \) be a right inverse of \( g \). Then
  \begin{equation*}
    f
    =
    \reloset {\eqref{eq:def:category/C1}} =
    f \bincirc \id_A
    =
    f \bincirc (g \bincirc f)
    =
    (f \bincirc g) \bincirc f.
  \end{equation*}

  Because \( g \) is a left inverse of \( f \), from \cref{thm:def:morphism_invertibility/split_monomorphism} it follows that \( f \) is left-cancellative. Since we have
  \begin{equation*}
    \id_B \bincirc f
    =
    (f \bincirc g) \bincirc f,
  \end{equation*}
  it follows that \( f \bincirc g = \id_B \).

  Therefore, \( f \) is a left inverse of \( g \) and hence an isomorphism.

  \SubProofOf{thm:def:morphism_invertibility/split_monomorphism_and_epimorphism} The proof is analogous to \cref{thm:def:morphism_invertibility/monomorphism_and_split_epimorphism}.

  \SubProofOf{thm:def:morphism_invertibility/cancellative_composition} Let \( g: B \to C \) and \( h: C \to D \) be monomorphisms (left-cancellative).

  Let \( f_1, f_2: A \to B \) be two arbitrary morphisms with codomain \( B \). Suppose that
  \begin{equation*}
    (h \bincirc g) \bincirc f_1 = (h \bincirc g) \bincirc f_2.
  \end{equation*}

  Then, by \ref{def:category/C2},
  \begin{equation*}
    h \bincirc (g \bincirc f_1) = h \bincirc (g \bincirc f_2).
  \end{equation*}

  Since \( h \) is left-cancellative, it follows that
  \begin{equation*}
    g \bincirc f_1 = g \bincirc f_2.
  \end{equation*}

  Since \( g \) is also left-cancellative, \( f_1 = f_2 \).

  Therefore, \( h \bincirc g \) is a monomorphism.

  The proof for composition of epimorphisms is identical.

  \SubProofOf{thm:def:morphism_invertibility/invertible_composition} Let \( f: A \to B \) and \( g: B \to C \) be split monomorphisms (left-invertible).

  Then there exist left inverses \( l_f: B \to A \) and \( l_g: C \to B \) of \( f \) and \( g \), respectively. We have
  \begin{equation*}
    (l_f \bincirc l_g) \bincirc (g \bincirc f)
    \reloset {\eqref{eq:def:category/C2}} =
    l_f \bincirc (l_g \bincirc g) \bincirc f
    =
    l_f \bincirc \id_B \bincirc f
    \reloset {\eqref{eq:def:category/C1}} =
    l_f \bincirc f
    =
    \id_A.
  \end{equation*}

  Therefore, \( g \bincirc f \) is also left-invertible.

  The proof for composition of split epimorphisms is identical.
\end{proof}

\begin{theorem}[Epimorphisms split in Set]\label{thm:epimorphisms_split_in_set}
  Every \hyperref[def:morphism_invertibility/right_cancellative]{epimorphism} in \hyperref[def:category_of_small_sets]{\( \cat{Set} \)} splits. That is, all epimorphisms in \( \cat{Set} \) are \hyperref[def:morphism_invertibility/right_invertible]{split epimorphisms}.
\end{theorem}
\begin{comments}
  \item Assuming the existence of the \hyperref[def:grothendieck_universe]{Grothendieck universe} containing \( \cat{Set} \), in \hyperref[def:zfc]{\logic{ZF}} this theorem is equivalent to the \hyperref[def:zfc/choice]{axiom of choice} --- see \cref{thm:axiom_of_choice_equivalences/epimorphisms}.

  \item Since not every epimorphism splits in a general category, this theorem is sometimes considered to be a categorical statement of the axiom of choice, which holds in some categories but not in others.
\end{comments}
\begin{proof}
  By \cref{thm:function_invertibility_categorical/right_cancellative}, a function is an epimorphism if and only if it is surjective. Thus, the theorem is equivalent to \fullref{thm:surjective_functions_are_right_invertible}.
\end{proof}

\begin{definition}\label{def:universal_objects}\mcite[20]{MacLane1998CategoryTheory}
  Fix a category \( \cat{C} \).

  \begin{thmenum}
    \thmitem{def:universal_objects/initial} We call the object \( I \in \cat{C} \) an \term[ru=начальный объект (\cite[80]{ЦаленкоШульгейфер1974ОсновыТеорииКатегорий})]{initial object} if for any other object \( A \in \cat{C} \) there exists a unique morphism \( f: I \to A \),

    \thmitem{def:universal_objects/terminal} \hyperref[thm:categorical_principle_of_duality]{Dually}, we call the object \( T \in \cat{C} \) a \term[ru=конечный объект (\cite[80]{ЦаленкоШульгейфер1974ОсновыТеорииКатегорий})]{terminal object} or \term{final object} if for any other object \( A \in \cat{C} \) there exists a unique morphism \( f: A \to T \).

    The initial and terminal objects are collectively called \term{universal objects}.

    \thmitem{def:universal_objects/zero} If \( Z \) is both an initial and a terminal object, we say that \( Z \) is a \term[ru=нулевой объект (\cite[80]{ЦаленкоШульгейфер1974ОсновыТеорииКатегорий})]{null object} or \term{zero object}.
  \end{thmenum}
\end{definition}

\begin{example}\label{ex:def:universal_objects}
  \begin{thmenum}
    \thmitem{ex:def:universal_objects/set} In the category \hyperref[def:category_of_small_sets]{\( \cat{Set} \)} of small sets, for any set \( A \) there is a unique \hyperref[def:set_valued_map/empty]{empty function} from \( \varnothing \) to \( A \). Therefore, \( \varnothing \) is an \hyperref[def:universal_objects/initial]{initial object} in \( \cat{Set} \).

    For any set \( A \), there is a unique function that contracts any set \( B \) to \( \set{ A } \). Therefore, every singleton set is a \hyperref[def:universal_objects/terminal]{final object} in \( \cat{Set} \).

    We often denote the initial and terminal objects in \( \cat{Set} \) by \( 0 \) and \( 1 \) respectively, which corresponds to their definition as \hyperref[def:ordinal]{ordinals}.

    By \cref{thm:def:universal_objects/no_zero}, \( \cat{Set} \) has no zero object.

    \thmitem{ex:def:universal_objects/grp} In the category \hyperref[def:group/category]{\( \cat{Grp} \)} of small groups, the \hyperref[def:group/trivial]{trivial group} is a \hyperref[def:universal_objects/zero]{zero object}. This holds more generally for pointed sets rather than groups.

    Indeed, it can be embedded into any other group and any group can be contracted into the corresponding trivial group. Furthermore, all trivial groups are isomorphic.
  \end{thmenum}
\end{example}

\begin{proposition}\label{thm:universal_object_duality}
  An object is \hyperref[def:universal_objects/initial]{initial} if and only if it is a \hyperref[def:universal_objects/terminal]{terminal object} the opposite category.

  This is part of the duality principles listed in \cref{thm:categorical_principle_of_duality}.
\end{proposition}
\begin{proof}
  Trivial.
\end{proof}

\begin{proposition}\label{thm:def:universal_objects}
  \hfill
  \begin{thmenum}
    \thmitem{thm:def:universal_objects/initial} An \hyperref[def:universal_objects/initial]{initial object} is unique up to an isomorphism.
    \thmitem{thm:def:universal_objects/terminal} \hyperref[thm:categorical_principle_of_duality]{Dually}, a \hyperref[def:universal_objects/initial]{terminal object} is also unique up to an isomorphism.
    \thmitem{thm:def:universal_objects/zero} If a category has an initial and a terminal object and if they are isomorphic, then both are zero objects.

    In particular, a zero object is unique up to an isomorphism.

    \thmitem{thm:def:universal_objects/no_zero} If an initial and a terminal object exists and are not isomorphic, then there exist no zero objects.
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:universal_objects/initial} Suppose that \( A \) and \( B \) are both initial objects in \( \cat{C} \). Then there exist morphisms \( f: A \to B \) and \( g: B \to A \). Their composition \( g \bincirc f \) is an \hyperref[def:morphism_invertibility/endomorphism]{endomorphism} on \( A \).

  But there exists a unique \hyperref[def:morphism_invertibility/endomorphism]{endomorphism} on \( A \), which must be the identity \( \id_A \). Thus, \( g \bincirc f = \id_A \) and \( g \) is a left inverse of \( f \).

  We can analogously show that \( g \) is a right inverse of \( f \). Therefore, \( f \) is fully invertible, and \( A \) and \( B \) are isomorphic.

  \SubProofOf{thm:def:universal_objects/terminal} If \( T' \) and \( T^\dprime \) are terminal objects in \( \cat{C} \), by \cref{thm:universal_object_duality}, they are initial objects in \( \cat{C}^\oppos \). By \cref{thm:def:universal_objects/initial}, they are isomorphic in \( \cat{C}^\oppos \) and by \cref{thm:morphism_invertibility_duality}, they are isomorphic in \( \cat{C} \).

  \SubProofOf{thm:def:universal_objects/zero} Suppose that \( A \) is an initial object and that \( B \) is a final object in \( \cat{C} \). Let \( f: A \to B \) be an isomorphism between them.

  Let \( C \in \cat{C} \) be any other object and let \( g: C \to B \) be the unique morphism to \( B \). Then \( f^{-1} \bincirc g: C \to A \) is a morphism from \( C \) to \( A \). The inverse \( f^{-1}: B \to A \) is unique by \cref{thm:def:morphism_invertibility/at_most_one_inverse}, therefore its composition with \( g: C \to B \) is also unique. Hence, any object has a unique morphism to \( A \). This makes \( A \) a terminal object and thus a zero object.

  We can analogously show that \( B \) is a zero object.

  \SubProofOf{thm:def:universal_objects/no_zero} By \cref{thm:def:universal_objects/zero}, all zero objects are isomorphic. By \cref{thm:def:universal_objects/initial}, all initial objects are isomorphic and analogously for terminal objects. Hence, if a zero object exists, all initial objects are isomorphic to all terminal objects.

  If some initial object is not isomorphic to some terminal object, then by contraposition it follows that no zero object exists.
\end{proof}
