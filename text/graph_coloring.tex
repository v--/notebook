\subsection{Graph coloring}\label{subsec:graph_coloring}

\paragraph{Graph coloring}

\begin{definition}\label{def:graph_coloring}\mcite[395]{Erickson2019}
  A \term{vertex coloring} (resp. \term{edge coloring} or \term{arc coloring}) of a \hyperref[rem:arbitrary_kind_graph]{arbitrary-kind graph} is, unsurprisingly, a \hyperref[def:set_coloring]{coloring} of its vertices (resp. edges or arcs).

  \begin{figure}[!ht]
    \begin{subcaptionblock}{\textwidth/2}
      \centering
      \includegraphics[page=1]{output/def__graph_coloring}
      \caption{A proper vertex coloring of \hyperref[def:petersen_graph]{\( P_{5,2} \)}}\label{fig:def:graph_coloring/petersen}
    \end{subcaptionblock}
    \hfill
    \begin{subcaptionblock}{\textwidth/2}
      \centering
      \includegraphics[page=2]{output/def__graph_coloring}
      \caption{An improper edge coloring of \hyperref[def:complete_graph]{\( K_6 \)}}\label{fig:def:graph_coloring/triangle}
    \end{subcaptionblock}
    \caption{\hyperref[def:graph_coloring]{Graph colorings}}\label{fig:def:graph_coloring}
  \end{figure}

  \begin{thmenum}
    \thmitem{def:graph_coloring/proper} We say that the vertex coloring (resp. arc/edge coloring) is \term[bg=правилно (оцветяване) (\cite[141]{Мирчев2001}), ru=правильная (раскраска) (\cite[306]{Емеличев1990})]{proper} if no two adjacent vertices (resp. arcs/edges) have the same color.

    \thmitem{def:graph_coloring/colorable} If a graph has a \( \rho \)-coloring of its \hi{vertices}, we say that it is \( \rho \)-\term[bg=\( \rho \)-оцветим (граф) (\cite[141]{Мирчев2001}), ru=\( \rho \)-раскрашиваемый (граф) (\cite[\S 53]{Емеличев1990}), en=\( \rho \)-colorable (\cite[111]{Diestel2005})]{colorable}.
  \end{thmenum}
\end{definition}
\begin{comments}
  \item We can adopt the view that \( r \)-colorable graphs are generalizations of \( r \)-partite graphs that introduce more natural conditions for directed graphs. Furthermore, we allow colorings with infinitely many colors.

  \item A useful characterization of colorable graphs is \fullref{thm:graph_coloring_as_homomorphism}.

  \item Some authors like \incite[112]{Diestel2005}, \incite[126]{Harary1969}, \incite[145]{Bollobas1998} and \incite[374]{Новиков2013} do not distinguish between proper and improper colorings by requiring all colorings to be proper.

  We prefer the more explicit terminology of \mcite[395]{Erickson2019}, \incite[590]{Rosen1999}, \incite[\S 53]{Емеличев1990} and \incite[141]{Мирчев2001}.
\end{comments}

\begin{proposition}\label{thm:k_colorable_iff_multipartite}
  A \hyperref[def:undirected_graph]{simple undirected graph} is \( r \)-\hyperref[def:multipartite_graph]{partite} if and only if it is \( r \)-\hyperref[def:graph_coloring/colorable]{colorable}.
\end{proposition}
\begin{proof}
  Trivial.
\end{proof}

\begin{proposition}\label{thm:graph_coloring_as_homomorphism}
  \hyperref[def:graph_coloring/proper]{Proper colorings} can be characterized as follows:

  \begin{thmenum}
    \thmitem{thm:graph_coloring_as_homomorphism/simple_undirected} In a \hyperref[def:undirected_graph]{simple undirected graph} \( G = (V, E) \), a function \( c: V \to \rho \) is a proper coloring if and only if it is a \hyperref[def:undirected_graph/homomorphism]{homomorphism} into the \hyperref[def:complete_graph]{complete graph} \( K_\rho \).

    \thmitem{thm:graph_coloring_as_homomorphism/simple_directed} In a \hyperref[def:directed_graph]{simple directed graph} \( G = (V, A) \), a function \( c: V \to \rho \) is a proper coloring if and only if it is a \hyperref[def:directed_graph/homomorphism]{homomorphism} into the \hyperref[def:graph_functors/simple_doubling]{doubling} \( D_S(K_\rho) \).

    \thmitem{thm:graph_coloring_as_homomorphism/multi_undirected} In a \hyperref[def:undirected_multigraph]{undirected multigraph} \( G = (V, E, \mscrE) \), a function \( c: V \to \rho \) is a proper coloring if and only if the pair \( (c, \mscrE) \) is a \hyperref[def:undirected_multigraph/homomorphism]{homomorphism} into the \hyperref[def:graph_functors/undirected_inclusion]{inclusion} \( I_U(K_\rho) \).

    \thmitem{thm:graph_coloring_as_homomorphism/multi_directed} Finally, in a \hyperref[def:directed_multigraph]{directed multigraph} \( G = (V, E, t, h) \), a function \( c: V \to \rho \) is a proper coloring if and only if pairing \( c \) with \( e \mapsto (t(h), e(h)) \) gives a \hyperref[def:directed_multigraph/homomorphism]{homomorphism} into the \hyperref[def:graph_functors/directed_inclusion]{inclusion} of the \hyperref[def:graph_functors/simple_doubling]{doubling} \( I_D(D_S(K_\rho)) \).
  \end{thmenum}
\end{proposition}
\begin{proof}
  We will only prove \fullref{thm:graph_coloring_as_homomorphism/simple_undirected} since the rest are obvious corollaries.

  \SufficiencySubProof Suppose that \( c: V \to \rho \) is a proper coloring. For any edge \( \set{ u, v } \), since \( c \) is proper, \( c(u) \neq c(v) \), thus \( \set{ c(u), c(v) } \) is not a loop. Therefore, it is an edge of \( K_\rho \).

  Generalizing, we conclude that \( c \) is a homomorphism.

  \NecessitySubProof Suppose that \( c: V \to \rho \) is a homomorphism from \( G \) to \( K_\rho \). For any edge \( \set{ u, v } \), since \( G \) is simple, we have \( u \neq v \). Then \( c(u) \neq c(v) \) because \( \set{ c(u), c(v) } \) is an edge and \( K_\rho \) has no loops.

  Generalizing, we conclude that no two adjacent vertices have the same color.
\end{proof}

\begin{proposition}\label{thm:def:graph_coloring}
  \hyperref[def:multipartite_graph]{Vertex coloring} has the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:graph_coloring/edgeless} A graph without arcs/edges is \( \rho \)-colorable for any nonzero cardinal \( \rho \).

    \thmitem{thm:def:graph_coloring/succ} If a graph is \( \rho \)-colorable and \( \rho < \kappa \), it is also \( \kappa \)-colorable.

    \thmitem{thm:def:graph_coloring/prec} Given a \hyperref[def:graph_coloring/proper]{proper} \( (\rho + 1) \)-coloring of a graph, if there exists a pair of colors \( p \) and \( q \) such that no arc/edge has its endpoints colored by them, then the \( p \)-colored vertices can be recolored via \( q \) to produce a proper \( \rho \)-coloring.

    \thmitem{thm:def:graph_coloring/order} Every graph of order at most \( \rho \) is \( \rho \)-colorable.
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:graph_coloring/edgeless} If there are no arcs/edges in a graph, no two vertices are adjacent, and any vertex coloring is proper.

  \SubProofOf{thm:def:graph_coloring/succ} Given any vertex coloring \( f: V \to \rho \), we can simply extend the range of \( f \) with additional colors.

  \SubProofOf{thm:def:graph_coloring/prec} Trivial.

  \SubProofOf{thm:def:graph_coloring/order} Given a graph \( G \) of order \( \kappa \leq \rho \) with a vertex set \( V \), by definition of cardinal number there exists a bijective function \( c: V \to \kappa \). This is a proper \( \kappa \)-coloring because all color classes have only one vertex. By \fullref{thm:def:graph_coloring/succ}, \( G \) is \( \rho \)-colorable.
\end{proof}

\paragraph{Chromatic number}

\begin{definition}\label{def:chromatic_number}\mcite[127]{Harary1969}
  The (vertex) \term[bg=хроматично число (\cite[142]{Мирчев2001}), ru=хроматическое число (\cite[235]{Емеличев1990})]{chromatic number} \( \chi(G) \) of the \hyperref[rem:arbitrary_kind_graph]{arbitrary-kind graph} \( G \) is the minimum nonzero cardinal \( \rho \) for which \( G \) is \( \rho \)-\hyperref[def:graph_coloring/colorable]{colorable}.

  If \( \chi(G) = \rho \), we say that \( G \) is \term[ru=\( \rho \)-хроматический (граф) (\cite[236]{Емеличев1990})]{\( \rho \)-chromatic}.
\end{definition}
\begin{comments}
  \item Different authors use a different notation for chromatic numbers. We use \enquote{\( \chi \)} similarly to \incite[122]{Diestel2005}, \incite[145]{Bollobas1998}, \incite[152]{Knauer2011}, \incite[531]{Rosen1999}, \incite[235]{Емеличев1990} and \incite[374]{Новиков2013}. \incite[28]{GondranMinoux1984Graphs} use \enquote{\( \gamma \)}, while \incite[142]{Мирчев2001} uses \enquote{\( \varkappa \)}.
\end{comments}

\begin{proposition}\label{thm:chromatic_number_edgeless}
  The \hyperref[def:chromatic_number]{chromatic number} of a graph is \( 1 \) if and only if it has no arcs/edges.
\end{proposition}
\begin{proof}
  \SufficiencySubProof Given a \( 1 \)-coloring of a graph, the endpoints of every arc/edge are monochrome, hence either there are no arcs/edges or the \( 1 \)-coloring is not proper.

  \NecessitySubProof If there exists an arc/edge, its endpoints must be colored with different colors, hence the chromatic number should be at least \( 2 \).
\end{proof}

\begin{proposition}\label{thm:chromatic_number_color_pairs}
  For every positive integer \( r \), for every \hyperref[def:chromatic_number]{\( r \)-chromatic} graph and for every pair of distinct colors \( p \) and \( q \), there exists an arc/edge whose endpoints are colored by \( p \) and \( q \).
\end{proposition}
\begin{comments}
  \item If \( r < 2 \), there are no pairs of distinct colors, and thus the conclusion holds vacuously.
\end{comments}
\begin{proof}
  We will use induction on \( \rho \).
  \begin{itemize}
    \item If \( r < 2 \), as already discussed, the proposition holds vacuously.

    \item Suppose that the proposition holds for \( r \) and consider a \( (r + 1) \)-chromatic graph \( G \) and fix distinct colors \( p \) and \( q \).

    If no arc/edge exists whose endpoints are colored \( p \) and \( q \), \fullref{thm:def:graph_coloring/prec} implies that the graph has a proper \( \rho \)-coloring, which contradicts the assumption that \( G \) is \( (r + 1) \)-chromatic.
  \end{itemize}
\end{proof}

\begin{corollary}\label{thm:chromatic_number_coloring_splits}
  For every positive integer \( r \), for every \hyperref[def:chromatic_number]{\( r \)-chromatic} graph \( G = (V, E) \) and for every proper coloring \( c: V \to \set{ 0, \ldots, r - 1 } \), the function \( c \) is a \hyperref[def:morphism_invertibility/right_cancellative]{categorical split epimorphism} from \( G \) to the \hyperref[def:complete_graph]{complete graph} \( K_r \).
\end{corollary}
\begin{proof}
  By \fullref{thm:graph_coloring_as_homomorphism/simple_undirected}, \( c \) is a homomorphism from \( G \) to \( K_r \).

  By \fullref{thm:chromatic_number_color_pairs}, the function \( { u, v } \mapsto \set{ c(u), c(v) } \) is surjective on edges. Then \( c \) is surjective on vertices, hence, by \fullref{thm:function_invertibility_categorical/right_invertible}, it has a right inverse
  \begin{equation*}
    d: \set{ 0, \ldots, r - 1 } \to V.
  \end{equation*}

  Furthermore, the edge \( \set{ i, j } \) in \( K_r \) maps to \( \set{ d(i), d(j) } \), making \( d \) a homomorphism from \( K_r \) to \( G \).

  Obviously \( d \) is a right inverse of \( c \). Therefore, \( c \) is right invertible in the category of simple undirected graphs.
\end{proof}

\begin{proposition}\label{thm:complete_graph_chromatic_number}
  For a nonempty \hyperref[def:complete_graph]{complete graph} \( K_\rho \) of order \( \rho \), the \hyperref[def:graph_chromatic_number]{chromatic number} is \( \rho \).

  Conversely, for a \hyperref[def:directed_graph]{simple directed graph} \( G \) of \hi{finite} order \( r \), if \( G \) is \( r \)-chromatic, then it is \hyperref[def:complete_subgraph]{complete}\fnote{By \enquote{\( G \) is complete} we mean that \( G \) is a complete subgraph of itself, i.e. it is isomorphic to \( K_r \)}.
\end{proposition}
\begin{proof}
  \SufficiencySubProof By \fullref{thm:def:graph_coloring/order}, \( \chi(K_\rho) \leq \rho \). Furthermore, for every \( \rho < \rho \) and every \( \rho \)-coloring, by \fullref{thm:pigeonhole_principle}, there will be two adjacent vertices with the same color, making the coloring improper.

  Therefore, \( \chi(K_\rho) = \rho \).

  \NecessitySubProof Suppose that \( G = (V, E) \) is a \( r \)-chromatic graph of order \( r \). Since \( G \) has order \( r \), there exists a bijective function \( c: V \to \set{ 0, \ldots, r - 1 } \), which also happens to be a \( r \)-coloring. It is proper because no two vertices have the same color.

  By \fullref{thm:graph_coloring_as_homomorphism/simple_undirected}, \( c \) is a homomorphism from \( G \) to \( K_\rho \). We will show that it satisfies \eqref{eq:thm:graph_isomorphisms/simple_undirected}, which will make it an isomorphism.

  Given the edge \( \set{ i, j } \) in \( K_\rho \), \fullref{thm:chromatic_number_color_pairs} implies that \( \set{ c^{-1}(i), c^{-1}(j) } \) is an edge in \( G \).

  Therefore, \( c \) is a bijective homomorphism satisfying \eqref{eq:thm:graph_isomorphisms/simple_undirected}, and \fullref{thm:graph_isomorphisms/simple_undirected} implies that it is an isomorphism between \( G \) and \( K_\rho \).
\end{proof}

\begin{proposition}\label{thm:complete_multipartite_graph_chromatic_number}
  If the sets \( V_1, \ldots, V_r \) are nonempty, the \hyperref[def:complete_multipartite_graph]{complete multipartite graph} \( K_{V_1,\ldots,V_k} \) has \hyperref[def:graph_chromatic_number]{chromatic number} \( r \).
\end{proposition}
\begin{proof}
  First note that \( K_{V_1, \ldots, V_k} \) is \( r \)-colorable due to \fullref{thm:k_colorable_iff_multipartite}.

  Furthermore, if \( V_1, \ldots, V_r \) are nonempty, again via \fullref{thm:pigeonhole_principle} we can conclude that every coloring with less colors cannot be proper.

  Therefore, the chromatic number is \( r \).
\end{proof}

\begin{proposition}\label{thm:chromatic_number_bound}\mcite[prop. 5.2.1]{Diestel2005}
  If a simple undirected graph \( G \) with \( m \) edges, where \( m \) is finite, the \hyperref[def:chromatic_number]{chromatic number} satisfies the following inequality:
  \begin{equation}\label{eq:thm:chromatic_number_bound/edges}
    \chi(G) \leq \frac 1 2 + \sqrt{ \frac 1 4 + 2m }.
  \end{equation}

  In case \( G \) has finite order \( n \), we have the weaker upper bound
  \begin{equation}\label{eq:thm:chromatic_number_bound/vertices}
    \chi(G) \leq \frac 1 2 + \sqrt{ \frac 1 4 + n(n - 1) } \leq n.
  \end{equation}
\end{proposition}
\begin{proof}
  Let \( c: V \to \set{ 0, \ldots, r - 1 } \) be a minimal proper coloring of \( G = (V, E) \), i.e. \( \chi(G) = r \).

  \Fullref{thm:graph_coloring_as_homomorphism/simple_undirected} implies that \( c \) is a homomorphism from \( G \) to \( K_r \). By \fullref{thm:complete_graph_edge_count}, \( K_r \) has \( \binom r 2 \) edges. They represent color classes. By \fullref{thm:chromatic_number_color_pairs}, each of the color classes has a preimage in \( G \), i.e. an edge whose endpoints have the colors of the class.

  Therefore,
  \begin{equation*}
    \binom r 2 \leq m,
  \end{equation*}
  which leads to the quadratic inequality
  \begin{equation*}
    r^2 - r - 2m \leq 0.
  \end{equation*}

  By \fullref{thm:quadratic_polynomial_roots}, the roots of the polynomial are
  \begin{equation*}
    \frac { 1 \pm \sqrt{ 1 + 8m } } 2 = \frac 1 2 \pm \sqrt{ \frac 1 4 + 2m }.
  \end{equation*}

  Then
  \begin{equation}\label{eq:thm:chromatic_number_bound/proof/product}
    \parens[\Big]{ r - \frac 1 2 - \sqrt{ \frac 1 4 + 2m } } \cdot \underbrace{\parens[\Big]{ r - \frac 1 2 + \sqrt{ \frac 1 4 + 2m } }}_{\geq 0 \T*{for positive integers} r} \leq 0.
  \end{equation}

  In order for \eqref{eq:thm:chromatic_number_bound/proof/product} to hold, we must have
  \begin{equation*}
    r \leq \frac 1 2 + \sqrt{ \frac 1 4 + 2m }.
  \end{equation*}

  Since \( r = \chi(G) \), this completes the proof of \eqref{eq:thm:chromatic_number_bound/edges}.

  The other bound \eqref{eq:thm:chromatic_number_bound/vertices} follows from \fullref{thm:complete_graph_edge_count}.
\end{proof}

\begin{example}\label{ex:def:chromatic_number}
  We list some examples of \hyperref[def:chromatic_number]{chromatic numbers}:
  \begin{thmenum}
    \thmitem{ex:def:chromatic_number/edgeless} As shown in \fullref{thm:chromatic_number_edgeless}, a graph is arcless/edgeless if and only if its chromatic number is \( 1 \).

    \thmitem{ex:def:chromatic_number/complete} As shown in \fullref{thm:complete_graph_chromatic_number}, the chromatic number of a \hyperref[def:complete_graph]{complete graph} is its order.

    \thmitem{ex:def:chromatic_number/compete_multipartite} As shown in \fullref{thm:complete_multipartite_graph_chromatic_number}, the chromatic number of a \hyperref[def:complete_multipartite_graph]{complete \( r \)-partite} graph with nonempty partitions is \( r \).

    \thmitem{ex:def:chromatic_number/path} As per the discussion in \fullref{ex:def:multipartite_graph/path}, the \hyperref[def:path_graph]{path graph} \( P_n \) has chromatic number \( 2 \).

    \thmitem{ex:def:chromatic_number/cycle} As per the discussion in \fullref{ex:def:multipartite_graph/cycle}, the \hyperref[def:cycle_graph]{cycle graph} \( C_n \) has chromatic number \( 2 \) if \( n \) is odd and \( 3 \) if \( n \) is even.

    \thmitem{ex:def:chromatic_number/petersen} The \hyperref[def:petersen_graph]{Petersen graph} \( P_{5,2} \), as can be seen in \cref{fig:def:graph_coloring/petersen}, is \( 3 \)-colorable.

    Per its definition, it contains the cycle graph \( C_5 \), and hence it has an odd-length cycle. \Fullref{thm:bipartite_iff_no_odd_cycles} then implies that \( P_{5,2} \) is not bipartite, and thus not \( 2 \)-colorable.

    Therefore, \( \chi(P_{5,2}) = 3 \).
  \end{thmenum}
\end{example}
