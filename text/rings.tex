\subsection{Rings}\label{subsec:rings}

\begin{definition}\label{def:ring}
  A \term{ring} is a \hyperref[def:semiring]{semiring} with additive inverses. More precisely, this means that the additive monoid is a group.

  As for semirings, rings can also be nonunital, with \hyperref[def:semiring_ideal]{ring ideals} being the main example.

  Rings have the following metamathematical properties:
  \begin{thmenum}
    \thmitem{def:ring/theory} We can construct a \hyperref[def:first_order_theory]{first-order theory} for rings by adding a unary functional symbol \( - \) and the involution axiom \eqref{eq:def:group/theory/inverse_axiom} to the \hyperref[def:semiring/theory]{theory of semirings}.

    \thmitem{def:ring/homomorphism} A \hyperref[def:first_order_homomorphism]{first-order homomorphism} between the rings \( R \) and \( T \) is a \hyperref[def:semiring/homomorphism]{semiring homomorphism} \( \varphi: R \to T \) that additionally preserves additive inverses.

    As shown in \fullref{thm:group_homomorphism_single_condition}, this condition is not only redundant, but the structure of a ring rather than semiring also automatically implies that \( \varphi(0_R) = 0_S \).

    \thmitem{def:ring/submodel} The set \( A \subseteq R \) is a \hyperref[thm:substructure_is_model]{submodel} of \( R \) if it is both a \hyperref[def:semiring]{sub-semiring} of \( R \) and an additive submonoid of \( R \).

    As a consequence of \fullref{thm:positive_formulas_preserved_under_homomorphism}, the image of a ring homomorphism is a subring of its range.

    \thmitem{def:ring/trivial} The \hyperref[def:trivial_structure]{trivial} ring is the \hyperref[rem:pointed_set/trivial]{trivial pointed set} \( \set{ 0 } \).

    The \hyperref[thm:substructures_form_complete_lattice/bottom]{initial substructure} of a nontrivial ring is instead the set of integers --- see \fullref{thm:ring_characteristic_homomorphism}.

    \thmitem{def:ring/commutative} If multiplication is commutative, we call the ring itself \term{commutative}. Unless multiplication corresponds to function composition, most rings we will encounter will be commutative.

    \thmitem{def:ring/category} The corresponding \hyperref[def:category_of_small_first_order_models]{category of \( \mscrU \)-small models} \( \ucat{Ring} \) is \hyperref[def:concrete_category]{concrete} over \hyperref[def:monoid]{\( \ucat{SRing} \)}. We denote the category of commutative rings by \( \cat{CRing} \).

    Unlike the category \hyperref[def:group/category]{\( \cat{Grp} \)} of groups, \( \cat{Ring} \) is not as well-behaved. Nevertheless, kernels and quotients of rings are commonly established concepts.

    The category of unital rings does not have a zero object, but the category of nonunital rings does, and we will sometimes consider nonunital ring homomorphisms between unital rings. That is, ring homomorphisms that may not preserve the multiplicative identity.

    \thmitem{def:ring/kernel} The \term{kernel} of a ring homomorphism \( \varphi: R \to T \) is simply its \hyperref[def:zero_locus]{zero locus} \( \varphi^{-1}(0_S) \). This is precisely the kernel of the additive group in the sense of \fullref{def:group/kernel}, and the \hyperref[def:zero_morphisms/cokernel]{categorical kernel} in the category of nonunital rings.

    Furthermore, \( \ker \varphi \) is an ideal of \( R \) because, if \( x \in \ker \varphi \),
    \begin{equation*}
      \varphi(xy)
      =
      \varphi(x) \varphi(y)
      =
      0_S \varphi(y)
      =
      0_S,
    \end{equation*}
    and thus \( xy \in \ker \varphi \).

    Despite being categorical kernels only in the category of nonunital rings, the kernel is defined and used mainly for unital ring homomorphism.

    \thmitem{def:ring/quotient} The \hyperref[def:zero_morphisms/cokernel]{categorical cokernel} of homomorphism \( \varphi: R \to T \) in the category of nonunital rings is, similarly to the case for groups in \fullref{def:group/quotient}, a partition of \( T \) induced by the image of \( \varphi \).

    This is not merely the cokernel \( T / \img \varphi \) of the additive group, however. Multiplication induces an additional restriction on congruences: \( x \cong x' \) and \( y \cong y' \) together imply \( x y \cong x' y' \). Hence, \( [x][y] = [xy] \).  Denote the coset \( [0_S] \) by \( I \). We have \( I[x] = [0x] = I \), therefore the cokernel inherits absorption from \( T \).

    Additive subgroups of \( T \) that absorb multiplication are precisely the \hyperref[def:semiring_ideal]{two-sided ideals} of \( T \). Hence, \( I \) is the ideal generated by \( \img \varphi \). From the general case for groups it follows that quotient ring cosets have the form \( x + I \).

    Finally, given an ideal \( I \) of an arbitrary ring \( R \), we can define the \term{quotient ring} \( R / I \) as the cokernel of the inclusion \( \iota: I \to R \). That is, \( R / I \) consists of the cosets \( x + I \) for \( x \in R \). In practice, quotients are conveniently characterized by \fullref{thm:quotient_algebra_universal_property}.

    Somewhat similarly to \fullref{thm:def:group/kernel_cokernel_compatibility} for groups, the kernel \( \ker \pi \) of the canonical projection \( \pi(x) \coloneqq x + I \) is the ideal \( I \) itself.

    Despite being \hyperref[def:zero_morphisms/cokernel]{categorical cokernel} only in the category of nonunital rings, the quotient \( R / I \) is defined and used mainly for unital rings.

    Fortunately, for unital ring \( R \), the quotient \( R / I \) is also unital. The projection morphism is an epimorphism by \fullref{thm:equalizer_invertibility}, and hence \( R / I \) is a \hyperref[def:subobject_and_quotient]{categorical quotient object}.

    \thmitem{def:ring/simple} Analogously to \hyperref[def:group/simple]{simple groups}, if the only proper \hyperref[def:semiring_ideal]{ideal} of \( R \) is the \hyperref[def:ring/trivial]{trivial ideal} \( \set{ 0_R } \), we say that \( R \) is a \term{simple ring}.

    The trivial ring itself is not simple, because it has no proper ideals.
  \end{thmenum}
\end{definition}

\begin{proposition}\label{thm:quotient_equality_via_difference}
  Given an \hyperref[def:semiring_ideal]{ideal} \( I \) in a \hyperref[def:ring]{ring} \( R \), we have \( x + I = y + I \) if and only if \( x - y \in I \).
\end{proposition}
\begin{proof}
  Trivial.
\end{proof}

\begin{proposition}\label{thm:simple_ring_homomorphism_is_injective}
  If \( R \) is a \hyperref[def:ring/simple]{simple ring}, every \hyperref[def:ring/homomorphism]{unital ring homomorphism} \( \varphi: R \to T \) is an injective function.
\end{proposition}
\begin{proof}
  Let \( \varphi: R \to T \) be a unital ring homomorphism. Its kernel is an ideal of \( R \), and the only ideals are the trivial ring or \( R \) itself. Since \( \varphi(1_R) = 1_T \), the kernel cannot be \( R \), so it can only be the trivial ring. \Fullref{thm:def:group/zero_kernel} then implies that \( \varphi \) is injective.
\end{proof}

\begin{proposition}\label{thm:ring_of_integers_modulo}
  For a positive integer \( n > 1 \), we extend the group \hyperref[thm:group_of_integers_modulo]{\( \BbbZ_n \)} of integers modulo \( n \) with the operation
  \begin{equation*}
    x \odot y \coloneqq \rem(xy, n).
  \end{equation*}

  Then \( \BbbZ_n \) is a \hyperref[def:ring/commutative]{commutative ring} called the \term{ring of integers modulo} \( n \).
\end{proposition}
\begin{proof}
  Note that
  \begin{balign*}
    &\phantom{{}\cong{}} \rem(x, n) \rem(y, n)
    &\cong \pmod n \\ &\cong
    (x - n \quot(x, n)) (y - n \quot(y, n))
    &\cong \pmod n \\ &\cong
    xy - n \quot(x, n) - n \quot(y, n) + n^2 \quot(x, n) \quot(y, n)
    &\cong \pmod n \\ &\cong
    xy.
  \end{balign*}

  The proof that multiplication in \( \BbbZ_n \) is associative, unital and commutative becomes trivial.

  We will prove that multiplication distributes over addition. Fix \( x, y, z \in \BbbZ_n \). We have
  \begin{balign*}
    (x \oplus y) \odot z
     & =
    \rem((x \oplus y) z, n)
    =    \\ &=
    \rem(\rem(x + y, n) z, n)
    =    \\ &=
    \rem((x + y - n \quot(x + y, n)) z, n)
    =    \\ &=
    \rem((x + y)z, n).
  \end{balign*}
  and
  \begin{balign*}
    (x \odot z) \oplus (y \odot z)
     & =
    \rem([(x \odot z) + (y \odot z)], n)
    =    \\ &=
    \rem([xz - n \quot(xz, n) + yz - n \quot(yz, n)], n)
    =    \\ &=
    \rem(xz + yz, n)
    =    \\ &=
    \rem((x + y)z, n).
  \end{balign*}

  Hence,
  \begin{equation*}
    (x \oplus y) \odot z = (x \odot z) \oplus (y \odot z).
  \end{equation*}
\end{proof}

\begin{proposition}\label{thm:ring_characteristic_homomorphism}
  Similarly to how \( \BbbN \) is an \hyperref[def:universal_objects/initial]{initial object} in the category \hyperref[def:semiring/category]{\( \cat{SRing} \)} of semirings, \( \BbbZ \) is an initial object in the category \hyperref[def:ring/category]{\( \cat{Ring} \)} of rings.
\end{proposition}
\begin{proof}
  Follows from \fullref{thm:semiring_characteristic_homomorphism} with the addition of \( (-n)x = -nx \).
\end{proof}

\begin{definition}\label{def:ring_characteristic}\mimprovised
  We define the \term{characteristic} \( \op{char}(R) \) of a ring \( R \) via the following equivalent definitions:
  \begin{thmenum}
    \thmitem{def:ring_characteristic/embedding} \( \op{char}(R) \) is the unique nonnegative integer \( n \) for which \( \BbbZ_n \) can be embedded into \( R \). That is,
    \begin{equation*}
      \BbbZ_n \cong \BbbZ / \ker \iota,
    \end{equation*}
    where \( \iota \) is the homomorphism from the integers defined via \eqref{eq:thm:semiring_characteristic_homomorphism}.

    We use here that \( \BbbZ_0 \) is the \hyperref[def:ring/trivial]{trivial ring}.

    \thmitem{def:ring_characteristic/direct} \( \op{char}(R) \) is the \hyperref[def:group_order]{order} of the additive group of \( R \) and, if it exists, and \( 0 \) otherwise.

    That is, \( \op{char}(R) \) is the smallest positive integer \( n \) such that \( n \cdot 1_R = 0_R \) and \( \op{char}(R) = 0 \) if \( 0_R \) cannot be obtained in this way.
  \end{thmenum}
\end{definition}
\begin{defproof}
  \EquivalenceSubProof{def:ring_characteristic/embedding}{def:ring_characteristic/direct} Let \( n \) be such that
  \begin{equation*}
    n \BbbZ = \ker\iota.
  \end{equation*}

  In particular, \( \iota(0) = \iota(n) \).

  If \( n = 0 \), \( \ker\iota \) is a trivial group and \( \iota \) is an embedding. Then there cannot exist a positive integer \( n \) such that
  \begin{equation*}
    n \cdot 1_R = 0_R.
  \end{equation*}

  Otherwise, \( n \) is the smallest positive integer such that
  \begin{equation*}
    n \cdot 1_R = 0 \cdot 1_R = 0_R.
  \end{equation*}
\end{defproof}

\begin{proposition}\label{thm:ring_embedding_preserves_characteristic}
  If \( \varphi: R \to S \) is a \hyperref[def:ring/homomorphism]{ring embedding}, then \( S \) inherits its \hyperref[def:ring_characteristic]{characteristics} from \( R \).
\end{proposition}
\begin{proof}
  First suppose that \( R \) has positive characteristic \( n \). Then \( n \cdot 1_R = 0_R \), which implies \( n \cdot \varphi(1_R) = \varphi(0_R) \), hence \( \op{char}(T) \leq n \). But \( \varphi \) is an embedding, hence if \( k \cdot 1_R \neq 0_R \), then
  \begin{equation*}
    k \cdot \varphi(1_R) \neq \varphi(0_R).
  \end{equation*}

  This implies that \( \op{char}(S) \geq \op{char}(R) \), which in turn shows that \( \op{char}(S) = \op{char}(R) \).

  If \( R \) has characteristic zero, then \( \iota: \BbbN \to R \) is an embedding and thus \( \varphi \bincirc \iota: \BbbN \to S \) is also an embedding. It is unique as shown in \fullref{thm:ring_characteristic_homomorphism}. Therefore, \( S \) also has characteristic zero.
\end{proof}

\begin{example}\label{ex:def:ring_characteristic}
  The following are examples of \hyperref[def:ring_characteristic]{ring characteristics}:
  \begin{thmenum}
    \thmitem{ex:def:ring_characteristic/natural_numbers} The \hyperref[def:integers]{integers} \( \BbbZ \) have characteristic \( \op{char}(\BbbZ) = 0 \) because \( \iota \) is an isomorphism. Consequently, by \fullref{thm:ring_embedding_preserves_characteristic}, any superring of \( \BbbZ \) has characteristic zero, most notably the fields \( \BbbQ \), \( \BbbR \) and \( \BbbC \).

    \thmitem{ex:def:ring_characteristic/integers_modulo} The ring \hyperref[thm:ring_of_integers_modulo]{\( \BbbZ_n \)} of integers modulo \( n \) has characteristic \( \op{char}(\BbbZ_n) = n \) because of \fullref{thm:integers_modulo_isomorphic_to_quotient_group}.

    \thmitem{ex:def:ring_characteristic/polynomial_ring} An \hyperref[def:algebra_over_semiring]{algebra} \( M \) over a nontrivial commutative unital ring \( R \) has the same characteristic as \( R \) because of the canonical embedding of \( R \) in \( M \). In particular, the \hyperref[def:polynomial_algebra]{polynomial ring} \( R[X] \) has the same characteristic as their ring.
  \end{thmenum}
\end{example}

\begin{proposition}\label{thm:grothendieck_semiring_completion}\mcite[80]{OpenLogicFull}
  The \hyperref[def:monoid_grothendieck_completion]{Grothendieck completion} \( \overline{R} \) of the additive monoid of a \hyperref[def:semiring]{semiring} \( R \) becomes a \hyperref[def:ring]{ring} with the operation
  \begin{equation*}
    [(a, b)] \odot [(c, d)] \coloneqq [(ac + bd, ad + bc)].
  \end{equation*}

  This definition is motivated in the proof of \fullref{thm:grothendieck_semiring_completion_universal_property}.
\end{proposition}
\begin{proof}
  Multiplication on \( R \) does not depend on the representative of the equivalence class. Indeed, let \( (a, b) \sim (a', b') \) and \( (c, d) \sim (c', d') \). Then there exist \( u \) and \( v \) such that
  \begin{align*}
    a + b' + u &= a' + b + u, \\
    c + d' + v &= c' + d + v.
  \end{align*}

  Then
  \begin{align*}
    &\phantom{{}={}}
    \hi{ac} + b'c + uc + a'd + \hi{bd} + ud + a'c + \hi{a'd'} + a'v + \hi{b'c'} + b'd + b'v
    = \\ &=
    (a + b' + u)c + (a' + b + u)d + a'(c + d' + v) + b'(c' + d + v)
    = \\ &=
    (a' + b + u)c + (a + b' + u)d + a'(c' + d + v) + b'(c + d' + v)
    = \\ &=
    a'c + \hi{bc} + uc + \hi{ad} + b'd + ud + \hi{a'c'} + a'd + a'v + b'c + \hi{b'd'} + b'v.
  \end{align*}

  Therefore,
  \begin{equation*}
    (a \cdot c + b \cdot d, a \cdot d + b \cdot c) \sim (a' \cdot c' + b' \cdot d', a' \cdot d' + b' \cdot c').
  \end{equation*}

  Associativity and distributivity in \( \overline{R} \) are inherited from \( R \).
\end{proof}

\begin{theorem}[Grothendieck semiring completion universal property]\label{thm:grothendieck_semiring_completion_universal_property}
  The \hyperref[thm:grothendieck_semiring_completion]{Grothendieck completion} \( \overline{R} \) of a semiring \( R \) satisfies the following \hyperref[rem:universal_mapping_property]{universal mapping property}:
  \begin{displayquote}
    For every ring \( T \) and every semiring homomorphism \( \varphi: R \to T \), there exists a unique ring homomorphism \( \widetilde{\varphi}: \overline{R} \to T \) such that the following diagram commutes:
    \begin{equation}\label{eq:thm:grothendieck_semiring_completion_universal_property/diagram}
      \begin{aligned}
        \includegraphics[page=1]{output/thm__grothendieck_semiring_completion_universal_property.pdf}
      \end{aligned}
    \end{equation}
  \end{displayquote}

  Via \fullref{rem:universal_mapping_property}, \( \overline{\anon} \) becomes \hyperref[def:category_adjunction]{left adjoint} to the \hyperref[def:concrete_category]{forgetful functor}
  \begin{equation*}
    U: \cat{CRing} \to \cat{CSRing}.
  \end{equation*}

  Compare this result to \fullref{thm:grothendieck_monoid_completion_universal_property}.
\end{theorem}
\begin{proof}
  \Fullref{thm:grothendieck_monoid_completion_universal_property} suggests the definition
  \begin{equation*}
    \overline{\varphi}([(a, b)]) \coloneqq \varphi(a) - \varphi(b).
  \end{equation*}

  We must only show that \( \overline{\varphi} \) is a ring homomorphism. Clearly
  \begin{equation*}
    \overline{\varphi}([(1, 0)]) = \varphi(1) - \varphi(0),
  \end{equation*}
  which implies that \( \varphi \) preserves multiplicative identities. Also,
  \begin{balign*}
    \overline{\varphi}\parens[\Big]{ [(a, b)] \odot [(c, d)] }
    &=
    \overline{\varphi}\parens[\Big]{ [(a \cdot b + c \cdot d, a \cdot d + b \cdot c)] }
    = \\ &=
    \varphi(a \cdot b + c \cdot d) - \varphi(a \cdot d + b \cdot c)
    = \\ &=
    \varphi(c) \parens[\Big]{ \varphi(d) - \varphi(b) } - \varphi(a) \parens[\Big]{ \varphi(d) - \varphi(b) }
    = \\ &=
    \parens[\Big]{ \varphi(c) - \varphi(a) } \parens[\Big]{ \varphi(d) - \varphi(b) }
    = \\ &=
    \overline{\varphi}\parens[\Big]{ [(a, c)] } \overline{\varphi}\parens[\Big]{ [(b, d)] }.
  \end{balign*}
\end{proof}

\begin{proposition}\label{thm:def:grothendieck_semiring_completion}
  The \hyperref[thm:grothendieck_semiring_completion]{Grothendieck completion} \( \overline{R} \) of a semiring \( R \) satisfies the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:grothendieck_semiring_completion/commutative} If \( R \) is commutative, so is \( \overline{R} \).
    \thmitem{thm:def:grothendieck_semiring_completion/entire} If \( R \) is \hyperref[def:divisibility/zero]{entire}, so is \( \overline{R} \).
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:grothendieck_semiring_completion/commutative} This is clear from the definition of multiplication.
  \SubProofOf{thm:def:grothendieck_semiring_completion/entire} Suppose that
  \begin{equation*}
    \underbrace{[(a, b)] \cdot [(c, d)]}_{[(ac + bd, ad + bc)]} = [(0, 0)]
  \end{equation*}

  Then there exists an element \( u \) in \( R \) such that
  \begin{equation*}
    (ac + bd) + 0 + u = 0 + (ad + bc) + u.
  \end{equation*}

  Suppose that \( d = c + e \). Then
  \begin{equation*}
    ac + b(c + e) = a(c + e) + bc
  \end{equation*}
  and
  \begin{equation*}
    (ac + bc) + be = (ac + bc) + ae.
  \end{equation*}

  Cancelling \( e \), we obtain that \( a = b \). But \( [(a, b)] = [(0, 0)] \).
\end{proof}

\begin{definition}\label{def:ring_commutator}
  Let \( R \) be an arbitrary ring. We define the \term{commutator} of the elements \( x \) and \( y \) as
  \begin{equation*}
    [x, y] \coloneqq xy - yx.
  \end{equation*}

  The \term{commutator ideal} \( [R, R] \) of \( R \) is the two-sided ideal \hyperref[def:semiring_ideal/generated]{generated} by all the commutators in \( G \).
\end{definition}

\begin{theorem}[Ring abelianization universal property]\label{thm:ring_abelianization_universal_property}\mcite[prop. 7.4]{Knapp2016BasicAlgebra}
  The quotient \( R / [R, R] \) of a ring \( R \) by its commutator ideal \( [R, R] \) is a commutative ring, which we call the \term{abelianization} of \( R \), and satisfies the following \hyperref[rem:universal_mapping_property]{universal mapping property}:
  \begin{displayquote}
    For every commutative ring \( T \) and every ring homomorphism \( \varphi: R \to T \), \( \varphi \) \hyperref[def:factors_through]{uniquely factors through} \( R / [R, R] \). That is, there exists a unique ring homomorphism \( \widetilde{\varphi}: R / [R, R] \to T \) such that the following diagram commutes:
    \begin{equation}\label{eq:thm:ring_abelianization_universal_property/diagram}
      \begin{aligned}
        \includegraphics[page=1]{output/thm__ring_abelianization_universal_property.pdf}
      \end{aligned}
    \end{equation}
  \end{displayquote}

  Via \fullref{rem:universal_mapping_property}, the abelianization functor becomes \hyperref[def:category_adjunction]{left adjoint} to the \hyperref[def:concrete_category]{forgetful functor}
  \begin{equation*}
    U: \cat{CRing} \to \cat{Ring}.
  \end{equation*}

  Compare this result to \fullref{thm:group_abelianization_universal_property}.
\end{theorem}
\begin{proof}
  This is a refinement of \fullref{thm:group_abelianization_universal_property}, and we only need to show that \( R / [R, R] \) is a commutative ring. For \( x \) and \( y \) in \( R \), since \( yx - xy \in I \), we have
  \begin{equation*}
    (x + I) (y + I)
    =
    (xy + I)
    =
    (xy + yx - xy + I)
    =
    (yx + I)
    =
    (y + I) (x + I).
  \end{equation*}
\end{proof}

\begin{definition}\label{def:multiplicative_set_in_semiring}\mcite[428]{Knapp2016BasicAlgebra}
  We call the subset of the semiring \( R \) a \term{multiplicative set} if it contains \( 1_R \) and, furthermore, it is closed under multiplication.
\end{definition}

\begin{proposition}\label{thm:complement_of_prime_ideal}
  The \hyperref[def:semiring_ideal]{ideal} \( P \) in the \hyperref[def:semiring/commutative]{commutative semiring} \( R \) is \hyperref[def:semiring_ideal/prime]{prime} if and only if \( R \setminus P \) is a \hyperref[def:multiplicative_set_in_semiring]{multiplicative set}.

  Not all multiplicative sets are obtained as complements of prime ideals --- see \fullref{ex:def:ring_localization/powers_of_two}.
\end{proposition}
\begin{proof}
  By \fullref{thm:def:semiring_ideal/ideal_containing_unit}, \( P \) is a proper ideal if and only if \( 1_R \in R \setminus P \).

  By \fullref{thm:def:semiring_ideal/prime_pointwise}, \( P \) is prime if and only if \( x, y \in R \setminus P \) implies \( xy \in R \setminus P \).
\end{proof}

\begin{definition}\label{def:ring_localization}\mcite[428]{Knapp2016BasicAlgebra}
  Let \( R \) be a \hyperref[def:ring/commutative]{commutative ring} and let \( S \subseteq R \) be a \hyperref[def:multiplicative_set_in_semiring]{multiplicative set}.

  Define the equivalence relation \( (r, s) \sim (r', s') \) on \( R \times S \) to hold if and only if there exists some \( u \in S \) such that \( u r s' = u r' s \).

  Consider the set
  \begin{equation*}
    S^{-1} R \coloneqq R \times S / \sim,
  \end{equation*}
  whose cosets we will denote by \( \ifrac r s \) rather than \( [(r, s)] \).

  Define on \( S^{-1} R \) the operations
  \begin{align*}
    \frac a b + \frac c d     &\coloneqq \frac {a d + b c} {b d}, \\
    \frac a b \cdot \frac c d &\coloneqq \frac {a c} {b d},
  \end{align*}
  and the canonical inclusion
  \begin{equation*}
    \begin{aligned}
      &\iota: R \to S^{-1} R \\
      &\iota(r) \coloneqq \frac r {1_R}.
    \end{aligned}
  \end{equation*}

  This ring is called the \term{localization} of \( R \) with respect to \( A \); we denote it by \( S^{-1} R \). In case \( S \) is the \hyperref[thm:boolean_algebra_of_subsets/complement]{complement} of a \hyperref[def:semiring_ideal/prime]{prime ideal}, we may denote the localization by \( R_P \) (or \( R_p \) if \( P = \braket{ p } \)).

  The image under \( \iota \) of every element \( s \) of \( S \) is invertible in \( S^{-1} R \), and we call the inverse \( \ifrac {1_R} s \) the \term{reciprocal} of \( s \).

  This construction is very similar to the \hyperref[def:monoid_grothendieck_completion]{Grothendieck completion} of a monoid or semiring, although with notable differences --- the set \( S \) may be a strict subset of \( R \), and addition in the Grothendieck completion corresponds to multiplication in the localization, while addition in the completion has no analogy.
\end{definition}
\begin{defproof}
  The proof that \( {\sim} \) is an equivalence relation is the same as in \fullref{def:monoid_grothendieck_completion}. The result is then a ring if the operations are well-defined.

  We will show that both operations are well-defined. Let \( u ab' = u a'b \), meaning that \( (a, b) \sim (a', b') \) and hence \( \ifrac a b = \ifrac {a'} {b'} \), and let \( v cd' = v c'd \).

  For addition, we have
  \begin{align*}
    u v (ad + bc) b' d'
    &=
    v dd' (u ab') + u bb' (v cd')
    = \\ &=
    v dd' (u a'b) + u bb' (v c'd)
    = \\ &=
    u v (a'd' + b'c') b d,
  \end{align*}
  hence \( (ad + bc, bd) \sim (a'd' + b'c', b'd') \).

  The proof for correctness of multiplication is the same as the proof of correctness of addition in \fullref{def:monoid_grothendieck_completion}.
\end{defproof}

\begin{theorem}[Ring localization universal property]\label{thm:ring_localization_universal_property}\mcite[431]{Knapp2016BasicAlgebra}
  The \hyperref[def:ring_localization]{localization} of \( R \) by \( S \) satisfies the following \hyperref[rem:universal_mapping_property]{universal mapping property}:
  \begin{displayquote}
    For every commutative ring \( T \) and every ring homomorphism \( \varphi: R \to T \) such that \( \varphi(s) \) is invertible in \( T \) for every \( s \in S \), \( \varphi \) \hyperref[def:factors_through]{uniquely factors through} \( S^{-1} R \). That is, there exists a unique ring homomorphism \( \widetilde{\varphi}: S^{-1} R \to T \) such that the following diagram commutes:
    \begin{equation}\label{eq:thm:ring_localization_universal_property/diagram}
      \begin{aligned}
        \includegraphics[page=1]{output/thm__ring_localization_universal_property.pdf}
      \end{aligned}
    \end{equation}
  \end{displayquote}
\end{theorem}
\begin{proof}
  The condition suggests the definition
  \begin{equation*}
    \widetilde{\varphi}\parens*{ \frac r s } \coloneqq \varphi(r) \varphi(s)^{-1}.
  \end{equation*}
\end{proof}

\begin{example}\label{ex:def:ring_localization}
  We list several examples of \hyperref[def:ring/commutative]{commutative ring} \hyperref[def:ring_localization]{localization}.

  \begin{thmenum}
    \thmitem{ex:def:ring_localization/zero} If \( S \) contains \( 0_R \), then \( S^{-1} R \) is the trivial ring.

    \thmitem{ex:def:ring_localization/powers_of_two} The localization \( S^{-1} \BbbZ \) by the set \( S \coloneqq \set{ 2^n \given n \geq 0 } \) is (a ring isomorphic to) the rational numbers with denominators that are powers of two. This is an example of a multiplicative set that is not the complement of a prime ideal.

    This ring is isomorphic to the ring \( \BbbZ[\ifrac 1 2] \) obtained by \hyperref[thm:adjoining_elements_to_semiring]{adjoining} the rational number \( \ifrac 1 2 \) to \( \BbbZ \).

    \thmitem{ex:def:ring_localization/prime_number} Let \( p \) be a \hyperref[def:prime_number]{prime number}. The localization \( S^{-1} \BbbZ \) by \( S \coloneqq \BbbZ \setminus \braket{ p } \) is (a ring isomorphic to) the rational numbers with denominators coprime to \( p \).

    For \( p = 2 \), this localization consists of rational numbers whose denominator is an odd number.
  \end{thmenum}
\end{example}

\begin{proposition}\label{thm:def:ring_localization}
  \hyperref[def:ring_localization]{Ring localization} has the following basic properties:

  \begin{thmenum}
    \thmitem{thm:def:ring_localization/image_of_ideal}\mcite[432]{Knapp2016BasicAlgebra} Localization preserves \hyperref[def:semiring_ideal]{ideals}. More precisely, given a commutative ring \( R \), a multiplicative set \( S \) and an ideal \( I \), the set
    \begin{equation*}
      S^{-1} I \coloneqq \set*{ \frac r s \given* r \in I \T{and} s \in S }
    \end{equation*}
    is an ideal of the localization \( S^{-1} R \).

    \thmitem{thm:def:ring_localization/prime_ideals}\mcite[exer. 4.3]{КоцевСидеров2016} The map \( I \mapsto S^{-1} I \) is a \hyperref[def:partially_ordered_set/homomorphism]{strict order isomorphism} between the set of \hyperref[def:ring/submodel]{prime ideals} of \( R \) not intersecting \( S \) and the set of all prime ideals of \( S^{-1} R \).

    \thmitem{thm:def:ring_localization/by_prime_ideal}\mcite[exer. 4.2a)]{КоцевСидеров2016} The localization \( R_P \) by a \hyperref[def:semiring_ideal/prime]{prime ideal} \( P \) has a unique maximal ideal \( S^{-1} P \) (here \( S \coloneqq R \setminus P \)).

    \thmitem{thm:def:ring_localization/injective_inclusion} The canonical inclusion \( \iota: R \to S^{-1} R \) is injective if and only if \( S \) contains no zero divisors.
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:ring_localization/image_of_ideal} Trivial since \( S \) is closed under multiplication.

  \SubProofOf{thm:def:ring_localization/prime_ideals} Let \( P \) be a prime ideal in \( R \) disjoint from \( S \). By \fullref{thm:def:ring_localization/image_of_ideal}, \( S^{-1} P \) is an ideal of \( S^{-1} R \). If the product \( \ifrac {ac} {bd} \) belong to \( S^{-1} P \), then \( ac \in P \) and \( bd \in S \). Since \( P \) is prime, \( a \in P \) or \( c \in P \). If \( a \in P \), then \( ba \in P \) and \( \ifrac a d = \ifrac {ba} {bd} \in S^{-1} P \); if \( c \in P \), we proceed analogously. Thus, \( S^{-1} P \) is a prime ideal, i.e. the image under \( I \mapsto S^{-1} I \) of a prime ideal is a prime ideal.

  \SubProofOf[def:function_invertibility/injective/equality]{injectivity} Let \( S^{-1} P = S^{-1} Q \) for prime ideals \( P \) and \( Q \) disjoint from \( S \). Suppose that \( P \setminus Q \) contains at least one element, say \( p \). Then \( \iota(p) = \ifrac p 1 \) belongs to both \( S^{-1} P \) and \( S^{-1} Q \); hence, \( Q \) contains an element \( q \) such that, for some \( s \in S \) and \( u \in S \),
  \begin{equation*}
    p \cdot s \cdot u = 1 \cdot q \cdot u.
  \end{equation*}

  Since \( Q \) is an ideal, \( qu \in Q \), and hence \( psu \in Q \). But neither \( p \), \( s \) nor \( u \) belong to \( Q \), which contradicts the assumption that \( Q \) is prime. Therefore, \( P \setminus Q \) is empty. Generalizing, we obtain that \( I \mapsto S^{-1} I \) is injective on prime ideals.

  \SubProofOf[def:function_invertibility/surjective/existence]{surjectivity} Fix a prime ideal \( T \) in \( S^{-1} R \) and let \( P \) be the set of numerators in \( T \), i.e. if \( \ifrac p s \in T \), then \( p \in P \). We will show that \( P \) is a prime ideal; clearly \( T = S^{-1} P \).

  Clearly \( 0_R \in P \). Let \( a, c \in P \). Then there exist \( b, d \in S \) such that \( \ifrac a b \) and \( \ifrac c d \) belong to \( T \). But \( T \) is closed under multiplication with members of \( R \), hence \( \ifrac a {1_R} = b (\ifrac a b) \) and \( \ifrac c {1_R} = d (\ifrac c d) \) also belong to \( T \). Then their sum \( \ifrac {a + c} 1 \) belongs to \( T \), and hence also to \( P \). Thus, \( P \) is closed under addition. We analogously obtain that it is closed under multiplication.

  We have shown that \( P \) is an ideal in \( R \). We must show that it is a prime ideal. Let \( ac \in P \). Then
  \begin{equation*}
    \frac a b \cdot \frac c d \in T
  \end{equation*}
  for some \( b, d \in S \). Hence, \( \ifrac a b \) or \( \ifrac c d \) belongs to \( T \), implying that \( a \in P \) or \( c \in P \).

  \SubProofOf[def:partially_ordered_set/homomorphism]{monotonicity} Follows from \fullref{thm:order_embedding_is_strict}.

  \SubProofOf{thm:def:ring_localization/by_prime_ideal} In the localization \( R_P \) be a prime ideal, all members of \( P \) become invertible. Hence, a maximal ideal cannot contain members of \( P \). By \fullref{thm:def:ring_localization/image_of_ideal}, \( S^{-1} P \) is an ideal, therefore it must be the largest proper ideal.

  \SubProofOf{thm:def:ring_localization/injective_inclusion} Let \( sr = 0 \) for \( s \in S \). Then \( \iota(s) = \ifrac s {1_R} \) is invertible in \( S^{-1} R \) and hence
  \begin{equation*}
    \frac {0_R} {1_R}
    =
    \frac {sr} {1_R}
    =
    \frac {1_R} s \cdot \frac {sr} {1_R}
    =
    \frac r {1_R}.
  \end{equation*}

  Hence, \( \iota(r) = \iota(0_R) \).

  It follows that \( \iota \) is injective if and only if \( S \) contains no zero divisors.
\end{proof}

\begin{definition}\label{def:division_ring}\mcite[144]{Knapp2016BasicAlgebra}
  If every nonzero element of a ring is \hyperref[def:divisibility/unit]{invertible}, we call it a \term{division ring}.
\end{definition}

\begin{proposition}\label{thm:division_ring_is_entire}
  A nontrivial \hyperref[def:division_ring]{division ring} is \hyperref[def:entire_semiring]{entire}.
\end{proposition}
\begin{proof}
  Let \( xy = 0 \). If \( x \) is nonzero, multiplying both sides by \( x^{-1} \), we obtain \( y = 0 \). Analogously, \( y \neq 0 \) implies that \( x = 0 \). In all cases, either \( x \) or \( y \) is necessarily zero.

  Therefore, the ring has no nontrivial zero divisors.
\end{proof}

\begin{definition}\label{def:field}
  We will call the \hyperref[def:ring/trivial]{nontrivial} \hyperref[def:ring]{ring} \( \BbbK \) a \term{field} if any of the following equivalent conditions hold:
  \begin{thmenum}
    \thmitem{def:field/simple} \( \BbbK \) is \hyperref[def:ring/commutative]{commutative} and \hyperref[def:ring/simple]{simple}.
    \thmitem{def:field/division_ring} \( \BbbK \) is a \hyperref[def:ring/commutative]{commutative} \hyperref[def:division_ring]{division ring}.
  \end{thmenum}

  Fields have the following metamathematical properties:
  \begin{thmenum}
    \thmitem{def:field/theory} We can construct a \hyperref[def:first_order_theory]{first-order theory} for fields by adding to the \hyperref[def:semiring/theory]{theory of rings} the axioms \( \neg (0 \doteq 1) \) and
    \begin{equation}\label{eq:def:field/theory/invertibility}
      (\xi \doteq 0) \vee \qexists \eta (\xi \cdot \eta \doteq 1).
    \end{equation}

    These axioms are not \hyperref[def:positive_formula]{positive formulas}, hence fields automatically get worse metamathematical properties than rings, for example.

    \thmitem{def:field/homomorphism}\mcite[453]{Knapp2016BasicAlgebra} A \hyperref[def:first_order_homomorphism]{first-order homomorphism} between fields is simply a \hyperref[def:ring/homomorphism]{unital ring homomorphism}.

    \thmitem{def:field/submodel} If for two fields \( \Bbbk \) and \( \BbbK \) are have \( \Bbbk \subseteq \BbbK \), we say that \( \BbbK \) is a \term{field extension} of \( \Bbbk \) and that \( \Bbbk \) is a \term{subfield} of \( \BbbK \). In particular, if \( \BbbK = \Bbbk \), we say that the extension is trivial.

    \thmitem{def:field/category} The category of \hyperref[def:large_and_small_sets]{\( \mscrU \)-small} fields \( \ucat{Field} \) is a full subcategory of \hyperref[def:ring/category]{\( \ucat{CRing} \)} with objects restricted to fields.
  \end{thmenum}
\end{definition}
\begin{defproof}
  The equivalence of definitions follows from \fullref{thm:def:semiring_ideal/units}.
\end{defproof}

\begin{proposition}\label{thm:field_of_fractions}
  Let \( D \) be an \hyperref[def:integral_domain]{integral domain}. The \hyperref[def:ring_localization]{localization} of \( D \) at the zero ideal \( \set{ 0_R } \) is a \hyperref[def:field]{field}, which we call the \term{field of fractions} of \( D \).
\end{proposition}
\begin{proof}
  By \fullref{thm:def:ring_localization/prime_ideals}, the localization by the prime ideal \( \set{ 0_R } \) has only one maximal ideal --- \( S^{-1} \set{ 0_R } \). Since \( 0_R \) is absorbing, \( S^{-1} \set{ 0_R } \) is again the zero ideal. Therefore, it is the only proper ideal of the localization \( S^{-1} D \), and hence the localization is a \hyperref[def:ring/simple]{simple ring}.

  Since \( D \) is an integral domain, by \fullref{thm:def:ring_localization/injective_inclusion}, \( S^{-1} D \) is a superring of \( D \). It is therefore a nontrivial commutative simple ring, and thus it satisfies \fullref{def:field/simple}.
\end{proof}

\begin{theorem}[Field of fractions universal property]\label{thm:field_of_fractions_universal_property}
  The \hyperref[thm:field_of_fractions]{field of fractions} \( \BbbK \) of the integral domain \( D \) satisfies the following \hyperref[rem:universal_mapping_property]{universal mapping property}:
  \begin{displayquote}
    For every field \( \BbbL \) and every ring homomorphism \( \varphi: D \to \BbbL \), \( \varphi \) \hyperref[def:factors_through]{uniquely factors through} \( \BbbK \). That is, there exists a unique field homomorphism \( \widetilde{\varphi}: \BbbK \to \BbbL \) such that the following diagram commutes:
    \begin{equation}\label{eq:thm:field_of_fractions_universal_property/diagram}
      \begin{aligned}
        \includegraphics[page=1]{output/thm__field_of_fractions_universal_property.pdf}
      \end{aligned}
    \end{equation}
  \end{displayquote}
\end{theorem}
\begin{proof}
  This is simply a special case of \fullref{thm:ring_localization_universal_property}.
\end{proof}

\begin{definition}\label{def:rational_function_field}
  The field of \term{rational algebraic functions} \( D(\mscrX) \) for the set of indeterminates \( \mscrX \) over the \hyperref[def:integral_domain]{integral domain} \( D \) is the \hyperref[thm:field_of_fractions]{field of fractions} of the \hyperref[def:polynomial_algebra]{polynomial ring} \( D[\mscrX] \).

  Despite the name, elements of the field of fractions are not actually functions, but merely formal expressions. In particular, an analog of \fullref{thm:polynomial_algebra_universal_property} does not really make sense.
\end{definition}

\begin{proposition}\label{thm:adjoining_elements_to_field}
  Let \( \Bbbk \subseteq \BbbK \) be \hyperref[def:field]{fields} and let \( A \) be an arbitrary subset of \( \BbbK \).

  Let \( \Bbbk[A] \) be the ring obtained by adjoining the elements of \( A \) to \( \Bbbk \) as described in \fullref{thm:adjoining_elements_to_semiring}. The \hyperref[thm:field_of_fractions]{field of fractions} of \( \Bbbk[A] \) is the smallest field extension of \( \Bbbk \) containing \( A \).

  We denote this extension by \( \Bbbk(A) \). It should not be confused with the image of the evaluation homomorphism on the \hyperref[def:rational_function_field]{field of rational functions}; the rational functions do not actually have an evaluation homomorphism.
\end{proposition}
\begin{proof}
  It follows from \fullref{thm:adjoining_elements_to_semiring} that \( \Bbbk[A] \) is the smallest superring of \( \Bbbk \) containing \( A \). By \fullref{thm:field_of_fractions_universal_property}, \( \Bbbk(A) \) is the smallest field containing \( \Bbbk[A] \).
\end{proof}
