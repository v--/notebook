\subsection{Functions}\label{subsec:functions}

\begin{remark}\label{rem:function_definition}
  Consider the formula of first-order set theory
  \begin{equation}\label{eq:rem:function_definition}
    \qforall \synx \qexists \syny (\synx \in \syny)
  \end{equation}
  stating that every set belongs to some set.

  Fix an arbitrary set \( A \). We are free to choose any set, for which reason we call \( \synx \) an \term{independent variable}. Then we must find a set \( B \) of \( V \), \hi{dependent} on \( A \), such that \( A \in B \). Possible values for \( B \) are the singleton set \( \set{ A } \), as well as all its supersets, for example \( \pow(A) \). We call \( \syny \) a \term{dependent variable} because it depends on \( \synx \)\fnote{This terminology can be slightly inappropriate if \( \syny \) does not actually depend on \( \synx \), for example in the formula \( \qforall \synx \qexists \syny (\syny \syneq \syny) \)}.

  We want an abstraction that would capture such dependence. The approach that we took in \fullref{def:basic_set_operations/power_set} is to describe how to obtain the power set \( \pow(A) \) of any set. Thus, for each set \( A \), there exists a unique set \( \pow(A) \) whose members are the subsets of \( A \). We say that the \term[bg=изображение,ru=изображение]{mapping} \( \pow \) \term{maps} a set to its power set.

  What if we wanted to study properties of a mapping and relations between different mappings? In order to do this via set theory, we must represent a mapping as a set. Many authors like \incite[40]{Enderton1977Sets}, \incite[7]{Kelley1975Topology} and \incite[1]{Engelking1989Topology} propose using a \hyperref[def:binary_relation]{binary relation} \( R \), called the \term{graph} of the mapping, such that the sets \( A \) and \( B \) are related under \( R \) if \( B \) is the unique value corresponding to \( A \).

  In the case of the power set mapping, it would make sense for the graph to be a subset of \( V \times V \), where \( V \) is a set containing all sets. But if we want our definition to be compatible with \hyperref[def:zfc]{\logic{ZFC}}, then the existence of \( V \) would contradict \fullref{thm:zfc_existence_theorems/set_containing_all}.

  Instead, fix some set \( V \) closed under the power set operation\fnote{Such as \( V_\lambda \) for limit ordinals --- see \fullref{thm:def:cumulative_hierarchy/power_set}.} and call it our \term{domain}. Then we can define the relation\fnote{The \hyperref[def:zfc/replacement]{axiom of replacement} ensures that the set \( \mscrP \) exists.}
  \begin{equation*}
    \mscrP \coloneqq \set[\Big]{ (A, \pow(A)) \given* A \in V }.
  \end{equation*}

  There is a nuance here that turns out to be important. We know that \( \mscrP \) maps members of the domain into members of some other set, the \term{codomain}. A natural candidate is the following set, which we will call the \term{image}:
  \begin{equation*}
    W \coloneqq \set[\Big]{ B \given* (A, B) \in \mscrP }.
  \end{equation*}

  We thus have the ordered triple \( (\mscrP, V, W) \). This definition captures the graph of the mapping, as well as its domain and codomain. We will call this triple a \term{function}. In this more narrow context, we will synonymously use \enquote{function}, \enquote{transformation}, \enquote{operator}, \enquote{map} and \enquote{mapping}.

  We have chosen \( V \) so that if \( A \in V \), then also \( \pow(A) \in V \), thus \( V \) is also a candidate for a codomain. The triple \( (\mscrP, V, V) \) is another function with the same domain and graph, yet with a different codomain.

  The difference between the two leads to different \hyperref[def:function/set_of_functions]{sets of functions}, either those from \( V \) to \( W \) or those from \( V \) to \( V \). Sets of functions are fundamental for \fullref{sec:functional_analysis} and \fullref{sec:category_theory}, as well as algebraic disciplines like \fullref{sec:group_theory}, \fullref{sec:ring_theory} and \fullref{sec:linear_algebra}.

  Another function from \( V \) to \( V \) that we discussed earlier relates \( \set{ A } \) to \( A \). Both of the aforementioned functions have different ranges, but we chose them to have the same domain and codomain, and thus belong to the set of functions from \( V \) to itself.

  Rather than focusing on only one solution to \eqref{eq:rem:function_definition}, we may instead define the relation
  \begin{equation*}
    \mscrR \coloneqq \set[\Big]{ (A, B) \given* A, B \in V \T{and} A \in B }.
  \end{equation*}

  Then \( A \) is related under \( \mscrR \) with both \( \set{ A } \) and \( \pow(A) \). This is technically not a graph of a function because we lack uniqueness. It is a generalization, which \incite[def. 1.3.1]{AubinFrankowska1990SetValued}, \incite[1]{DontchevRockafellar2014SolutionMappings} and \incite[VII]{Phelps1993Convex} call \term{set-valued maps}\fnote{Every mapping is technically set-valued, but the values of single-valued functions are treated as atoms, while the values of set-valued maps are treated as sets of atoms}.

  Prime examples of set-valued maps used in practice are the subdifferentials defined in \fullref{def:subdifferentials}, as well as solution mappings which provide sets of solutions to some equation that depends on a parameter.
\end{remark}

\begin{definition}\label{def:set_valued_map}\mcite[def. 1.3.1]{AubinFrankowska1990SetValued}
  A \term{set-valued map} from \( A \) to \( B \) is an ordered triple \( F = (R, A, B) \), where \( R \subseteq A \times B \) is a \hyperref[def:binary_relation]{binary relation}.

  We use the notation \( F: A \multto B \) instead of \( F = (R, A, B) \), where we call the string of symbols \( A \multto B \) the \term{signature} of the map.

  \begin{thmenum}[series=def:set_valued_map]
    \thmitem{def:set_valued_map/graph} We call the relation \( R \) the \term{graph}\fnote{The term \enquote{graph} in this context is unrelated to the different kinds of graphs defined in \fullref{subsec:graphs}.} of \( F \) and denote it by \( \gph(F) \).

    \thmitem{def:set_valued_map/value} We define the \term{value} of \( F \) at \( x \) as
    \begin{equation*}
      F(x) \coloneqq \set{ y \in B \given (x, y) \in \gph(F) }.
    \end{equation*}

    The notation \( F(x) \) refers to a member of \( B \) if \( x \) is a \hyperref[def:first_order_syntax/formula_bound_variables]{bound variable} and to the map \( F \) itself if \( x \) is a \hyperref[def:first_order_syntax/formula_free_variables]{free variable}.

    \incite[9]{Aluffi2009Algebra} also uses the terminology \enquote{\term{action} of \( F \) on \( x \)} or \enquote{\term{image} of \( F \) on \( x \)}.

    We say that \( F \) is \term{single-valued} at \( x \) if \( F(x) \) has exactly one member and \term{multivalued} if it has more than one member.

    \thmitem{def:set_valued_map/partial}\mcite[33]{Rosen2018DiscreteHandbook} We say that \( F \) is \term{partial} if \( F(x) = \varnothing \) for some \( x \in A \) and \term{total} otherwise.

    \thmitem{def:set_valued_map/image} We also define the \term{image} of a set \( X \subseteq A \) under \( F \) as
    \begin{equation*}
      F[X] \coloneqq \bigcup \set{ F(x) \given x \in X }.
    \end{equation*}

    If \( X = A \), we call the set \( F[A] \) the image of \( F \) and denote it by \( \img(F) \).

    \thmitem{def:set_valued_map/domain} We define the \term{domain} of \( F \) as the set
    \begin{equation*}
      \dom(F) \coloneqq \set{ x \in A \given \qexists{F(x)} \neq \varnothing }.
    \end{equation*}

    \thmitem{def:set_valued_map/codomain} Contrastingly, we define the \term{codomain} \( \co\dom(F) \) of \( F \) as the entire set \( B \).

    The reason for the inconsistency with the term \enquote{domain} is due to the terminology coming from \hyperref[def:function]{single-valued functions}, where the domain is required to be the entirety of \( A \).

    \thmitem{def:set_valued_map/restriction} For each subset \( X \subseteq A \), we can define the \term{restriction} \( F_X: X \to B \) of \( F \) to \( X \) as the set-valued map such that
    \begin{equation*}
      \gph(F_X) \coloneqq \gph(F) \cap X \times B.
    \end{equation*}
  \end{thmenum}

  The following terminology is consistent with relations:
  \begin{thmenum}[resume=def:set_valued_map]
    \thmitem{def:set_valued_map/empty} We say that the function \( F: A \multto B \) is \term{empty} if \( \gph(F) = \varnothing \), i.e. if the graph is empty in the sense of \fullref{def:relation/empty}.

    \thmitem{def:set_valued_map/identity}\mcite[2]{Engelking1989Topology} We define the \term{identity function} \( \id_A \) on the set \( A \) as the function corresponding to the identity relation \( \increment_A \) from \fullref{def:binary_relation/diagonal}.

    \thmitem{def:set_valued_map/inverse} We define the \term{inverse} \( F^{-1}: B \multto A \) of a set-valued map \( F: A \multto B \) as the function whose graph is the inverse of \( \gph(F) \) in the sense of \fullref{def:binary_relation/inverse}.

    For each set \( Y \subseteq B \), we call \( F^{-1}(Y) \) the \term{preimage} of \( Y \).

    \thmitem{def:set_valued_map/composition} We define the \term{composition} \( G \bincirc F \) of two set-valued maps \( F: A \multto B \) and \( G: B \multto C \) as the function
    \begin{equation*}
      [G \bincirc F](x) \coloneqq G(F(x)).
    \end{equation*}

    The square brackets around \( G \bincirc F \) are not a special notation, but rather another pair of delimiters that looks different from parentheses for the sake of reducing visual clutter.

    This definition is consistent with binary relation composition from \fullref{def:binary_relation/composition}.
  \end{thmenum}
\end{definition}
\begin{comments}
  \item Rather than introducing these concepts for set-valued functions, \incite[8]{Kelley1975Topology} does it for relations.

  \item Some authors like \incite[1]{Engelking1989Topology} and \incite[596]{Knapp2016BasicAlgebra} use \enquote{range} for what we call the codomain of a function, while others like \incite[11]{Kelley1975Topology} and \incite[43]{Enderton1977Sets} use \enquote{range} for what we call the image.

  To avoid ambiguity, we avoid the term \enquote{range} altogether.
\end{comments}

\begin{remark}\label{rem:notation_for_function_image}
  The notation \( f[X] \) for the image of a set \( A \) is mostly used within set theory, for example by \incite[44]{Enderton1977Sets}. The notation \( f(X) \) is used in other context like topology, for example by \incite[1]{Engelking1989Topology}, and analysis, for example by \incite[def. 1.3.1]{AubinFrankowska1990SetValued}. We generally prefer \( f(X) \) because it reflects the established convention in fields more relevant to us, but occasionally use \( F[X] \) in order to avoid ambiguities. For example, if \( A \) is a \hyperref[def:transitive_set]{transitive set}, then \( x \in A \) implies that \( x \subseteq A \), yet
  \begin{equation*}
    f[\set{ \varnothing }] = \set{ f(\varnothing) } \neq f(\set{ \varnothing }).
  \end{equation*}
\end{remark}

\begin{proposition}\label{thm:def:set_valued_map}
  \hyperref[def:set_valued_map]{Multi-valued functions} have the following basic properties:

  \begin{thmenum}
    \thmitem{thm:def:set_valued_map/associative} \hyperref[def:set_valued_map/composition]{Composition} is associative. That is, for any three functions \( F: A \to B \), \( G: B \to C \) and \( H: C \to D \) we have
    \begin{equation*}
      H \bincirc [G \bincirc F] = [H \bincirc G] \bincirc F.
    \end{equation*}

    We will henceforth simply write \( H \bincirc G \bincirc F \).

    \thmitem{thm:def:set_valued_map/composition_inverse} If \( F: A \to B \) and \( G: B \to C \) are \hyperref[def:function]{set-valued maps}, then
    \begin{equation*}
      [G \bincirc F]^{-1} = F^{-1} \bincirc G^{-1}.
    \end{equation*}
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:set_valued_map/associative} Let \( a \in A \). Then in order for \( d \in D \) to belong to \( [[H \bincirc G] \bincirc F](a) \), there must exist values \( b \in B \) and \( c \in C \) such that \( b \in F(a) \) and \( c \in G(b) \) and \( d \in H(c) \). Clearly this is also the condition for \( d \) to belong to \( [H \bincirc [G \bincirc F]](a) \).

  \SubProofOf{thm:def:set_valued_map/composition_inverse} Since \( G \bincirc F \) has signature \( A \to C \), clearly \( [G \bincirc F]^{-1} \) has signature \( C \to A \). Let \( c \in C \).

  \begin{itemize}
    \item If \( [G \bincirc F]^{-1}(c) \) is empty, \( c \not\in \img(G \bincirc F) \), hence either \( G^{-1}(c) \) is empty or is nonempty, but disjoint from \( \img(F) \). Hence, \( [F^{-1} \bincirc G^{-1}](c) \) is also empty.

    \item Suppose that \( [G \bincirc F]^{-1}(c) \) is not empty and let \( a \in [G \bincirc F]^{-1}(c) \).

    By definition, there exists \( b \in B \) and such that \( b \in F(a) \) and \( c \in G(b) \). Hence, \( b \in G^{-1}(c) \) and \( a \in F^{-1}(b) \), which implies that the image of \( c \) under the composition \( F^{-1} \bincirc G^{-1} \) also contains \( a \).
  \end{itemize}

  In both cases, for every \( c \in C \) we have
  \begin{equation*}
    [G \bincirc F]^{-1}(c) = [F^{-1} \bincirc G^{-1}](c).
  \end{equation*}

  Hence, the two set-valued maps are equal.
\end{proof}

\begin{concept}\label{con:function_arguments}
  As mentioned in \fullref{def:set_valued_map/value}, given a map \( F: A \multto B \) and a free variable \( x \), we sometimes use the notation \( F(x) \).

  If \( A = A_1 \times \cdots \times A_n \) is a \hyperref[def:cartesian_product/product]{finite Cartesian product}, we can instead use the notation \( F(x_1, \ldots, x_n) \) and regard \( x_1, \ldots, x_n \) as free variables that have no assigned value.

  The variables are called \term{arguments} or sometimes \term{parameters}. This notion is somewhat informal and depends on the context since \( A \) can usually be represented as a Cartesian product in different ways and with different arities. For example, if \( A = B \times C \), we can write both \( f(a) \) and \( f(b, c) \) and the function has a different number of parameters in each case. In practice, the number of arguments is usually clear from the context. We sometimes use \( \vect{a} \) to highlight that we regard \( a \) as a tuple.

  We may use prefixes from \fullref{def:operation_arity} like \enquote{unary}, \enquote{binary} and so forth on arbitrary functions if there is no possibility of confusion about the number of parameters.
\end{concept}

\begin{definition}\label{def:function}
  We say that the \hyperref[def:function]{set-valued map} \( F: A \multto B \) is a \term{function} if \( F(x) \) is \hyperref[def:set_valued_map/value]{single-valued} for each \( x \in A \). In this case, we write \( F: A \to B \) rather than \( F: A \multto B \). If disambiguation is necessary, we will use the term \term[bg=еднозначна функция, ru=однозначная функция]{single-valued function}.

  Strictly speaking, the value \( f(x) \) of a function \( f: A \to B \) is a \hyperref[rem:singleton_sets]{singleton set}. It is thus prevalent to define the value of a function to be an element of \( B \) rather than a subset of \( B \).

  Single-valued functions satisfy the following \hyperref[con:predicate_formula]{predicate formula}, which states that the free variable \( \rho \) is the graph of a function:
  \begin{equation*}\taglabel[\op{IsFun}]{eq:def:function/predicate}
    \ref{eq:def:function/predicate}[\rho] \coloneqq \qforall \synx \parens[\Big]{ \synx \in \rho \synimplies \qexists \syny \qexists \synz \ref{eq:def:cartesian_product/kuratowski_pair_predicate}[\synx, \syny, \synz] }
  \end{equation*}

  We will also use the following to verify that the domain of a function is a given set:
  \begin{equation*}\taglabel[\op{IsDom}]{eq:def:function/dom_predicate}
    \ref{eq:def:function/dom_predicate}[\rho, \sigma] \coloneqq \T{\todo{}}
  \end{equation*}

  Similarly:
  \begin{equation*}\taglabel[\op{IsRan}]{eq:def:function/ran_predicate}
    \ref{eq:def:function/ran_predicate}[\rho, \sigma] \coloneqq \T{\todo{}}
  \end{equation*}

  \begin{thmenum}
    \thmitem{def:function/endofunction}\mcite[183]{DaveyPriestley2002Lattices} We call functions from a set to itself \term{endofunctions}.

    \medskip

    \thmitem{def:function/selection}\mcite[52]{DontchevRockafellar2014SolutionMappings} If \( f: A \to B \) is a single-valued function, \( F: A \multto B \) is a set-valued map and \( \gph(f) \subseteq \gph(F) \), we say that \( f \) is a \term{selection} of \( F \).

    \thmitem{def:function/set_of_functions}\mimprovised We denote the set of all total single-valued functions from \( A \) to \( B \) by \( \fun(A, B) \) and abbreviate \( \fun(A, A) \) as \( \fun(A) \).
  \end{thmenum}
\end{definition}
\begin{comments}
  \item All definitions from \fullref{def:function} holds for single-valued functions.

  \item We can simplify \fullref{def:set_valued_map/image} to
  \begin{equation*}
    f[A]
    =
    \bigcup \set[\Big]{ \set{ f(x) } \given x \in A }
    =
    \set{ f(x) \given x \in A }.
  \end{equation*}

  As mentioned in \fullref{def:set_valued_map/image}, we usually prefer the notation \( f[A] \) outside \fullref{sec:set_theory} where we are less prone to ambiguity.

  \item Accepted notations for \( \fun(A, B) \) are:
  \begin{itemize}
    \item \( \cat{Set}(A, B) \), used in relation to the category \hyperref[def:category_of_small_sets]{\( \cat{Set} \)}.
    \item \( B^A \), which is consistent with \hyperref[def:cardinal_arithmetic/exponentiation]{cardinal exponentiation} (used by \incite[example 3.2]{Aluffi2009Algebra}).
    \item \( {}^A B \) (used by \incite[52]{Enderton1977Sets}).
  \end{itemize}

  \item By convention, when both single-valued and set-valued maps are involved, the former are denoted using lowercase letters and the latter using uppercase letters.
\end{comments}

\begin{proposition}\label{thm:def:function}
  \hyperref[def:function]{Single-valued functions} have the following properties when regarded as \hyperref[def:function]{set-valued maps}:
  \begin{thmenum}
    \thmitem{thm:def:function/total} Single-valued functions are \hyperref[def:set_valued_map/partial]{total} as set-valued maps.

    \thmitem{thm:def:function/section_total} If a set-valued map has a \hyperref[def:function/selection]{selection}, it is \hyperref[def:set_valued_map/partial]{total}.

    \thmitem{thm:def:set_valued_map/composition} The \hyperref[def:set_valued_map/composition]{composition} of single-valued functions is a single-valued function.
  \end{thmenum}
\end{proposition}
\begin{proof}
  Trivial.
\end{proof}

\begin{definition}\label{def:constant_function}\mimprovised
  If the \hyperref[def:set_valued_map/image]{image} of a \hyperref[def:function]{single-valued function} \( f: A \to B \) is some \hyperref[rem:singleton_sets]{singleton set} \( \set{ b } \), we call it a \term{constant function} with value \( b \).
\end{definition}

\begin{remark}\label{rem:constant_function}\mcite{Social:empty_constant_function}
  \hyperref[def:constant_function]{Our definition} for constant functions avoids a common pitfall.

  Consider the following definition, based on Walter Rudin's one in \cite[def. 4.3]{Rudin1976Principles}:
  \begin{displayquote}
    If a \hyperref[def:function]{single-valued function} \( f: A \to B \) satisfies \( f(a) = b \) for every \( a \in A \), we call it a \term{constant function} with value \( b \).
  \end{displayquote}

  Under the latter definition, any function \( f: \varnothing \to B \) from an empty set is vacuously a constant function taking every possible value in \( B \). This is discussed in

  On the other hand, under the former definition, constant functions are precisely those that that \hyperref[def:factors_through]{factor through} \enquote{the} \hyperref[def:universal_objects/terminal]{terminal object} in \hyperref[def:category_of_small_sets]{\( \cat{Set} \)}, the set \( \set{ \varnothing } \).

  Hence, our definition also gives a good categorical characterization.
\end{remark}

\begin{remark}\label{rem:set_valued_map_as_single_valued}
  Rather than defining a \hyperref[def:function]{single-valued function} to be a special case of \hyperref[def:set_valued_map]{set-valued maps}, \incite[def. 2.3]{Phelps1993Convex} defines set-valued maps from \( A \) to \( B \) as single-valued functions from \( A \) to \( \pow(B) \).

  The downside of the latter approach is that notions such as the \hyperref[def:set_valued_map/image]{image}, \hyperref[def:set_valued_map/codomain]{codomain} and \hyperref[def:set_valued_map/inverse]{inverse} of the set-valued map have a different and less useful for us meaning.
\end{remark}

\begin{remark}\label{rem:implicit_function_notation}
  It is sometimes useful to utilize \term{anonymous functions} such as \( x \mapsto x^2 \), which generalize \hyperref[def:first_order_substitution/term_in_term]{term substitution}. The goal is to avoid naming functions whose name we will not use. Some examples where we utilize this:
  \begin{itemize}
    \item Quotient maps such as \( H \mapsto H / N \) from \fullref{thm:lattice_theorem_for_subgroups}.
    \item Highlighting dependent and independent variables, such as Euclidean plane rotations in \fullref{thm:plane_rotation_matrix_angle}:
    \begin{equation*}
      \varphi
      \mapsto
      \begin{pNiceMatrix}
        \cos \varphi & -\sin \varphi \\
        \sin \varphi & \cos \varphi
      \end{pNiceMatrix}
    \end{equation*}

    \item Defining functors such as the power set functor from \fullref{ex:unary_functors_in_set/power}:
    \begin{equation*}
      \begin{aligned}
        &\pow: \cat{Set} \to \cat{Set}, \\
        &\pow(A) \coloneqq \set{ S \given S \subseteq A }, \\
        &\pow(f: A \to B) \coloneqq (S \mapsto f[S]). \\
      \end{aligned}
    \end{equation*}
  \end{itemize}
\end{remark}

\begin{definition}\label{def:function_invertibility}\mimprovised
  We introduce the following terminology for invertibility of a (single-valued) function \( f: A \to B \):
  \begin{thmenum}
    \begin{minipage}[t]{0.43\textwidth}
      \thmitem{def:function_invertibility/injective} We say that \( f \) is \term{injective} if any of the following equivalent conditions hold:
      \begin{thmenum}
        \thmitem{def:function_invertibility/injective/existence} For any \( y \in B \) there exists \hi{at most} one \( x \in A \) such that \( f(x) = y \).

        Each point in \( B \) is the image of at most one point in \( A \).
        \newline

        \thmitem{def:function_invertibility/injective/equality} For all \( x_1, x_2 \in A \), the equality \( f(x_1) = f(x_2) \) implies \( x_1 = x_2 \).

        The contrapositive of this statement is that different points in \( A \) have different images under \( f \).

        \thmitem{def:function_invertibility/injective/inverse} The inverse is a partial single-valued function.
      \end{thmenum}
    \end{minipage}
    \hfill
    \begin{minipage}[t]{0.44\textwidth}
      \thmitem{def:function_invertibility/surjective} We say that \( f \) is \term{surjective} if any of the following equivalent conditions hold:
      \newline
      \begin{thmenum}[leftmargin=0.9cm]
        \thmitem{def:function_invertibility/surjective/existence} For any \( y \in B \) there exists \hi{at least} one \( x \in A \) such that \( f(x) = y \).

        Each point in \( B \) is the image of at least one point in \( A \). Hence, the image of \( f \) is the entire codomain \( B \).

        \thmitem{def:function_invertibility/surjective/equality} For all \( y_1, y_2 \in B \), the equality \( f^{-1}(y_1) = f^{-1}(y_2) \) implies \( y_1 = y_2 \).

        Without surjectivity, the above holds only for the points in the image of \( f \).

        \thmitem{def:function_invertibility/surjective/inverse} The inverse is a total set-valued map.
      \end{thmenum}
    \end{minipage}

    \thmitem{def:function_invertibility/bijective} Finally, we say that \( f \) is \term{bijective} if any of the following equivalent conditions hold:
    \begin{thmenum}
      \thmitem{def:function_invertibility/bijective/direct} It is both injective and surjective.
      \thmitem{def:function_invertibility/bijective/existence} For any \( y \in B \) there exists exactly one \( x \in A \) such that \( f(x) = y \).
      \thmitem{def:function_invertibility/bijective/inverse} The inverse is a total single-valued function.
    \end{thmenum}
  \end{thmenum}
\end{definition}
\begin{defproof}
  The equivalences are trivial to verify.
\end{defproof}

\begin{proposition}\label{thm:function_composition_invertibility}
  The composition of injective (resp. surjective or bijective) functions is injective (resp. surjective or bijective).
\end{proposition}
\begin{comments}
  \item Compare this result to \fullref{thm:def:morphism_invertibility/invertible_composition} and \fullref{thm:function_superposition_invertibility}.
\end{comments}
\begin{proof}
  Let \( f: A \to B \) and \( g: B \to C \) be arbitrary functions and define \( h \coloneqq g \circ f: A \to C \).

  \SubProofOf[def:function_invertibility/injective/equality]{injectivity} Suppose that \( f \) and \( g \) are injective and satisfy \fullref{def:function_invertibility/injective/equality}.

  Let \( x_1, x_2 \in A \) and suppose that \( h(x_1) = h(x_2) \), that is, \( g(f(x_1)) = g(f(x_2)) \). Then \( f(x_1) = f(x_2) \) since \( g \) is injective and \( x_1 = x_2 \) since \( f \) is injective.

  Since \( x_1 \) and \( x_2 \) were arbitrary, we conclude that \( h \) is also injective.

  \SubProofOf[def:function_invertibility/surjective/existence]{surjectivity} Suppose that \( f \) and \( g \) are surjective and satify \fullref{def:function_invertibility/injective/existence}.

  Let \( z \in C \). Then there exists some \( y \in B \) such that \( g(y) = z \) because \( g \) is surjective and similarly there exists some \( x \in B \) such that \( f(x) = y \) because \( f \) is surjective. Thus, \( h(x) = g(f(x)) = z \).

  Since \( z \) was arbitrary, we conclude that \( h \) is also surjective.

  \SubProofOf[def:function_invertibility/bijective/direct]{bijectivity} We have shown that if \( f \) and \( g \) are both injective or surjective, so is \( h \). Hence, if \( f \) and \( g \) are bijective, so is \( h \).
\end{proof}

\begin{lemma}\label{thm:diagonal_product_injectivity}
  Let \( \seq{ f_k: A \to B_k }_{k \in \mscrK} \) be an indexed family of functions, where \( f_k: A \to B_k \) in \( k \in \mscrK \). If at least one of the functions is injective, the \hyperref[def:topological_product]{diagonal product}
  \begin{equation*}
    \begin{aligned}
      f: A \to \prod B_k \\
      f(x) \coloneqq \seq{ f_k(x) }_{k \in \mscrK}
    \end{aligned}
  \end{equation*}
  is also injective.
\end{lemma}
\begin{proof}
  Suppose that \( f_{k_0} \) is injective. Let \( f(x_1) = f(x_2) \). Then \( \seq{ f_k(x_1) }_{k \in \mscrK} = \seq{ f_k(x_2) }_{k \in \mscrK} \) and thus \( f_{k_0}(x) = f_{k_0}(y) \). Since \( f_{k_0} \) is injective, we conclude that \( x_1 = x_2 \). Since \( x_1 \) and \( x_2 \) were arbitrary, we conclude that \( f \) is also injective.
\end{proof}

\begin{concept}\label{con:function_superposition}
  Although the terms \enquote{composition} and \enquote{superposition} are used interchangeably, for example by \incite[\S 25]{Фихтенгольц1968ОсновыТом1}, the term \enquote{superposition} often refers to a certain generalization of \hyperref[def:set_valued_map/composition]{function composition}. The latter is used by \incite[16]{Яблонский2003ДискретнаяМатематика}.

  If we are given the family of functions (or set-valued maps) \( f_k: A \multto B_k \) for \( k = 1, \ldots, n \) and \( G: B_1 \times \cdots \times B_n \multto C \), we define their \term{superposition} as
  \begin{equation*}
    \begin{aligned}
      &H: A \to C, \\
      &H(x) \coloneqq G(F_1(x), \ldots, F_n(x)).
    \end{aligned}
  \end{equation*}
\end{concept}

\begin{proposition}\label{thm:function_superposition_invertibility}
  The superposition of injective functions is injective.
\end{proposition}
\begin{comments}
  \item Compare this result to \fullref{thm:function_composition_invertibility}.
\end{comments}
\begin{proof}
  Suppose that we are given injective functions \( f_k: A \multto B_k \) for \( k = 1, \ldots, n \) and \( g: B_1 \times \cdots \times B_n \multto C \). From \fullref{thm:diagonal_product_injectivity} it follows that the function
  \begin{equation*}
    \begin{aligned}
      &d: A \to B_1 \times \cdots \times B_n, \\
      &d(x) \coloneqq (f_1(x), \ldots, f_n(x))
    \end{aligned}
  \end{equation*}
  is injective.

  Then from \fullref{thm:function_composition_invertibility} it follows that the desired superposition
  \begin{equation*}
    \begin{aligned}
      &h: A \to C, \\
      &h(x) \coloneqq g(f_1(x), \ldots, f_n(x)) = g(d(x)).
    \end{aligned}
  \end{equation*}
  is injective.
\end{proof}

\begin{proposition}\label{thm:function_image_preimage_composition}
  For any function \( f: A \to B \), we have
  \begin{thmenum}
    \thmitem{thm:function_image_preimage_composition/preimage_of_image} If \( X \subseteq A \), then \( X \subseteq f^{-1}[f[X]] \). Equality holds if \( f \) is injective.
    \thmitem{thm:function_image_preimage_composition/image_of_preimage} If \( Y \subseteq B \), then \( f[f^{-1}[Y]] \subseteq Y \). Equality holds if \( f \) is surjective.
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:function_image_preimage_composition/preimage_of_image} If \( x \in X \), clearly \( x \in f^{-1}(f(x)) \). Thus,
  \begin{equation*}
    X \subseteq f^{-1}[f[X]].
  \end{equation*}

  Now suppose that \( f \) is injective and let \( x \in f^{-1}[f[X]] \). There exists some \( y \in f[X] \) such that \( x \in f^{-1}(y) \) and some \( z \in X \) such that \( y = f(z) \). Since \( f \) is injective and \( f(x) = y = f(z) \), it follows that \( x = z \) and thus \( x \in X \). Since \( x \) was chosen arbitrarily from \( f^{-1}[f[X]] \), we conclude that
  \begin{equation*}
    f^{-1}[f[X]] \subseteq X.
  \end{equation*}

  \SubProofOf{thm:function_image_preimage_composition/image_of_preimage} If \( y \in f[f^{-1}[Y]] \), there exists some \( x \in f^{-1}[Y] \) such that \( f(x) = y \). Furthermore, there also exists some \( t \in Y \) such that \( x \in f^{-1}(t) \). Hence, \( y = f(x) = t \) and \( y \in Y \). Therefore,
  \begin{equation*}
    f[f^{-1}[Y]] \subseteq Y.
  \end{equation*}

  Now suppose that \( f \) is surjective and let \( y \in Y \). Then from surjectivity if follows that there exists some \( x \in X \) such that \( f(x) = y \). Hence, \( x \in f^{-1}(y) \) and \( y = f(x) \in f[f^{-1}(y)] \). Since \( y \) was chosen arbitrarily from \( Y \), we conclude that
  \begin{equation*}
    Y \subseteq f[f^{-1}[Y]].
  \end{equation*}
\end{proof}

\begin{proposition}\label{thm:function_image_properties}
  \hyperref[def:set_valued_map/image]{Images of sets} under \( f: A \to B \) have the following basic properties:
  \begin{thmenum}
    \thmitem{thm:function_image_properties/monotonicity} If \( A_1 \subseteq A_2 \), then \( f[A_1] \subseteq f[A_2] \).

    \thmitem{thm:function_image_properties/union} For any \hyperref[def:cartesian_product/indexed_family]{indexed family} \( \seq{ A_k }_{k \in \mscrK} \subseteq A \) of subsets of \( A \), we have the equality
    \begin{equation}\label{eq:thm:function_image_properties/union}
      f\bracks*{ \bigcup_{k \in \mscrK} A_k } = \bigcup_{k \in \mscrK} f[A_k].
    \end{equation}

    \thmitem{thm:function_image_properties/intersection} For any indexed family \( \seq{ A_k }_{k \in \mscrK} \) of subsets of \( A \), we have the inclusion
    \begin{equation}\label{eq:thm:function_image_properties/intersection}
      f\bracks*{ \bigcap_{k \in \mscrK} A_k } \subseteq \bigcap_{k \in \mscrK} f[A_k].
    \end{equation}

    Equality in \eqref{eq:thm:function_image_properties/intersection} holds if \( f \) is \hyperref[def:function_invertibility/injective]{injective}. If \( f \) is not injective, for example if both \( A \) and \( B \) are nonempty, \( A_1 \) and \( A_2 \) are disjoint subsets of \( A \) and \( f[A_1] = f[A_2] = B \), then
    \begin{equation*}
      f[A_1 \cap A_2] = f[\varnothing] = \varnothing \subsetneq f[A_1] \cap f[A_2] = B.
    \end{equation*}

    \thmitem{thm:function_image_properties/difference} For any two subsets \( A_1 \) and \( A_2 \) of \( A \), we have the inclusion
    \begin{equation}\label{eq:thm:function_image_properties/difference}
      f[A_1] \setminus f[A_2] \subseteq f[A_1 \setminus A_2].
    \end{equation}
  \end{thmenum}
\end{proposition}
\begin{comments}
  \item Compare this result to the more well-behaved properties of \hyperref[def:set_valued_map/inverse]{preimages} described in \fullref{thm:function_preimage_properties}.

  \item Equality in \eqref{eq:thm:function_image_properties/difference} holds if \( f \) is injective. If \( f \) is not injective, for example if \( A_1 \subsetneq A_2 \), but \( f[A_1] = f[A_2] \), then
  \begin{equation*}
    f[A_1] \setminus f[A_2] = \varnothing \subsetneq f[A_1 \setminus A_2].
  \end{equation*}
\end{comments}
\begin{proof}
  \SubProofOf{thm:function_image_properties/monotonicity} If \( x \in A_1 \), then \( x \in A_2 \) and hence \( f(x) \in f[A_2] \). Therefore, \( f[A_1] \subseteq f[A_2] \).

  \SubProofOf{thm:function_image_properties/union} If \( x_0 \in A_{k_0} \) for some \( k_0 \in \mscrK \), clearly
  \begin{equation*}
    f(x_0) \in f[A_{k_0}] \subseteq \bigcup_{k \in \mscrK} f[A_k].
  \end{equation*}

  Therefore,
  \begin{equation*}
    f\bracks*{ \bigcup_{k \in \mscrK} A_k } \subseteq \bigcup_{k \in \mscrK} f[A_k].
  \end{equation*}

  Conversely, if \( y_0 \in f[A_{k_0}] \) for some \( k_0 \in \mscrK \), by \fullref{thm:function_image_properties/monotonicity} obviously
  \begin{equation*}
    y_0 \in f\bracks*{ \bigcup_{k \in \mscrK} A_k }.
  \end{equation*}

  Therefore,
  \begin{equation*}
    f\bracks*{ \bigcup_{k \in \mscrK} A_k } \supseteq \bigcup_{k \in \mscrK} f[A_k].
  \end{equation*}

  Hence, \eqref{eq:thm:function_image_properties/union} holds.

  \SubProofOf{thm:function_image_properties/intersection} If \( x_0 \) belongs to \( \bigcap_{k \in \mscrK} A_k \), then \( x_0 \) belongs to \( A_k \) for all \( k \in \mscrK \). It follows that \( f(x_0) \) belongs to \( f[A_k] \) for all \( k \in \mscrK \) and hence to their intersection. Therefore, the inclusion \eqref{eq:thm:function_image_properties/intersection} holds.

  Now suppose that \( f \) is injective. Let \( y_0 \) be a point in the intersection \( \bigcap_{k \in \mscrK} f[A_k] \). We thus have \( y_0 \in f[A_k] \) for all \( k \in \mscrK \). Since \( f \) is injective, for each \( k \in \mscrK \) there exists a unique \( x_k \in A_k \) such that \( f(x_k) = y_0 \). Again because of injectivity of \( f \), all these elements are equal because \( f(x_k) = f(x_m) = y_0 \) for \( k, m \in \mscrK \). Hence,
  \begin{equation*}
    y_0 \in f\bracks*{ \bigcap_{k \in \mscrK} A_k }.
  \end{equation*}

  Therefore, the reverse inclusion in \eqref{eq:thm:function_image_properties/intersection} holds if \( f \) is injective.

  \SubProofOf{thm:function_image_properties/difference} If \( f[A_1] \setminus f[A_2] \) is empty, \eqref{eq:thm:function_image_properties/difference} obviously holds. Suppose that it is nonempty and let \( y_0 \in f[A_1] \setminus f[A_2] \).

  Then there exists a point \( x_0 \in A_1 \) such that \( f(x_0) = y_0 \). It cannot be that \( x_0 \in A_2 \) because otherwise \( y_0 = f(x_0) \in f[A_2] \), which would contradict our choice of \( y_0 \). Hence, \( x_0 \in A_1 \setminus A_2 \) and \( y_0 \in f(A_1 \setminus A_2) \).

  Since \( y_0 \) was chosen arbitrarily, we conclude that the inclusion \eqref{eq:thm:function_image_properties/difference} holds.

  Conversely, suppose that \( f \) is injective. If \( f(A_1 \setminus A_2) \) is empty, by \eqref{eq:thm:function_image_properties/difference} the set \( f[A_1] \setminus f[A_2] \) is also empty and the converse holds.

  Now suppose that it is nonempty and let \( y_0 \in f(A_1 \setminus A_2) \). Then there exists a point \( x_0 \in A_1 \setminus A_2 \) such that \( f(x_0) = y_0 \). Furthermore, since \( f \) is injective, \( x_0 \) is the only preimage of \( y_0 \) and hence \( f(x_0) \in f[A_1] \setminus f[A_2] \), which proves the reverse inclusion in \eqref{eq:thm:function_image_properties/difference}.
\end{proof}

\begin{proposition}\label{thm:function_preimage_properties}
  Function \hyperref[def:set_valued_map/inverse]{preimages} have the following basic properties:
  \begin{thmenum}
    \thmitem{thm:function_preimage_properties/monotonicity} If \( B_1 \subseteq B_2 \), then \( f^{-1}[B_1] \subseteq f^{-1}[B_2] \).

    \thmitem{thm:function_preimage_properties/union} For any \hyperref[def:cartesian_product/indexed_family]{indexed family} \( \seq{ B_k }_{k \in \mscrK} \subseteq B \) of subsets of \( B \), we have the equality
    \begin{equation}\label{eq:thm:function_preimage_properties/union}
      f^{-1}\bracks*{ \bigcup_{k \in \mscrK} B_k } = \bigcup_{k \in \mscrK} f^{-1}[B_k].
    \end{equation}

    \thmitem{thm:function_preimage_properties/intersection} For any indexed family \( \seq{ B_k }_{k \in \mscrK} \) of subsets of \( B \), we have the equality
    \begin{equation}\label{eq:thm:function_preimage_properties/intersection}
      f^{-1}\bracks*{ \bigcap_{k \in \mscrK} B_k } = \bigcap_{k \in \mscrK} f^{-1}[B_k].
    \end{equation}

    \thmitem{thm:function_preimage_properties/difference} For any two subsets \( B_1 \) and \( B_2 \) of \( B \), we have the equality
    \begin{equation}\label{eq:thm:function_preimage_properties/difference}
      f^{-1}[B_1] \setminus f^{-1}[B_2] = f^{-1}[B_1 \setminus B_2].
    \end{equation}
  \end{thmenum}
\end{proposition}
\begin{comments}
  \item Compare this result to the less well-behaved properties of images described in \fullref{thm:function_image_properties}.
\end{comments}
\begin{proof}
  \SubProofOf{thm:function_image_properties/monotonicity} Analogous to \fullref{thm:function_image_properties/monotonicity}.

  \SubProofOf{thm:function_image_properties/union} Analogous to \fullref{thm:function_image_properties/union}.

  \SubProofOf{thm:function_image_properties/intersection} If \( y_0 \) belongs to \( \bigcap_{k \in \mscrK} B_k \), then \( y_0 \) belongs to \( B_k \) for all \( k \in \mscrK \). It follows that \( f(y_0) \subseteq f^{-1}[B_k] \) for all \( k \in \mscrK \) and hence it is also a subset of their intersection. Therefore,
  \begin{equation*}
    f^{-1} \bracks*{ \bigcap_{k \in \mscrK} B_k } \subseteq \bigcap_{k \in \mscrK} f^{-1}[B_k].
  \end{equation*}

  Conversely, if \( x_0 \in \bigcap_{k \in \mscrK} f^{-1}[B_k] \), it belongs to \( f^{-1}[B_k] \) for all \( k \in \mscrK \). Clearly then \( f(x_0) \in B_k \) for all \( k \in \mscrK \) and thus \( f(x_0) \in \bigcap_{k \in \mscrK} B_k \). Hence, by \fullref{thm:function_preimage_properties/monotonicity} we have
  \begin{equation*}
    f^{-1}(f(x_0))
    \subseteq
    f^{-1}\bracks*{ \bigcap_{k \in \mscrK} B_k }.
  \end{equation*}

  Since \( x_0 \in f^{-1}(f(x_0)) \),
  \begin{equation*}
    x_0 \in f^{-1}\bracks*{ \bigcap_{k \in \mscrK} B_k }.
  \end{equation*}

  Since \( x_0 \) was chosen arbitrarily from \( \bigcap_{k \in \mscrK} f^{-1}[B_k] \), we can conclude that
  \begin{equation*}
    \bigcap_{k \in \mscrK} f^{-1}[B_k] \in f^{-1}\bracks*{ \bigcap_{k \in \mscrK} B_k }.
  \end{equation*}

  Hence, \eqref{eq:thm:function_preimage_properties/intersection} holds.

  \SubProofOf{thm:function_preimage_properties/difference} If \( y_0 \in B_1 \setminus B_2 \), there exists a point \( x_1 \in B_1 \) such that \( f(x_1) = y_0 \). Aiming at a contradiction, suppose that there exists a point \( x_2 \in f^{-1}[B_2] \) such that \( f(x_2) = y_0 \). Then \( y_0 = f(x_1) = f(x_2) \) implies that \( f^{-1}(y_0) \subseteq f^{-1}[B_1] \cap f^{-1}[B_2] \). \Fullref{thm:function_preimage_properties/intersection} then in turn implies that \( f^{-1}(y_0) \subseteq f^{-1}[B_1 \cap B_2] \) and hence by \fullref{thm:function_image_properties/monotonicity}
  \begin{equation*}
    y_0 = f(f^{-1}(y_0)) \in f[f^{-1}[B_1 \cap B_2]] = B_1 \cap B_2,
  \end{equation*}
  which contradicts our choice of \( y_0 \). Since the choice of \( y_0 \in B_1 \setminus B_2 \), \( x_1 \in f^{-1}(y_0) \cap B_1 \) and \( x_2 \in f^{-1}(y_0) \cap B_2 \) was arbitrary, the obtained contradiction shows that
  \begin{equation*}
    f^{-1}(B_1 \setminus B_2) \subseteq f^{-1}[B_1] \setminus f^{-1}[B_2].
  \end{equation*}

  Conversely, we have
  \begin{equation*}
    f(f^{-1}[B_1] \setminus f^{-1}[B_2])
    \reloset {\eqref{eq:thm:function_image_properties/difference}} \subseteq
    f(f^{-1}(B_1 \setminus B_2))
    \reloset {\ref{thm:function_image_preimage_composition/image_of_preimage}} \subseteq
    B_1 \setminus B_2.
  \end{equation*}

  Hence,
  \begin{equation*}
    f^{-1}[B_1] \setminus f^{-1}[B_2]
    \reloset {\ref{thm:function_image_preimage_composition/preimage_of_image}} \subseteq
    f^{-1}\parens[\Big]{ f\parens[\Big]{ f^{-1}[B_1] \setminus f^{-1}[B_2] } }
    \reloset {\eqref{thm:function_preimage_properties/monotonicity}} \subseteq
    f^{-1}(B_1 \setminus B_2).
  \end{equation*}
\end{proof}

\begin{theorem}[Recursion theorem]\label{thm:omega_recursion}\mcite[73]{Enderton1977Sets}
  Let \( A \) be a nonempty set. Suppose that we are given some member \( a_0 \) of \( A \) and some transformation \( T: A \to A \). Then there exists a \hyperref[def:sequence]{sequence} \( f: \omega \to A \) such that
  \begin{itemize}
    \item \( f(n) = a_0 \).
    \item For every \( n \in \omega \), we have \( f(\op{sc}(n)) = T(f(n)) \).
  \end{itemize}
\end{theorem}
\begin{comments}
  \item Note that we do not yet use the notation \( n + 1 \) because we will use this theorem to define addition.
  \item See \fullref{rem:natural_number_recursion} for a simpler and more conventional notation for recursion on \( \omega \).
\end{comments}
\begin{proof}
  Let \( G \subseteq \pow(\omega \times A) \) be the set of all \hyperref[def:set_valued_map/partial]{partial single-valued functions} \( g: \omega \to A \) such that
  \begin{itemize}
    \item If \( g \) is defined at \( \varnothing \), then \( g(\varnothing) = a_0 \).
    \item For every \( n \in \omega \), if \( g \) is defined at \( \op{sc}(n) \), then \( g \) is also defined at \( n \) and
    \begin{equation*}
      g(\op{sc}(n)) = T(f(n)).
    \end{equation*}
  \end{itemize}

  Clearly \( G \) is nonempty because the function \( \set{ (\varnothing, a_0) } \) belongs to \( G \).

  The conditions imposed on the functions in \( G \) ensure that every function is defined in some \hyperref[def:order_interval/unbounded]{initial segment} of the natural numbers. A more obvious approach is to require \( g \) to be defined at \( \op{sc}(n) \) if it is defined at \( n \), however that would hinder our induction schema.

  Define \( f \coloneqq \bigcup G \). At this point \( f \) is simply some \hyperref[def:function]{set-valued map}. We must now show that \( f \) has all the properties that we want.

  \SubProofOf[def:set_valued_map/partial]{totality} First, we will use \fullref{thm:omega_induction} to show that \( f \) is total. Clearly \( \varnothing \in \dom f \).

  Now fix \( n \in \dom f \). Then there exists a function \( g \in G \) defined at \( n \).

  \begin{itemize}
    \item If \( g \) is also defined at \( \op{sc}(n) \), this directly proves that \( \op{sc}(n) \in \dom f \).
    \item If \( g \) is not defined at \( \op{sc}(n) \), consider
    \begin{equation*}
      \widehat g \coloneqq g \cup \set{ (\op{sc}(n), T(g(n)) }.
    \end{equation*}

    The function \( \widehat g \) is again a single-valued partial function, and thus it belongs to \( G \), hence \( \op{sc}(n) \in \dom f \).
  \end{itemize}

  Therefore, \fullref{thm:omega_induction} allows us to conclude \( f: \omega \multto A \) is a total set-valued map.

  \SubProofOf[def:function]{single-valuedness} Now that we know that \( f \) is total, we will prove that it is single-valued and thus is a function in the usual sense of the term.

  Clearly \( f \) is single-valued at \( \varnothing \).

  Now suppose that \( f \) is single-valued at \( n \). Since \( f \) is total, there exist at least one partial function in \( G \) that is defined at \( \op{sc}(n) \), from which it follows that it is also defined at \( n \).  Let \( g \) and \( h \) both be such (single-valued partial) functions.

  Then
  \begin{equation*}
    g(\op{sc}(n)) = T(g(n)) = T(f(n)) = T(h(n)) = h(\op{sc}(n)),
  \end{equation*}
  hence \( g \) and \( h \) coincide at \( \op{sc}(n) \), which in turn implies that \( f \) is single-valued at \( \op{sc}(n) \).

  Therefore, \fullref{thm:omega_induction} allows us to conclude that \( f \) is a single-valued total function.

  \SubProofOf[def:function]{uniqueness} Now that it is clear that \( f \) satisfies the theorem, we must verify that it is unique.

  Suppose that \( f_1 \) and \( f_2 \) both satisfy the theorem. Clearly \( \varnothing \in H \). Fix some \( n \neq \varnothing \) and suppose that \( f_1(n) = f_2(n) \). Then
  \begin{equation*}
    f_2(\op{sc}(n)) = T(f_1(n)) = T(f_2(n)) = f_2(\op{sc}(n)).
  \end{equation*}

  Therefore, \fullref{thm:omega_induction} allows us to conclude that \( f_1 = f_2 \). So there is at most one function that satisfies the theorem, and we have already shown that \( f \) is such a function.
\end{proof}

\begin{definition}\label{def:omega_operations}\mimprovised
  We will use \fullref{thm:omega_recursion} for defining arithmetic operations for natural numbers. These constructions will be more elaborate than the basic recursive sequences like those defined in \fullref{thm:banach_fixed_point_theorem}.

  \begin{thmenum}
    \thmitem{def:omega_operations/addition} We will represent the addition operation \( \oplus \) as follows:

    \begin{itemize}
      \item Fix the first summand \( n \). We will now construct a function \( \oplus_n: \omega \to \omega \) such that \( \oplus_n(m) = n \oplus m \). This is a particular instance of \hyperref[def:function_currying]{currying}.

      In the context of \fullref{thm:omega_recursion}, let \( a_0^{(n)} = n \) and
      \begin{equation*}
        \begin{aligned}
          &T^{(n)}: \omega \to \omega, \\
          &T^{(n)}(k) \coloneqq \op{sc}(k).
        \end{aligned}
      \end{equation*}

      Recursion then gives us a function \( \oplus_n: \omega \to \omega \).

      \item We can now define the full binary addition function \( \oplus: \omega \times \omega \to \omega \) via its graph
      \begin{equation*}
        \set[\Big]{ \parens[\Big]{ (n, m), \oplus_n(m) } \given* n, m \in \omega }.
      \end{equation*}
    \end{itemize}

    \thmitem{def:omega_operations/multiplication} We define natural number multiplication analogously. For each \( n \in \omega \), recursively define \( \odot_n \) via
    \begin{equation*}
      \begin{aligned}
        &T^{(n)}: \omega \to \omega, \\
        &T^{(n)}(k) \coloneqq k \oplus n.
      \end{aligned}
    \end{equation*}
    and \( a_0^{(n)} = 0 \) and then define \( \odot: \omega \times \omega \to \omega \) via its graph
    \begin{equation*}
      \set[\Big]{ \parens[\Big]{ (n, m), \odot_n(m) } \given* n, m \in \omega }.
    \end{equation*}
  \end{thmenum}
\end{definition}

\begin{theorem}\label{thm:omega_is_model_of_pa}
  The \hyperref[thm:smallest_inductive_set_existence]{smallest inductive set} \( \omega \) is a model of \hyperref[def:peano_arithmetic]{Peano arithmetic} with the following interpretation:
  \begin{thmenum}
    \thmitem{thm:omega_is_model_of_pa/zero} \hyperref[def:peano_arithmetic/zero]{Zero} is interpreted as \( \varnothing \).

    \thmitem{thm:omega_is_model_of_pa/succ} The \hyperref[def:peano_arithmetic/succ]{successor} operation \( s \) is interpreted as \( \op{sc} \).

    \thmitem{thm:omega_is_model_of_pa/plus} \hyperref[def:peano_arithmetic/plus]{Addition} is interpreted by the \( \oplus \) function given in \fullref{def:omega_operations/addition}.

    \thmitem{thm:omega_is_model_of_pa/mult} Similarly, \hyperref[def:peano_arithmetic/mult]{multiplication} is interpreted by \( \odot \) from \fullref{def:omega_operations/multiplication}.
  \end{thmenum}
\end{theorem}
\begin{comments}
  \item This is an extension of \fullref{thm:omega_is_model_of_pa_without_operations}.
\end{comments}
\begin{proof}
  We have already shown in \fullref{thm:omega_is_model_of_pa_without_operations} that \( \omega \) satisfies the axioms \eqref{eq:def:peano_arithmetic/PA1}-\eqref{eq:def:peano_arithmetic/PA3}. It remains to show that is satisfies \eqref{eq:def:peano_arithmetic/PA4}-\eqref{eq:def:peano_arithmetic/PA7}.

  \SubProofOf{eq:def:peano_arithmetic/PA4} For each \( n \in \omega \) the starting condition (i.e. \( m = \varnothing \)) in \fullref{def:omega_operations/addition} implies that \( n \oplus \varnothing = n \).

  \SubProofOf{eq:def:peano_arithmetic/PA5} For each \( n \in \omega \) the transformation \( T_n \) in \fullref{def:omega_operations/addition} is defined so that \( \oplus_n(m) = k \) implies
  \begin{equation*}
    \oplus_n(\op{sc}(m)) = \op{sc}(k).
  \end{equation*}

  It follows that, for all \( n, m \in \omega \),
  \begin{equation*}
    n \oplus \op{sc}(m) = \op{sc}(n \oplus m).
  \end{equation*}

  \SubProofOf{eq:def:peano_arithmetic/PA6} For each \( n \in \omega \), the starting condition in \fullref{def:omega_operations/multiplication} implies that \( n \odot \varnothing = \varnothing \).

  \SubProofOf{eq:def:peano_arithmetic/PA7} For each \( n \in \omega \), the transformation \( T_n \) in \fullref{def:omega_operations/multiplication} is defined so that \( \odot_n(m) = k \) implies
  \begin{equation*}
    \odot_n(\op{sc}(m)) = k \oplus n
  \end{equation*}

  It follows that, for all \( n, m \in \omega \),
  \begin{equation*}
    n \odot \op{sc}(m) = \op{sc}(n \oplus m).
  \end{equation*}
\end{proof}

\begin{remark}\label{rem:natural_number_recursion}
  With the availability of natural numbers, instead of the tedious constructions in \fullref{def:omega_operations/addition}, we can use a more conventional notation when applying \fullref{thm:omega_recursion}.

  As an example, we can define the Fibonacci sequence. The sequence is motivated by the problem in \fullref{ex:fibonacci_rabbits}. In the notation of \fullref{thm:omega_recursion}, we can define the sequence as follows:
  \begin{equation*}
    \begin{aligned}
      &T: \BbbN \times \BbbN \to \BbbN \times \BbbN \\
      &T(a, b) \coloneqq (b, a + b)
    \end{aligned}
  \end{equation*}
  and
  \begin{equation*}
    a_0 \coloneqq (0, 1).
  \end{equation*}

  The recursion theorem gives us a sequence of pairs
  \begin{equation*}
    \underbrace{(0, 1)}_{a_0}, \underbrace{(1, 1)}_{a_1}, \underbrace{(1, 2)}_{a_2}, \underbrace{(2, 3)}_{a_3}, \underbrace{(3, 5)}_{a_4}, \underbrace{(5, 8)}_{a_5}, \underbrace{(8, 13)}_{a_6}, \ldots
  \end{equation*}

  The pairs are only a technicality because otherwise we would not be able to define the sequence \( \seq{ a_k }_{k=1}^\infty \).

  By taking the second element of each pair, we obtain the sequence
  \begin{equation*}
    \underbrace{1}_{b_0}, \underbrace{1}_{b_1}, \underbrace{2}_{b_2}, \underbrace{3}_{b_3}, \underbrace{5}_{b_4}, \underbrace{8}_{b_5}, \underbrace{13}_{b_6}, \ldots
  \end{equation*}

  In order to obtain the Fibonacci sequence, we must prefix the sequence \( \seq{ b_k }_{k=0}^\infty \) with \( 0 \).

  This is undoubtedly much more complicated than writing
  \begin{equation*}
    b_k \coloneqq \begin{cases}
      0,                &k = 0, \\
      1,                &k = 1, \\
      b_{k-1} + b_{k-2} &k > 1.
    \end{cases}
  \end{equation*}

  To see that the latter notation is merely syntax sugar, note that the other sequence can be written as
  \begin{equation*}
    a_k \coloneqq \begin{cases}
      (0, 1),     &k = 0 \\
      T(a_{k-1}), &k > 1.
    \end{cases}
  \end{equation*}
\end{remark}
