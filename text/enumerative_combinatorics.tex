\subsection{Enumerative combinatorics}\label{subsec:enumerative_combinatorics}

This subsection lists several results of various importance that don't really belong to any other section.

\paragraph{Pigeonhole principle}

\begin{remark}\label{rem:pigeonhole_principle}
  The \enquote{Pigeonhole principle} refers to the following statement:
  \begin{displayquote}
    If we are given more pigeons than pigeonholes, then at least one pigeonhole must contain multiple pigeons in it.
  \end{displayquote}

  \incite[sec. 6.2]{Rosen2019DiscreteMathematics} dedicates entire sections to nontrivial applications of this principle.

  The Pigeonhole principle is attributed to Dirichlet, and variations of it are stated in the literature under different names:
  \begin{itemize}
    \item The \enquote{pigeonhole principle} is used, among others, by \incite[289]{Knuth1997ArtVol2}, \incite[sec. 6.2]{Rosen2019DiscreteMathematics}, \incite[66]{HopcroftEtAl2001Computability}, \incite[exer. A-4.1]{Rotman2015AlgebraVol1}, \incite[134]{Enderton1977Sets} and \incite[16]{Savage1998Computability}.
    \item The \enquote{drawer principle} is used by \incite[222]{Арнольд2014ОДУ} (as \enquote{принцип ящиков Дирихле}), Goncharov in \cite[156]{АлександровМаркушевичХинчин1952ЭнциклопедияТом3}, \incite[224]{Проданов1982ФункАнализТом1} (as \enquote{принцип за чекмеджетата}).
    \item \enquote{Dirichlet's principle} is used by \incite[64]{Гуров2013Решётки} (as \enquote{принцип Дирихле}), \incite[9]{Мирчев2001Графи} (as \enquote{принцип на Дирихле}).
  \end{itemize}
\end{remark}

\begin{theorem}[Dirichlet's pigeonhole principle]\label{thm:pigeonhole_principle}
  We give several statements of the \hyperref[rem:pigeonhole_principle]{pigeonhole principle} in a differing levels of generality.

  \begin{thmenum}
    \thmitem{thm:pigeonhole_principle/simple} For every function \( f: A \to B \), if \( A \) has greater cardinality, at least two members of \( A \) map to the same value in \( B \).

    \thmitem{thm:pigeonhole_principle/general} For every function \( f: A \to B \) between nonempty sets we have
    \begin{equation}\label{eq:thm:pigeonhole_principle/general}
      \sup\set[\Big]{ \card(f^{-1}(b)) \given* b \in B } \cdot \card(\img f) \geq \card(A).
    \end{equation}

    \thmitem{thm:pigeonhole_principle/finitary} Fix nonempty \hi{finite} sets \( A \) with \( n \) elements and \( B \) with \( m \) elements. For every function \( f: A \to B \) between them, there exists some \( b \) in \( B \) such that \( f(a) = b \) for at least \( n / m \) elements \( a \) of \( A \).

    \thmitem{thm:pigeonhole_principle/infinitary} Fix two nonempty sets \( A \) and \( B \) such that \( A \) is infinite and \( \card(A) > \card(B) \). Then, for every function \( f: A \to B \), we have
    \begin{equation}\label{eq:thm:pigeonhole_principle/infinitary}
      \sup\set[\Big]{ \card(f^{-1}(b)) \given* b \in B } = \card(A).
    \end{equation}

    In particular, if the supremum above is attained for \( b_0 \), then \( f^{-1}(b_0) \) and \( A \) are equinumerous.
  \end{thmenum}
\end{theorem}
\begin{proof}
  \SubProofOf{thm:pigeonhole_principle/simple} It is sufficient to show that \( f: A \to B \) cannot be injective if \( \card(A) > \card(B) \). This follows easily from \fullref{thm:set_domination_relation_trichotomy}.

  \SubProofOf{thm:pigeonhole_principle/general} Denote by \( \mu \) the supremum in \eqref{eq:thm:pigeonhole_principle/general}.

  For every \( b \) in \( B \), since \( \card(f^{-1}(b)) \leq \mu \) there exists an injective function
  \begin{equation*}
    m_b: f^{-1}(b) \to \mu
  \end{equation*}

  Then we can define
  \begin{equation*}
    \begin{aligned}
      &g: A \to \mu \times \img f, \\
      &g(a) \coloneqq (m_b(a), f(a)).
    \end{aligned}
  \end{equation*}

  It is injective by construction, hence
  \begin{equation*}
    \card(A) \leq \card(\mu \times \img f) = \mu \cdot \card(\img f).
  \end{equation*}

  \SubProofOf{thm:pigeonhole_principle/finitary} \Fullref{thm:pigeonhole_principle/general} implies that
  \begin{equation*}
    \max\set[\Big]{ \card(f^{-1}(b)) \given* b \in B } \geq \frac n m.
  \end{equation*}

  Since \( B \) is finite, there exists a member attaining the maximum above.

  \SubProofOf{thm:pigeonhole_principle/infinitary} Again denote by \( \mu \) the supremum in \eqref{eq:thm:pigeonhole_principle/general}. Then
  \begin{equation*}
    \mu \cdot \card(\img f) \geq \card(A).
  \end{equation*}

  \Fullref{thm:simplified_cardinal_arithmetic/infinite} implies that
  \begin{equation*}
    \mu \cdot \card(\img f) = \max\set{ \mu, \card(\img f) }.
  \end{equation*}

  We have \( \mu > \card(\img f) \) since otherwise we would obtain
  \begin{equation*}
    \card(B) \geq \card(\img f) \geq \card(A) > \card(B),
  \end{equation*}
  which is a contradiction. Thus,
  \begin{equation*}
    \mu \geq \card(A).
  \end{equation*}

  Furthermore, since \( f^{-1}(b) \subseteq A \) for every \( b \in B \), the supremum \( \mu \) of their cardinals cannot exceed \( \card(A) \). Therefore,
  \begin{equation*}
    \card(A) = \mu.
  \end{equation*}
\end{proof}

\begin{example}\label{ex:thm:pigeonhole_principle}
  We list examples related to \fullref{thm:pigeonhole_principle}:
  \begin{thmenum}
    \thmitem{ex:thm:pigeonhole_principle/lagrange} Given a \hyperref[def:group/homomorphism]{group homomorphism} \( \varphi: G \to H \), by \fullref{thm:group_zero_morphisms/isomorphism},
    \begin{equation*}
      G / \ker \varphi \cong \img \varphi.
    \end{equation*}

    \Fullref{thm:lagranges_subgroup_theorem} then implies that
    \begin{equation*}
      \card(\ker \varphi) \cdot \card(\img \varphi) = \card(G).
    \end{equation*}

    All cosets are equinumerous by \fullref{thm:subgroup_cosets/equinumerous}, so we can restate the above as
    \begin{equation*}
      \sup\set[\Big]{ \card(\varphi^{-h}) \given* h \in H } \cdot \card(\img \varphi) = \card(G).
    \end{equation*}

    We have thus obtained a special case of \fullref{thm:pigeonhole_principle/general} in which equality holds due to group homomorphisms being well-behaved structurally.

    \thmitem{ex:thm:pigeonhole_principle/birthdays} \Fullref{thm:pigeonhole_principle/finitary} allows us to conclude that, among \( 1000 \) people,
    \begin{itemize}
      \item At least \( 3 = \ceil(1000 / 365) \) were born on the same day.
      \item At least \( 20 = \ceil(1000 / 52) \) were born in the same week.
      \item At least \( 84 = \ceil(1000 / 12) \) were born in the same month.
    \end{itemize}

    \thmitem{ex:thm:pigeonhole_principle/boolean} Again via \fullref{thm:pigeonhole_principle/finitary} we conclude that, for every \hyperref[def:boolean_function]{predicate} \( f: A \to \set{ T, F } \) on a finite set \( A \) with \( n \) elements, either \( f \) holds for at least \( n / 2 \) members of \( A \) or \( f \) doesn't hold for (at least) \( n / 2 \) members.

    \thmitem{ex:thm:pigeonhole_principle/party} As a consequence of \fullref{ex:thm:pigeonhole_principle/boolean}, in a group of \( 6 \) people, either \( 3 \) know everybody else or \( 3 \) do not.

    Compare this example to \fullref{ex:ramsey_party_problem}, where we are interested how many people know \hi{each other}. This leads to the considerably harder problem of estimating \hyperref[def:ramsey_number]{Ramsey numbers}.
  \end{thmenum}
\end{example}

\paragraph{Factorial}

\begin{definition}\label{def:factorial}\mcite[46]{Knuth1997ArtVol1}
  We define the \term[bg=факториел (\cite[129]{Тагамлицки1971Диф}), ru=факториал (\cite[145]{АлександровМаркушевичХинчин1952ЭнциклопедияТом3})]{factorial} of a \hyperref[def:integer_signum]{nonnegative integer} \( n \) recursively as follows:
  \begin{equation*}
    n! \coloneqq \begin{cases}
      1,          &n = 0, \\
      (n - 1)! n, &n > 0.
    \end{cases}
  \end{equation*}
\end{definition}

\begin{proposition}\label{thm:gamma_function_interpolates_factorial}
  For every \hyperref[def:integer_signum]{nonnegative integer} \( n \) we have
  \begin{equation*}
    \Gamma(n + 1) \coloneqq n!,
  \end{equation*}
  where \( \Gamma \) is the Gamma function defined in \fullref{def:gamma_function}.
\end{proposition}
\begin{proof}
  We use induction on \( n \).
  \begin{itemize}
    \item If \( n = 0 \), then
    \begin{equation*}
      \Gamma(1)
      =
      \int_0^\infty x^0 e^{-x} \dl x
      =
      -e^{-x}\restr_{x=0}^\infty
      =
      -\underbrace{\lim_{x \to \infty} e^{-x}}_{0} + 1
      =
      1
      =
      0!
    \end{equation*}

    \item If \( n > 0 \) and \( \Gamma(n) = (n - 1)! \), then
    \begin{balign*}
      \Gamma(n + 1)
      &=
      \int_0^\infty x^n \cdot e^{-x} \dl x
      = \\ &=
      \underbrace{(- x^n e^{-x})\restr_{x=0}^\infty}_{-(0 - 0)} + n \int_0^\infty e^{-x} x^{n-1} \dl x
      = \\ &=
      n \Gamma(n)
      = \\ &=
      n (n - 1)!
      = \\ &=
      n!
    \end{balign*}
  \end{itemize}
\end{proof}

\begin{theorem}[Stirling's factorial approximation]\label{thm:stirlings_factorial_approximation}
  For the factorial function we have
  \begin{equation*}
    n! = \sqrt{2 \pi n} \cdot \parens*{ \frac n e }^n \cdot e^{\mu(n)},
  \end{equation*}
  where \( \mu \), defined by \eqref{eq:thm:stirlings_gamma_approximation/mu}, satisfies
  \begin{equation*}
    0 < \mu(n) < \frac 1 {12n}.
  \end{equation*}
\end{theorem}
\begin{proof}
  Follows from \fullref{thm:gamma_function_interpolates_factorial} and \fullref{thm:stirlings_gamma_approximation}.
\end{proof}

\paragraph{Binomial coefficients}

\begin{definition}\label{def:binomial_coefficient}\mcite[53]{Knuth1997ArtVol1}
  We define the \term[ru=биномиальный коеффициент (\cite[100]{БелоусовТкачёв2004ДискретнаяМатематика})]{binomial coefficient} of the \hyperref[def:integer_signum]{nonnegative integers} \( n \geq k \) as the number
  \begin{equation*}
    \binom n k \coloneqq \frac {n!} {k!(n-k)!},
  \end{equation*}
\end{definition}
\begin{comments}
  \item Binomial coefficients are motivated by \fullref{thm:binomial_theorem}.
\end{comments}

\begin{theorem}[Pascal's binomial recurrence]\label{thm:pascals_binomial_recurrence}
  For nonnegative integers \( 1 < k < n \), \hyperref[def:binomial_coefficient]{binomial coefficients} have the following property:
  \begin{equation}\label{eq:thm:pascals_binomial_recurrence}
    \binom n k = \binom {n - 1} k + \binom {n - 1} {k - 1}.
  \end{equation}
\end{theorem}
\begin{comments}
  \item \incite[thm. 6.4.2]{Rosen2019DiscreteMathematics} calls this recurrence \enquote{Pascal's identity} after Pascal because of its relation to \hyperref[con:pascals_triangle]{Pascal's triangle}. \incite[56]{Knuth1997ArtVol1} calls it the \enquote{addition formula} for binomial coefficients.
\end{comments}
\begin{proof}
  \begin{balign*}
    \binom {n - 1} k + \binom {n - 1} {k - 1}
    &=
    \frac {(n - 1)!} {k! (n - 1 - k)!} + \frac {(n - 1)!} {(k - 1)! (n - k)!}
    = \\ &=
    \frac {(n - 1)!} {(k - 1)! (n - 1 - k)!} \bracks*{ \frac 1 k + \frac 1 {n - k} }
    = \\ &=
    \frac {(n - 1)!} {(k - 1)! (n - 1 - k)!} \frac n {k(n - k)}
    = \\ &=
    \frac {n!} {k! (n - k)!}
    = \\ &=
    \binom n k.
  \end{balign*}
\end{proof}

\begin{theorem}[Newton's binomial theorem]\label{thm:binomial_theorem}
  If, in some \hyperref[def:semiring]{semiring}, the members \( x \) and \( y \) commute (i.e. \( xy = yx \)), then
  \begin{equation}\label{eq:thm:binomial_theorem}
    (x + y)^n = \sum_{k=0}^n \binom n k x^k y^{n-k}.
  \end{equation}
\end{theorem}
\begin{proof}
  We use induction on \( n \). For \( n = 0 \), the theorem trivially holds. Assume that the theorem holds for \( 1, \ldots, n \). Then
  \begin{balign*}
    (x + y)^{n+1}
     & =
    x (x + y)^n + y (x + y)^n
    = \\ &=
    \sum_{k=0}^n \binom n k x^{k+1} y^{n-k} + y \sum_{k=0}^n \binom n k x^k y^{n-k}
    = \\ &=
    x^{n+1} + y \sum_{k=0}^{n-1} \binom n k x^{k+1} y^{n-(k+1)} + y \sum_{k=0}^n \binom n k x^k y^{n-k}
    = \\ &=
    x^{n+1} + y \parens*{ \sum_{k=1}^n \binom n {k-1} x^k y^{n-k} + y^n \sum_{k=1}^n \binom n k x^k y^{n-k} } + y^{n+1}
    = \\ &\reloset {\eqref{eq:thm:pascals_binomial_recurrence}} =
    x^{n+1} + y \sum_{k=1}^n \binom {n+1} k x^k y^{n-k} + y^{n+1}
    = \\ &=
    \sum_{k=0}^n \binom {n+1} k x^k y^{(n+1)-k}.
  \end{balign*}
\end{proof}

\begin{theorem}[Vandermonde convolution]\label{thm:vandermonde_convolution}\mcite[59]{Knuth1997ArtVol1}
  For nonnegative integers \( n \), \( m \) and \( k \leq n + m \), we have
  \begin{equation}\label{eq:thm:vandermonde_convolution}
    \binom {n + m} k = \sum_{\substack{i+j=k \\ i \leq n \T*{and} j \leq m}} \binom n i \cdot \binom m j.
  \end{equation}
\end{theorem}
\begin{proof}
  Consider the polynomial \( X + 1 \) over any commutative ring.

  By \fullref{thm:binomial_theorem}, we have
  \begin{equation*}
    (X + 1)^{n+m} = \sum_{k=0}^{n+m} x^k 1^{n+m-k}.
  \end{equation*}

  Using the \hyperref[def:semigroup_algebra]{convolution product} instead, we obtain
  \begin{equation*}
    (X + 1)^n \cdot (X + 1)^m = \sum_{k=0}^{n+m} \parens*{ \sum_{\substack{i+j=k \\ i \leq n \T*{and} j \leq m}} \binom n i \cdot \binom m j } x^k.
  \end{equation*}

  Since the two are equal, we obtain \eqref{eq:thm:vandermonde_convolution}.
\end{proof}

\begin{concept}\label{con:pascals_triangle}\mcite[fig. 6.4.1]{Rosen2019DiscreteMathematics}
  \term[ru=треугольник Паскаля (\cite[\S 5.3.4]{Новиков2013ДискретнаяМатематика})]{Pascal's triangle} is a colloquial name for schematic triangles a-la \cref{fig:con:pascals_triangle}, in which every number is the sum of the two numbers above, with ones on the boundary.

  \begin{figure}[!ht]
    \centering
    \includegraphics[page=1]{output/con__pascals_triangle}
    \caption{\hyperref[con:pascals_triangle]{Pascal's triangle}.}\label{fig:con:pascals_triangle}
  \end{figure}

  By \enquote{schematic triangle} we mean that every object showing the same recurrence can again be called \enquote{Pascal's triangle}. For example, \incite[54]{Knuth1997ArtVol1} and \incite[179]{Яблонский2003ДискретнаяМатематика} use the term to refer to \hyperref[def:pascal_matrix/lower]{Pascal lower triangular matrices}.
\end{concept}

\begin{definition}\label{def:pascal_matrix}\mcite[1]{EdelmanStrang2018PascalMatrices}
  We will define three families of square matrices, which we will collectively call \term{Pascal matrices}.
  \begin{thmenum}
    \thmitem{def:pascal_matrix/lower} The \hyperref[def:triangular_matrix]{lower triangular} matrix \( L_n = \seq{ l_{i,j} }_{i,j=1}^n \), where
    \begin{equation*}
      l_{i,j} \coloneqq \begin{cases}
        0,                       &j > i, \\
        1,                       &j = 1, \\
        1,                       &j = i, \\
        l_{i-1,j} + l_{i-1,j-1}, &1 < j < i.
      \end{cases}
    \end{equation*}

    \thmitem{def:pascal_matrix/upper} Its \hyperref[def:transpose_matrix]{transpose}, the \hyperref[def:triangular_matrix]{upper triangular} matrix \( U_n = \seq{ u_{i,j} }_{i,j=1}^n \).

    \thmitem{def:pascal_matrix/symmetric} The symmetric matrix \( S_n = \seq{ s_{i,j} }_{i,j=1}^n \), where
    \begin{equation*}
      s_{i,j} \coloneqq \begin{cases}
        1,                     &i = 1, \\
        1,                     &j = 1, \\
        s_{i-1,j} + s_{i,j-1}, &i > 1 \T{and} j > 1.
      \end{cases}
    \end{equation*}
  \end{thmenum}
\end{definition}
\begin{comments}
  \item These matrices in \identifier{combinatorics.binomial} in \cite{notebook:code}.
\end{comments}

\begin{example}\label{ex:con:pascals_triangle}
  We give examples of \hyperref[def:pascal_matrix]{Pascal matrices}:
  \begin{equation*}
    L_7
    =
    \begin{pmatrix}
      1        &          &           &        &        &      &   \\
      \fbox{1} & \fbox{1} &           &        &        &      &   \\
      1        & \fbox{2} & 1         &        &        &      &   \\
      1        & 3        & 3         & 1      &        &      &   \\
      1        & 4        & 6         & 4      & 1      &      &   \\
      1        & \fbox{5} & \fbox{10} & 10     & 5      & 1    &   \\
      1        & 6        & \fbox{15} & 20     & 15     & 6    & 1
    \end{pmatrix}
  \end{equation*}
  \begin{equation*}
    U_7
    =
    \begin{pmatrix}
      1        & \fbox{1} & 1         & 1      & 1      & 1         & 1         \\
               & \fbox{1} & \fbox{2}  & 3      & 4      & \fbox{5}  & 6         \\
               &          & 1         & 3      & 6      & \fbox{10} & \fbox{15} \\
               &          &           & 1      & 4      & 10        & 20        \\
               &          &           &        & 1      & 5         & 15        \\
               &          &           &        &        & 1         & 6         \\
               &          &           &        &        &           & 1
    \end{pmatrix}
  \end{equation*}
  \begin{equation*}
    S_7
    =
    \begin{pmatrix}
      1        & \fbox{1} & 1         & 1      & 1      & 1      & 1   \\
      \fbox{1} & \fbox{2} & 3         & 4      & 5      & 6      & 7   \\
      1        & 3        & 6         & 10     & 15     & 21     & 28  \\
      1        & 4        & \fbox{10} & 20     & 35     & 56     & 84  \\
      1        & \fbox{5} & \fbox{15} & 35     & 70     & 126    & 210 \\
      1        & 6        & 21        & 56     & 126    & 252    & 462 \\
      1        & 7        & 28        & 84     & 210    & 462    & 924
    \end{pmatrix}
  \end{equation*}
\end{example}

\begin{proposition}\label{thm:pascal_matrix_binomial}
  We have the following relation between \hyperref[def:binomial_coefficient]{Binomial coefficients} and elements of \hyperref[def:pascal_matrix]{Pascal matrices}:
  \begin{align*}
    l_{i,j} &= \binom i j \thickspace\T{if}\thickspace i \leq j, \\
    u_{i,j} &= \binom j i \thickspace\T{if}\thickspace i \geq j, \\
    s_{i,j} &= \binom {i + j} j = \binom {i + j} i = \frac {(i + j)!} {i! j!}. \\
  \end{align*}
\end{proposition}
\begin{proof}
  Follows from \fullref{thm:pascals_binomial_recurrence}.
\end{proof}

\begin{proposition}\label{thm:pascal_matrix_product}
  For \hyperref[def:pascal_matrix]{Pascal matrices}, we have \( S_n = L_n \cdot U_n \).
\end{proposition}
\begin{proof}
  The \( (i, j) \)-th entry of \( L_n \cdot U_n \) is
  \begin{equation*}
    \sum_{k=1}^n l_{i,k} \cdot u_{k,j}
    =
    \sum_{k=1}^n l_{i,k} \cdot l_{j,k}
    =
    \sum_{k=1}^{\min\set{ i, j }} \binom i k \cdot \binom j k
    \reloset {\eqref{eq:thm:vandermonde_convolution}} =
    \binom {i + j} i
    =
    s_{i,j}.
  \end{equation*}
\end{proof}

\paragraph{Progressions}\hfill

Progressions are an elementary concept that happens to be quite useful. There is no definition of progression, but rather the term \enquote{progression} refers to specific recursively defined \hyperref[def:sequence]{sequences}.

\begin{definition}\label{def:arithmetic_progression}
  In an \hyperref[def:abelian_group]{abelian group}, by default taken to be the field of complex numbers, an \( n \)-term (resp. infinite) \term[ru=арифметическая прогрессия (\cite[143]{АлександровМаркушевичХинчин1952ЭнциклопедияТом3}), en=arithmetic progression (\cite[def. 2.4.3]{Rosen2019DiscreteMathematics})]{arithmetic progression} with \term[en=common difference (\cite[def. 2.4.3]{Rosen2019DiscreteMathematics})]{difference} \( d \) is a sequence \( \seq{ a_k }_{k=0}^{n-1} \) (resp. \( \seq{ a_k }_{k=0}^\infty \)) satisfying any of the following equivalent conditions:
  \begin{thmenum}
    \thmitem{def:arithmetic_progression/implicit}\mcite[\S 227]{Киселёв2009Геометрия} The difference of any two consecutive elements equals \( d \).
    \thmitem{def:arithmetic_progression/direct}\mcite[1]{ButlerEtAl2016Progressions} We have \( a_k = a_0 + kd \) for every index \( k \), where \( kd \) is \hyperref[con:additive_semigroup/multiplication]{iterated addition}.
    \thmitem{def:arithmetic_progression/recursive}\mcite[143]{АлександровМаркушевичХинчин1952ЭнциклопедияТом3} We have
    \begin{equation}\label{eq:def:arithmetic_progression/recursive}
      a_k \coloneqq \begin{cases}
        a_0,         &k = 0, \\
        a_{k-1} + d, &k > 0.
      \end{cases}
    \end{equation}
  \end{thmenum}
\end{definition}

\begin{proposition}\label{thm:arithmetic_progression_partial_sums}
  The \hyperref[def:convergent_series]{series} constructed from the arithmetic progression \( \seq{ a_0 + kd }_{k=0}^\infty \) has partial sums
  \begin{equation}\label{eq:thm:arithmetic_progression_partial_sums}
    2 \sum_{k=0}^n a_k = (n + 1) (a_n - a_0).
  \end{equation}
\end{proposition}
\begin{proof}
  \begin{balign*}
    2 \sum_{k=0}^n a_k
     & =
    2 \sum_{k=0}^n (a_0 + kd)
    =    \\ &=
    \sum_{k=0}^n (a_0 + kd) + \sum_{k=0}^n (a_0 + (n-k)d)
    =    \\ &=
    \sum_{k=0}^n (2 a_0 + nd)
    =    \\ &=
    (n + 1) (a_0 + a_n).
  \end{balign*}
\end{proof}

\begin{corollary}\label{thm:numeric_arithmetic_progression_partial_sums}
  For any positive integer \( n \), we have
  \begin{equation}\label{eq:thm:numeric_arithmetic_progression_partial_sums}
    \sum_{k=0}^n k = \sum_{k=1}^n k = \frac {n (n + 1)} 2 = \binom {n+1} 2.
  \end{equation}
\end{corollary}
\begin{proof}
  Follows from either \fullref{thm:arithmetic_progression_partial_sums} or \fullref{thm:vandermonde_convolution}.
\end{proof}

\begin{definition}\label{def:geometric_progression}
  In a \hyperref[def:field]{field}, by default taken to be the field of complex numbers, an \( n \)-term (resp. infinite) \term[ru=геометрическая прогрессия (\cite[144]{АлександровМаркушевичХинчин1952ЭнциклопедияТом3}), en=geometric progression (\cite[def. 2.4.2]{Rosen2019DiscreteMathematics})]{geometric progression} with \term[ru=знаменатель (прогрессии) (\cite[\S 227]{Киселёв2009Геометрия}), en=common ratio (\cite[def. 2.4.2]{Rosen2019DiscreteMathematics})]{quotient} \( q \) is a sequence \( \seq{ a_k }_{k=0}^{n-1} \) (resp. \( \seq{ a_k }_{k=0}^\infty \)) of \hi{nonzero elements} satisfying any of the following equivalent conditions:
  \begin{thmenum}
    \thmitem{def:geometric_progression/implicit}\mcite[\S 227]{Киселёв2009Геометрия} The quotient of two consecutive elements equals \( q \).
    \thmitem{def:geometric_progression/direct}\mcite[144]{АлександровМаркушевичХинчин1952ЭнциклопедияТом3} We have \( a_k = a_0 q^k \) for every index \( k \).
    \thmitem{def:geometric_progression/recursive}\mcite[144]{АлександровМаркушевичХинчин1952ЭнциклопедияТом3} We have
    \begin{equation}\label{eq:def:geometric_progression/recursive}
      a_k \coloneqq \begin{cases}
        a_0,       &k = 0, \\
        a_{k-1} q, &k > 0.
      \end{cases}
    \end{equation}
  \end{thmenum}
\end{definition}

\begin{proposition}\label{thm:arithmetic_to_geometric_progression}
  Given a complex arithmetic progression \( \seq{ a_k }_{k=0}^\infty \) with difference \( d \), for any complex number \( z \), the sequence \( \seq{ z^{a_k} }_{k=0}^\infty \) is a geometric progression with quotient \( z^d \).
\end{proposition}
\begin{proof}
  Trivial.
\end{proof}

\paragraph{Geometric series}

\begin{definition}\label{def:geometric_series}\mcite[61]{Rudin1976AnalysisPrinciples}
  A \term{geometric series} is \hyperref[def:convergent_series]{series} whose coefficients come from a complex-valued \hyperref[def:geometric_progression]{geometric progression} with base \( 1 \):
  \begin{equation}\label{eq:def:geometric_series}
    \sum_{k=0}^\infty z^k.
  \end{equation}
\end{definition}
\begin{comments}
  \item Rudin defines the series only for real numbers, for the generalization is straightforward.
\end{comments}

\begin{proposition}\label{thm:xn_minus_yn_factorization}
  For arbitrary \hyperref[def:ring]{ring} elements \( x \) and \( y \) and for every nonnegative integer \( n \), we have
  \begin{equation}\label{eq:thm:xn_minus_yn_factorization}
    x^{n + 1} - y^{n + 1} = (x - y)(x^n + x^{n-1} y + \cdots + y^n) = (x - y) \sum_{k=0}^n x^k y^{n-k}.
  \end{equation}
\end{proposition}
\begin{proof}
  \begin{align*}
    (x - y) \sum_{k=0}^n x^k y^{n-k}
    &=
    \sum_{k=0}^n x^{k+1} y^{n-k} - \sum_{k=0}^n x^k y^{n-k+1}
    = \\ &=
    \sum_{k=1}^{n+1} x^k y^{(n+1)-k} - \sum_{k=0}^n x^k y^{(n+1)-k}
    =
    x^{n+1} - y^{n+1}.
  \end{align*}
\end{proof}

\begin{proposition}\label{thm:def:geometric_series}
  The geometric series \eqref{eq:def:geometric_series} has the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:geometric_series/finite_sum} For all \( z \in \BbbC \setminus \set{ 1 } \), the geometric series \eqref{eq:def:geometric_series} has partial sums
    \begin{equation}\label{eq:thm:def:geometric_series/finite_sum}
      \sum_{k=0}^n z^k = \frac {1 - z^{n+1}} {1 - z}.
    \end{equation}

    \thmitem{thm:def:geometric_series/degenerate} In the degenerate case \( z = 1 \), the progression itself is constant, and its partial sums are instead
    \begin{equation}\label{eq:thm:def:geometric_series/degenerate}
      \sum_{k=0}^n z^k = n + 1.
    \end{equation}

    \thmitem{thm:def:geometric_series/series_sum_exterior} The series diverges when \( \abs{z} \geq 1 \).

    \thmitem{thm:def:geometric_series/series_sum_interior} For \( 0 < \abs{z} < 1 \), the series converges absolutely with limit
    \begin{equation}\label{eq:thm:def:geometric_series/series_sum_interior}
      \sum_{k=0}^\infty z^k = \frac 1 {1 - z}.
    \end{equation}
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:geometric_series/finite_sum} Follows from \fullref{thm:xn_minus_yn_factorization}.

  \SubProofOf{thm:def:geometric_series/degenerate} Obvious.

  \SubProofOf{thm:def:geometric_series/series_sum_exterior}

  \SubProof*{Proof for \( z = 1 \)} If \( z = 1 \), \fullref{thm:def:geometric_series/degenerate} implies that the series diverges because it grows indefinitely.

  \SubProof*{Proof for \( \abs{z} = 1 \) and \( z \neq 1 \)} In this case the integer powers \( z^k \) are rotations around the complex plane unit circle, which do not tend to a limit. Hence, the series diverges again.

  \SubProof*{Proof for \( \abs{z} > 1 \)} In this case \( \abs{z^n} \) grows indefinitely with \( n \), and it follows that
  \begin{equation*}
    \sum_{k=m}^n z^k
    =
    z^m \sum_{k=0}^{n-m} z^k
    =
    z^m \frac {1 - z^{n-m+1}} {1 - z}
    =
    \frac {z^m - z^{n+1}} {1 - z}.
  \end{equation*}
  can get arbitrarily far from \( 0 \). Therefore, in this case the series also diverges.

  \SubProofOf{thm:def:geometric_series/series_sum_interior} Fix \( z \in B(0, 1) \). Since only \( z^{n + 1} \) depends on \( n \) in \eqref{eq:thm:def:geometric_series/finite_sum}, we obtain \eqref{eq:thm:def:geometric_series/series_sum_interior} by simply noting that \( z^n \to 0 \) when \( n \to \infty \).
\end{proof}

\begin{example}\label{ex:def:geometric_series}
  We list some examples of \hyperref[def:geometric_series]{geometric series}:
  \begin{thmenum}
    \thmitem{ex:def:geometric_series/two} A surprisingly useful series occurs for \( z = 1 / 2 \), where
    \begin{equation}\label{eq:ex:def:geometric_series/two}
      \sum_{k=0}^\infty \frac 1 {2^k}
      \reloset {\eqref{eq:thm:def:geometric_series/series_sum_interior}} =
      \frac 1 {1 - 1 / 2}
      =
      2.
    \end{equation}

    Its usefulness comes from the fact that
    \begin{equation}\label{eq:ex:def:geometric_series/two/one}
      \sum_{k=1}^\infty \frac 1 {2^k}
      =
      \sum_{k=0}^\infty \frac 1 {2^k} - 1
      =
      1,
    \end{equation}
    hence we can use the terms for generalized \hyperref[def:convex_hull]{convex combinations}.

    \thmitem{ex:def:geometric_series/interest} In this example we will exploit the equivalence between the closed form representations in \fullref{def:arithmetic_progression} and \fullref{def:geometric_progression} and the corresponding inductive definitions. The equivalences are obvious from a mathematical standpoint, however outside of mathematics they have highly nontrivial consequences. Indeed, they highlight the difference between simple interest and compound interest.

    Consider a savings account with \( 1000\$ \). A simple monthly interest of \( 2\% \) will earn \( 240\$ \) over a year:
    \begin{equation*}
      1000 (1 + 12 \cdot 2 / 100) = 1240.
    \end{equation*}

    The same account with a compound monthly interest of \( 2\% \) will earn a bit more - about \( 268\$ \):
    \begin{equation*}
      1000 (1 + 2 / 100)^{12} \approx 1268.24.
    \end{equation*}

    Over the course of ten years, however, simple interest will earn a total of \( 2400\$ \), while compound interest will earn \( \approx 9765\$ \).

    The difference between linear and exponential growth appears staggering in a real-world situation even though the difference may not be very noticeable in the short-term.
  \end{thmenum}
\end{example}
