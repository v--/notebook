\section{Henkin semantics}\label{sec:henkin_semantics}

\paragraph{Frames and structures}

\begin{definition}\label{def:hol_frame}\mimprovised
  Fix a \hyperref[def:hol_signature]{signature} \( \Sigma \) of \hyperref[def:higher_order_logic]{higher-order logic} and a \hyperref[def:truth_value_algebra]{truth value algebra} \( \BbbH \).

  A \term[en=frame (\cite[238]{Andrews2002Logic})]{frame} over \( \Sigma \) is a \hyperref[def:indexed_family]{family} \( \seq{ X_\tau }_{\tau \in \op*{\BbbQ_\Sigma}} \) of sets, indexed by the \hyperref[def:quantifiable_type]{quantifiable types} over \( \Sigma \), and subject to some constraints. We call \( X_\tau \) the \term{universe} or \term{domain} of type \( \tau \). Unless explicitly noted otherwise, we will suppose that \( X_\tau \) is nonempty for every \( \tau \) --- see \cref{rem:predicate_logic_empty_universe} for a broader discussion.

  \begin{thmenum}
    \thmitem{def:hol_frame/propositions} For the type of propositions \( \syn\omicron \), we let \( U_{\syn\omicron} \coloneqq \BbbH \) since the values of propositions are intended to be truth values.

    \thmitem{def:hol_frame/sorts} For every sort \( S \), we allow \( U_S \) to be any set, assumed nonempty by default.

    \thmitem{def:hol_frame/functions} For every arrow type \( \tau \synimplies \sigma \), we require \( X_{\tau \synimplies \sigma} \) to be a set of functions from \( X_\tau \) to \( X_\sigma \) (also assumed nonempty by default).

    We call the frame \term{saturated} if \( X_{\tau \synimplies \sigma} \) is the set of \hi{all} functions from \( X_\tau \) to \( X_\sigma \).
  \end{thmenum}
\end{definition}
\begin{comments}
  \item In a saturated frame, it is sufficient to specify only the universes of sorts.

  \item We adapt Andrew's definition from \cite[238]{Andrews2002Logic} by allowing arbitrary truth value algebras and arbitrary sorts.

  We refer to the individual sets as \enquote{universes} rather than Andrews' term \enquote{domains}; see \cref{rem:model_theory_universe_terminology}.

  Andrews uses saturated frames without a specific term when distinguishing \hyperref[def:hol_model]{standard models} from general models. It could be more appropriate to call saturated frames \enquote{standard}, but we prefer a more descriptive adjective.
\end{comments}

\begin{remark}\label{rem:model_theory_universe_terminology}
  When defining frames in \hyperref[def:higher_order_logic]{higher-order logic} in \cref{def:hol_frame} or structures in \hyperref[def:first_order_logic]{first-order logic} in \cref{def:first_order_structure}, we call the underlying sets \enquote{universes}. A popular alternative, especially for frames, is the word \enquote{domain}.

  \begin{itemize}
    \item \enquote{Universe} is used by \cite[83]{Hinman2005Logic} and \cite[59]{VanDalen2004LogicAndStructure} for first-order structures.

    \item \enquote{Domain} is used by
    \cite[84]{Henkin1950CompletenessInTheoryOfTypes},
    \cite[238]{Andrews2002Logic} and
    \cite[271]{Farmer2008STTVirtues}
    for frames, and by
    \cite[84]{Kleene2002Logic} and \cite[71]{КолмогоровДрагалин2006Логика} (as \enquote{область})
    for first-order structures.

    Andrews admits \enquote{universe} as a synonym for \enquote{domain} for first-order structures in \cite[115]{Andrews2002Logic}.

    \item \enquote{Носитель} (\enquote{bearer}, also translated as \enquote{support} when dealing with functions --- see \cref{def:function_support}) is used in some Russophone literature --- for example \cite[75]{ШеньВерещагин2017ЯзыкиИИсчисления} and \cite[def. 2.2.3]{Герасимов2011Вычислимость}.
  \end{itemize}
\end{remark}

\begin{definition}\label{def:hol_structure}\mimprovised
  A \term{structure} over a given \hyperref[def:hol_signature]{signature} \( \Sigma \) of higher-order logic is a \hyperref[def:hol_frame]{frame} \( \seq{ X_\tau }_{\tau \in \op*{\BbbQ_\Sigma}} \) endowed with a function \( I \) such that \( I(c) \in X_\tau \) whenever \( (c: \tau) \in \op*{NLType}_\Sigma \).

  We call \( I \) the \term{interpretation} of the structure \( \mscrX \coloneqq (\seq{ X_\tau }_{\tau \in \op*{\BbbQ_\Sigma}}, I) \).
\end{definition}
\begin{comments}
  \item The interpretation is well-defined as a function since it maps \( \op*{NLConst}_\Sigma \) to the union \( \bigcup_{\tau \in \op*{\BbbQ_\Sigma}} X_\tau \).

  \item We will match letter used for the universes and for the structure itself. This is discussed in \cref{rem:hol_structure_notation}.

  \item We generalize structures as defined for first-order logic in \cref{def:first_order_structure}.

  \incite[238]{Andrews2002Logic} instead calls an \enquote{interpretation} what we call a structure, while \incite[271]{Farmer2008STTVirtues} calls it a \enquote{model}, irrespective of whether a logical theory is involved. We generally avoid calling arbitrary structures \enquote{models} without logical theories involved; see \cref{rem:institutional_model_terminology}.
\end{comments}

\begin{remark}\label{rem:hol_structure_notation}
  In \hyperref[def:higher_order_logic]{higher-order logic}, we have defined a \hyperref[def:hol_structure]{structure} as a pair \( \mscrX = (\seq{ X_\tau }_{\tau \in \op*{\BbbQ_\Sigma}}, I) \). Each area of mathematics has its own conventions and structures are usually specified as simply as possible without being ambiguous.

  One convention is to denote the universes via compatible letters like we did with \( X_\tau \) and \( \mscrX \), or like we would do with \( G_\tau \) and \( \mscrG \). Such notation is used, for example, by \incite[def. II.1.2]{Эдельман1975Логика} for first-order logic.

  This is especially useful for one-sorted first-order logic, where only one universe is needed --- that of individuals --- and we can say \enquote{Let \( \mscrP = (P, \leq) \) be a \hyperref[def:partially_ordered_set]{partially ordered sets}}.

  Outside logic, for more complicated signature like that of the \hyperref[def:group/theory]{theory of groups}, it is burdensome to specify the entire signature since it is tantamount specifying a quadruple \( (G, e, (\anon)^{-1}, \cdot) \). Often it is sufficient to write only the domain \( G \) and say \enquote{let \( G \) be a group} or even \enquote{let \( (G, \ast) \) be a group} instead of \enquote{let \( G \) be a group with respect to some operation \( {\ast} \)}. This is technically wrong, but it is both convenient and conventional. The rest of the definition of the group can easily be inferred. In case of ambiguity, the simplest disambiguation is to use lower indices with the name of the structure, e.g. \( +_G \) and \( +_H \) may be the addition operation in different abelian groups.
\end{remark}

\begin{definition}\label{def:hol_variable_assignment}\mcite[238]{Andrews2002Logic}
  A \term{variable assignment} in a given \hyperref[def:hol_frame]{frame} \( \seq{ X_\tau }_{\tau \in \op*{\BbbQ_\Sigma}} \) is a function \( v \) that sends each possible annotated variable \( x^\tau \) to an element of \( X_\tau \).

  \begin{thmenum}
    \thmitem{def:hol_variable_assignment/modified}\mimprovised For every variable \( x^\tau \) and every domain element \( a \in X_\tau \) we also define the \term{modified assignment} of \( v \) at \( x^\tau \) with \( a \):
    \begin{equation*}
      v_{x^\tau \mapsto a}(y^\sigma) \coloneqq \begin{cases}
        a,           &y = x \T{and} \tau = \sigma, \\
        v(y^\sigma), &\T{otherwise.}
      \end{cases}
    \end{equation*}

    For more than one variable, we define
    \begin{equation*}
      v_{x_1^\tau \mapsto a_1, \ldots, x_n^\tau \mapsto a_n}(y) \coloneqq ((\ldots(v_{x_1^\tau \mapsto a_1})\ldots)_{x_n^\tau \mapsto a_n})(y).
    \end{equation*}

    We can also modify \( v \) at \( x^\tau \) with a variable \( z^\tau \):
    \begin{equation*}
      v_{x^\tau \mapsto z^\tau}(y^\sigma) \coloneqq \begin{cases}
        v(z^\tau),   &y = x \T{and} \tau = \sigma, \\
        v(y^\sigma), &\T{otherwise.}
      \end{cases}
    \end{equation*}
  \end{thmenum}
\end{definition}
\begin{comments}
  \item The assignment \( v \) is well-defined as a function since it is the set-theoretic \hyperref[def:disjoint_union]{disjoint union} of a family of functions \( \seq{ v_\tau }_{\tau \in \op*{\BbbQ_\Sigma}} \), where \( v_\tau: \op*{Var} \to X_\tau \).

  \item Compared to Andrews, we elaborate on modified assignments so that they more closely resemble their counterparts in first-order logic defined in \cref{def:first_order_valuation/modified_assignment}.
\end{comments}

\begin{definition}\label{def:kronecker_delta}\mimprovised
  We define the \term[ru=дельта-функция Кронекера (\cite[45]{БарановСтечкин2004ЭкстремальнаяКомбинаторика}), en=Kronecker delta function (\cite[16]{Hall1986CombinatorialTheory})]{Kronecker delta function} on a \hyperref[def:semiring]{semiring} \( R \) as
  \begin{equation}\label{eq:def:kronecker_delta}
    \delta_{i,j} \coloneqq \begin{cases}
      1_R, &i = j, \\
      0_R, &i \neq j.
    \end{cases}
  \end{equation}

  It is also traditionally called the \term[bg=символ на Кронекер (\cite[26]{Боянов2008ЧислениМетоди}), ru=символ Кронекера (\cite[461]{Тыртышников2007ЛинейнаяАлгебра}), en=Kronecker delta symbol (\cite[33]{Knuth1997ArtVol1}); Kronecker symbol (\cite[213]{Bourbaki1998Algebra1to3})]{Kronecker delta symbol}.

  The definition naturally extends to a \hyperref[def:heyting_algebra]{Heyting algebra} \( H \), where we can take \( R \) to be the \hyperref[ex:def:semiring/lattice]{join-meet semiring} of \( H \). Thus, in a \hyperref[con:truth_value_algebra]{truth value algebra}, the delta becomes
  \begin{equation}\label{eq:def:kronecker_delta/truth}
    \delta_{i,j} = \begin{cases}
      T, &i = j, \\
      F, &i \neq j.
    \end{cases}
  \end{equation}
\end{definition}
\begin{comments}
  \item We generalize the \enquote{Kronecker symbol} from \cite[213]{Bourbaki1998Algebra1to3} from rings to semirings, so that we are able to encompass truth value algebras. We use the latter when defining valuations for equality in \cref{def:hol_term_valuation} and \cref{def:first_order_valuation}.
\end{comments}

\begin{definition}\label{def:hol_term_valuation}\mimprovised
  Fix a \hyperref[def:hol_structure]{structure} \( \mscrX = (\seq{ X_\tau }_{\tau \in \op*{\BbbQ_\Sigma}}, I) \) of \hyperref[def:higher_order_logic]{higher-order logic} over the \hyperref[def:truth_value_algebra]{truth value algebra} \( \BbbH \). Fix also a \hyperref[def:hol_variable_assignment]{variable assignment} \( v \) into the frame of \( \mscrX \).

  We will define the \term{valuation} \( \Bracks{ M^\tau }_\mscrX^v \) of \( M^\tau \) with respect to \( \mscrX \) and \( v \). We want \( \Bracks{ M^\tau }_\mscrX^v \) to be an element of \( X_\tau \).

  First, suppose that \( \tau = \syn\omicron \) and \( M = \varphi \) is a \hyperref[def:hol_term/formula]{logical formula} typed by the rules of \cref{def:hol_formula_rules}. In this case the valuation should be an element of \( \BbbH \). We define
  \begin{empheq}[left={\Bracks{\varphi}_\mscrX^v} \coloneqq \empheqlbrace]{align}
    &T,                                                                                           &&\varphi = \synH_\syntop,                               && (\syntop)                  \label{eq:def:hol_term_valuation/formula/top} \\
    &F,                                                                                           &&\varphi = \synH_\synbot,                               && (\synbot)                  \label{eq:def:hol_term_valuation/formula/bot} \\
    &\oline{\Bracks{\psi}_\mscrX^v},                                                              &&\varphi = \synH_\synneg \psi,                          && (\synneg \psi)             \label{eq:def:hol_term_valuation/formula/neg} \\
    &\Bracks{\psi}_\mscrX^v \relcirc \Bracks{\theta}_\mscrX^v,                                    &&\varphi = \synH_{\syncirc} \psi \theta,                && (\psi \syncirc \theta)     \label{eq:def:hol_term_valuation/formula/conn} \\
    &\delta\parens[\big]{ \Bracks{N^\sigma}_\mscrX^v, \Bracks{K^\sigma}_\mscrX^v },               &&\varphi = \synH_\syneq N^\sigma K^\sigma,              && (M^\sigma \syneq N^\sigma) \label{eq:def:hol_term_valuation/formula/eq} \\
    &\bigwedge\set[\big]{ \Bracks{\psi}_\mscrX^{v^{x^\sigma \mapsto a}} \given* a \in X_\sigma }, &&\varphi = \synH_{\synforall} (\qabs {x^\sigma} \psi),  && (\qforall {x^\sigma} \psi) \label{eq:def:hol_term_valuation/formula/forall} \\
    &\bigvee\set[\big]{ \Bracks{\psi}_\mscrX^{v^{x^\sigma \mapsto a}} \given* a \in X_\sigma },   &&\varphi = \synH_{\synexists} (\qabs {x^\sigma} \psi),  && (\qexists {x^\sigma} \psi) \label{eq:def:hol_term_valuation/formula/exists}
  \end{empheq}

  Most of the cases above are familiar from the propositional valuations defined in \cref{def:propositional_valuation/formula_valuation}.
  \begin{itemize}
    \item In \eqref{eq:def:hol_term_valuation/formula/eq}, \( \delta \) is the \hyperref[def:kronecker_delta]{Kronecker delta function} (written using prefix notation).

    \item The cases \eqref{eq:def:hol_term_valuation/formula/forall} and \eqref{eq:def:hol_term_valuation/formula/exists} evaluates \( \psi \) using a \hyperref[def:hol_variable_assignment/modified]{modified assignment} parameterized by the elements of \( X_\sigma \).
  \end{itemize}

  In all other cases, the valuation is determined as follows:
  \begin{empheq}[left={\Bracks{ M^\tau }_\mscrX^v} \coloneqq \empheqlbrace]{align}
    &I(M),                                                                                          &&M \in \op*{NLConst},                                                     \label{eq:def:hol_term_valuation/const} \\
    &v(M^\tau),                                                                                     &&M \in \op*{Var},                                                         \label{eq:def:hol_term_valuation/var} \\
    &\parens[\big]{ a \mapsto \Bracks{ N^\rho }_\mscrX^{v_{x^\sigma \mapsto a}} },                  &&\tau = \sigma \synimplies \rho \T{and} M^\tau = \qabs {x^\sigma} N^\rho, \label{eq:def:hol_term_valuation/abs} \\
    &\Bracks{ N^{\sigma \synimplies \tau} }_\mscrX^v \parens[\big]{ \Bracks{ K^\sigma }_\mscrX^v }, &&M^\tau = N^{\sigma \synimplies \tau} K^\sigma.                           \label{eq:def:hol_term_valuation/app}
  \end{empheq}

  Here \eqref{eq:def:hol_term_valuation/abs} determines a function whose value for \( a \in X_\sigma \) is the valuation of \( N^\rho \) with respect to \( v \) modified at \( x^\sigma \) with \( a \). This ensures that the valuation of an arrow type is a function, so in \eqref{eq:def:hol_term_valuation/app} we apply the valuation of the left (function) subterm to the valuation of the right subterm.

  If the valuation \( \Bracks{ M^\tau }_\mscrX^v \) coincides for any variable assignment \( v \), we use the simplified notation \( \Bracks{ \varphi }_\mscrX \). This is the case for \hyperref[def:hol_term/closed]{closed logical terms}, but it is also more general --- see \cref{ex:universal_validity_and_lem}.
\end{definition}
\begin{comments}
  \item We take the definition of valuation for arbitrary terms from \cite[238]{Andrews2002Logic}. For formulas, we generalize the valuations of first-order formulas defined in \cref{def:first_order_valuation}.

  \item As per \cref{rem:parameters_in_hol}, due to the availability of \( \muplambda \)-abstraction, we will not be interested in treating formulas with free variables as functions (unlike in propositional or first-order logic).
\end{comments}

\begin{remark}\label{rem:predicate_logic_empty_universe}
  We list several complications that arise if we allow empty universes in \hyperref[def:hol_structure]{structures} of \hyperref[def:higher_order_logic]{higher-order logic}. We allow such structures in some isolated cases like \hyperref[def:preordered_set]{preordered sets} and \hyperref[def:topological_space]{topological spaces}, where tradition dictates allowing empty domains (and ignoring these concerns).

  Let \( \mscrX = (\seq{ X_\tau }_{\tau \in \op*{\BbbQ_\Sigma}}, I) \) be a structure over a one-sorted signature \( \Sigma \), and suppose that \( X_{\syn\iota} \) is empty.
  \begin{thmenum}
    \thmitem{rem:predicate_logic_empty_universe/function_set} An immediate peculiarity is that the function universe \( X_{\tau \synimplies \syn\iota} \) is empty if and only if \( X_\tau \) is \hi{not} empty.

    In particular, \( X_{\syn\omicron \synimplies \syn\iota} \) is empty (but \( X_{\syn\iota \synimplies \syn\omicron} \) is not).

    We must thus reconcile with possibly empty sets of functions.

    \thmitem{rem:predicate_logic_empty_universe/interpretation} As a consequence, it is not possible to interpret nonlogical constants of certain types.

    The interpretation \( I \) can only be left \hyperref[con:undefinedness]{undefined} for the individual constants of type \( \syn\iota \), as well as for constants of type \( \syn\omicron \synimplies \syn\iota \) and possibly other types.

    Therefore, allowing empty universes is only meaningful when dealing with constants of types whose universe are guaranteed to be nonempty. Such is the case for \hyperref[def:hol_term/predicate]{predicates}, for example.

    \thmitem{rem:predicate_logic_empty_universe/variable_assignment} Even if all constants have a proper interpretation, variable assignments are impossible to define.

    It is easy to avoid free variables in \hyperref[def:logical_theory]{logical theories} by only considering closed formulas and using \hyperref[def:fol_universal_closure]{universal closures} where appropriate. It is also easy to avoid other logical terms that would otherwise inhabit an empty type.

    Thus, when computing valuations using \eqref{eq:def:hol_term_valuation/formula/forall} or \eqref{eq:def:hol_term_valuation/formula/exists}, we must rely on lattice meets and joins behaving trivially for empty sets.

    \thmitem{rem:predicate_logic_empty_universe/eigenvalues} Consider the \hyperref[def:hol_natural_deduction_proof_tree]{proof tree}
    \begin{equation*}
      \begin{prooftree}
        \hypo{ \qforall {x^\tau} \varphi }
        \infer1[\ref{inf:def:hol_quantifier_rules/terms/forall_elim}]{ \varphi[x^\tau \mapsto M^\tau] }
        \infer1[\ref{inf:def:hol_quantifier_rules/terms/exists_intro}]{ \qexists {x^\tau} \varphi }
      \end{prooftree}
    \end{equation*}

    An obvious problem is that
    \begin{equation*}
      \Bracks{\qforall {x^\tau} \varphi}_\mscrX
      \reloset {\eqref{eq:def:hol_term_valuation/formula/forall}} =
      \bigwedge\varnothing
      =
      T
      \neq
      F
      =
      \bigvee\varnothing
      \reloset {\eqref{eq:def:hol_term_valuation/formula/exists}} =
      \Bracks{\qexists {x^\tau} \varphi}_\mscrX.
    \end{equation*}

    As stated, both inference rules are applicable with \( M^\tau = x^\tau \). But a variable is a placeholder for a value. One solution is to force \( M^\tau \) to refer to an actual value.

    \incite*[\S 5.1.10]{Mimram2020ProgramEqualsProof} suggests an unorthodox tweak for his formulation of first-order logic. In our formulation, the tweak would require us to modify \ref{inf:def:hol_quantifier_rules/terms/forall_elim} and \ref{inf:def:hol_quantifier_rules/terms/exists_intro} so that the free variables of the term \( M^\tau \) are free in the proof tree (in the sense of \cref{def:hol_natural_deduction_proof_tree/free_variables}). This would disallow \( M^\tau = x^\tau \), and instead require \( M^\tau \) to be a logical term not depending on \( x^\tau \) like an individual constant.
  \end{thmenum}
\end{remark}

\paragraph{Henkin models}

\begin{definition}\label{def:hol_model}\mcite[239]{Andrews2002Logic}
  We say that the \hyperref[def:hol_structure]{structure} \( \mscrX \) of \hyperref[def:higher_order_logic]{higher-order logic} is a \term{general model} of the set \( \Gamma \) of \hyperref[def:hol_term/sentence]{\hi{closed} formulas} (sentences) if \( \Bracks{\varphi}_\mscrX = T \) for every \( \varphi \) in \( \Gamma \).

  In the special case where the frame of \( \mscrX \) is saturated, we call \( \mscrX \) a \term{standard model} of \( \Gamma \), and otherwise we call \( \mscrX \) a \term[en=nonstandard (model) (\cite[255]{Andrews2002Logic})]{nonstandard model}.

  We use the terminology from \cref{def:institutional_satisfaction} regarding satisfaction and validity. Incidentally, the phrases \enquote{\( \Gamma \) is satisfiable} and \enquote{\( \Gamma \) is valid} are ambiguous here, so we use Henkin's disambiguation \enquote{valid in the standard sense} from \cite[84]{Henkin1950CompletenessInTheoryOfTypes}.
\end{definition}
\begin{comments}
  \item It is important that the formulas in \( \Gamma \) are closed --- see \cref{ex:universal_validity_and_lem}.

  \item Even though we call \( \mscrX \) a \enquote{(general) model of \( \Gamma \)}, unlike in general \hyperref[def:institution]{institutions}, we do not refer to itself \( \mscrX \) as a \enquote{model} without a corresponding set of formulas. We further discuss this terminology in \cref{rem:institutional_model_terminology}.
\end{comments}

\begin{remark}\label{rem:henkin_semantics}
  As defined in \cref{def:hol_model}, general and standard models in \hyperref[def:higher_order_logic]{higher-order logic} are a straightforward adaptation of Leon Henkin's definitions from \cite{Henkin1950CompletenessInTheoryOfTypes}.

  He also formulated a proof system and proved \hyperref[def:abstract_logic/completeness]{completeness} of this system proof system with respect to general (but not standard) models. As part of the proof, Henkin constructs a specific general model.

  The phrase \enquote{Henkins model} may refer either to his general models based on frames, or to variants of the specific construction. For example, \incite[xii]{Hinman2005Logic} refers to an analogous construction in \hyperref[def:first_order_logic]{first-order logic} as a \enquote{Henkin model}.
\end{remark}
