\subsection{Lattices}\label{subsec:lattices}

\paragraph{Lattices}

\begin{definition}\label{def:lattice}\mcite[3]{Birkhoff1967}
  We say that a \hyperref[def:partially_ordered_set]{partially ordered set} is a \term[ru=решётка (\cite[def. 4.2]{Гуров2013})]{lattice} if every two element have both a \hyperref[def:extremal_points/supremum_and_infimum]{supremum} and an \hyperref[def:extremal_points/supremum_and_infimum]{infimum}.

  By regarding suprema and infima as binary operation, we shift the focus away from the order. \Fullref{thm:lattice_from_binary_operations} demonstrates how the order structure can be inferred from two operations on a plain set.

  \begin{thmenum}[series=def:lattice]
    \thmitem{def:lattice/join} We denote the supremum operation via \( \vee \) and call it a \term[ru=объединение (\cite[def. 4.2]{Гуров2013})]{join} and rather than supremum.

    In contrast to suprema, finite joins are written via \hyperref[rem:first_order_formula_conventions/infix]{infix} notation, e.g. \( x \vee y \vee z \) rather than \( \sup\set{ x, y, z } \).

    \thmitem{def:lattice/meet} We denote the infimum operation via \( \wedge \) and call it a \term[ru=сечение (\cite[def. 4.2]{Гуров2013})]{meet}.
  \end{thmenum}

  The terms \hyperref[def:lattice/join]{\enquote{join}} for \( \vee \) and \hyperref[def:lattice/meet]{\enquote{meet}} for \( \wedge \) are notoriously difficult to remember. A helpful accident is the ability to write \enquote{meet} as \enquote{\( \wedge \wedge \)eet}.

  Lattices have the following metamathematical properties:
  \begin{thmenum}[resume=def:lattice]
    \thmitem{def:lattice/theory} The language of the theory of lattices consists of the language of the \hyperref[def:partially_ordered_set]{theory of partially ordered sets} with the addition of the binary infix functional symbols \( \vee \) and \( \wedge \). This conflicts with the corresponding propositional connectives, but we will not use the two simultaneously.

    We must add the following axioms \eqref{eq:thm:lattice_operation_characterization/compatibility/join} and \eqref{eq:thm:lattice_operation_characterization/compatibility/meet} to the theory to ensure compatibility between order, joins and meets. We prove in \fullref{thm:lattice_operation_characterization/compatibility} that these axioms hold.

    A similar axiom must be added for joins and suprema.

    \thmitem{def:lattice/submodel} Unlike more general ordered sets, not every subset of a lattice is a \hyperref[def:first_order_submodel]{first-order submodel} because \( \vee \) and \( \wedge \) are now regarded as functional symbols. A \term{sublattice} must be closed under joins and meets.

    \thmitem{def:lattice/homomorphism} \hyperref[def:first_order_homomorphism]{First-order homomorphisms} between lattices are \hyperref[def:order_function/preserving]{order-preserving} maps that also preserve joins and meets.

    \begin{figure}[!ht]
      \centering
      \includegraphics[page=1]{output/def__lattice}
      \caption{An order homomorphism between lattices, which is not a lattice homomorphism.}
      \label{fig:def:lattice/homomorphism/order_homomorphism_not_lattice_homomorrphism}
    \end{figure}

    As we shall see in \fullref{thm:def:lattice/homomorphism_preserves_order}, the requirement that the function is order-preserving is redundant.

    On the other hand, \fullref{thm:def:lattice/embedding} implies that order embeddings are lattice embeddings.

    \thmitem{def:lattice/opposite}\mcite[7]{Birkhoff1967} The \hyperref[def:preordered_set/opposite]{dual} \( X^{\opcat} \) of a lattice \( X \) is again a lattice, which we will call the \term{dual lattice}.

    \thmitem{def:lattice/category} We denote the \hyperref[def:category_of_small_first_order_models]{category of \( \mscrU \)-small models} for lattices via \( \ucat{Lat} \). It is clearly concrete over \hyperref[def:partially_ordered_set]{\( \ucat{Pos} \)}.

    \Fullref{ex:limits_of_partially_ordered_set} discusses how \hyperref[def:category_of_cones/limit]{categorical limits} correspond to meets and \hyperref[def:category_of_cones/colimit]{categorical colimits} correspond to joins.
  \end{thmenum}
\end{definition}

\begin{theorem}[Principle of duality for lattices]\label{thm:lattice_duality}
  Consider the \hyperref[def:lattice/theory]{first-order theory of lattices}. Within it, consider the opposite formula \( \varphi^{\opcat} \) of \( \varphi \), in which we swap all instances \( \vee \) and \( \wedge \), as well as \( \leq \) and \( \geq \).

  The first-order structure \( (L, \leq) \) \hyperref[def:first_order_model]{satisfies} \( \varphi \) if and only if \( (L, \geq) \) satisfies \( \varphi^{\opcat} \).
\end{theorem}
\begin{proof}
  Follows from \fullref{thm:preorder_duality}.
\end{proof}

\begin{proposition}\label{thm:lattice_operation_characterization}
  Let \( (P, \leq) \) be a \hyperref[def:lattice]{lattice}, that is, a partially ordered set in which every pair of elements has a supremum and an infimum. The following properties characterize joins and meets:

  \begin{thmenum}
    \thmitem{thm:lattice_operation_characterization/operations} As binary operations, \( \vee \) and \( \wedge \) are \hyperref[def:binary_operation/associative]{associative} and \hyperref[def:binary_operation/commutative]{commutative}.

    \thmitem{thm:lattice_operation_characterization/absorption} The following \term[en=\cite[8]{Birkhoff1967}]{absorption} laws hold:
    \begin{align}
      \xi \vee (\xi \wedge \eta) &\doteq \xi, \label{eq:thm:lattice_operation_characterization/absorption/join} \\
      \xi \wedge (\xi \vee \eta) &\doteq \xi. \label{eq:thm:lattice_operation_characterization/absorption/meet}
    \end{align}

    \thmitem{thm:lattice_operation_characterization/compatibility} The following axioms for compatibility with \( \leq \) hold:
    \begin{align}
      \xi \leq \eta &\leftrightarrow \xi \vee \eta \doteq \eta, \label{eq:thm:lattice_operation_characterization/compatibility/join} \\
      \xi \leq \eta &\leftrightarrow \xi \wedge \eta \doteq \xi. \label{eq:thm:lattice_operation_characterization/compatibility/meet}
    \end{align}
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:lattice_operation_characterization/operations} Suprema and infima are obviously associative and commutative as binary operations because ordering is immaterial for pure sets and \( x \vee y \) is defined as \( \sup\set{ x, y } \).

  \SubProofOf{thm:lattice_operation_characterization/absorption} Let \( l \) be a lower bound of \( x \) and \( y \). Then \( l \leq x \), hence \( \sup\set{ x, l } = x \). Then
  \begin{equation*}
    \sup\set{ x, \inf\set{ y, x } } = x.
  \end{equation*}

  If we rewrite this equality using joins and meets, we obtain \eqref{eq:thm:lattice_operation_characterization/absorption/join}.

  This demonstrates \eqref{eq:thm:lattice_operation_characterization/absorption/join}. \Fullref{thm:preorder_duality} implies \eqref{eq:thm:lattice_operation_characterization/absorption/meet}.

  \SubProofOf{thm:lattice_operation_characterization/compatibility} If \( x \leq y \), then \( x \vee y = \sup\set{ x, y } = y \). Conversely, if \( x \vee y = y \), then \( y \) is an upper bound of \( x \) and \( y \), and hence \( x \leq y \).

  This demonstrates \eqref{eq:thm:lattice_operation_characterization/compatibility/join}. \Fullref{thm:preorder_duality} implies \eqref{eq:thm:lattice_operation_characterization/compatibility/meet}.
\end{proof}

\begin{proposition}\label{thm:lattice_from_binary_operations}\mcite[thm. I.8]{Birkhoff1967}
  Let \( P \) be a \hyperref[def:set]{plain set} with two binary operations \( \vee \) and \( \wedge \). Define the binary relation \( \leq \) on \( P \) via \eqref{eq:thm:lattice_operation_characterization/compatibility/join}.

  Suppose that the operations satisfy the conclusions of \fullref{thm:lattice_operation_characterization}, that is, suppose that both operations are \hyperref[def:binary_operation/associative]{associative} and \hyperref[def:binary_operation/commutative]{commutative} and satisfy the absorption conditions \eqref{eq:thm:lattice_operation_characterization/absorption/join} and \eqref{eq:thm:lattice_operation_characterization/absorption/meet}.

  Then \( (P, \leq) \) is a \hyperref[def:lattice]{lattice} in which \( \vee \) is the supremum and \( \wedge \) is the infimum.
\end{proposition}
\begin{comments}
  \item We may define \( \leq \) via \eqref{eq:thm:lattice_operation_characterization/compatibility/meet} rather than \eqref{eq:thm:lattice_operation_characterization/compatibility/join}.
\end{comments}
\begin{proof}
  \SubProof{Proof that \eqref{eq:thm:lattice_operation_characterization/compatibility/meet} holds}
  \SubProof*{Proof that \( x \leq y \) implies \( x \wedge y = x \)} If \( x \leq y \), by definition we have \( x \vee y = y \) and the absorption law \eqref{eq:thm:lattice_operation_characterization/absorption/meet} implies that
  \begin{equation*}
    x \wedge y = x \wedge (x \vee y) = x.
  \end{equation*}

  \SubProof*{Proof that \( x \wedge y = x \) implies \( x \leq y \)} Conversely, if \( x \wedge y = x \), then
  \begin{equation*}
    x \vee y = (x \wedge y) \vee y.
  \end{equation*}

  Due to commutativity of both \( \vee \) and \( \wedge \), we have
  \begin{equation*}
    x \vee y = y \vee (y \wedge x).
  \end{equation*}

  the other absorption law \eqref{eq:thm:lattice_operation_characterization/absorption/join} then implies that \( x \vee y = y \), hence \( x \leq y \).

  \SubProof{Proof that \( \leq \) is a partial order}

  \SubProofOf*[def:binary_relation/reflexive]{reflexivity} From \eqref{eq:thm:lattice_operation_characterization/absorption/meet} we have
  \begin{equation*}
    x \vee x = x \vee [x \wedge (x \vee x)].
  \end{equation*}

  Then \eqref{eq:thm:lattice_operation_characterization/absorption/join} with \( y = x \vee x \) implies that
  \begin{equation*}
    x \vee x = x.
  \end{equation*}

  Therefore,
  \begin{equation*}
    x \leq x.
  \end{equation*}

  \SubProofOf*[def:binary_relation/transitive]{transitivity} If \( x \leq y \) and \( y \leq z \), associativity of \( \vee \) implies
  \begin{equation*}
    x \vee z = x \vee (y \vee z) = (x \vee y) \vee z = y \vee z = z.
  \end{equation*}

  Thus, we obtain \( x \leq z \).

  \SubProofOf*[def:binary_relation/antisymmetric]{antisymmetry} If \( x \leq y \) and \( y \leq x \), commutativity of \( \vee \) implies
  \begin{equation*}
    x = y \vee x = x \vee y = y.
  \end{equation*}

  \SubProof{Proof that \( x \vee y = \sup\set{ x, y } \)} The element \( x \vee y \) is an upper bound of \( x \) and \( y \).

  Indeed, the absorption law \eqref{eq:thm:lattice_operation_characterization/absorption/meet} states that
  \begin{equation*}
    x \wedge (x \vee y) = x,
  \end{equation*}
  which due to \eqref{eq:thm:lattice_operation_characterization/compatibility/meet} implies
  \begin{equation*}
    x \leq x \vee y.
  \end{equation*}

  Similarly,
  \begin{equation*}
    y \wedge (y \vee x) = y.
  \end{equation*}

  Due to commutativity of \( \vee \), we have
  \begin{equation*}
    y \wedge (x \vee y) = y.
  \end{equation*}

  Then \eqref{eq:thm:lattice_operation_characterization/compatibility/meet} implies
  \begin{equation*}
    y \leq x \vee y.
  \end{equation*}

  If \( u \) is an upper bound of \( x \) and \( y \), we have
  \begin{equation*}
    x \vee u = u = y \vee u.
  \end{equation*}

  Then, due to associativity of \( \vee \), we have
  \begin{equation*}
    u = x \vee u = x \vee (y \vee u) = (x \vee y) \vee u,
  \end{equation*}
  hence
  \begin{equation*}
    x \vee y \leq u.
  \end{equation*}

  It follows that \( x \vee y \) is the least upper bound of \( x \) and \( y \).

  \SubProof{Proof that \( x \wedge y = \inf\set{ x, y } \)} Completely analogous.
\end{proof}

\begin{proposition}\label{thm:def:lattice}
  \hyperref[def:lattice]{Lattices} have the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:lattice/idempotent} Joins and meets are \hyperref[def:binary_operation/idempotent]{idempotent}.

    This property is not included in the characterization in \fullref{thm:lattice_operation_characterization} because it follows from the absorption laws --- see our proof in \fullref{thm:lattice_from_binary_operations} that the order is reflexive.

    \thmitem{thm:def:lattice/distributivity_inequality} For any elements \( x \), \( y \) and \( z \), we have
    \begin{align}
      x \vee (y \wedge z) &\geq (x \vee y) \wedge (x \vee z), \label{eq:thm:def:lattice/distributivity_inequality/join_over_meet} \\
      x \wedge (y \vee z) &\geq (x \wedge y) \vee (x \wedge z). \label{eq:thm:def:lattice/distributivity_inequality/meet_over_join}
    \end{align}

    \thmitem{thm:def:lattice/modularity_inequality} For any elements \( x \), \( y \) and \( z \), we have
    \begin{equation}\label{eq:thm:def:lattice/modularity_inequality}
      x \leq z \T{implies} x \vee (y \wedge z) \leq (x \vee y) \wedge z.
    \end{equation}

    \thmitem{thm:def:lattice/totally_ordered} Every \hyperref[def:totally_ordered_set]{totally ordered set} is a \hyperref[def:lattice]{lattice}.

    \thmitem{thm:def:lattice/bounded_absorption} If a lattice is \hyperref[def:extremal_points/bounds]{bounded}, the following \term[ru=поглощение (\cite[6]{Гуров2013}), en=absorption (\cite[8]{Birkhoff1967})]{absorption} laws hold (assuming \( \top \) and \( \bot \) are part of the language):
    \begin{align}
      \top \vee \xi = \top \label{eq:thm:def:lattice/bounded_absorption/join}, \\
      \bot \wedge \xi = \bot \label{eq:thm:def:lattice/bounded_absorption/meet}.
    \end{align}

    \thmitem{thm:def:lattice/homomorphism_preserves_order} If a function between lattices preserves either joins or meets, it is an order homomorphism.

    Thus, the requirement for \hyperref[def:lattice/homomorphism]{lattice homomorphisms} to be order-preserving is redundant.

    \thmitem{thm:def:lattice/embedding} Every \hyperref[def:preordered_set/homomorphism]{order embedding} between lattices is a \hyperref[def:lattice/homomorphism]{lattice embedding}.

    \thmitem{thm:def:lattice/join_preserves_order} For any fixed element \( x \), the functions \( y \mapsto x \vee y \) and \( y \mapsto x \wedge y \) preserves order.
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:lattice/idempotent} Clearly
  \begin{equation*}
    x \vee x = \sup\set{ x, x } = x
  \end{equation*}
  and similarly for meets.

  \SubProofOf{thm:def:lattice/distributivity_inequality} Obviously \( y \wedge z \) is a lower bound of \( y \) and \( z \). Then \( x \vee (y \wedge z) \) is a lower bound of \( x \vee y \) and \( z \vee z \). Therefore,
  \begin{equation*}
    (x \vee y) \wedge (x \vee z) \leq x \vee (y \wedge z).
  \end{equation*}

  Similarly, we can conclude that
  \begin{equation*}
    (x \wedge y) \vee (x \wedge z) \leq x \wedge (y \vee z).
  \end{equation*}

  \SubProofOf{thm:def:lattice/modularity_inequality} Let \( x \leq z \). Then \( z \wedge x = x \). Furthermore, for any \( y \), \eqref{eq:thm:def:lattice/distributivity_inequality/meet_over_join} implies that
  \begin{equation*}
    z \wedge (y \vee x) \geq (z \wedge y) \vee \underbrace{(z \wedge x)}_{x}
  \end{equation*}

  Rearranging the terms (as justified by commutativity), we obtain the desired inequality \eqref{eq:thm:def:lattice/modularity_inequality}.

  \SubProofOf{thm:def:lattice/totally_ordered} Trivial.

  \SubProofOf{thm:def:lattice/bounded_absorption} Obvious when the lattice is regarded as a partially ordered set.

  \SubProofOf{thm:def:lattice/homomorphism_preserves_order} Suppose that the function \( f: X \to Y \) preserves joins. If \( x \leq y \), \eqref{eq:thm:lattice_operation_characterization/compatibility/join} implies \( x \vee y = y \), and thus
  \begin{equation*}
    f(x) \vee f(y) = f(x \vee y) = f(y).
  \end{equation*}

  Using \eqref{eq:thm:lattice_operation_characterization/compatibility/join} again, we obtain \( f(x) \leq f(y) \).

  The case where \( f \) preserves meets follows via \fullref{thm:lattice_duality}.

  \SubProofOf{thm:def:lattice/embedding} Let \( f: X \to Y \) be an order embedding between lattices, i.e. an injective function that is both order-preserving and order-reflecting.

  \SubProof*{Proof that \( f \) preserves joins} Since \( x \vee y \) is an upper bound of \( x \) and \( y \), \( f(x \vee y) \) is an upper bound of \( f(x) \) and \( f(y) \). We will show that it is the least upper bound.

  Let \( u \) be an upper bound of \( f(x) \) and \( f(y) \). Then, since \( f \) is order-reflecting, we have
  \begin{equation*}
    x = f^{-1}(f(x)) \leq f^{-1}(u).
  \end{equation*}

  Thus, \( f^{-1}(u) \) is an upper bound of \( x \) and \( y \), and
  \begin{equation*}
    x \vee y \leq f^{-1}(u).
  \end{equation*}

  Then
  \begin{equation*}
    f(x \vee y) \leq u.
  \end{equation*}

  Since \( u \) was chosen arbitrarily, we conclude that \( f(x \vee y) \) is a least upper bound of \( f(x) \) and \( f(y) \).

  \SubProof*{Proof that \( f \) preserves meets} Follows via \fullref{thm:lattice_duality}.

  \SubProofOf{thm:def:lattice/join_preserves_order} Fix some lattice element \( x \). If \( y \leq z \), every upper bound of \( x \) and \( y \) is also an upper bound of \( x \) and \( y \), thus
\end{proof}

\paragraph{Semilattices}

\begin{remark}\label{rem:semilattices}
  Within this document, we often go out of our way in order to handle more general cases. For example, we sometimes prefer \hyperref[def:monoid]{monoids} to \hyperref[def:group]{groups}, \hyperref[def:semiring]{semirings} (with \hyperref[def:semimodule]{semimodules} and \hyperref[def:algebra_over_semiring]{algebras over semirings}) to \hyperref[def:ring]{rings} (with \hyperref[def:modules]{modules} and \hyperref[def:algebra_over_ring]{algebras over rings}), as well as abstract \hyperref[def:topological_vector_space]{topological vector spaces} instead of \hyperref[def:euclidean_space]{Euclidean spaces}.

  However, because we lack utility for \hyperref[def:semilattice]{semilattices}, we generally prefer \hyperref[def:lattice]{lattices}. Furthermore, \fullref{thm:complete_semilattice} implies that the concept of semilattices only makes sense for lattices that are not \hyperref[def:complete_lattice]{complete}, and most lattices we will encounter will be complete.

  Nevertheless, for the sake of completeness, we state a definition and a few examples.
\end{remark}

\begin{definition}\label{def:semilattice}\mcite[18]{Gratzer2011}
  We say that a \hyperref[def:partially_ordered_set]{partially ordered set} is a \term{join-semilattice} if every two element have a \hyperref[def:extremal_points/supremum_and_infimum]{supremum} and a \term{meet-semilattice} if every two elements have an \hyperref[def:extremal_points/supremum_and_infimum]{infimum}.
\end{definition}

\begin{example}\label{ex:def:semilattice}
  We list some examples of \hyperref[def:semilattice]{semilattices}:
  \begin{thmenum}
    \thmitem{ex:def:semilattice/lattice} Every \hyperref[def:lattice]{lattice} is both a join-semilattice and a meet-semilattice.

    \thmitem{ex:def:semilattice/tree} Consider the \hyperref[def:rooted_tree]{rooted tree} \( T = (V, E, r) \) and the \hyperref[def:rooted_tree/order]{tree order}, with respect to which \( u \leq v \) if \( u \) is an \hyperref[def:rooted_tree/ancestor_descendant]{ancestor} of \( v \).

    Given two vertices \( u \) and \( v \), we are interested in their highest common ancestor. Consider the paths
    \begin{equation*}
      r = u_0 \to u_1 \to \cdots \to u_{n-1} \to u_n = u
    \end{equation*}
    and
    \begin{equation*}
      r = v_0 \to v_1 \to \cdots \to v_{m-1} \to v_m = v.
    \end{equation*}

    Let \( k \) be the largest index such that \( u_k = v_k \). This is the desired ancestor --- it is the infimum of \( u \) and \( v \) with respect to the tree order.

    This demonstrates that \( (T, \leq) \) is a meet semilattice, but generally not a join semilattice.
  \end{thmenum}
\end{example}

\paragraph{Complete lattices}

\begin{definition}\label{def:complete_lattice}\mcite[6]{Birkhoff1967}
  We say that a \hyperref[def:partially_ordered_set]{partially ordered set} is a \term[ru=полная (решётка) (\cite[133]{Гуров2013})]{complete lattice} if an \hi{arbitrary} subset has a supremum and an infimum.

  Complete lattices cannot be described via first-order logic without emulating some kind of membership relation. We will describe some metamathematical properties of complete lattices via analogy with \fullref{def:lattice}.
  \begin{thmenum}
    \thmitem{def:complete_lattice/submodel}\mcite[250]{Gratzer2011} We call a subset of a complete lattice a \term{complete sublattice} if it is closed under arbitrary suprema and infima.

    \thmitem{def:complete_lattice/homomorphism}\mimprovised We say that a function between complete lattices is a \term{homomorphism of \hi{complete} lattices} if it preserves arbitrary joins and meets.

    Obviously every homomorphism of complete lattices is obviously a lattice homomorphism and, by \fullref{thm:def:lattice/homomorphism_preserves_order}, also an order homomorphism.

    \thmitem{def:complete_lattice/opposite}\mcite[7]{Birkhoff1967} The \hyperref[def:preordered_set/opposite]{dual} \( X^{\opcat} \) of a complete lattice \( X \) is again a complete lattice.

    \thmitem{def:complete_lattice/category} Complete lattices and their homomorphisms form a subcategory of the category \( \cat{Lat} \) of lattices.
  \end{thmenum}
\end{definition}

\begin{proposition}\label{thm:complete_semilattice}\mcite[lemma 34]{Gratzer2011}
  If a partially ordered set has arbitrary joins (resp. meets), then it also has arbitrary meets (resp. joins).
\end{proposition}
\begin{comments}
  \item This proposition implies that the concept of \hyperref[def:semilattice]{semilattices} only makes sense for non-complete lattices.

  \item It is not sufficient for non-empty joins or meets to exist --- see \fullref{ex:def:semilattice/tree}.
\end{comments}
\begin{proof}
  To obtain the meet of an arbitrary set, we can simply take the join of all its lower bounds.
\end{proof}

\begin{proposition}\label{ex:def:complete_lattice}
  We list several examples of \hyperref[def:complete_lattice]{(in)complete lattices}:
  \begin{thmenum}
    \thmitem{ex:def:complete_lattice/rational} \Fullref{thm:def:lattice/totally_ordered} implies that the ordered field \( \BbbQ \) of \hyperref[def:rational_numbers]{rational numbers} is a lattice.

    It is not a complete lattice --- \fullref{thm:nth_root_is_not_rational} implies that, whenever \( p \) is a prime number, the set
    \begin{equation*}
      \set{ x^2 < p \given x \in \BbbQ }
    \end{equation*}
    has no supremum.

    \thmitem{ex:def:complete_lattice/real} The \hyperref[def:dedekind_macnielle_completion]{Dedekind-MacNeille completion} of a partially ordered set is a complete lattice.

    In particular, the set \( \BbbR \cup \set{ -\infty, \infty } \) of \hyperref[def:extended_real_numbers]{extended real numbers} is a complete lattice. Removing the infinite points would make the set unbounded, which in turn would make it incomplete.
  \end{thmenum}
\end{proposition}

\begin{proposition}\label{thm:def:complete_lattice}
  \hyperref[def:complete_lattice]{Complete lattices} have the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:complete_lattice/distributivity_inequality} For any element \( x \) and any family \( \seq{ y_k }_{k \in \mscrK} \), we have
    \begin{align}
      x \vee \parens[\Big]{ \bigwedge_{k \in \mscrK} y_k } &\geq \bigwedge_{k \in \mscrK} (x \vee y_k), \label{eq:thm:def:complete_lattice/distributivity_inequality/join_over_meet} \\
      x \wedge \parens[\Big]{ \bigvee_{k \in \mscrK} y_k } &\geq \bigvee_{k \in \mscrK} (x \wedge y_k). \label{eq:thm:def:complete_lattice/distributivity_inequality/meet_over_join}
    \end{align}

    \thmitem{thm:def:complete_lattice/finite} Every finite \hyperref[def:lattice]{lattice} is complete.

    \thmitem{thm:def:complete_lattice/bounded} Every complete lattice is \hyperref[def:extremal_points/bounds]{bounded}.

    \thmitem{thm:def:complete_lattice/embedding} Every \hyperref[def:preordered_set/homomorphism]{order embedding} between complete lattices is an \hyperref[def:lattice/homomorphism]{embedding of complete lattices}.
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:complete_lattice/distributivity_inequality} Our proof of \fullref{thm:def:lattice/distributivity_inequality} can be adapted straightforwardly.

  \SubProofOf{thm:def:complete_lattice/finite} We can use induction to define joins and meets for arbitrary non-zero subsets of a finite lattice. It remains to note that the join of the empty set is the meet of the entire lattice, and similarly for the meet of the empty set.

  \SubProofOf{thm:def:complete_lattice/bounded} Trivial.

  \SubProofOf{thm:def:complete_lattice/embedding} Our proof of \fullref{thm:def:lattice/embedding} can be adapted straightforwardly.
\end{proof}

\paragraph{Lattice fixed points}

\begin{definition}\label{def:fixed_point}\mcite[286]{Golan2010}
  Given an \hyperref[def:function/endofunction]{endofunction} \( f: A \to A \) on an arbitrary \hyperref[def:set]{set} \( A \), we call \( x \in A \) a \term[bg=неподвижна точка (\cite[138]{Боянов2008}), ru=неподвижная точка (\cite[23]{Зорич2019Том1})]{fixed point} of \( f \) if \( f(x) = x \).
\end{definition}

\begin{theorem}[Knaster-Tarski theorem]\label{thm:knaster_tarski_theorem}\mcite[thm. 1]{Tarski1955}
  The \hyperref[def:fixed_point]{fixed points} of an \hyperref[def:order_function]{order-preserving} \hyperref[def:function/endofunction]{endofunction} in a \hyperref[def:complete_lattice]{complete lattice} form a complete sublattice.
\end{theorem}
\begin{comments}
  \item In particular, the function has at least one fixed point.
\end{comments}
\begin{proof}
  Let \( (X, \leq) \) be a complete lattice and let \( f: X \to X \) be an order-preserving function. Denote by \( F \) the set of all fixed points of \( X \).

  \SubProof{Proof that \( X \) has a least fixed point} Define
  \begin{equation*}
    D \coloneqq \set{ x \in X \given f(x) \leq x }.
  \end{equation*}

  At this point, we do not know whether \( D \) is empty.

  Since the lattice is complete, we can take \( l \coloneqq \inf D \). Then, for every \( y \) with \( f(y) \leq y \), we have \( l \leq y \), and thus \( f(l) \leq f(y) \). Hence,
  \begin{equation*}
    f(l) \leq f(y) \leq y.
  \end{equation*}

  Thus, \( f(l) \) is a lower bound of \( D \). But \( l \) is the greatest lower bound, hence
  \begin{equation*}
    f(l) \leq l.
  \end{equation*}

  We obtain that \( l \) belongs to \( D \). Furthermore, \( f(l) \leq l \) implies \( f(f(l)) \leq f(l) \), thus \( f(l) \) also belongs to \( D \). Since \( l \) is a lower bound of \( D \), we have
  \begin{equation*}
    l \leq f(l).
  \end{equation*}

  Therefore, \( l \) is a fixed point of \( f \). Furthermore, \( l \) is the least element in \( D \), which is a superset of \( F \), so \( l \) is the least fixed point of \( X \).

  \SubProof{Proof that every subset of \( F \) has a supremum in \( F \)} We have shown that \( F \) is nonempty. Let \( G \) be some subset of \( F \). We will show that \( G \) has a supremum in \( F \).

  Define
  \begin{equation*}
    s \coloneqq \sup G.
  \end{equation*}

  We do not know whether this element \( s \) belongs to \( F \). We must find an upper bound of \( G \) belonging to \( F \).

  First note that \( f(s) \) is also an upper bound of \( G \) because, for any \( g \in G \), we have \( g \leq s \), hence
  \begin{equation*}
    g = f(g) \leq f(s).
  \end{equation*}

  Then the \hyperref[def:order_interval/unbounded]{final segment} \( X_{\geq s} \), which is a complete lattice, is \hyperref[def:invariant_subset]{invariant} under \( f \). We can thus restrict \( f \) to \( X_{\geq s} \).

  By what we have already shown, \( X_{\geq s} \) contains a least fixed point of \( f \). This fixed point is an upper bound of \( G \), thus it is the supremum of \( G \) in \( F \).

  \SubProof{Proof that every subset of \( F \) has an infimum in \( F \)} We can regard \( (F, \geq) \) as an ordered subset of \( (X, \geq) \). Then, by what we have already shown, if \( G \) is a subset of \( X \), then \( G \) has a supremum in \( (F, \geq) \). This is precisely the infimum of \( G \) in \( (F, \leq) \).
\end{proof}

\paragraph{Modular lattices}

\begin{definition}\label{def:modular_lattice}\mcite[13]{Birkhoff1967}
  We say that a \hyperref[def:lattice]{lattice} is \term[ru=модулярная (решётка) (\cite[def. 4.6]{Гуров2013})]{modular} if the following axiom holds:
  \begin{equation}\label{eq:def:modular_lattice}
    \xi \leq \zeta \rightarrow \parens[\Big]{ \xi \vee (\eta \wedge \zeta) \doteq (\xi \vee \eta) \wedge \zeta }.
  \end{equation}
\end{definition}
\begin{comments}
  \item \Fullref{thm:def:lattice/modularity_inequality} demonstrates that an inequality in \eqref{eq:def:modular_lattice} always holds.
\end{comments}

\begin{example}\label{ex:def:modular_lattice}
  We list examples of \hyperref[def:modular_lattice]{modular lattices}:
  \begin{thmenum}
    \thmitem{ex:def:modular_lattice/absorption} Whenever the values for \( \xi \) and \( \zeta \) coincide, the modular identity \eqref{eq:def:modular_lattice} holds due to absorption. Indeed, if \( \xi \mapsto x \), \( \zeta \mapsto x \) and \( \eta \mapsto y \), we have
    \begin{equation*}
      x \vee (y \wedge x)
      \reloset {\eqref{eq:thm:lattice_operation_characterization/absorption/join}} =
      x
      \reloset {\eqref{eq:thm:lattice_operation_characterization/absorption/meet}} =
      x \wedge (y \vee x).
    \end{equation*}

    \thmitem{ex:def:modular_lattice/two_element} The two-element lattice \( \set{ \bot, \top } \) is clearly modular. Indeed, due to \fullref{ex:def:modular_lattice/absorption}, it remains to consider the case where \( \xi \mapsto \bot \), \( \zeta \mapsto \top \) and \( \eta \mapsto y \), where \( y \) ranges over the two possible values. Then
    \begin{align*}
      \bot \vee (y \wedge \top)
      =
      \bot \vee y
      =
      (\bot \vee y) \wedge \top.
    \end{align*}

    More generally, \fullref{thm:def:distributive_lattice/modular} implies that any \hyperref[def:distributive_lattice]{distributive lattice} is modular, and most lattices we will encounter will be distributive.

    \thmitem{ex:def:modular_lattice/pentagon}\mcite[109]{Gratzer2011} An example of a non-modular lattice is the \term{pentagon}
    \begin{equation*}\taglabel[\logic{\( N_5 \)}]{eq:ex:def:modular_lattice/pentagon}
      \begin{aligned}
        \includegraphics[page=1]{output/ex__def__modular_lattice}
      \end{aligned}
    \end{equation*}

    It is not modular because \( a \leq b \), yet
    \begin{equation*}
      a \vee (\underbrace{c \wedge b}_{\bot})
      =
      a
      \neq
      b
      =
      (\underbrace{a \vee c}_{\top}) \wedge b.
    \end{equation*}
  \end{thmenum}
\end{example}

\begin{proposition}\label{thm:modular_lattice_characterization}\mcite[thm. 102(i)]{Gratzer2011}
  A \hyperref[def:lattice]{lattice} is \hyperref[def:modular_lattice]{modular} if and only if no \hyperref[def:lattice/submodel]{sublattice} is isomorphic to the pentagon lattice \eqref{ex:def:modular_lattice/pentagon}.
\end{proposition}
\begin{proof}
  \SufficiencySubProof If \( Y \) is a sublattice of \( X \) isomorphic to \( N_5 \), then the modular law does not hold for \( X \) with the same counterexample \fullref{ex:def:modular_lattice/pentagon} as for \( N_5 \). Therefore, if \( X \) is modular, \( N_5 \) cannot be isomorphic to a sublattice of \( X \).

  \NecessitySubProof Suppose that \( N_5 \) is not a sublattice of \( X \).

  Aiming at a contradiction, suppose that \( x \leq z \) and we have the following counterexample to the modular law:
  \begin{equation*}
    x \vee (y \wedge z) \neq (x \vee y) \wedge z.
  \end{equation*}

  Then \( y \) is not comparable to neither \( x \) nor \( z \):
  \begin{itemize}
    \item If \( y \leq x \leq z \), then
    \begin{equation*}
      x \vee (\underbrace{y \wedge z}_{y}) = x = (\underbrace{x \vee y}_{x}) \wedge z,
    \end{equation*}
    and we have assumed that the modular law does not hold.

    \item If \( x \leq y \leq z \), then
    \begin{equation*}
      x \vee (\underbrace{y \wedge z}_{y}) = y = (\underbrace{x \vee y}_{y}) \wedge z,
    \end{equation*}
    which is again a contradiction.

    \item If \( x \leq z \leq y \), then
    \begin{equation*}
      x \vee (\underbrace{y \wedge z}_{z}) = z = (\underbrace{x \vee y}_{y}) \wedge z,
    \end{equation*}
    which is again a contradiction.
  \end{itemize}

  Not only is \( y \) not comparable to both \( x \) and \( z \), but, as shown in \fullref{ex:def:modular_lattice/absorption}, \( x \) and \( z \) cannot be equal. Therefore, \( X \) has the following pentagonal sublattice:
  \begin{equation}\label{eq:thm:modular_lattice_characterization/pentagonal}
    \begin{aligned}
      \includegraphics[page=1]{output/thm__modular_lattice_characterization}
    \end{aligned}
  \end{equation}

  But we have assumed that no sublattice of \( X \) is isomorphic to \( N_5 \). The obtained contradiction shows that the modular axiom \eqref{eq:def:modular_lattice} holds for any triple of elements in \( X \). Then \( X \) is modular.
\end{proof}

\paragraph{Distributive lattices}

\begin{definition}\label{def:distributive_lattice}\mcite[12]{Birkhoff1967}
  We say that a \hyperref[def:lattice]{lattice} is \term[ru=дистрибутивная (решётка) (\cite[def. 4.7]{Гуров2013})]{distributive} if the following axioms hold:
  \begin{align}
    \xi \vee (\eta \wedge \zeta) &= (\xi \vee \eta) \wedge (\xi \vee \zeta), \label{eq:def:distributive_lattice/join_over_meet} \\
    \xi \wedge (\eta \vee \zeta) &= (\xi \wedge \eta) \vee (\xi \wedge \zeta). \label{eq:def:distributive_lattice/meet_over_join}
  \end{align}
\end{definition}
\begin{comments}
  \item \Fullref{thm:def:lattice/distributivity_inequality} demonstrates that an inequality in \eqref{eq:def:distributive_lattice/join_over_meet} and \eqref{eq:def:distributive_lattice/meet_over_join} always holds.
\end{comments}

\begin{remark}\label{rem:lattice_polynomials}
  Let \( L \) be a \hyperref[def:extremal_points/bounds]{bounded} \hyperref[def:distributive_lattice]{distributive lattice}.

  Consider the \hyperref[ex:def:semiring/lattice]{join-meet semiring} \( (L, \vee, \wedge) \). Given a set \( \mscrX \) of indeterminates, we can form the \hyperref[def:polynomial_algebra]{polynomial semiring} \( L[\mscrX] \) over the \hyperref[ex:def:semiring/lattice]{join-meet semiring}.

  \hyperref[def:polynomial_algebra/monomials]{Monomials} are simply finite meets, for example \( X \wedge Y \) and \( X \wedge Z \). A polynomial is then a finite join of finite meets, for example the distributivity axiom \eqref{eq:def:distributive_lattice/meet_over_join} implies that the polynomial
  \begin{equation*}
    p(X, Y, Z) = (X \wedge Y) \vee (X \wedge Z)
  \end{equation*}
  corresponds to the product (meet) of the polynomials \( X \) and \( Y \vee Z \). Polynomials over two-element lattice \( \set{ T, F } \) correspond to \hyperref[def:positive_formula]{positive} \hyperref[def:propositional_formula]{propositional formulas} in \hyperref[def:cnf_and_dnf]{disjunctive normal forms}.

  \incite[sec. II.5]{Birkhoff1967} discusses only lattice polynomials \enquote{with no coefficients}, that is, whose coefficients are \( \top \). \incite[sec. I.4]{Gratzer2011} allows polynomials to have non-identity coefficients, for example
  \begin{equation*}
    q(X, Y, Z) = (a \wedge X \wedge Y) \vee (b \wedge X \wedge Z).
  \end{equation*}

  \incite{Marichal2007} calls the latter \enquote{weighted polynomials}.
\end{remark}

\begin{proposition}\label{thm:def:distributive_lattice}
  \hyperref[def:distributive_lattice]{Distributive lattices} have the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:distributive_lattice/modular} Distributive lattices are \hyperref[def:modular_lattice]{modular}.
    \thmitem{thm:def:distributive_lattice/totally_ordered} Every \hyperref[def:totally_ordered_set]{totally ordered set} is a distributive lattice.
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:distributive_lattice/modular} Modularity follows from distributivity similarly to how \fullref{thm:def:lattice/modularity_inequality} follows from \fullref{thm:def:lattice/distributive_inequality}.

  \SubProofOf{thm:def:distributive_lattice/totally_ordered} Let \( (P, \leq) \) be totally ordered. \Fullref{thm:def:lattice/totally_ordered} implies that it is a lattice. For any three elements \( x \), \( y \) and \( z \), we have the following possibilities:
  \begin{itemize}
    \item If \( x \leq \min\set{ y, z } = y \wedge z \), then
    \begin{equation*}
      x \vee (y \wedge z) = y \wedge z = (x \vee y) \wedge (x \vee z).
    \end{equation*}

    \item If \( x \geq \min\set{ y, z } = y \wedge z \), then
    \begin{equation*}
      x \vee (y \wedge z) = x = \underbrace{(x \vee y) \wedge (x \vee z)}_{\T*{one of the two is} x}
    \end{equation*}
  \end{itemize}

  This shows \eqref{eq:def:distributive_lattice/meet_over_join}. The other law \eqref{eq:def:distributive_lattice/join_over_meet} is shown analogously. Therefore, \( P \) is distributive.
\end{proof}

\begin{example}\label{ex:def:distributive_lattice}
  We list examples of \hyperref[def:distributive_lattice]{distributive lattices}:
  \begin{thmenum}
    \thmitem{ex:def:distributive_lattice/two_element} The two element lattice \( \set{ \top, \bot } \) is distributive because of the bounded absorption laws from \fullref{thm:def:lattice/bounded_absorption}.

    More generally, every \hyperref[def:heyting_algebra]{Heyting algebra} is distributive, as well as every \hyperref[def:totally_ordered_set]{totally ordered set}.

    \thmitem{ex:def:distributive_lattice/diamond}\mcite[109]{Gratzer2011} An example of a \hyperref[def:modular_lattice]{modular} but non-distributive lattice is the \term{diamond}\footnote{\incite{Birkhoff1967} uses the notation \enquote{\( M_5 \)}, but \incite{Gratzer2011} and \incite{DaveyPriestley2002} prefer \enquote{\( M_3 \)}}
    \begin{equation*}\taglabel[\logic{\( M_3 \)}]{eq:ex:def:distributive_lattice/diamond}
      \begin{aligned}
        \includegraphics[page=1]{output/ex__def__distributive_lattice}
      \end{aligned}
    \end{equation*}

    It is modular as a consequence of \fullref{thm:modular_lattice_characterization}. Yet, it is not distributive because
    \begin{equation*}
      a \vee (b \wedge c) = a \vee \bot = a
      \neq
      \top = \top \vee \top = (a \vee c) \wedge (b \vee c).
    \end{equation*}
  \end{thmenum}
\end{example}

\begin{proposition}\label{thm:distributive_modular_lattice_characterization}\mcite[thm. 102(ii)]{Gratzer2011}
  A \hyperref[def:modular_lattice]{modular lattice} is \hyperref[def:modular_lattice]{distributive} if and only if no \hyperref[def:lattice/submodel]{sublattice} is isomorphic to the diamond lattice \eqref{ex:def:distributive_lattice/diamond}.
\end{proposition}
\begin{proof}
  \SufficiencySubProof If \( Y \) is a sublattice of \( X \) isomorphic to \( M_3 \), distributivity does not hold for \( X \) with the same counterexample \fullref{ex:def:distributive_lattice/diamond} as for \( M_3 \). Therefore, if \( X \) is distributive, \( M_3 \) cannot be isomorphic to a sublattice of \( X \).

  \NecessitySubProof Suppose that \( M_3 \) is not a sublattice of the modular lattice \( X \).

  Aiming at a contradiction, suppose that we have the following counterexample to distributivity:
  \begin{equation*}
    x \vee (y \wedge z) \neq (x \wedge y) \vee (x \wedge z).
  \end{equation*}

  Then \( x \), \( y \) and \( z \) are not pairwise comparable. Indeed, we have the following possibilities:
  \begin{itemize}
    \item If all three are comparable, then \( \set{ x, y, z } \) is a chain, which is distributive by \fullref{thm:def:distributive_lattice/totally_ordered}. This contradicts our assumption that the distributive laws fail for \( x \), \( y \) and \( z \).

    \item If only two are comparable, say \( x \leq z \), then we obtain the \hyperref[ex:def:modular_lattice/pentagon]{pentagonal lattice} \eqref{eq:thm:modular_lattice_characterization/pentagonal}, which contradicts the modularity of \( X \).

    \item It remains for \( x \), \( y \) and \( z \) not to be comparable.
  \end{itemize}

  We thus obtain the following diamond:
  \begin{equation}\label{eq:thm:distributive_lattice_characterization/diamond}
    \begin{aligned}
      \includegraphics[page=1]{output/thm__distributive_lattice_characterization}
    \end{aligned}
  \end{equation}

  But we have assumed that no sublattice of \( X \) is isomorphic to \( M_3 \). The obtained contradiction shows that meets always distribute over joins, that is, \eqref{eq:def:distributive_lattice/meet_over_join} holds for any triple of elements in \( X \). The dual law \eqref{eq:def:distributive_lattice/join_over_meet} holds.

  Therefore, \( X \) is distributive.
\end{proof}

\begin{corollary}\label{thm:distributive_lattice_characterization}\mcite[thm. 101]{Gratzer2011}
  A \hyperref[def:lattice]{lattice} is \hyperref[def:modular_lattice]{distributive} if and only if no \hyperref[def:lattice/submodel]{sublattice} is isomorphic to either the pentagon lattice \eqref{ex:def:modular_lattice/pentagon} nor the diamond lattice \eqref{ex:def:distributive_lattice/diamond}.
\end{corollary}
\begin{proof}
  Follows from \fullref{thm:modular_lattice_characterization} and \fullref{thm:distributive_modular_lattice_characterization}.
\end{proof}

\paragraph{Ideals and filters in lattices}

\begin{definition}\label{def:lattice_ideal}
  Fix some \hyperref[def:lattice]{lattice} \( X \). We will define concepts analogous to those from \fullref{subsec:semiring_ideals}. In some cases the notions coincide --- see \fullref{thm:lattice_ideal_as_semiring_ideal}.

  \item
  \begin{TwoColumns}
    We call the subset \( I \) a \term[ru=решёточный идеал (\cite[def. 4.5]{Гуров2013})]{lattice ideal} if it is closed under joins with elements of itself and under arbitrary meets. Explicitly,
    \begin{align}
      &i \in I \T{and} j \in I \T{imply that} i \vee j \in I, \label{eq:def:lattice_ideal/lattice_join} \\
      &i \in I \T{and} x \in X \T{imply that} i \wedge x \in I. \label{eq:def:lattice_ideal/lattice_meet}
    \end{align}
  \BeginSecondColumn
    \hyperref[thm:lattice_duality]{Dually}, we call the subset \( F \) a \term[ru=решёточный фильтр (\cite[def. 4.5]{Гуров2013})]{filter} if it is closed under joins with elements of itself and under arbitrary meets. Explicitly,
    \begin{align}
      &i \in I \T{and} x \in X \T{imply that} i \vee x \in I, \label{eq:def:lattice_ideal/filter_join} \\
      &i \in I \T{and} j \in I \T{imply that} i \wedge j \in I. \label{eq:def:lattice_ideal/filter_meet}
    \end{align}
  \end{TwoColumns}

  Both ideals and filters are clearly \hyperref[def:lattice/submodel]{sublattices}. Equivalent conditions are given in \fullref{thm:def:lattice_ideal/directed_and_closed}.

  \begin{thmenum}
    \thmitem{def:lattice_ideal/principal}\mcite[32]{Gratzer2011}
    \begin{TwoColumns}
      We define the \term[ru=главный (идеал) (\cite[140]{Гуров2013})]{principal ideal} of \( x \) as the \hyperref[def:order_interval/unbounded]{closed initial segment}
      \begin{equation*}
        \set{ y \in X \given y \leq x }.
      \end{equation*}
    \BeginSecondColumn
      Dually, we define the \term{principal filter} of \( x \) as the \hyperref[def:order_interval/unbounded]{closed final segment}
      \begin{equation*}
        \set{ y \in X \given y \geq x }.
      \end{equation*}
    \end{TwoColumns}

    \thmitem{def:lattice_ideal/prime}\mcite[28]{Birkhoff1967}
    \begin{TwoColumns}
      We call a proper ideal \( I \) \term{prime} if \( {x \wedge y \in I} \) implies that \( {x \in I} \) or \( {y \in I} \) (or both).
    \BeginSecondColumn
      Dually, we call a proper filter \( F \) \term[ru=простой (фильтр) (\cite[183]{Гуров2013})]{prime} if \( {x \vee y \in F} \) implies that \( {x \in F} \) or \( {y \in F} \).
    \end{TwoColumns}

    \thmitem{def:lattice_ideal/completely_prime}\mcite[41]{Johnstone1982}
    \begin{TwoColumns}
      A stronger condition is for the ideal to be \term{completely prime}, meaning that \( \bigwedge_{k \in \mscrK} x_k \in I \) implies that \( x_k \in I \) for at least one \( k \in \mscrK \).
    \BeginSecondColumn
      Dually, we call a proper filter \( F \) \term{completely prime} if \( \bigvee_{k \in \mscrK} x_k \in I \) implies that \( x_k \in I \) for at least one \( k \in \mscrK \).
    \end{TwoColumns}

    \thmitem{def:lattice_ideal/maximal}\mcite[28]{Birkhoff1967}
    \begin{TwoColumns}
      We call a proper ideal \term{maximal} if it is \hyperref[def:extremal_points/maximal_and_minimal_element]{maximal} with respect to set inclusion.
    \BeginSecondColumn
      Dually, we call a proper filter is \term{maximal} if it is maximal with respect to inclusion.
    \end{TwoColumns}
  \end{thmenum}
\end{definition}

\begin{definition}\label{def:closed_ordered_subset}\mcite[113]{Enderton1977Sets}
  We say that the subset \( A \) of the \hyperref[def:partially_ordered_set]{partially ordered set} \( (P, \leq) \) is \term{downward closed} (resp. \term{upward closed}) if, for every \( x \) in \( A \), the entire initial segment \( P_{<x} \) (resp. final segment \( P_{>x} \)) is contained in \( A \).
\end{definition}

\begin{definition}\label{def:directed_set}\mcite[37]{Скорняков1990}
  We say that a subset \( A \) of a \hyperref[def:preordered_set]{preordered set} is \term[bg=насочено надясно (множество) (\cite[10]{Проданов1982}), ru=направленное вверх, en=upward directed (\cite[25]{Johnstone1982})]{upward directed} (resp. \term[ru=направленное вниз]{downward directed}) if every two elements of \( A \) have an \hyperref[def:extremal_points/bounds]{upper bound} (resp. lower bound).
\end{definition}
\begin{comments}
  \item We do not care how many upper bounds exist and how they are related, we simply need one upper bound to exist for every pair of elements of \( P \).
\end{comments}

\begin{proposition}\label{thm:def:lattice_ideal}
  The \hyperref[def:lattice_ideal]{ideals and filters} of a lattice have the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:lattice_ideal/directed_and_closed} A set is an ideal if and only if it is \hyperref[def:directed_set]{upward directed} and \hyperref[def:closed_ordered_subset]{downward closed}.

    Dually, a set is a filter if it is \hyperref[def:directed_set]{downward directed} and \hyperref[def:closed_ordered_subset]{upward closed}.

    \thmitem{thm:def:lattice_ideal/prime_complement} The complement of a \hyperref[def:lattice_ideal/prime]{prime ideal} (resp. \hyperref[def:lattice_ideal/prime]{prime filter}) is a prime filter (resp. ideal).

    \thmitem{thm:def:lattice_ideal/completely_prime_complement} A set is a prime \hyperref[def:lattice_ideal/principal]{principal} ideal (resp. filter) if and only if its complement is \hyperref[def:lattice_ideal/completely_prime]{completely prime} filter (resp. ideal).
  \end{thmenum}
\end{proposition}
\begin{proof}
  We will prove the statements only for ideals and complements of ideals. The statements for complements of filters will follow via \hyperref[thm:lattice_duality]{duality}.

  \SubProofOf{thm:def:lattice_ideal/directed_and_closed}

  \SufficiencySubProof* Suppose that \( I \) is an ideal.

  \begin{itemize}
    \item It is upward directed because, if \( x \in I \) and \( y \in I \), then, since \( I \) is closed under joins, \( x \vee y \in I \).
    \item It is downward closed because, if \( i \in I \) and \( x \leq i \), then \( x = i \wedge x \in I \).
  \end{itemize}

  \NecessitySubProof* Conversely, suppose that \( I \) is upward directed and downward closed.

  \begin{itemize}
    \item It is closed under joins because if \( x \in I \) and \( y \in I \), then directedness gives us an upper bound \( z \). Then \( x \vee y \leq z \), and since \( I \) is downward closed, we conclude that \( x \vee y \in I \).

    \item It is closed under meets with arbitrary elements of the lattice because if \( i \in I \), then \( x \wedge i \leq i \) and downward closedness implies \( x \wedge i \in I \).
  \end{itemize}

  \SubProofOf{thm:def:lattice_ideal/prime_complement} Let \( I \) be a prime ideal of the lattice \( X \). Define \( I \coloneqq X \setminus F \). Then \( F \) is a filter:
  \begin{itemize}
    \item For any two elements \( i \) and \( j \) of \( F \), either \( i \wedge j \) is in \( I \) or in \( F \). If we suppose that \( i \wedge j \) is in \( I \), since \( I \) is prime, then either \( i \) or \( j \) must be in \( I \) --- a contradiction. Thus, \( i \wedge j \) is in \( F \).

    \item For any element \( x \) of \( X \) and \( i \) in \( F \), either \( i \vee x \) is in \( I \) or in \( F \). If we suppose that \( i \vee x \) is in \( I \), then, since \( I \) is an ideal, we would obtain that \( i = i \wedge (i \vee x) \) belongs to \( I \) --- again, a contradiction. Thus, \( i \vee x \) is in \( F \).
  \end{itemize}

  Furthermore, let \( i \vee j \) be in \( F \). If both \( i \) and \( j \) are in \( I \), since \( I \) is an ideal, the join \( i \vee j \) must be in \( I \) --- a contradiction. Thus, either \( i \) or \( j \) or both must be in \( F \).

  Generalizing, we conclude that \( F \) is a prime filter.

  \SubProofOf{thm:def:lattice_ideal/completely_prime_complement} Consider a subset \( I \) of \( X \) and denote its complement by \( F \).

  \SufficiencySubProof* Suppose that \( I \) be a principal prime ideal with generator \( p \). \Fullref{thm:def:lattice_ideal/prime_complement} implies that \( F \) is a filter. We will show that it is completely prime.

  Suppose that the join \( \bigvee_{k \in \mscrK} i_k \) belongs to \( F \). Furthermore, suppose that \( i_k \) belongs to \( I \) for each \( k \in \mscrK \). Then \( i_k \leq p \) for every \( i_k \), and hence
  \begin{equation*}
    \bigvee_{k \in \mscrK} i_k \leq p.
  \end{equation*}

  The latter means that \( \bigvee_{k \in \mscrK} i_k \) belongs to \( I \), which contradicts our assumption. Therefore, there exists at least one index \( k \in \mscrK \) such that \( x_k \) belongs to \( F \).

  We conclude that \( F \) is a completely prime filter.

  \NecessitySubProof* Now suppose that \( F \) is a completely prime filter. \Fullref{thm:def:lattice_ideal/prime_complement} implies that \( I \) is a prime ideal. Let
  \begin{equation*}
    p \coloneqq \bigvee I.
  \end{equation*}

  Clearly \( I \) belongs to the principal ideal of \( p \). We will now show the converse.

  Let \( x \leq p \). Suppose that \( x \) belongs to \( F \). Then \( p \) also belongs to \( F \) since \( F \) is upwards closed. But \( F \) is completely prime, thus at least one element of \( I \) must belong to \( F \) --- a contradiction. We conclude that \( x \leq p \) implies that \( x \) belongs to \( I \).

  Therefore, \( I \) coincides with the principal ideal of \( p \).
\end{proof}

\begin{example}\label{ex:def:lattice_ideal}
  We list examples of \hyperref[def:lattice_ideal]{lattice ideals and filters}:
  \begin{thmenum}
    \thmitem{ex:def:lattice_ideal/trivial} In a bounded lattice, the simplest ideal is \( \set{ \bot } \) and the simplest filter is \( \set{ \top } \).

    \thmitem{ex:def:lattice_ideal/natural_number_lattice_ideal} Consider the (zero-based) natural number divisibility lattice from \fullref{thm:natural_number_divisibility_lattice}, whose join is \( \lcm(a, b) \) and whose meet is \( \gcd(a, b) \).

    For any natural number \( n \), the initial segment
    \begin{equation*}
      D_n \coloneqq \set{ k \in \BbbN \colon k \mid n }
    \end{equation*}
    of all divisors of \( n \) is a lattice ideal in \( \BbbN \), actually the principal ideal of \( n \).

    \begin{figure}[!ht]
      \centering
      \includegraphics[page=1]{output/ex__lattice_ideals}
      \caption{A Hasse diagram for the divisors of \( 24 \).}
      \label{fig:ex:def:lattice_ideal/lattice}
    \end{figure}

    We can thoroughly verify that \( D_n \) is a lattice ideal:
    \begin{itemize}
      \item If \( n \) is a common multiple of \( k \) and \( m \), their least common multiple \( \lcm(k, m) \) divides \( n \), thus \( D_n \) is closed under joins.
      \item If \( k \) divides \( n \), then, for any \( m \), the meet \( \gcd(k, m) \) is a divisor of \( k \), hence also a divisor of \( n \) --- thus \( D_n \) is closed under arbitrary meets.
    \end{itemize}

    Furthermore, if \( p \) is a prime number, then \( D_p = \set{ 1, p } \), and \( D_n \) is vacuously a prime ideal.

    \thmitem{ex:def:lattice_ideal/natural_number_lattice_filter} For any natural number \( n \), the principal semiring \hi{ideal}
    \begin{equation*}
      \braket{ n } \coloneqq \set{ 0, n, 2n, 3n, \ldots } = \set{ k \in \BbbN \colon n \mid k }
    \end{equation*}
    is a lattice \hi{filter}, actually the principal filter of \( n \).

    We can thoroughly verify that \( \braket{ n } \) is a lattice filter:
    \begin{itemize}
      \item If \( n \) is a divisor of \( k \), then \( n \) divides \( \lcm(k, m) \) for any \( m \), thus \( \braket{ n } \) is closed under arbitrary joins.
      \item If \( n \) is a common divisor of \( k \) and \( m \), it divides their greatest common divisor \( \gcd(k, m) \), thus \( \braket{ n } \) is closed under meets.
    \end{itemize}

    Furthermore, if \( p \) is a \hyperref[def:prime_number]{prime number}, then \( \braket{ p } \) is a prime lattice ideal because, if \( p \) divides \( \gcd(k, m) \), it also divides \( km \), and \fullref{thm:euclids_lemma} implies that \( p \) divides \( k \) or \( m \).

    \thmitem{ex:def:lattice_ideal/subgroups} Given a \hyperref[def:group]{group} \( G \) and a proper \hyperref[def:normal_subgroup]{normal subgroup} \( N \), consider the \hyperref[thm:substructures_form_complete_lattice]{lattice of subgroups} \( L_G \) of \( G \) and the lattice \( L_N \) of subgroups of \( N \).

    Then \( L_N \) is a sublattice of \( L_G \). In order to verify that it is an ideal, we must show that it is closed under arbitrary meets, that is, \( L_N \) contains the meet \( K \cap H \) whenever \( K \in L_N \) and \( H \in L_G \). But this is trivial since \( K \cap H \subseteq K \subseteq N \).

    By \hyperref[thm:lattice_duality]{duality}, the sublattice of subgroups containing \( N \) (rather than contained in \( N \)) is a filter (rather than an ideal).

    \thmitem{ex:def:lattice_ideal/maximal_not_prime}\mcite{MathSE:non_prime_maximal_ideal} For non-distributive lattices, maximal ideals may fail to be prime. For example, consider the diamond \eqref{ex:def:lattice_ideal/subgroups}.

    Consider the ideal \( \set{ \bot, a } \). If we add \( b \) or \( c \), we would also need to add \( \top = a \vee b = a \vee c \), and if we add \( \top \), we would need to add \( b = \top \wedge b \) and \( c = \top \wedge c \). Therefore, \( \set{ \bot, a } \) is maximal.

    But it is not prime because it contains \( b \wedge c = \bot \), but neither \( b \) nor \( c \).
  \end{thmenum}
\end{example}

\begin{proposition}\label{thm:lattice_divisibility}
  Identify a \hyperref[def:extremal_points/bounds]{bounded} \hyperref[def:distributive_lattice]{distributive lattice} with its \hyperref[ex:def:semiring/lattice]{join-meet semiring}.

  Then the \hyperref[thm:semiring_divisibility_order]{divisibility (pre)order} \( \mid \) coincides with the dual order \( \geq \).
\end{proposition}
\begin{comments}
  \item We can instead identify the lattice with its meet-join semiring, but then the notions of semiring ideal and lattice ideal would not coincide.
\end{comments}
\begin{proof}
  We will show that \( x \mid y \) if and only if \( x \leq y \).

  \SufficiencySubProof Let \( x \mid y \). Then \( y \) equals \( x \vee m \) for some \( m \), thus
  \begin{equation*}
    y = x \vee m \geq x.
  \end{equation*}

  \NecessitySubProof Let \( x \leq y \). Then \( y = y \vee x \), hence \( x \mid y \).
\end{proof}

\begin{proposition}\label{thm:lattice_ideal_as_semiring_ideal}
  If we identify the \hyperref[def:extremal_points/bounds]{bounded} \hyperref[def:distributive_lattice]{distributive lattice} with its \hyperref[ex:def:semiring/lattice]{join-meet semiring}, then the \hyperref[def:lattice_ideal]{lattice ideals} are precisely the \hyperref[def:semiring_ideal]{semiring ideals}.

  Moreover, \hyperref[def:lattice_ideal/prime]{prime} and \hyperref[def:lattice_ideal/maximal]{maximal} lattice ideals are \hyperref[def:semiring_ideal/prime]{prime} and \hyperref[def:semiring_ideal/maximal]{maximal} semiring ideals.
\end{proposition}
\begin{comments}
  \item The same holds for \hyperref[def:lattice_ideal]{lattice filters} if we instead consider the \hyperref[ex:def:semiring/lattice]{meet-join semiring}.
\end{comments}
\begin{proof}
  Straightforward.
\end{proof}

\begin{definition}\label{def:lattice_prime_element}
  We say that the lattice element \( p \) is \term{prime} if any of the following equivalent conditions hold:
  \begin{thmenum}
    \thmitem{def:lattice_prime_element/direct} If \( x \wedge y \leq p \), then \( x \leq p \) or \( y \leq p \) (or both).
    \thmitem{def:lattice_prime_element/ideals}\mcite[61]{Johnstone1982} The \hyperref[def:lattice_ideal/principal]{principal ideal} of \( p \) is \hyperref[def:lattice_ideal/prime]{prime}.
  \end{thmenum}
\end{definition}

\paragraph{Moore closure operators}

\begin{definition}\label{def:extensive_function}\mcite[40]{Harzheim2005}
  We say that an \hyperref[def:function/endofunction]{endofunction} \( f \) on a \hyperref[def:partially_ordered_set]{partially ordered set} \( (P, \leq) \) is \term[en=extensive \cite[111]{Birkhoff1967}]{extensive} if \( x \leq f(x) \) for every \( x \) in \( P \).
\end{definition}
\begin{comments}
  \item \incite[40]{Harzheim2005} prefers the term \enquote{extensional}, while \incite[lemma 6.3.1]{Bergman2015} uses \enquote{increasing}. \incite[def. 2.12]{Гуров2013} uses \enquote{рефлексивный (оператор)} (\enquote{reflexive}).
\end{comments}

\begin{definition}\label{def:idempotent_function}\mcite[40]{Harzheim2005}
  We say that an \hyperref[def:function/endofunction]{endofunction} \( f \) on an arbitrary \hyperref[def:set]{set} \( A \) is \term{idempotent} if \( f(f(x)) = f(x) \) for every \( x \) in \( A \).
\end{definition}
\begin{comments}
  \item Idempotent functions are \hyperref[def:monoid_idempotent]{idempotent elements} in \hyperref[def:endomorphism_monoid]{endomorphism monoids}.
\end{comments}

\begin{definition}\label{def:moore_closure_operator}\mcite[40]{Harzheim2005}
  Let \( (P, \leq) \) be a \hyperref[def:partially_ordered_set]{partially ordered set}. We say that the function \( \cl: P \to P \) is a \term[ru=оператор замыкания (\cite[def. 4.12]{Гуров2013})]{Moore closure operator} in \( P \) if it is \hyperref[def:extensive_function]{extensive}, \hyperref[def:idempotent_function]{idempotent} and \hyperref[def:order_function/preserving]{order-preserving}.

  We say that \( x \) is \term[ru=замкнутый (\cite[def. 4.12]{Гуров2013})]{closed} with respect to \( \cl \) if \( x = \cl(x) \).
\end{definition}
\begin{comments}
  \item \Fullref{thm:closure_operator_minimality} gives an equivalent condition for an element to be closed while \fullref{thm:closure_operator_from_set_semilattice} simplifies defining closure operators on power sets.

  \item \incite[40]{Harzheim2005} and \incite[146]{DaveyPriestley2002} call such an operator simply a \enquote{closure operator}, \incite[def. 26]{Gratzer2011} uses \enquote{closure system}, \incite[111]{Birkhoff1967} uses \enquote{closure operation} but restricts the definition to lattices of subsets.

  We add the prefix \enquote{Moore} because of the related Moore families discussed in \fullref{def:moore_family}.
\end{comments}

\begin{proposition}\label{thm:closure_operator_minimality}
  For a given \hyperref[def:moore_closure_operator]{Moore closure operator}, we have \( \cl(x) = c \) if and only if \( c \) is the \hyperref[def:extremal_points/maximum_and_minimum]{least} of all closed elements greater than or equal to \( x \).
\end{proposition}
\begin{proof}
  Fix some element \( x \) and consider the set
  \begin{equation*}
    D \coloneqq \set{ d \geq x \given \cl(d) = d }.
  \end{equation*}

  Clearly \( \cl(x) \) belongs to \( D \) because \( \cl \) is extensional.

  \SufficiencySubProof Consider the closure \( \cl(x) \). Let \( d \geq x \) be an arbitrary closed element. We have \( x \leq d \), and since \( \cl \) preserves order, \( \cl(x) \leq \cl(d) = d \).

  Therefore, \( \cl(x) \) is a lower bound of \( D \) that belongs to \( D \), that is, the least element of \( D \).

  \NecessitySubProof Suppose that \( c \) is a minimum of \( D \). Then \( x \leq c \leq \cl(x) \). But
  \begin{equation*}
    \cl(x) \leq \underbrace{\cl(c)}_{c} \leq \underbrace{\cl(\cl(x))}_{\cl(x)},
  \end{equation*}
  hence
  \begin{equation*}
    \cl(x) = c.
  \end{equation*}
\end{proof}

\begin{definition}\label{def:moore_family}\mcite[111]{Birkhoff1967}
  We say that a family of subsets of an arbitrary \hyperref[def:set]{set} is a \term{Moore family} if it is closed under arbitrary (including empty) intersections.
\end{definition}

\begin{proposition}\label{thm:closure_operator_from_set_semilattice}
  Let \( X \) be some set and \( \mscrL \) be a \hyperref[def:moore_family]{Moore family} in \( X \). Then the following function is a \hyperref[def:moore_closure_operator]{Moore closure operator} on \( X \):
  \begin{equation*}
    \begin{aligned}
      &\cl: \pow(X) \to \mscrL, \\
      &\cl(A) \coloneqq \bigcap \set{ L \in \mscrL \given A \subseteq L }. \\
    \end{aligned}
  \end{equation*}
\end{proposition}
\begin{comments}
  \item This proposition implies that \( \cl(A) \) is the intersection of all closed sets containing \( A \).
  \item \Fullref{thm:closure_operator_minimality} implies that \( \cl(A) \) is the smallest closed set containing \( A \).
  \item This allows us to introduce a closure operator on arbitrary families that are closed under intersection --- including \hyperref[def:topological_space]{topological closed sets}, \hyperref[def:affine_hull]{affine hulls}, \hyperref[def:convex_hull]{convex hulls} and \hyperref[def:first_order_generated_substructure]{generated first-order substructures} (groups, rings, \( R \)-modules and lattices, among others --- see \fullref{ex:def:category_of_small_first_order_models}).
\end{comments}
\begin{proof}
  \SubProofOf[def:extensive_function]{extensiveness} The intersection \( \cl(A) \) of \( \set{ L \in \mscrL \given A \subseteq L } \) obviously contains \( A \).

  \SubProofOf[def:idempotent_function]{idempotence} Note that \( \cl(A) \) itself belongs to \( \mscrL \), thus
  \begin{equation*}
    \cl(\cl(A)) = \bigcap \set{ L \in \mscrL \given \cl(A) \subseteq L } = \cl(A).
  \end{equation*}

  \SubProofOf[def:order_function/preserving]{monotonicity} If \( A \subseteq B \), then every set from \( \mscrL \) containing \( B \) also contains \( A \), hence \( \cl(A) \subseteq \cl(B) \).
\end{proof}
