\subsection{Lattices}\label{subsec:lattices}

\paragraph{Semilattices and lattices}

\begin{definition}\label{def:semilattice}\mcite[16]{Birkhoff1948}
  Lattices are \hyperref[def:partially_ordered_set]{partially ordered sets} in which \hyperref[def:extremal_points/supremum_and_infimum]{suprema and infima} are taken as basic operations called \enquote{joins} and \enquote{meets}\footnote{The terms \hyperref[def:semilattice/join]{\enquote{join}} for \( \vee \) and \hyperref[def:semilattice/meet]{\enquote{meet}} for \( \wedge \) are notoriously difficult to remember. A helpful accident is the ability to write \enquote{meet} as \enquote{\( \wedge \wedge \)eet}.}. This shifts the focus from ordering to operations, i.e. from predicates to functions.

  \begin{thmenum}[series=def:semilattice]
    \thmitem{def:semilattice/join} We say that a partially ordered set is a \term{join-semilattice} if the supremum of every nonempty finite set always exists. The operation itself is denoted by \( \vee \) and referred to as \term{join} and rather than supremum. In contrast to suprema, joins are usually written in \hyperref[rem:first_order_formula_conventions/infix]{infix} notation, e.g. \( x \vee y \vee z \) rather than \( \sup\set{ x, y, z } \).

    \thmitem{def:semilattice/meet} Analogously, we say that a partially ordered set is aa \term{meet-semilattice} if the infimum of every nonempty finite set exists. The infimum is denoted by \( \wedge \) and called \term{meet}.

    \thmitem{def:semilattice/complete} A semilattice is said to be \term{complete} if the corresponding operation is defined for arbitrary sets rather than only finite ones.

    \thmitem{def:semilattice/lattice} We say that a partially ordered set is a \term{lattice} if it is both a join-semilattice and a meet-semilattice.

    We call it \term{join-complete} if the join-semilattice is complete, \term{meet-complete} if the meet-semilattice is complete, and simply \term{complete} if both semilattices are complete.

    \thmitem{def:semilattice/bounded} A \term{bounded lattice} is a semilattice that is \hyperref[def:extremal_points/top_and_bottom]{bounded} as a \hyperref[def:partially_ordered_set]{partially ordered set}.

    We purposely avoid defining bounded semilattices.

    \thmitem{def:semilattice/distributive_lattice}\mcite[133]{Birkhoff1948} A lattice is said to be \term{distributive} if the following two conditions hold:
    \begin{align}
      x \vee (y \wedge z) &= (x \vee y) \wedge (x \vee z) \label{eq:def:semilattice/distributive_lattice/finite/join_over_meet} \\
      x \wedge (y \vee z) &= (x \wedge y) \vee (x \wedge z) \label{eq:def:semilattice/distributive_lattice/finite/meet_over_join}.
    \end{align}

    If the lattice is \hyperref[def:semilattice/complete]{complete}, the above conditions are not enough. A complete lattice \( L \) it is said to be \term{distributive} if any of the following more general distributive axioms hold for every \( x \in L \) and \hyperref[def:cartesian_product/indexed_family]{family} \( \seq{ y_k }_{k \in \mscrK} \subseteq L \):
    \begin{align}
      x \vee \parens*{ \bigwedge_{k \in \mscrK} y_k } &= \bigwedge_{k \in \mscrK} \parens{ x \vee y_k } \label{eq:def:semilattice/distributive_lattice/arbitrary/join_over_meet} \\
      x \wedge \parens*{ \bigvee_{k \in \mscrK} y_k } &= \bigvee_{k \in \mscrK} \parens{ x \wedge y_k } \label{eq:def:semilattice/distributive_lattice/arbitrary/meet_over_join}
    \end{align}
  \end{thmenum}

  Lattices have the following metamathematical properties:
  \begin{thmenum}[resume=def:semilattice]
    \thmitem{def:semilattice/theory} The language of the theory of lattices consists of the language of the \hyperref[def:partially_ordered_set]{theory of partially ordered sets} with the addition of the binary infix functional symbols \( \vee \) and \( \wedge \). If we only want to restrict ourselves to semilattices, we can add only one of the two operations as functional symbols. If we wish to study \hyperref[def:semilattice/bounded]{bounded lattices}, as it is often done, we must also add the constants \( \top \) and \( \bot \).

    For meet-semilattices, we add the following axiom schema to the theory to ensure compatibility between infima and meets (we use \( \mathbin\& \) to denote \hyperref[def:propositional_language/connectives/conjunction]{logical conjunction} to avoid symbol collision with meets):
    \begin{equation}\label{eq:def:semilattice/theory/meet_compat}
      \parens[\Big]{ \xi \wedge \eta \doteq \zeta } \leftrightarrow \parens[\Big]{ \zeta \leq \xi \mathbin\& \zeta \leq \eta \mathbin\& \qforall \alpha ((\alpha \leq \xi \mathbin\& \alpha \leq \eta) \rightarrow \alpha \leq \zeta) }.
    \end{equation}

    An analogous axiom must be added for join-semilattices.

    For bounded lattices, we also add the axioms
    \begin{equation}\label{eq:def:semilattice/theory/bottom_compat}
      \qforall \xi (\bot \leq \xi)
    \end{equation}
    and
    \begin{equation}\label{eq:def:semilattice/theory/top_compat}
      \qforall \xi (\xi \leq \top).
    \end{equation}

    We cannot properly express the theory of complete (semi)lattices as an extension of this theory since we must define join and meet as unary operations on subsets of the domain rather than binary operations on members of the domain. Complete semilattices can instead be defined within \hyperref[def:zfc]{\logic{ZFC}}.

    \thmitem{def:semilattice/submodel} Unlike for preordered and partially ordered sets, whose submodels are discussed in \fullref{def:preordered_set/submodel}, not every subset of a semilattice is a sub-semilattice because \( \vee \) and \( \wedge \) are now regarded as functional symbols. A sub-(semi)lattice must be closed under joins and meets. The axiom \eqref{eq:def:semilattice/theory/meet_compat} is not a positive formula, but does not cause trouble itself as it merely specifies compatibility of \( \leq \) and \( \wedge \).

    For bounded lattices, the relevant constants should formally be present in the subset. This is sometimes inconvenient, however, and we will distinguish between \enquote{sublattices} and \enquote{bounded sublattices}. Similarly, we distinguish between \enquote{sublattices} and \enquote{complete sublattices}.

    \thmitem{def:semilattice/homomorphism} \hyperref[def:first_order_homomorphism]{First-order homomorphisms} between (semi)lattices are the \hyperref[def:order_homomorphism/increasing]{order-preserving} maps that preserve joins, meets and constants (where applicable).

    Homomorphisms of complete lattices need to preserve arbitrary joins and meets rather than only finite ones.

    \begin{figure}[!ht]
      \centering
      \includegraphics[page=1]{output/def__semilattice}
      \caption{A monotone map between lattices, which is not a lattice homomorphism}
      \label{fig:def:semilattice/homomorphism/monotone_map_not_homomorphism}
    \end{figure}

    As we shall see in \fullref{thm:lattice_homomorphism_is_monotone}, the requirement of monotonicity is redundant. \Fullref{thm:lattice_isomorphism_characterization} gives simplified conditions for lattice isomorphisms.

    \thmitem{def:semilattice/category} The \hyperref[def:category_of_small_first_order_models]{categories of \( \mscrU \)-small models} for (semi)lattices are subcategories of \hyperref[def:partially_ordered_set]{\( \ucat{Pos} \)}. We only give a special name for the category \( \ucat{Lat} \) of lattices.

    \Fullref{ex:limits_of_partially_ordered_set} discusses how \hyperref[def:category_of_cones/limit]{categorical limits} correspond to meets and \hyperref[def:category_of_cones/colimit]{categorical colimits} correspond to joins.

    \thmitem{def:semilattice/duality} The \hyperref[thm:preorder_duality]{principle of duality for partially ordered sets} holds for lattices if we also swap the binary operations \( \vee \) and \( \wedge \).

    If the lattice is bounded, we must additionally swap the constants \( \top \) and \( \bot \).

    If the lattice is bounded from only one side, the principle of duality does not hold unless we restrict ourselves to formulas that do not contain the constants.
  \end{thmenum}
\end{definition}

\begin{example}\label{ex:complete_sublattice_of_incomplete_lattice}
  Any finite \hyperref[def:semilattice/submodel]{sublattice} is \hyperref[def:semilattice/complete]{complete}, even if the ambient lattice is not.
\end{example}

\begin{proposition}\label{thm:binary_lattice_operations}\mcite[thm. II.1]{Birkhoff1948}
  Let \( (P, \leq) \) be a partially ordered set.

  \begin{thmenum}
    \thmitem{thm:binary_lattice_operations/semilattices} If it is a \hyperref[def:semilattice/join]{join-semilattice} (resp. \hyperref[def:semilattice/meet]{meet-semilattice}), then \( \vee \) (resp. \( \wedge \)) is \hyperref[def:binary_operation/associative]{associative}, \hyperref[def:binary_operation/commutative]{commutative} and \hyperref[def:binary_operation/idempotent]{idempotent} when considered as a binary operation.

    \thmitem{thm:binary_lattice_operations/identity} If \( P \) is a bounded lattice, the constants act as \hyperref[def:monoid]{monoid neutral elements}, that is, for each \( x \in P \),
    \begin{align}
      x \vee \bot = x \label{eq:thm:binary_lattice_operations/neutral/join} \\
      x \wedge \top = x \label{eq:thm:binary_lattice_operations/neutral/meet}
    \end{align}

    \thmitem{thm:binary_lattice_operations/absorption} If \( P \) is a lattice, then the following absorption laws hold:
    \begin{align}
      x \vee (x \wedge y) &= x \label{eq:thm:binary_lattice_operations/absorption/join} \\
      x \wedge (x \vee y) &= x \label{eq:thm:binary_lattice_operations/absorption/meet}.
    \end{align}

    \thmitem{thm:binary_lattice_operations/compatibility} The following conditions for compatibility with \( \leq \) hold:
    \begin{align}
      x \leq y &\T{if and only if} x \vee y = y \label{eq:thm:binary_lattice_operations/compatibility/join} \\
      x \leq y &\T{if and only if} x \wedge y = x \label{eq:thm:binary_lattice_operations/compatibility/meet}.
    \end{align}

    \thmitem{thm:binary_lattice_operations/new_semilattice} If \( A \) is an arbitrary \hyperref[def:set]{set} and if \( \vee \) is a binary operation that is associative, commutative and idempotent (the conclusion of \fullref{thm:binary_lattice_operations/semilattices}), then \( (A, \leq) \) is a join-semilattice with an ordering defined by \eqref{eq:thm:binary_lattice_operations/compatibility/join}.

    An analogous statement holds for meet-semilattices.

    \thmitem{thm:binary_lattice_operations/new_lattice} If \( (A, \leq) \) is both a join-semilattice and meet-semilattice and if \( \vee \) and \( \wedge \) satisfy the absorption conditions \eqref{eq:thm:binary_lattice_operations/absorption/join} and \eqref{eq:thm:binary_lattice_operations/absorption/meet}, then \( (A, \leq) \) is a lattice. Furthermore, proving idempotence for \( \vee \) or \( \wedge \) is unnecessary because both follow from the absorption conditions.

    If there exist distinguished elements \( \top \) and \( \bot \) such that the condition \fullref{thm:binary_lattice_operations/identity} holds, then \( (A, \leq) \) is bounded.
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:binary_lattice_operations/semilattices} Suprema and infima are obviously associative and commutative as binary operations because ordering is immaterial for pure sets and \( x \vee y \) is defined as \( \sup\set{ x, y } \).

  Idempotence is also obvious because \( x \vee x = \sup\set{ x } = x \).

  \SubProofOf{thm:binary_lattice_operations/identity} Obvious since \( \bot \leq x \leq \top \) for all \( x \in P \).

  \SubProofOf{thm:binary_lattice_operations/absorption} If we rewrite \eqref{eq:thm:binary_lattice_operations/absorption/join} using suprema and infima, we obtain
  \begin{equation*}
    \sup\set{ x, \inf\set{ y, x } } = x.
  \end{equation*}

  If \( x \leq y \), then \( \inf\set{ y, x } = x \) and \( \sup\set{ x, \inf\set{ y, x } } = \sup\set{ x, x } = x \).

  If \( x \geq y \), then \( \inf\set{ y, x } = y \) and \( \sup\set{ x, \inf\set{ y, x } } = \sup\set{ x, y } = x \).

  This proves \eqref{eq:thm:binary_lattice_operations/absorption/join}. Since \( \wedge \) is \( \vee \) in the \hyperref[thm:preorder_duality]{opposite partially ordered set}, \eqref{eq:thm:binary_lattice_operations/absorption/meet} follows automatically.

  \SubProofOf{thm:binary_lattice_operations/compatibility} We have
  \begin{equation*}
    x \vee y
    =
    \sup\set{ x, y }
    =
    \begin{cases}
      y, &x \leq y, \\
      x, &x > y,
    \end{cases}
  \end{equation*}
  and dually for \( \wedge \).

  \SubProofOf{thm:binary_lattice_operations/new_semilattice} Since the binary join and/or meet are defined for all members of the set \( A \), it is indeed a join-semilattice because all finite joins and meets exist by definition.

  \SubProofOf{thm:binary_lattice_operations/new_lattice} If \( \vee \) and \( \wedge \) define a join-semilattice or meet-semilattice, then absorption is simply compatibility for the two induced orders.

  Idempotence of \( \vee \) follows from \eqref{eq:thm:binary_lattice_operations/absorption/meet},
  \begin{equation*}
    x \vee x = x \vee (x \wedge (x \vee x)) = x,
  \end{equation*}
  and dually for \( \wedge \).

  The boundedness conditions are obvious.
\end{proof}

\begin{corollary}\label{thm:lattice_homomorphism_is_monotone}
  If a function \( f: L \to M \) between \hyperref[def:semilattice]{(semi)lattices} preserves either joins or meets, it is \hyperref[def:order_homomorphism/increasing]{order-preserving}.

  Thus, the requirement for \hyperref[def:semilattice/homomorphism]{lattice homomorphisms} to be order-preserving is redundant.
\end{corollary}
\begin{proof}
  If the function \( f \) preserves joins and if \( x < y \), by \eqref{eq:thm:binary_lattice_operations/compatibility/join} we have \( x \vee y = y \) and thus
  \begin{equation*}
    f(x) \vee f(y) = f(x \vee y) = f(y),
  \end{equation*}
  which again by \eqref{eq:thm:binary_lattice_operations/compatibility/join} implies \( f(x) \leq f(y) \).
\end{proof}

\begin{proposition}\label{thm:lattice_isomorphism_characterization}
  A bijective function is a \hyperref[def:semilattice/homomorphism]{lattice isomorphism} if and only if it is both \hyperref[def:order_homomorphism/increasing]{order-preserving} and \hyperref[def:order_homomorphism/reflecting]{order-reflecting}.
\end{proposition}
\begin{proof}
  \SufficiencySubProof Any lattice isomorphism is order-preserving as a consequence of \fullref{thm:lattice_homomorphism_is_monotone}. Its inverse is also a lattice isomorphism, and again by the same corollary it is order-preserving, making the original function order-reflecting.

  \NecessitySubProof Suppose that both \( f: L \to M \) and \( f^{-1}: M \to L \) are order-preserving.

  \SubProof{Proof that \( f \) preserves joins} Let \( \mscrK \) be an indexing set --- finite for ordinary lattices and arbitrary for complete lattices.

  For any family \( \seq{ x_k }_{k \in \mscrK} \) from \( L \), we have, for each index \( k_0 \),
  \begin{equation*}
    x_{k_0} \leq \bigvee_{k \in \mscrK} x_k.
  \end{equation*}

  Then
  \begin{equation*}
    f(x_{k_0}) \leq f\parens[\Big]{ \bigvee_{k \in \mscrK} x_k }.
  \end{equation*}

  The element \( f\parens[\Big]{ \bigvee_{k \in \mscrK} x_k } \) is an upper bound of the set
  \begin{equation*}
    A \coloneqq \set{ f(x_k) \given k \in \mscrK }.
  \end{equation*}

  We will show that it is the least upper bound.

  Let \( u \) be an upper bound for \( A \). Then, for any \( k_0 \in \mscrK \),
  \begin{equation*}
    f(x_{k_0}) \leq u.
  \end{equation*}

  Since \( f^{-1} \) is order-preserving, we have
  \begin{equation*}
    x_{k_0} \leq f^{-1}(u).
  \end{equation*}

  Generalizing on \( k_0 \), we obtain
  \begin{equation*}
    \bigvee_{k \in \mscrK} x_k \leq f^{-1}(u),
  \end{equation*}
  hence
  \begin{equation*}
    f\parens[\Big]{ \bigvee_{k \in \mscrK} x_k } \leq u.
  \end{equation*}

  Therefore, \( f\parens[\Big]{ \bigvee_{k \in \mscrK} x_k } \) is the least upper bound of \( A \):
  \begin{equation*}
    \bigvee_{k \in \mscrK} f(x_k) = f\parens[\Big]{ \bigvee_{k \in \mscrK} x_k }.
  \end{equation*}

  \SubProof{Proof that \( f \) preserves meets} This statement is dual to the one above.
\end{proof}

\begin{proposition}\label{thm:bounded_lattice_absorbing}
  In any \hyperref[def:semilattice/bounded]{bounded lattice}, \( \bot \) is absorbing with respect to meets and \( \top \) with respect to joins. That is, \( \bot \wedge x = \bot \) and \( \top \vee x = \top \).
\end{proposition}
\begin{proof}
  Obvious when the lattice is regarded as a partially ordered set.
\end{proof}

\paragraph{Lattice fixed points}

\begin{definition}\label{def:fixed_point}\mimprovised
  Given a \hyperref[def:function]{function} \( f: A \to A \) between \hyperref[def:set]{plain set}, we call \( x \in A \) a \term{fixed point} of \( f \) if \( x = f(x) \).
\end{definition}

\begin{theorem}[Knaster-Tarski theorem]\label{thm:knaster_tarski_theorem}\mcite[thm. 1]{Tarski1955}
  The \hyperref[def:fixed_point]{fixed points} of an \hyperref[def:order_homomorphism]{order-preserving} \hyperref[def:function/endofunction]{endofunction} in a \hyperref[def:semilattice/lattice]{complete lattice} form a complete sublattice. In particular, the function has at least one fixed point.
\end{theorem}
\begin{proof}
  \SubProof{Proof that a fixed point exists} Let \( (L, \leq) \) be a complete lattice and let \( \varphi: L \to L \) be a monotone function. Define
  \begin{equation*}
    D \coloneqq \set{ x \in L \given f(x) \leq x }.
  \end{equation*}

  We know that \( D \) is nonempty because \( \top \in D \).

  Since the lattice is complete, we can take \( l \coloneqq \inf D \). Note that \( f(l) \) is a lower bound of \( D \) because, for any \( y \in D \), we have
  \begin{equation*}
    f(l) \leq f(y) \leq y.
  \end{equation*}

  But \( l \) is the largest lower bound of \( D \), hence
  \begin{equation}\label{eq:thm:knaster_tarski/f_lower}
    f(l) \leq l.
  \end{equation}

  Therefore, \( f(f(l)) \leq f(l) \), and hence \( f(l) \in D \). But \( l \) is a lower bound for \( D \), hence
  \begin{equation}\label{eq:thm:knaster_tarski/f_upper}
    f(l) \geq l
  \end{equation}

  From \eqref{eq:thm:knaster_tarski/f_lower} and \eqref{eq:thm:knaster_tarski/f_upper} it follows that \( l = f(l) \), that is, \( l \) is a fixed point of \( f \).

  \SubProof{Proof that the fixed points form a complete lattice} Denote by \( F \) the set of all fixed points of \( L \). We just showed that \( F \) is nonempty. Let \( G \subseteq F \). We will show that the infimum and supremum of \( G \) is in \( F \).

  Denote
  \begin{equation*}
    l_G \coloneqq \inf G.
  \end{equation*}

  For any \( g \in G \) we have \( l_G \leq g \). From monotonicity of \( f \),
  \begin{equation*}
    f(l_G) \leq f(g) = g,
  \end{equation*}
  hence \( f(l_G) \) is a lower bound of \( F \).

  Then \( f(l_G) \leq l_G \) because \( l_G \) is the greatest lower bound of \( G \). But, because \( f \) is order-preserving, we have \( l_G \leq f(l_G) \). Therefore, \( f(l_G) = l_G \), and hence \( l_G \in F \).

  We can analogously show that \( \sup G \in F \) and conclude that \( (F, \leq) \) is itself a complete lattice.
\end{proof}

\paragraph{Lattice polynomials}

\begin{definition}\label{def:square_free}\mimprovised
  An element \( x \) of a \hyperref[def:semiring/commutative]{commutative semiring} is said to be \term{square-free} if \( y \mid x \) implies that \( y^2 \not\mid x \).
\end{definition}

\begin{remark}\label{rem:lattice_polynomials}
  Let \( L \) be a \hyperref[def:semilattice/bounded]{bounded} \hyperref[def:semilattice/distributive_lattice]{distributive lattice}. We will discuss polynomials over \( L \).

  As discussed in \fullref{ex:def:semiring/lattice}, \( L \) induces a positive and a negative \hyperref[def:semiring/commutative]{commutative semiring}. Given a set \( \mscrX \) of indeterminates, we can form the \hyperref[def:polynomial_algebra]{polynomial semiring} \( L[\mscrX] \) over the \hyperref[ex:def:semiring/lattice]{join-meet semiring}. Suppose that we are given an evaluation \( f: \mscrX \to \fun(\mscrX, L) \) and consider the \hyperref[rem:substitution_homomorphism]{evaluation homomorphism} \( \Phi_f: L[\mscrX] \to \fun(\mscrX, L) \).

  Since meets are idempotent,
  \begin{equation*}
    \Phi_f(X^2) = \Phi_f(X) \wedge \Phi_f(X) = \Phi_f(x).
  \end{equation*}

  Hence, we can limit ourselves to \hyperref[def:square_free]{square-free} monomials. That is, monomials of the form \( \prod_{X \in \mscrX} X^{\gamma_X} \), where \( \gamma_X \) is either \( 0 \) or \( 1 \). More succinctly, since every monomial has finitely many indeterminates of positive power, it can be written as a finite meet
  \begin{equation*}
    X_1 \wedge \cdots \wedge X_n.
  \end{equation*}

  A polynomial is then a finite join of finite meets of indeterminates and constants.

  There is a nuance, however. In \cite[19]{Birkhoff1948}, a multivariate lattice polynomial is defined to consist only of indeterminates; for example
  \begin{equation*}
    p(X, Y, Z) = (X \wedge Y) \vee (X \wedge Z) \vee (Y \wedge Z).
  \end{equation*}

  This excludes coefficients before the monomials, hence making the definition distinct from the general notion of a polynomial over a commutative semiring. In \cite{Marichal2007}, polynomials with coefficients in front of the monomials are called \term{weighted lattice polynomials}. For example, a weighted polynomial is
  \begin{equation*}
    q(X, Y, Z) = (a \wedge X \wedge Y) \vee (b \wedge X \wedge Z) \vee (c \wedge Y \wedge Z).
  \end{equation*}

  Compare \( q(X, Y, Z) \) to \( p(X, Y, Z) \). We will refer to unweighted polynomials by default.

  We can analogously define polynomials over the \hyperref[ex:def:semiring/lattice]{meet-join semiring} of \( L \), e.g.
  \begin{equation*}
    r(X, Y, Z) = (X \vee Y) \wedge (X \vee Z) \wedge (Y \vee Z).
  \end{equation*}

  The latter polynomials are related to but distinct from \hyperref[def:cnf_and_dnf]{conjunctive normal forms}, while the former --- to \hyperref[def:cnf_and_dnf]{disjunctive normal forms}.
\end{remark}

\begin{example}\label{ex:lattice_polynomials}
  We list several examples of \hyperref[rem:lattice_polynomials]{lattice polynomials}:
  \begin{thmenum}
    \thmitem{ex:lattice_polynomials/distributivity} The distributivity axiom \eqref{eq:def:semilattice/distributive_lattice/finite/meet_over_join} implies that the polynomial
    \begin{equation*}
      X \wedge (Y \vee Z)
    \end{equation*}
    over the \hyperref[ex:def:semiring/lattice]{join-meet semiring} evaluates to the same trivariate function as the polynomial
    \begin{equation*}
      (X \wedge Y) \vee (X \wedge Z)
    \end{equation*}
    over the meet-join semiring.

    \thmitem{ex:lattice_polynomials/boolean} A lattice polynomial for the two-element lattice \( \set{ T, F } \) corresponds to a \hyperref[def:boolean_operator]{Boolean operator}. We cannot express negation only via \( \vee \) and \( \wedge \). \hyperref[def:positive_formula]{Positive formulas} in \hyperref[def:cnf_and_dnf]{conjunctive/disjunctive normal form}, however, correspond exactly to lattice polynomials with square-free monomials.

    For example, \hyperref[def:standard_boolean_operators]{exclusive or} \( \oplus \) can be expressed via the \hyperref[def:propositional_syntax/formula]{propositional formula}
    \begin{equation*}
      P \vee Q \vee (P \wedge Q).
    \end{equation*}

    This corresponds to a bivariate polynomial over the meet-join semiring of \( \set{ T, F } \).
  \end{thmenum}
\end{example}

\paragraph{Ideals and filters in lattices}

\begin{proposition}\label{thm:lattice_divisibility}
  Identify a \hyperref[def:semilattice/bounded]{bounded} \hyperref[def:semilattice/distributive_lattice]{distributive lattice} with its \hyperref[ex:def:semiring/lattice]{join-meet semiring}.

  \begin{thmenum}
    \thmitem{thm:lattice_divisibility/divides} We have \( x \mid y \) if and only if \( x \geq y \).

    \thmitem{thm:lattice_divisibility/prime} The element \( p \) is \hyperref[def:domain_divisibility/prime]{prime} if and only if \( x \wedge y \leq p \) implies that \( x \leq p \) or \( y \leq p \) (or both).
  \end{thmenum}
\end{proposition}
\begin{comments}
  \item This leads to \fullref{def:lattice_prime_element}.
\end{comments}
\begin{proof}
  \SubProofOf{thm:lattice_divisibility/divides}
  \SufficiencySubProof* Suppose that \( p \) divides \( x \). Then there exists some \( y \) for which \( x = p \wedge y \).
  \begin{itemize}
    \item If \( y \leq p \), then \( x = p \wedge y = y \leq p \).
    \item If \( y > p \), then \( x = p \wedge y = p \).
  \end{itemize}

  In both cases, \( p \geq x \).

  \NecessitySubProof* Suppose that \( p \geq x \). Then \eqref{eq:thm:binary_lattice_operations/compatibility/meet} implies that \( x = p \wedge x \), hence \( p \mid x \).

  \SubProofOf{thm:lattice_divisibility/prime} This is a reformulation of \fullref{def:domain_divisibility/prime/direct} with respect to \fullref{thm:lattice_divisibility/divides}.
\end{proof}

\begin{definition}\label{def:lattice_ideal}
  We will define concepts analogous to those from \fullref{subsec:semiring_ideals}, but adapted to \hyperref[def:semilattice/lattice]{lattices}. \Fullref{thm:lattice_divisibility} provides motivation. In some cases the notions coincide --- see \fullref{thm:semilattice_ideal_as_semiring_ideal}.

  Fix some lattice \( L \).

  \begin{thmenum}
    \thmitem{def:lattice_ideal/ideal}
    \begin{minipage}[t]{0.45\textwidth}
      We call the subset \( I \) a \term{lattice ideal} it is closed under joins and if \( i \in I \) and \( l \in L \) together imply \( i \wedge l \in I \).

      Since this also implies that \( I \) is closed under meets, it follows that ideals are automatically \hyperref[def:semilattice/submodel]{sublattices}.
    \end{minipage}
    \hspace{0.02\textwidth}
    \begin{minipage}[t]{0.45\textwidth}
      \hyperref[thm:preorder_duality]{Dually}, we call the subset \( F \) a \term{filter} if it is closed under meets and if \( f \in F \) and \( l \in L \) together imply \( f \vee l \in F \).

      An equivalent condition is given in \fullref{thm:def:lattice_ideal/directed_and_closed}.
    \end{minipage}

    \thmitem{def:lattice_ideal/principal}\mcite[exer. II.5.2]{Birkhoff1948}
    \begin{minipage}[t]{0.45\textwidth}
      We define the \term{principal ideal} of \( x \) as the \hyperref[def:order_interval/ray]{closed initial segment}
      \begin{equation*}
        \set{ y \in L \given y \leq x }.
      \end{equation*}
    \end{minipage}
    \hspace{0.02\textwidth}
    \begin{minipage}[t]{0.45\textwidth}
      Dually, we define the \term{principal filter} of \( x \) as the \hyperref[def:order_interval/ray]{closed final segment}
      \begin{equation*}
        \set{ y \in L \given y \geq x }.
      \end{equation*}
    \end{minipage}

    \thmitem{def:lattice_ideal/prime}\mcite[141]{Birkhoff1948}
    \begin{minipage}[t]{0.45\textwidth}
      We call a proper ideal \( I \) \term{prime} if \( {x \wedge y \in I} \) implies that \( x \in I \) or \( y \in I \) (or both) and \term{completely prime} if \( \bigwedge_{k \in \mscrK} x_k \in I \) implies that \( x_k \in I \) for at least one \( k \in \mscrK \).
    \end{minipage}
    \hspace{0.02\textwidth}
    \begin{minipage}[t]{0.45\textwidth}
      Dually, we call a proper filter \( F \) \term{prime} if \( x \vee y \in F \) implies that \( x \in F \) or \( y \in F \) and \term{completely prime} if \( \bigvee_{k \in \mscrK} x_k \in I \) implies that \( x_k \in I \) for at least one \( k \in \mscrK \).
    \end{minipage}

    \thmitem{def:lattice_ideal/maximal}
    \begin{minipage}[t]{0.45\textwidth}
      We call a proper ideal \term{maximal} if it is \hyperref[def:extremal_points/maximal_and_minimal_element]{maximal} with respect to set inclusion.
    \end{minipage}
    \hspace{0.02\textwidth}
    \begin{minipage}[t]{0.45\textwidth}
      Dually, we call a proper filter is \term{maximal} if it is maximal with respect to inclusion.

      Unlike for semirings, it is possible for a maximal ideal or filter not to be prime.
    \end{minipage}
  \end{thmenum}
\end{definition}

\begin{definition}\label{def:closed_ordered_subset}\mcite[113]{Enderton1977Sets}
  We say that the subset \( S \) of the \hyperref[def:partially_ordered_set]{partially ordered set} \( (P, \leq) \) is \term{downward closed} if, for every \( s \in S \), \( x \leq s \) implies \( x \in S \).

  We define \term{upward closed} sets analogously.
\end{definition}

\begin{definition}\label{def:directed_set}\mcite[xi]{Birkhoff1948}
  A \hyperref[def:preordered_set]{preordered set} \( P \) is called an \term{upward/right directed set} if every finite subset of \( P \) has an \hyperref[def:extremal_points/upper_and_lower_bounds]{upper bound}, i.e. for all \( x, y \in P \) there must exist \( z \in P \) such that \( x \leq z \) and \( y \leq z \). We do not care how many upper bounds exist and how they are related, we simply need one upper bound to exist for every pair of elements of \( P \).

  \hyperref[thm:preorder_duality]{Dually}, \( P \) is a \term{downward/left directed set} if every two elements have a lower bound.
\end{definition}

\begin{proposition}\label{thm:def:lattice_ideal}
  The \hyperref[def:lattice_ideal]{ideals and filters} of a lattice have the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:lattice_ideal/directed_and_closed} A set is an ideal if and only if it is \hyperref[def:directed_set]{upward directed} and \hyperref[def:closed_ordered_subset]{downward closed}.

    Analogously, a set is a filter if it is \hyperref[def:directed_set]{downward directed} and \hyperref[def:closed_ordered_subset]{upward closed}.

    \thmitem{thm:def:lattice_ideal/prime} The complement of a \hyperref[def:lattice_ideal/prime]{prime ideal} (resp. \hyperref[def:lattice_ideal/prime]{prime filter}) is a filter (resp. ideal).

    \thmitem{thm:def:lattice_ideal/completely_prime} A set is a prime \hyperref[def:lattice_ideal/principal]{principal ideal} (resp. filter) if and only if its complement is \hyperref[def:lattice_ideal/prime]{completely prime filter} (resp. \hyperref[def:lattice_ideal/prime]{completely prime ideal}).
  \end{thmenum}
\end{proposition}
\begin{proof}
  We will prove the statements only for complements of ideals. The statements for complements of filters will follow by \hyperref[def:semilattice/duality]{duality}.

  \SubProofOf{thm:def:lattice_ideal/directed_and_closed}

  \SufficiencySubProof* Suppose that \( I \) is an ideal.

  \begin{itemize}
    \item It is upward directed because, if \( x \in I \) and \( y \in I \), then, since \( I \) is closed under joins, \( x \vee y \in I \).
    \item It is downward closed because, if \( i \in I \) and \( x \leq i \), then, since \( I \) is closed under meets with arbitrary elements of the lattice, \( x = i \wedge x \in I \)
  \end{itemize}

  \NecessitySubProof* Conversely, suppose that \( I \) is upward directed and downward closed.

  \begin{itemize}
    \item It is closed under joins because if \( x \in I \) and \( y \in I \), then directedness gives us an upper bound \( z \). Then \( x \vee y \leq z \), and since \( I \) is downward closed, we conclude that \( x \vee y \in I \).

    \item It is closed under meets with elements of the lattice because if \( i \in I \), then \( x \wedge i \leq i \) and downward closedness implies \( x \wedge i \in I \).
  \end{itemize}

  \SubProofOf{thm:def:lattice_ideal/prime} Let \( I \) be a prime ideal of the lattice \( L \). Its complement is a filter because:
  \begin{itemize}
    \item It is closed under meets. Let \( x, y \in L \setminus I \) and suppose that \( x \wedge y \in I \). Then, since \( I \) is a prime ideal, \( x \in I \) or \( y \in I \). The obtained contradiction shows that \( x \wedge y \in L \setminus I \).

    \item It is closed under joins with elements of \( L \). Let \( l \in L \) and \( f \in L \setminus I \) and suppose that \( l \vee f \in I \). Then \( f \leq l \vee f \leq p \), implying that \( f \in I \). The obtained contradiction shows that \( l \vee f \in L \setminus I \).
  \end{itemize}

  \SubProofOf{thm:def:lattice_ideal/completely_prime}

  \SufficiencySubProof* Suppose that \( I \) be a principal prime ideal with generator \( p \).

  Its complement is a filter as a consequence of \fullref{thm:def:lattice_ideal/prime}. We must show that it is completely prime.

  Suppose that \( \bigvee_{k \in \mscrK} x_k \in L \setminus I \) and that \( x_k \not\in F \) for every \( k \in \mscrK \). Then \( p \) as the generator for \( I \) is an upper bound for the set \( \set{ x_k \given k \in \mscrK } \). Since \( \bigvee_{k \in \mscrK} x_k \) is the least upper bound, \( x \) must dominate it. That is, \( \bigvee_{k \in \mscrK} x_k \) must belong to \( I \), which contradicts our assumption that it belongs to \( L \setminus I \).

  Therefore, \( I \) is a completely prime filter.

  \NecessitySubProof* Now suppose that \( I \) is completely prime. Define
  \begin{equation*}
    f_0 \coloneqq \bigwedge L \setminus I
  \end{equation*}
  and let
  \begin{equation*}
    F \coloneqq \set{ x \in L \given x \geq f_0 }
  \end{equation*}
  be the principal filter of \( f_0 \). Obviously \( L \setminus I \subseteq F \).

  Conversely, let \( y \in F \), i.e. \( y \geq f_0 \). Suppose that \( y \in I \). Since \( f_0 \leq y \) and \( I \) is an ideal, it follows that \( f_0 \in I \). Since \( I \) is completely prime, there exists at least one point of \( L \setminus I \) that is also a point of \( I \).

  The obtained contradiction shows that \( y \in F \) implies that \( y \in L \setminus I \). Hence, \( F \subseteq L \setminus I \).

  Therefore, \( F = L \setminus I \).
\end{proof}

\begin{proposition}\label{thm:semilattice_ideal_as_semiring_ideal}
  If we identify the \hyperref[def:semilattice/bounded]{bounded} \hyperref[def:semilattice/distributive_lattice]{distributive lattice} with its \hyperref[ex:def:semiring/lattice]{join-meet semiring}, then the \hyperref[def:lattice_ideal/ideal]{lattice ideals} are precisely the \hyperref[def:semiring_ideal]{semiring ideals}.

  Moreover, \hyperref[def:lattice_ideal/prime]{prime} and \hyperref[def:lattice_ideal/maximal]{maximal} lattice ideals are \hyperref[def:semiring_ideal/prime]{prime} and \hyperref[def:semiring_ideal/maximal]{maximal} semiring ideals.

  The same holds for \hyperref[def:lattice_ideal/ideal]{lattice filters} if we instead consider the \hyperref[ex:def:semiring/lattice]{meet-join semilattice}.
\end{proposition}
\begin{proof}
  Straightforward.
\end{proof}

\begin{example}\label{ex:def:lattice_ideal}
  We list examples of \hyperref[def:lattice_ideal]{lattice ideals and filters}:
  \begin{thmenum}
    \thmitem{ex:def:lattice_ideal/trivial} The simplest ideal is \( \set{ \bot } \) and the simplest filter is \( \set{ \top } \).

    We call them the \term{trivial ideal} and \term{trivial filter}.

    \thmitem{ex:def:lattice_ideal/lattice} Consider the (zero-based) natural number divisibility lattice from \fullref{thm:natural_number_divisibility_lattice}. For any natural number \( n \), the semiring ideal
    \begin{equation*}
      \braket{ n } \coloneqq \set{ 0, n, 2n, 3n, \ldots }
    \end{equation*}
    is a principal filter in the divisibility lattice.

    Indeed,
    \begin{itemize}
      \item \( \braket{ n } \) contains the top \( 0 \).
      \item \( \braket{ n } \) contains the meet \( \gcd(a, b) \) of every two members of \( \braket{ n } \).
      \item If \( n \mid a \) and \( b \) is any natural number, then \( n \mid a \mid \lcm(a, b) \), meaning that the join \( \lcm(a, b) \) also belongs to \( \braket{ n } \).
    \end{itemize}

    If \( p \) is a \hyperref[def:prime_number]{prime number}, then \( \braket{ p } \) is a \hyperref[def:semiring_ideal/maximal]{maximal semiring ideal}, and hence also a \hyperref[def:semiring_ideal/prime]{prime semiring ideal}, and hence also a \hyperref[def:lattice_ideal/prime]{prime lattice ideal}.

    The corresponding filter is more complicated. For any natural number \( n \), the set \( D_n \) of all \hyperref[def:divisibility]{divisors} of \( n \) is a lattice ideal.

    \begin{figure}[!ht]
      \centering
      \includegraphics[page=1]{output/ex__lattice_ideals}
      \caption{A Hasse diagram for the divisors of \( 24 \).}
      \label{fig:ex:def:lattice_ideal/lattice}
    \end{figure}

    Indeed,
    \begin{itemize}
      \item The bottom \( 1 \) divides \( n \).
      \item If \( a \) and \( b \) divide \( n \), their product \( ab \) also does, and hence their join \( \lcm(a, b) \) also does.
      \item If \( a \mid n \) and \( b \) is any natural number, then \( \gcd(a, b) \mid a \mid n \).
    \end{itemize}

    Furthermore, \( D_n \) is a \hyperref[def:semiring_ideal]{principal ideal} since it can be obtained as \( \set{ n \wedge m \mid m \in \BbbN } \).

    \thmitem{ex:def:lattice_ideal/subgroups} Given a \hyperref[def:group]{group} \( G \) and a proper \hyperref[def:normal_subgroup]{normal subgroup} \( N \), consider the \hyperref[thm:substructures_form_complete_lattice]{lattice of subgroups} \( L_G \) of \( G \) and the lattice \( L_N \) of subgroups of \( N \). Note that the top \( N \) of \( L_N \) is not the top of \( L_G \), hence \( L_N \) is a sublattice but not a \hi{bounded} sublattice of \( L_G \).

    Then \( L_N \) is an ideal on \( L \).
    \begin{itemize}
      \item \( L_N \) contains the bottom \( \set{ e } \).
      \item \( L_N \) contains the join \( \braket{ K \cup H } \) of every two subgroups of \( N \).
      \item \( L_N \) contains the meet \( K \cap H \) of \( K \in L_N \) and \( H \in L_G \) since \( K \cap H \subseteq K \subseteq N \).
    \end{itemize}

    By \hyperref[def:semilattice/duality]{duality}, the sublattice of subgroups containing \( N \) (rather than contained in \( N \)) is a filter (rather than an ideal).
  \end{thmenum}
\end{example}

\begin{definition}\label{def:lattice_prime_element}
  We say that the element \( p \) of the lattice \( L \) is \term{prime} if any of the following equivalent conditions hold:
  \begin{thmenum}
    \thmitem{def:lattice_prime_element/direct} If \( x \wedge y \leq p \), then \( x \leq p \) or \( y \leq p \) (or both).
    \thmitem{def:lattice_prime_element/ideals} The \hyperref[def:lattice_ideal/principal]{principal ideal} of \( p \) is \hyperref[def:lattice_ideal/prime]{prime}.
    \thmitem{def:lattice_prime_element/filters} The complement of the \hyperref[def:lattice_ideal/principal]{principal ideal} of \( p \) is a \hyperref[def:lattice_ideal/prime]{completely prime filter}.
  \end{thmenum}
\end{definition}
\begin{defproof}
  \ImplicationSubProof{def:lattice_prime_element/direct}{def:lattice_prime_element/ideals} Suppose that \( y \wedge z \leq p \) implies \( y \leq z \) or \( y \leq p \).

  The principal ideal \( I \) of \( p \) consists of all elements of \( L \) that are dominated by \( p \). Thus, if \( y \wedge z \in I \), then \( y \wedge z \leq p \) and hence \( y \leq p \), in which case \( y \in I \), or \( z \leq p \).

  Hence, \( I \) is a principal ideal.

  \EquivalenceSubProof{def:lattice_prime_element/ideals}{def:lattice_prime_element/filters} Follows from \fullref{thm:def:lattice_ideal/completely_prime}.

  \ImplicationSubProof{def:lattice_prime_element/filters}{def:lattice_prime_element/direct} Let \( I \) be the ideal generated by \( p \) and suppose that its complement \( L \setminus I \) is a completely prime filter.

  If \( x \wedge y \in I \), and if both \( x \) and \( y \) belong to \( L \setminus I \), then, since as a filter \( L \setminus I \) is closed under meets, it follows that \( x \wedge y \in L \setminus I \).

  The obtained contradiction shows that if \( x \wedge y \in I \), then \( x \in I \) or \( y \in I \).
\end{defproof}

\paragraph{Moore closure operators}

\begin{definition}\label{def:extensive_function}\mcite[49]{Birkhoff1948}
  An \hyperref[def:function/endofunction]{endofunction} \( f \) on a \hyperref[def:partially_ordered_set]{partially ordered set} \( (P, \leq) \) is said to be \term{extensive} if \( x \leq f(x) \) for every \( x \in P \).
\end{definition}

\begin{definition}\label{def:moore_closure_operator}\mcite[49]{Birkhoff1948}
  Let \( (P, \leq) \) be a \hyperref[def:partially_ordered_set]{partially ordered set}. We say that the function \( \cl: P \to P \) is an \term{closure operator} if it is \hyperref[def:extensive_function]{extensive}, \hyperref[def:binary_operation/idempotent]{idempotent} and \hyperref[def:order_homomorphism/increasing]{order-preserving}.

  We say that \( x \) is \term{closed} with respect to \( \cl \) if \( x = \cl(x) \).
\end{definition}
\begin{comments}
  \item \Fullref{thm:closure_operator_minimality} gives an equivalent condition for an element to be closed while \fullref{thm:closure_operator_from_set_semilattice} simplifies defining closure operators on power sets.
\end{comments}

\begin{proposition}\label{thm:closure_operator_minimality}\mcite[thm. IV.1]{Birkhoff1948}
  For any \hyperref[def:moore_closure_operator]{Moore closure operator} \( \cl: P \to P \) on any \hyperref[def:partially_ordered_set]{partially ordered set} \( (P, \leq) \) and any \( x \in P \), \( c \) is the smallest closed element of \( P \) dominating \( x \) if and only if \( \cl(x) = c \).
\end{proposition}
\begin{proof}
  \SufficiencySubProof Suppose that \( c \geq x \) is closed and that, if \( d \geq x \) is also closed, then \( d \geq c \). We will show that \( c = \cl(x) \).

  Since \( x \leq c \), monotonicity implies that \( \cl(x) \leq \cl(c) = c \). But \( \cl(x) \) is closed and, by extensivity, dominates \( x \), hence, by our assumption above, \( \cl(x) \geq c \).

  Therefore, \( \cl(x) = c \).

  \NecessitySubProof Since \( f \) is \hyperref[def:extensive_function]{extensive}, it is clear that \( x \leq \cl(x) \).

  Let \( y \in P \) be a closed element such that \( x \leq y \leq \cl(x) \). From the monotonicity of \( \cl \) we have that
  \begin{equation*}
    \cl(x) \leq \underbrace{\cl(y)}_{y} \leq \underbrace{\cl(\cl(x))}_{\cl(x)}.
  \end{equation*}

  Therefore, \( y = \cl(x) \).
\end{proof}

\begin{proposition}\label{thm:closure_operator_from_semilattice}
  Let \( (P, \leq) \) be a partially ordered set and \( L \) be a subset of \( P \) that is closed under infima, that is, a \hyperref[def:semilattice/meet]{meet-semilattice}. Then the following function is a \hyperref[def:moore_closure_operator]{Moore closure operator} on \( P \):
  \begin{equation*}
    \begin{aligned}
      &\cl: P \to L, \\
      &\cl(x) \coloneqq \inf \set{ l \in L \given x \leq l }. \\
    \end{aligned}
  \end{equation*}
\end{proposition}
\begin{proof}
  \SubProofOf[def:extensive_function]{extensiveness} \( x \) is a lower bound of the set \( \set{ l \in L \given x \leq l } \), hence the greatest lower bound \( \cl(x) \) dominates \( x \).

  \SubProofOf[def:binary_operation/idempotent]{idempotence} We have
  \begin{equation*}
    \cl(\cl(x)) = \inf \set{ l \in L \given \cl(x) \leq l } \geq \cl(x).
  \end{equation*}

  The reverse inclusion has already been shown, hence \( \cl(\cl(x)) = \cl(x) \).

  \SubProofOf[def:order_homomorphism/increasing]{monotonicity} If \( y \leq x \), then the set \( \set{ l \in L \given y \leq l } \)
  is contained in the set \( \set{ l \in L \given x \leq l } \) and hence \( \cl(y) \leq \cl(x) \).
\end{proof}

\begin{corollary}\label{thm:closure_operator_from_set_semilattice}
  Let \( X \) be some set and \( \mscrL \) be a family of subsets of \( X \) that is closed under intersection. Then the following function is a \hyperref[def:moore_closure_operator]{Moore closure operator} on \( X \):
  \begin{equation*}
    \begin{aligned}
      &\cl: \pow(X) \to \mscrL, \\
      &\cl(A) \coloneqq \bigcap \set{ L \in \mscrL \given A \subseteq L }. \\
    \end{aligned}
  \end{equation*}
\end{corollary}
\begin{comments}
  \item This corollary implies that \( \cl(A) \) is the intersection of all closed sets containing \( A \).
  \item \Fullref{thm:closure_operator_minimality} implies that \( \cl(A) \) is the smallest closed set containing \( A \).
\end{comments}
\begin{comments}
  \item This allows us to introduce a closure operator on arbitrary families that are closed under intersection --- including \hyperref[def:topological_space]{topological closed sets}, \hyperref[def:affine_hull]{affine hulls}, \hyperref[def:convex_hull]{convex hulls} and \hyperref[def:first_order_generated_substructure]{generated first-order substructures} (groups, rings, \( R \)-modules and lattices, among others --- see \fullref{ex:def:category_of_small_first_order_models}).
\end{comments}
\begin{proof}
  \Fullref{thm:boolean_algebra_of_subsets} implies that \( \pow(X) \) is a lattice with set union and set intersection as join and meet. Since \( \mscrL \) is closed under intersection, that is, meets, it satisfies \fullref{thm:closure_operator_from_semilattice}, which in turn implies that \( \cl \), as defined above, is a Moore closure operator.
\end{proof}
