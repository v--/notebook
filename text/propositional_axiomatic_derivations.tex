\section{Propositional axiomatic derivations}\label{sec:propositional_axiomatic_derivations}

\paragraph{Propositional formula schemas}

\begin{concept}\label{con:schemas_and_instances}
  On several occasions we will use a pattern ubiquitous in programming but unpopular in logic --- formalizing certain metasyntax.

  Consider a conditional formula \( \varphi \synimplies \psi \). If both \( \varphi \) and \( \psi \) refer to concrete formulas in the \hyperref[con:metalanguage]{metalanguage}, so does \( \varphi \synimplies \psi \), however it is often the case where either one of them or even both are merely placeholders for different formulas. In the latter case, we refer to \( \varphi \synimplies \psi \) as a \term[ru=схема (формул) (\cite[20]{Эдельман1975Логика})]{schema} and to any concrete formula described by this schema as an \term{instance}.

  We usually define an \term{atomic instantiation} \( \BbbI \) for atomic schemas and then algorithmically extend it to arbitrary schemas. Based on \hyperref[rem:substitution_notation]{substitution notation}, we denote this instance of \( \Phi \) by \( \Phi[\BbbI] \).

  If schemas are only considered as part of the metalanguage, we will call them \term{metalingual schemas} to distinguish them from dedicated syntax for schemas in the object language. For the latter case, we will introduce a \hyperref[def:formal_grammar]{formal grammar} for schemas --- our goal is for the string \enquote{\( \syn\varphi \synimplies \syn\psi \)} to be a schema representing all formulas \enquote{of the form} \( \varphi \synimplies \psi \).
\end{concept}
\begin{comments}
  \item \incite[\S 3.1]{CitkinMuravitsky2022ConsequenceRelations} describe a similar idea --- they first define \enquote{metaformulas} that roughly correspond to what we call formula schemas, and later define an instantiation map. \incite[20]{Эдельман1975Логика} only briefly mentions schemas without formalizing instantiations. A vaguely similar idea is described in the context of type inference \incite[\S 4.4.4]{Mimram2020ProgramEqualsProof}. \incite*[def. 2.1.18]{Barendregt1984LambdaCalculus} defines a \enquote{context} as a term with \enquote{holes}, which roughly corresponds to \( \muplambda \)-term schemas with \( \muplambda \)-term placeholders.

  We define schemas for propositional formulas in \cref{def:propositional_formula_schema}, which covers the use case considered by Citkin and Muravitsky, and we also define schemas for simply typed \( \muplambda \)-terms in \cref{def:lambda_term_schema}, which covers the use case considered by Mimram.
\end{comments}

\begin{definition}\label{def:propositional_formula_schema}\mimprovised
  We define \hyperref[con:schemas_and_instances]{schemas} for \hyperref[def:propositional_formula]{propositional formulas}:
  \begin{bnf*}
    \bnfprod{formula placeholder} {\bnfpn{Small Greek identifier}}, \\
    \bnfprod{formula schema}      {\bnftsq{\( \syntop \)} \bnfor \bnftsq{\( \synbot \)} \bnfor} \\
    \bnfmore                      {\bnfpn{formula placeholder} \bnfor} \\
    \bnfmore                      {\bnftsq{\( \synneg \)} \bnfsp \bnfpn{formula schema} \bnfor} \\
    \bnfmore                      {\bnftsq{(} \bnfsp \bnfpn{formula schema} \bnfsp \bnfpn{connective} \bnfsp \bnfpn{formula schema} \bnfsp \bnftsq{)}}
  \end{bnf*}

  We have used the variable identifier rules from \cref{def:variable_identifier}.
\end{definition}
\begin{comments}
  \item In the metalanguage we denote formulas via small Greek letters like \( \syn\varphi \) and \( \syn\psi \) (see \cref{rem:mathematical_logic_conventions/greek_alphabet}), and we will use those same letters (but with dots on top in accordance with \cref{rem:mathematical_logic_conventions/terminal_dots}) for denoting formula placeholders in the object language. For denoting schemas in the metalanguage, we will instead use the capital counterparts of those Greek letters, for example \( \Phi \) and \( \Psi \) rather than \( \varphi \) and \( \psi \).

  \item The grammar of schemas is unambiguous. Indeed, it almost coincides with the grammar for formulas, which is unambiguous as a consequence of \cref{thm:propositional_formula_grammar/unambiguous}.

  \item Schemas provide little benefit over formulas in propositional logic, but become useful in \( \muplambda \)-calculus and first-order logic, where substitutions on terms and formulas are defined for variables only. See \cref{def:lambda_term_schema}, \cref{def:fol_term_schema} and \cref{def:fol_formula_schema}.
\end{comments}

\begin{definition}\label{def:atomic_propositional_instantiation}\mimprovised
  We define \hyperref[con:schemas_and_instances]{atomic instantiations} for \hyperref[def:propositional_formula]{propositional formulas} as \hyperref[def:set_valued_map/partial]{partial maps} \( \BbbI \) from \hyperref[def:propositional_formula_schema]{propositional formula placeholders} to \hyperref[def:propositional_formula]{propositional formulas}.
\end{definition}
\begin{comments}
  \item The requirement for the substitution to be partial is more of a simplification than a restriction because, in practice, we will consider at most three to four placeholders, and we want a way to replace them consistently.
\end{comments}

\begin{algorithm}[Propositional schema instantiation]\label{alg:propositional_schema_instantiation}\mimprovised
  We extend the \hyperref[def:atomic_propositional_instantiation]{atomic propositional instantiation} \( \BbbI \) to an operation \( \varphi \mapsto \varphi[\BbbI] \) on compound formula schemas via \hyperref[rem:straightforward_traversal]{straightforward traversal} similarly to how it is done in \fullref{alg:propositional_substitution}. Of course, this extension will only be valid for schemas whose placeholders are in the domain of the instantiation.

  Given an atomic instantiation \( \BbbI \) and a schema \( \Phi \), we call \( \Phi[\BbbI] \) an \term{instance} of \( \Phi \).
\end{algorithm}
\begin{comments}
  \item This definition was adapted from \fullref{alg:propositional_substitution}, which is in turn based on \cite[def. 3.1.3]{CitkinMuravitsky2022ConsequenceRelations}.

  \item We reuse the notation for substitution from \cref{rem:substitution_notation}, i.e. \( \Phi[\syn\varphi \mapsto \varphi] \).

  \item This algorithm is a special case of the analogous first-order logic algorithm \fullref{alg:fol_instantiation}, implemented as \identifier{math.logic.instantiation.instantiate_formula_schema} in \cite{notebook:code}.
\end{comments}

\paragraph{Axiomatic derivation systems}

\begin{definition}\label{def:propositional_axiomatic_derivation_system}\mimprovised
  A \term[en=axiomatic system (\cite[6D1]{Hindley1997BasicSTT})]{propositional axiomatic derivation system}, also called a \term[ru=исчисление высказываний гильбертовского типа (\cite[46]{Герасимов2014Вычислимость}), en=Hilbert system (\cite[33]{TroelstraSchwichtenberg2000BasicProofTheory}); Hilbert calculus (\cite[103]{Mimram2020ProgramEqualsProof})]{Hilbert-style system}, consists of a set of \hyperref[def:propositional_formula_schema]{propositional schemas}, whose elements we call \term[en=axiom schema (\cite[82]{VanDalen2004LogicAndStructure})]{logical axiom schemas}.

  For any axiom schema \( \Phi \) and any \hyperref[def:atomic_propositional_instantiation]{atomic instantiation} \( \BbbI \) defined for the placeholders of \( \Phi \), we call the formula \( \Phi[\BbbI] \) a \term{logical axiom}.
\end{definition}
\begin{comments}
  \item Similar general definitions appear in \incite[6D1]{Hindley1997BasicSTT} and \incite[46]{Герасимов2014Вычислимость}.

  \item Since we do not require the logical axioms to be (semantic) tautologies, an axiomatic derivation system may fail to be \hyperref[def:general_logic]{sound}.

  \item The term \enquote{logical axiom} may have different meaning depending on the author. \incite[6D1]{Hindley1997BasicSTT} uses the term \enquote{axiom} for our notion of \enquote{logical axiom}. \incite[204]{Hinman2005Logic} gives an ad-hoc definition of derivability from a set of \enquote{logical axioms}. \incite{TroelstraSchwichtenberg2000BasicProofTheory} uses both \enquote{logical axiom} and \enquote{nonlogical axiom} but do not define the terms, while \incite{Kleene2002Logic} only uses the latter term, again without defining it.

  \item An alternative approach is to encode the logical axioms as inference rules without premises, as it is done in \cite[103]{Mimram2020ProgramEqualsProof}.
\end{comments}

\begin{definition}\label{def:propositional_axiomatic_derivation}\mcite[51]{TroelstraSchwichtenberg2000BasicProofTheory}
  Fix an \hyperref[def:propositional_axiomatic_derivation_system]{axiomatic derivation system}.

  An \term[ru=вывод (\cite[def. 1.2.4]{Герасимов2014Вычислимость})]{axiomatic derivation} of the single formula \( \varphi \) from the set \( \Gamma \) of formulas is a nonempty list \( \psi_1, \ldots, \psi_n \) of formulas such that \( \psi_n = \varphi \) and, for every \( k = 1, \ldots, n \), any of the following hold:
  \begin{thmenum}
    \thmitem{def:propositional_axiomatic_derivation/axiom} \( \psi_k \) is a logical axiom, i.e. there exists an axiom schema \( \Psi_k \) and an \hyperref[def:atomic_propositional_instantiation]{atomic instantiation} \( \BbbI \) such that \( \psi_k = \Psi_k[\BbbI] \).
    \thmitem{def:propositional_axiomatic_derivation/premise} \( \psi_k \) is a premise, i.e. it belongs to \( \Gamma \).
    \thmitem{def:propositional_axiomatic_derivation/mp} There exist indices \( i \) and \( j \), both smaller than \( k \), such that \( \psi_j = (\psi_i \synimplies \psi_k) \).
  \end{thmenum}
\end{definition}
\begin{comments}
  \item \incite[51]{TroelstraSchwichtenberg2000BasicProofTheory} use the term \enquote{axiomatic deduction}. We prefer \enquote{derivation} to \enquote{deduction} based on an analogy with \hyperref[def:formal_grammar/derivation]{derivations} on \hyperref[def:formal_grammar]{formal grammars}. \incite[115]{CitkinMuravitsky2022ConsequenceRelations} also prefer the term \enquote{derivation}.

  \item \Cref{def:propositional_axiomatic_derivation/mp} can be expressed via the \hyperref[def:inference_rule]{inference rule} \ref{inf:def:axiomatic_derivation_as_natural_deduction/mp}, as will be discussed in \cref{def:axiomatic_derivation_as_natural_deduction}.
\end{comments}

\begin{definition}\label{def:propositional_axiomatic_derivation_consequence}\mcite[205]{Hinman2005Logic}
  To a fixed \hyperref[def:propositional_axiomatic_derivation_system]{axiomatic derivation system} we associate a \hyperref[def:consequence_relation]{consequence relation} as follows: we let \( \Gamma \vdash \varphi \) if there is an \hyperref[def:propositional_axiomatic_derivation]{axiomatic derivation} of \( \varphi \) whose premises are in \( \Gamma \).
\end{definition}
\begin{defproof}
  We must show that \( {\vdash} \) is indeed a consequence relation.

  \SubProofOf[def:consequence_relation/reflexivity]{reflexivity} \Cref{def:propositional_axiomatic_derivation/premise} ensures that \( \Gamma \vdash \varphi \) whenever \( \varphi \in \Gamma \).

  \SubProofOf[def:consequence_relation/monotonicity]{monotonicity} If \( \Gamma \vdash \varphi \), then there exists a derivation of \( \varphi \) from \( \Gamma \). Such a derivation also proves \( \varphi \) from any superset of \( \Gamma \).

  \SubProofOf[def:consequence_relation/transitivity]{transitivity} Suppose that \( \Delta, \Epsilon \vdash \varphi \) and that, for every \( \psi \in \Delta \), we have \( \Gamma, \Epsilon \vdash \psi \).

  Let \( \theta_1, \ldots, \theta_n \) be a derivation of \( \varphi \) from \( \Delta \cup \Epsilon \) and let \( \chi_{1,k}, \ldots, \chi_{m_k,k} \) be a derivation of \( \theta_k \) from \( \Gamma \cup \Epsilon \). Concatenating them, we obtain a derivation of \( \varphi \) from \( \Gamma \cup \Epsilon \):
  \begin{equation*}
    \chi_{1,1}, \ldots, \chi_{m_1,1}, \ldots, \chi_{1,n}, \ldots, \chi_{m_n,n}.
  \end{equation*}
\end{defproof}

\begin{proposition}\label{thm:propositional_axiomatic_derivation_entailment_compact}
  Every \hyperref[def:propositional_axiomatic_derivation_consequence]{axiomatic derivation entailment relation} is \hyperref[def:consequence_relation/compactness]{compact}.
\end{proposition}
\begin{comments}
  \item This is one of several compactness theorems presented here --- see \cref{rem:logical_compactness_theorems}.
\end{comments}
\begin{proof}
  An axiomatic derivation is, by definition, a finite list of formulas. It is sufficient to only consider the premises used in the derivation.
\end{proof}

\paragraph{Implicational logic}

Implicational logic is both a toy derivation system we will explore and a useful device for demonstrating the \hyperref[con:curry_howard_correspondence]{Curry-Howard correspondence} in \cref{ex:con:curry_howard_correspondence/minimal_implicational}.

\begin{concept}\label{con:syntax_fragment}\mimprovised
  We will refer to any reasonable restriction of a \hyperref[con:syntax_semantics_duality]{formalized syntax} as \term[en=fragment (\cite[\S 2.2.6]{Mimram2020ProgramEqualsProof})]{fragment}.

  For example, the formulas in conjunctive and disjunctive normal forms, as defined in \cref{def:propositional_cnf_and_dnf}, are a subset of all propositional formulas. This constitutes a fragment.

  Describing fragments is sometimes as simple as removing \hyperref[def:formal_grammar]{formal grammar rules}. For example, consider the grammar schema of propositional formulas from \cref{def:propositional_formula}, where
  \begin{bnf*}
    \bnfprod{formula}            {\bnfpn{constant formula} \bnfor} \\
    \bnfmore                     {\bnfpn{propositional variable} \bnfor} \\
    \bnfmore                     {\bnfpn{negation formula} \bnfor} \\
    \bnfmore                     {\bnfpn{connective formula}}
  \end{bnf*}

  The Backus normal form offers a notational shorthand, as explained in \cref{con:backus_normal_form}, and the above expands to four rules:
  \begin{bnf*}
    \bnfprod{formula}            {\bnfpn{constant formula} \bnfor} \\
    \bnfprod{formula}            {\bnfpn{propositional variable} \bnfor} \\
    \bnfprod{formula}            {\bnfpn{negation formula} \bnfor} \\
    \bnfprod{formula}            {\bnfpn{connective formula}}
  \end{bnf*}

  To obtain the implicational fragment from \cref{def:implicational_propositional_fragment}, we can remove the rules
  \begin{bnf*}
    \bnfprod{formula}            {\bnfpn{constant formula}} \\
    \bnfprod{formula}            {\bnfpn{negation formula}}
  \end{bnf*}
  as well as
  \begin{bnf*}
    \bnfprod{connective}         {\bnftsq{\( \synwedge \)}} \\
    \bnfprod{connective}         {\bnftsq{\( \synimplies \)}} \\
    \bnfprod{connective}         {\bnftsq{\( \syniff \)}}
  \end{bnf*}

  The result can be compactly written quite compactly:
  \begin{bnf*}
    \bnfprod{formula}            {\bnfpn{propositional variable} \bnfor \bnfpn{formula} \bnfsp \bnftsq{\( \synimplies \)} \bnfsp \bnfpn{formula}}
  \end{bnf*}
\end{concept}
\begin{comments}
  \item This description is loosely based on \tcite{#2, where #1}[\S 2.2.6]{Mimram2020ProgramEqualsProof} writes
  \begin{displayquote}
    A \textit{fragment} of intuitionistic logic is a system obtained by restricting to formulas containing only certain connectives and the rules concerning these connectives.
  \end{displayquote}

  Mimram then proceeds to define three fragments of what we will define in \cref{def:propositional_natural_deduction} the \enquote{intuitionistic propositional natural deduction system}:
  \begin{itemize}
    \item The \enquote{implicational fragment}, in which the formula grammar rule is simplified to only include propositional variables and formulas connected via \enquote{\( \synimplies \)}. We will explicitly define this grammar in \cref{def:implicational_propositional_fragment}.

    \item The \enquote{cartesian fragment}, in which the formulas include implications and conjunctions. Via the \hyperref[con:curry_howard_correspondence]{Curry-Howard correspondence}, this fragments corresponds to a \hyperref[def:simple_type_system]{simple type system} with \hyperref[def:arrow_type]{arrow types} and \hyperref[def:simple_product_type]{product types} --- the one used \bycite{GirardEtAl1989ProofsAndTypes}.

    \item The \enquote{minimal logic} fragment, in which only the falsum \( \synbot \) is disallowed from the propositional syntax. We will find it simpler to generalize our semantics for minimal logic than to restrict the syntax; see \cref{rem:minimal_propositional_semantics}.
  \end{itemize}

  Other authors also use the word \enquote{fragment}, albeit even more loosely. For example, \incite[def. 2.3.1]{TroelstraSchwichtenberg2000BasicProofTheory} say that a \hyperref[def:fol_formula]{first-order formula} \( \varphi \) belongs to the \enquote{negative fragment} if \( \varphi \) contains no \( \synvee \) or \( \synexists \) and if atomic formulas in \( \varphi \) are negated.
\end{comments}

\begin{definition}\label{def:implicational_propositional_fragment}\mcite[49]{Mimram2020ProgramEqualsProof}
  We will call \term{implicational} the \hyperref[con:syntax_fragment]{fragment} of the \hyperref[def:propositional_formula]{grammar of propositional formulas} featuring only the propositional variables and the \hyperref[def:propositional_alphabet/connectives/conditional]{conditional connective} \( \synimplies \).
\end{definition}

\begin{definition}\label{def:minimal_implication_logic}\mcite[sec. 1.3.9]{TroelstraSchwichtenberg2000BasicProofTheory}
  \term{Minimal implicational logic} is an extraordinarily simple \hyperref[def:propositional_axiomatic_derivation_system]{axiomatic derivation system} for the \hyperref[def:implicational_propositional_fragment]{implicational fragment} of propositional logic.

  The system features the following logical axiom schemas:
  \begin{thmenum}
    \thmitem{def:minimal_implication_logic/intro} Every formula is the consequent of an implication whose antecedent can be any other formula:
    \begin{equation}\label{eq:def:minimal_implication_logic/intro}
      \syn\varphi \synimplies (\syn\psi \synimplies \syn\varphi) \tag{\( \rightarrow_A^+ \)}.
    \end{equation}

    \thmitem{def:minimal_implication_logic/dist} Implication distributes over itself:
    \begin{equation}\label{eq:def:minimal_implication_logic/dist}
      \parens[\big]{ \syn\varphi \synimplies (\syn\psi \synimplies \syn\theta) } \synimplies \parens[\big]{ (\syn\varphi \synimplies \syn\psi) \synimplies (\syn\varphi \synimplies \syn\theta)} \tag{\( \twoheadrightarrow_A \)}.
    \end{equation}
  \end{thmenum}
\end{definition}
\begin{comments}
  \item The subscript \enquote{A} in \eqref{eq:def:minimal_implication_logic/intro} highlights that it is an axiom schema. This convention allows us to distinguish the axiom schema \eqref{eq:def:minimal_implication_logic/intro} from the inference rule \ref{inf:ex:minimal_implication_logic_identity/trees/intro}.
\end{comments}

\begin{example}\label{ex:minimal_implication_logic_identity/derivations}
  Fix any \hyperref[def:minimal_implication_logic]{implicational formula} \( \varphi \) and consider the \hyperref[def:propositional_semantics/tautology]{propositional tautology}\fnote{We have shown in \cref{thm:intuitionistic_tautologies/self} that \( \varphi \synimplies \varphi \) is a tautology.}
  \begin{equation}\label{eq:ex:minimal_implication_logic_identity/derivations/final}
    \varphi \synimplies \varphi.
  \end{equation}

  We will build an \hyperref[def:propositional_axiomatic_derivation]{axiomatic derivation} in \hyperref[def:minimal_implication_logic]{minimal implicational logic}. First, consider the following two instances of \eqref{eq:def:minimal_implication_logic/intro}:
  \begin{align}
    \varphi \synimplies (\varphi \synimplies \varphi), \label{eq:ex:minimal_implication_logic_identity/derivations/intro_1} \\
    \varphi \synimplies ((\varphi \synimplies \varphi) \synimplies \varphi). \label{eq:ex:minimal_implication_logic_identity/derivations/intro_2}
  \end{align}

  We will need the following intermediate step:
  \begin{equation}\label{eq:ex:minimal_implication_logic_identity/derivations/intermediate}
    (\varphi \synimplies (\varphi \synimplies \varphi)) \synimplies (\varphi \synimplies \varphi).
  \end{equation}

  Also, we will need the following instance of \eqref{eq:def:minimal_implication_logic/dist}:
  \begin{equation}\label{eq:ex:minimal_implication_logic_identity/derivations/dist}
    \eqref{eq:ex:minimal_implication_logic_identity/derivations/intro_2} \synimplies \eqref{eq:ex:minimal_implication_logic_identity/derivations/intermediate}
  \end{equation}

  Our derivation is then
  \begin{equation*}
    \eqref{eq:ex:minimal_implication_logic_identity/derivations/intro_1}, \eqref{eq:ex:minimal_implication_logic_identity/derivations/intro_2}, \eqref{eq:ex:minimal_implication_logic_identity/derivations/dist}, \eqref{eq:ex:minimal_implication_logic_identity/derivations/intermediate}, \eqref{eq:ex:minimal_implication_logic_identity/derivations/final}.
  \end{equation*}

  Indeed, we can derive the intermediate step \eqref{eq:ex:minimal_implication_logic_identity/derivations/intermediate} from \eqref{eq:ex:minimal_implication_logic_identity/derivations/dist} and \eqref{eq:ex:minimal_implication_logic_identity/derivations/intro_2}, and we can derive the conclusion \eqref{eq:ex:minimal_implication_logic_identity/derivations/final} from the intermediate step \eqref{eq:ex:minimal_implication_logic_identity/derivations/intermediate} and \eqref{eq:ex:minimal_implication_logic_identity/derivations/intro_1}.
\end{example}
\begin{comments}
  \item \hyperref[con:proof_tree]{Proof trees} allow a more demonstrative proof --- see \eqref{ex:minimal_implication_logic_identity/trees}.
\end{comments}

\begin{algorithm}[Derivation conclusion hypothesis introduction]\label{alg:derivation_conclusion_hypothesis_introduction}
  We will present an algorithm that, given an \hyperref[def:propositional_axiomatic_derivation]{axiomatic derivation} of \( \psi \) from \( \Gamma \cup \set{ \varphi } \), will provide a derivation of \( \varphi \synimplies \psi \) from \( \Gamma \).

  We will refer to the formula \( \varphi \synimplies \psi \) as our \term{goal}. We will use recursion on the length of the derivation \( \theta_1, \ldots, \theta_n \).

  \begin{thmenum}
    \thmitem{alg:derivation_conclusion_hypothesis_introduction/goal_premise} If our goal is either an axiom or a premise from \( \Gamma \), the desired derivation is simply the singleton list consisting of \( \varphi \synimplies \phi \).

    \thmitem{alg:derivation_conclusion_hypothesis_introduction/identity} Otherwise, if \( \varphi = \psi \), then we must derive \( \varphi \synimplies \varphi \), which can be done via logical axioms alone as shown in \cref{ex:minimal_implication_logic_identity/derivations}.

    \thmitem{alg:derivation_conclusion_hypothesis_introduction/conclusion_premise} Otherwise, if \( \psi \) is either a nonlogical axiom or a premise from \( \Gamma \), then the following is a derivation of \( \varphi \synimplies \psi \):
    \begin{equation*}
      \underbrace{\psi \synimplies (\varphi \synimplies \psi)}_{\eqref{eq:def:minimal_implication_logic/intro}},
      \psi,
      \varphi \synimplies \psi.
    \end{equation*}

    \thmitem{alg:derivation_conclusion_hypothesis_introduction/recursive} Otherwise, there must exist indices \( i \) and \( j \) such that
    \begin{equation*}
      \theta_i = \theta_j \synimplies \theta_n.
    \end{equation*}

    Suppose that the inductive hypothesis holds for all formulas preceding \( \theta_n = \phi \) in the derivation. Then we can obtain a derivation \( \chi_1, \ldots, \chi_m \) of \( \varphi \synimplies \theta_i \) and \( \omega_1, \ldots, \omega_k \) of \( \varphi \synimplies \theta_j \), and use them to build a derivation of our goal:
    \small
    \begin{equation*}
      \overbrace{\chi_1, \ldots, \chi_m}^{\varphi \synimplies \theta_i},
      \underbrace{(\varphi \synimplies \theta_i) \synimplies ((\varphi \synimplies \theta_j) \synimplies (\varphi \synimplies \theta_n))}_{\eqref{eq:def:minimal_implication_logic/intro}},
      ((\varphi \synimplies \theta_j) \synimplies (\varphi \synimplies \theta_n)),
      \overbrace{\omega_1, \ldots, \omega_k}^{\varphi \synimplies \theta_j},
      \varphi \synimplies \theta_n.
    \end{equation*}
    \normalsize
  \end{thmenum}
\end{algorithm}
\begin{comments}
  \item This algorithm can be found as \identifier{math.logic.derivation.minimal_implicational_logic.introduce_conclusion_hypothesis} in \cite{notebook:code}.
\end{comments}

\begin{theorem}[Implicational syntactic deduction theorem]\label{thm:implicational_syntactic_deduction_theorem}
  With respect to the \hyperref[def:minimal_implication_logic]{minimal implicational logic}, for arbitrary propositional formulas, we have
  \begin{equation*}
    \Gamma, \varphi \vdash \psi \T{if and only if} \Gamma \vdash \varphi \synimplies \psi.
  \end{equation*}
\end{theorem}
\begin{comments}
  \item This is one of several deduction theorems presented here --- see \cref{rem:deduction_theorem_list}.
\end{comments}
\begin{proof}
  \SufficiencySubProof If \( \Gamma, \varphi \vdash \varphi \), \fullref{alg:derivation_conclusion_hypothesis_introduction} allows us to build a derivation of \( \varphi \synimplies \varphi \) from \( \Gamma \), and the existence of such a derivation implies \( \Gamma \vdash \varphi \).

  \NecessitySubProof If \( \Gamma \vdash \varphi \synimplies \psi \), we can add \( \varphi, \psi \) to any derivation to obtain a derivation of \( \psi \) from \( \Gamma \cup \set{ \varphi } \).
\end{proof}

\begin{theorem}[Minimal implicational logic soundness]\label{thm:minimal_implicational_logic_soundness}
  \hyperref[def:minimal_implication_logic]{Minimal implicational logic} is \hyperref[def:general_logic]{sound} with respect to \hyperref[def:propositional_semantics]{intuitionistic semantics}.
\end{theorem}
\begin{comments}
  \item Since we are only dealing with the \hyperref[def:implicational_propositional_fragment]{implicational fragment}, the proof of soundness will also hold for the minimal semantics that we will sketch in \cref{rem:minimal_propositional_semantics}.

  \item See \cref{rem:soundness_and_completeness_theorem_list} for a list of soundness and completeness theorems.
\end{comments}
\begin{proof}
  \SubProof{Proof for logical axioms} We must first prove that the logical axioms are \hyperref[def:propositional_semantics/tautology]{semantic tautologies}.

  \SubProof*{Proof for axiom schema \eqref{eq:def:minimal_implication_logic/intro}} Consider the formula \( \varphi = \psi \synimplies (\theta \synimplies \psi) \) and an arbitrary \hyperref[alg:propositional_denotation]{propositional interpretation} \( I \).

  \Cref{thm:def:heyting_algebra/leq_right} implies that
  \begin{equation*}
    \Bracks{\psi}_I \leq \parens[\big]{ \Bracks{\theta}_I \rightarrow \Bracks{\psi}_I },
  \end{equation*}
  hence, by \cref{thm:def:heyting_algebra/leq},
  \begin{equation*}
    \underbrace{ \Bracks{\psi}_I \rightarrow \parens[\big]{ \Bracks{\theta}_I \rightarrow \Bracks{\psi}_I } }_{\Bracks{\varphi}_I} = \semtop.
  \end{equation*}

  \SubProof*{Proof for axiom schema \eqref{eq:def:minimal_implication_logic/dist}} Consider
  \begin{equation*}
    \varphi = (\psi \rightarrow (\theta \rightarrow \chi)) \rightarrow ((\psi \rightarrow \theta) \rightarrow (\theta \rightarrow \chi)).
  \end{equation*}

  \Cref{thm:def:heyting_algebra/dist} implies that
  \begin{equation*}
    \parens[\big]{ \Bracks{\psi}_I \rightarrow \parens[\big]{ \Bracks{\theta}_I \rightarrow \Bracks{\chi}_I } } \leq \parens[\big]{ \Bracks{\psi}_I \rightarrow \Bracks{\theta}_I } \rightarrow \parens[\big]{ \Bracks{\theta}_I \rightarrow \Bracks{\chi}_I },
  \end{equation*}
  hence \( \Bracks{\varphi}_I = \semtop \) follows via \cref{thm:def:heyting_algebra/leq}

  \SubProof{Proof for premises} If \( \varphi \) is in \( \Gamma \), then \( \Gamma \vDash \varphi \) holds since \( \vDash \) is a consequence relation and thus satisfies \cref{def:consequence_relation/reflexivity}.

  \SubProof{Proof for general formulas} Now suppose that \( \Gamma \vdash \varphi \). Let \( I \) be an interpretation that satisfies every formula in \( \Gamma \). We will use induction on derivation length \( n \) to show that \( I \) satisfies \( \varphi \).

  \begin{itemize}
    \item In the base case \( n = 1 \), \( \varphi \) must either be a logical axiom or a premise from \( \Gamma \), and we have already shown that, in this case, \( \Gamma \vDash \varphi \).

    \item Suppose that \( \Gamma \vdash \varphi \) implies \( \Gamma \vDash \varphi \) when the derivation has length less than \( n \), and let \( \psi_1, \ldots, \psi_n = \varphi \) be a derivation of \( \varphi \) from \( \Gamma \).

    We must now perform case analysis on why \( \Gamma \vdash \varphi \).
    \begin{itemize}
      \item If \cref{def:propositional_axiomatic_derivation/axiom} holds, then \( \varphi \) is a logical axiom, and if \cref{def:propositional_axiomatic_derivation/premise} holds, then \( \varphi \) is a premise from \( \Gamma \), and we have already shown that \( \Gamma \vDash \varphi \) in these cases even without the assumption that \( \Gamma \vdash \varphi \).

      \item Otherwise, the case \cref{def:propositional_axiomatic_derivation/mp} must hold, that is, there must exist indices \( i \) and \( j \), both strictly smaller than \( n \), such that \( \psi_j = (\psi_i \synimplies \psi_n) \).

      Then \( \psi_1, \ldots, \psi_i \) is a derivation of \( \psi_i \), and the inductive hypothesis implies that \( \Gamma \vDash \psi_i \). We can similarly conclude that \( \Gamma \vDash \psi_j \). Then
      \begin{equation*}
        \underbrace{ \Bracks{ \psi_j }_I }_\semtop = \underbrace{ \Bracks{ \psi_i }_I }_\semtop \rightarrow \Bracks{ \psi_n }_I.
      \end{equation*}

      Then \cref{thm:def:heyting_algebra/leq} implies that \( \semtop \leq \Bracks{ \psi_n }_I \), hence \( \Bracks{ \psi_n }_I = \semtop \). By noting that \( \psi_n = \varphi \), we conclude that \( I \vDash \varphi \).

      Therefore, \( \Gamma \vDash \varphi \).
    \end{itemize}
  \end{itemize}
\end{proof}
