\section{Relations}\label{sec:relations}

\begin{remark}\label{rem:cartesian_products_and_functions}
  In the literature, with slight variations, a Cartesian product of a family of sets is defined the set of all \hyperref[def:choice_function]{choice functions}, while a function is defined as a binary relation -- a subset of the binary Cartesian product. Thus, it is common to have two distinct definitions for Cartesian products.

  We will instead proceed as follows:
  \begin{itemize}
    \item First, in \fullref{def:kuratowski_pair}, we will explicitly construct a Kuratowski pair \( \braket{ a, b } \) of two sets \( a \) and \( b \). We will only use it as an auxiliary definition satisfying \fullref{thm:kuratowski_pair_extensionality}, needed for defining indexed families.

    \item In \fullref{def:indexed_family}, we will define an indexed family \( \seq{ a_k }_{k \in \mscrK} \) of sets as a set of Kuratowski pairs.

    \item In \fullref{def:cartesian_product}, we will define Cartesian products as sets of indexed families. Later, we will prove \fullref{thm:cartesian_product_universal_property}, which will allow us to regard elements of a Cartesian product as \hyperref[def:choice_function]{choice functions}.

    \item In \fullref{def:ordered_tuple} and \fullref{def:sequence}, we will define ordered tuples and sequences as certain indexed families, which will allow us to regard elements of certain Cartesian products as ordered tuples.

    \item In \fullref{def:function}, we defined functions as indexed families with a fixed domain and codomain (whereas we do not generally care about the codomain of an indexed family). As discussed in \fullref{rem:function_definition}, functions are often defined as sets of Kuratowski pairs, without any regard to their codomain, thus our notion of indexed family coincides with some authors' notion of a function.
  \end{itemize}

  As mentioned in the beginning, this approach differs from what is established in the literature. We list approaches used in different sources.
  \begin{itemize}
    \item First, a Kuratowski pair \( \braket{ a, b } \) of \( a \) and \( b \) is explicitly constructed.

    The approach of constructing functions using Kuratowski pairs is done, among others, by
    \incite[def. 6.2.1]{Hinman2005Logic},
    \incite[def. I.4.11]{Kunen2013SetTheory},
    \incite[235]{Mendelson2015Logic},
    \incite[36]{Enderton1977SetTheory},
    \incite[23]{Halmos1960NaiveSetTheory},
    \incite[1]{Engelking1989GeneralTopology},
    \incite[139]{КолмогоровДрагалин2006Логика},
    \incite[127]{Герасимов2011Вычислимость},
    \incite[thm. 9]{ШеньВерещагин2020НачалаТеорииМножеств},
    \incite[\S 1.2.3]{КусраевКутателадзе2005БулевозначныйАнализ}.

    \incite[72]{Bourbaki2004TheoryOfSets} instead introduce an axiom that guarantees the existence of an ordered pair satisfying \fullref{thm:kuratowski_pair_extensionality}.

    \incite{Архангельский1988КанторовскаяТеорияМножеств} defines the other concepts leading to general Cartesian products without a formal definition of ordered pairs.

    \item A binary Cartesian product \( A \times B \) is defined as sets of all Kuratowski pairs \( \braket{ a, b } \), where \( a \) is in \( A \) and \( b \) is in \( B \).

    All aforementioned authors construct binary Cartesian products in this way ---
    \incite[def. 6.2.3]{Hinman2005Logic},
    \incite[def. I.6.5]{Kunen2013SetTheory},
    \incite[240]{Mendelson2015Logic},
    \incite[37]{Enderton1977SetTheory},
    \incite[24]{Halmos1960NaiveSetTheory},
    \incite[1]{Engelking1989GeneralTopology},
    \incite[def. I.5.2.1]{Bourbaki2004TheoryOfSets},
    \incite[141]{КолмогоровДрагалин2006Логика},
    \incite[132]{Герасимов2011Вычислимость},
    \incite[9]{Архангельский1988КанторовскаяТеорияМножеств} and
    \incite[\S 1.2.3]{КусраевКутателадзе2005БулевозначныйАнализ}.

    \incite[32]{ШеньВерещагин2020НачалаТеорииМножеств}, when defining Cartesian products, defer the definition of Kuratowski pairs for a few pages, instead relying on an intuitive definition of ordered pairs.

    \item A function from \( A \) to \( B \) is then defined via its graph as any subset of \( A \times B \) that contains exactly one pair \( (a, b) \) for every \( a \) in \( A \)\fnote{We discuss in \fullref{rem:function_definition} that the definition of a function must also explicitly specify its domain and codomain, not only its graph.}.

    Out of the aforementioned authors, \incite[def. I.3.1]{Bourbaki2004TheoryOfSets} and \incite[9]{Архангельский1988КанторовскаяТеорияМножеств} define function graphs as subsets of the Cartesian product after discussing functions. Arhangelskii does not define functions formally.

    Most other authors define functions as subsets of Cartesian products ---
    \incite[def. 6.2.8]{Hinman2005Logic},
    \incite[42]{Enderton1977SetTheory},
    \incite[30]{Halmos1960NaiveSetTheory},
    \incite[1]{Engelking1989GeneralTopology},
    \incite[143]{КолмогоровДрагалин2006Логика},
    \incite[133]{Герасимов2011Вычислимость} and
    \incite[32]{ШеньВерещагин2020НачалаТеорииМножеств}.

    \incite[def. I.6.3]{Kunen2013SetTheory}, \incite[240]{Mendelson2015Logic} and \incite[\S 1.2.4]{КусраевКутателадзе2005БулевозначныйАнализ} define functions as sets of tuples, without referencing Cartesian products.

    \item A \hyperref[def:choice_function]{choice function} \( f \) for a family of nonempty sets \( \mscrA \) is defined as a function from \( \mscrA \) to the union \( \bigcup \mscrA \) such that, for every \( A \) in \( \mscrA \), the value \( f(A) \) belongs to \( A \).

    Both choice functions and general products are explicitly discussed by \incite[60]{Halmos1960NaiveSetTheory}. \incite[prop. 4.42(a)]{Mendelson2015Logic} and \incite[thm. 6M(3)]{Enderton1977SetTheory} only briefly mention choice functions, but discuss general products.

    \incite[def. 6.4.1]{Hinman2005Logic}, \incite[def. I.12.2]{Kunen2013SetTheory} and \incite[136]{Герасимов2011Вычислимость} discuss choice functions, but not general Cartesian products.

    \item The Cartesian product \( \prod \mscrA \) of the family \( \mscrA \) is then defined as the set of all choice functions on \( \mscrA \). The \hyperref[def:zfc/choice]{axiom of choice} is required to show that arbitrary products are well-defined.

    \incite[131]{Mendelson2015Logic} and \incite[54]{Enderton1977SetTheory} define general Cartesian products and later mention choice functions without even stating a connection.

    \incite[def. I.5.3.1]{Bourbaki2004TheoryOfSets},
    \incite[2]{Engelking1989GeneralTopology},
    \incite[146]{КолмогоровДрагалин2006Логика} and
    \incite[41]{ШеньВерещагин2020НачалаТеорииМножеств}
    define arbitrary products without stating and discussing choice functions separately, even when discussing the axiom of choice.

    \incite[36]{Halmos1960NaiveSetTheory}, prior to discussing choice functions, defines the Cartesian product of the family \( \seq{ A_k }_{k \in \mscrK} \)  as the set of all indexed families \( \seq{ a_k }_{k \in \mscrK} \) such that \( a_k \) belongs to \( A_k \) for every \( k \) in \( \mscrK \). \incite[11]{Архангельский1988КанторовскаяТеорияМножеств} proceeds similarly.
  \end{itemize}
\end{remark}

\paragraph{Kuratowski pairs}

\begin{definition}\label{def:kuratowski_pair}\mcite[thm. 9]{ШеньВерещагин2020НачалаТеорииМножеств}
  A \term[ru=упорядоченная пара по Куратовскому (\cite[thm. 9]{ШеньВерещагин2020НачалаТеорииМножеств})]{Kuratowski pair} consisting of the sets \( a \) and \( b \) is the set
  \begin{equation}\label{eq:def:kuratowski_pair}
    \braket{ a, b } \coloneqq \set{ \set{ a }, \set{ a, b } }.
  \end{equation}

  The following \hyperref[con:formula_defined_predicate]{formula-defined predicate} encodes this notion and will be used in \fullref{def:indexed_family} to define \( \ref{eq:def:indexed_family/predicate}[\synf, \syna, \synb] \):
  \begin{equation*}\taglabel[\op{IsPair}]{eq:def:kuratowski_pair/predicate}
    \ref{eq:def:kuratowski_pair/predicate}[\synp, \syna, \synb] \coloneqq \qforall \synx \parens[\Big]{ \synx \in \synp \syniff \parens[\Big]{ \parens[\Big]{ \qforall {\syny \in \synx} \syny \syneq \syna } \synvee \parens[\Big]{ \qforall {\syny \in \synx} (\syny \syneq \syna \synvee \syny \syneq \synb) } } }.
  \end{equation*}
\end{definition}
\begin{comments}
  \item We will use this definition only as a technical step for defining indexed families. What matters to us is the property \fullref{thm:kuratowski_pair_extensionality}, which is also satisfied by ordered pairs as defined in \fullref{def:ordered_tuple}. We will use the angle bracket notation only in the few places where we will explicitly rely on ordered pairs being defined by \eqref{eq:def:kuratowski_pair}.

  \item For unordered pairs, we have the weaker statement \fullref{thm:unordered_pair_extensionality}. For indexed families, we have the more general statement \fullref{thm:indexed_family_extensionality}.
\end{comments}

\begin{proposition}\label{thm:kuratowski_pair_extensionality}
  For \hyperref[def:kuratowski_pair]{Kuratowski pairs} the following property holds:
  \begin{equation}\label{eq:thm:kuratowski_pair_extensionality}
    \braket{ a, b } = \braket{ c, d } \T{if and only if} a = c \T{and} b = d.
  \end{equation}
\end{proposition}
\begin{comments}
  \item \incite[72]{Bourbaki2004TheoryOfSets} introduce an axiom for the existence of ordered pairs satisfying \eqref{eq:thm:kuratowski_pair_extensionality}. See \fullref{rem:cartesian_products_and_functions} for a broader discussion.
\end{comments}
\begin{proof}
  \SufficiencySubProof Suppose that
  \begin{equation*}
    \set{ \set{ a }, \set{ a, b } }
    =
    \braket{ a, b }
    =
    \braket{ c, d }
    =
    \set{ \set{ c }, \set{ c, d } }.
  \end{equation*}

  \Fullref{thm:unordered_pair_extensionality} implies that there are only two cases:
  \begin{itemize}
    \item If \( \set{ a } = \set{ c, d } \) and \( \set{ a, b } = \set{ c } \), then, by the \hyperref[def:naive_set_theory/extensionality]{axiom of extensionality}, the equalities imply \( a = c = d \) and \( a = b = c \), correspondingly. Hence, \( a = b = c = d \).

    \item If \( \set{ a } = \set{ c } \) and \( \set{ a, b } = \set{ c, d } \), then \( a = c \) from the first equality, and \fullref{thm:unordered_pair_extensionality} applied to the second equality gives us two cases:
    \begin{itemize}
      \item If \( a = c \) and \( b = d \), we are done.
      \item If \( a = d \) and \( b = c \), since \( a = c \), it follows that \( a = b = c = d \).
    \end{itemize}
  \end{itemize}

  \NecessitySubProof If \( a = c \) and \( b = d \), extensionality implies that \( \set{ a } = \set{ c } \), and \fullref{thm:unordered_pair_extensionality} implies that \( \set{ a, c } = \set{ b, d } \). We can again use \fullref{thm:unordered_pair_extensionality} to conclude that
  \begin{equation*}
    \braket{ a, b }
    =
    \set{ \set{ a }, \set{ a, b } }
    =
    \set{ \set{ c }, \set{ c, d } }
    =
    \braket{ c, d }.
  \end{equation*}
\end{proof}

\paragraph{Indexed families}

\begin{definition}\label{def:indexed_family}
  Fix a set \( \mscrK \), which we will call the \term[en=index set (\cite[34]{Halmos1960NaiveSetTheory})]{index set}. A \( \mscrK \)-\term[ru=индексированное семейство (\cite[8]{Архангельский1988КанторовскаяТеорияМножеств}), en=indexed family (\cite[2]{Engelking1989GeneralTopology}); family (\cite[34]{Halmos1960NaiveSetTheory})]{indexed family} is simply a set \( \mscrA \) of \hyperref[def:kuratowski_pair]{Kuratowski pairs} such that:
  \begin{thmenum}
    \thmitem{def:indexed_family/minimality} For every pair \( \braket{ k, a_k } \) in \( \mscrA \), \( k \) is a member of \( \mscrK \).
    \thmitem{def:indexed_family/existence} For every \( k \) in \( \mscrK \), there exists a pair \( \braket{ k, a_k } \) in \( \mscrK \).
    \thmitem{def:indexed_family/uniqueness} For every \( k \) in \( \mscrK \),  if \( \braket{ k, a_k } \) and \( \braket{ k, b_k } \) are both pairs in \( \mscrA \), then \( a_k = b_k \).
  \end{thmenum}

  Thus, for every \( k \) in \( \mscrK \), there corresponds a unique \( a_k \) in \( \mscrA \), and \( \mscrA \) contains no other pairs. We call \( k \) the \term[en=index (\cite[36]{Halmos1960NaiveSetTheory})]{index} of \( a_k \), and \( a_k \) --- the \( k \)-th \term[ru=координата (\cite[11]{Архангельский1988КанторовскаяТеорияМножеств}), en=coordinate (\cite[36]{Halmos1960NaiveSetTheory})]{coordinate}, \term[bg=компонента (\cite[367]{ГеновМиховскиМоллов1991Алгебра}), en=component (\cite[35]{Enderton1977SetTheory})]{component} or \term[ru=терм (\cite[11]{Архангельский1988КанторовскаяТеорияМножеств}), en=term (\cite[34]{Halmos1960NaiveSetTheory})]{term} of \( \mscrA \). This motivates the notation \( \seq{ a_k }_{k \in \mscrK} \) for \( \mscrA \).

  We will make use of the following \hyperref[con:formula_defined_predicate]{formula-defined predicate}, which states that \( \synf \) is a family indexed by \( \syna \) whose values are in \( \synb \):
  \begin{equation*}\taglabel[\op{IsFamily}]{eq:def:indexed_family/predicate}
    \begin{aligned}
      \ref{eq:def:indexed_family/predicate}[\synf, \syna, \synb]
      \coloneqq
      &\overbrace
        {
          \parens[\Big]
            {
              \qforall {\synx \in \syna} \qExists {\syny \in \synb} \qforall \synp (\ref{eq:def:kuratowski_pair/predicate}[\synp, \synx, \syny] \syniff \synp \in \synf)
            }
        }^{\mathclap{\T*{For every index} \synx \T*{in} \syna, \T*{there exists a unique} \syny \T*{in} \synb \T*{such that the pair} (\synx, \syny) \T*{belongs to} \synf}}
      \synwedge \\
      &\underbrace
        {
          \parens[\Big]{
            \qforall {\synp \in \synf} \qexists {\synx \in \syna} \qexists {\syny \in \synb} \ref{eq:def:kuratowski_pair/predicate}[\synp, \synx, \syny]
          }
        }_{\mathclap{\T*{For every pair} \synp \T*{in} \synf, \T*{there exists an index} \synx \T*{in} \syna \T*{and a member} \syny \T*{of} \synb \T*{such that} \synp = (\synx, \syny)}}
    \end{aligned}
  \end{equation*}
\end{definition}
\begin{comments}
  \item In accordance with \fullref{rem:cartesian_products_and_functions}, we define indexed families as sets of pairs, and then proceed to define Cartesian products in terms of indexed families. In \fullref{def:function}, we will define functions via indexed families, unlike, for example, \incite[ch. 9]{Halmos1960NaiveSetTheory} and \incite[2]{Engelking1989GeneralTopology}, who formalize indexed families via functions.

  Nevertheless, after we prove \fullref{thm:cartesian_product_universal_property}, we will regard indexed families as functions whenever we will find it convenient.

  An extensive discussion of indexed families (which Halmos simply calls \enquote{families}) can be found in \cite[ch. 9]{Halmos1960NaiveSetTheory}.

  \item In \fullref{def:indexed_family/uniqueness} we can instead require \( \braket{ k, a_k } \) and \( \braket{ k, b_k } \) to be equal, and \fullref{thm:kuratowski_pair_extensionality} would still imply that \( a_k = b_k \).

  \item As discussed in \fullref{rem:family_to_indexed_family}, we can regard any non-indexed family of sets as an indexed family.
\end{comments}

\begin{proposition}\label{thm:indexed_family_extensionality}
  For \( \mscrK \)-\hyperref[def:indexed_family]{indexed families} the following property holds:
  \begin{equation}\label{eq:thm:indexed_family_extensionality}
    \seq{ a_k }_{k \in \mscrK} = \seq{ b_k }_{k \in \mscrK} \T{if and only if} a_k = b_k \T{for every} k \T{in} \mscrK.
  \end{equation}
\end{proposition}
\begin{comments}
  \item We have a similar statement for \hyperref[def:kuratowski_pair]{Kuratowski pairs} --- \fullref{thm:kuratowski_pair_extensionality}.
\end{comments}
\begin{proof}
  When justifying the notation \( \seq{ a_k }_{k \in \mscrK} \) in \fullref{def:indexed_family}, we have already noted that the coordinates of an indexed family completely determine it. This statement is then a trivial corollary.
\end{proof}

\begin{definition}\label{def:ordered_tuple}
  Fix a natural number \( n \) --- more explicitly, a member of the \hyperref[thm:smallest_inductive_set_existence]{smallest inductive set} \( \omega \).

  An \term[ru=кортеж (\cite[def. 1.2]{БелоусовТкачёв2004ДискретнаяМатематика})]{ordered tuple} of \term{length} \( n \) is a \hyperref[def:indexed_family]{family} indexed by \( n \). Other terms in use are \term[ru=упорядоченная \( n \)-ка (\cite[9]{Архангельский1988КанторовскаяТеорияМножеств}), en=\( n \)-tuple (\cite[51]{Enderton1977SetTheory})]{\( n \)-tuple}, \term[en=finite sequence (\cite[9]{Halmos1960NaiveSetTheory})]{finite sequence} and, in some contexts, \term[en=list (\cite{Savage2008ModelsOfComputation})]{list}.

  Rather than using \( \seq{ a_k }_{k \in n} \), we will prefer the notation
  \begin{equation*}
    (a_1, \ldots, a_n),
  \end{equation*}
  where, in accordance with \fullref{rem:peano_arithmetic_zero}, for convenience we start indexing at \( 1 \).

  When we are not interested in the tuple itself as a set, we will skip the parentheses and instead use the notation
  \begin{equation*}
    a_1, \ldots, a_n.
  \end{equation*}
\end{definition}
\begin{comments}
  \item Both ordered tuples and \hyperref[def:sequence]{sequence} are instances of transfinite sequences, which we will define in \fullref{def:transfinite_sequence}.
\end{comments}

\begin{definition}\label{def:ordered_tuple_length_terminology}
  We will use the following terms for \hyperref[def:ordered_tuple]{\( n \)-tuples} of certain lengths:
  \begin{itemize}
    \item \term[en=empty tuple (\cite[example 3.5.10]{Tao2022AnalysisI})]{Empty tuple} when \( n = 1 \),
    \item \term{Singleton tuple} when \( n = 1 \),
    \item \term[bg=наредена двойка (\cite[367]{ГеновМиховскиМоллов1991Алгебра}), ru=(упорядоченная) пара (\cite[38]{БелоусовТкачёв2004ДискретнаяМатематика}), en=(ordered) pair (\cite[23]{Halmos1960NaiveSetTheory})]{Pair} when \( n = 2 \),
    \item \term[ru=(упорядоченная) тройка (\cite[39]{БелоусовТкачёв2004ДискретнаяМатематика}), en=(ordered) triple (\cite[42]{Enderton1977SetTheory})]{Triple} when \( n = 3 \),
    \item \term[ru=(упорядоченная) четвёрка (\cite[39]{БелоусовТкачёв2004ДискретнаяМатематика}), en=(ordered) quadruple (\cite[42]{Enderton1977SetTheory})]{Quadruple} when \( n = 4 \),
    \item \term[ru=(упорядоченная) пятёрка (\cite[39]{БелоусовТкачёв2004ДискретнаяМатематика}), en=(ordered) quintuple (\cite[42]{Enderton1977SetTheory})]{Quintuple} when \( n = 5 \),
  \end{itemize}
\end{definition}

\begin{remark}\label{rem:kuratowski_pairs_and_tuples}
  The \hyperref[def:ordered_tuple]{ordered pair} \( (a, b) \) has elements
  \begin{equation*}
    (a, b) = \set[\Big]{ \set{ \set{ 1 }, \set{ 1, a } }, \set{ \set{ 2 }, \set{ 2, b } } }
  \end{equation*}
  is formally different from the \hyperref[def:kuratowski_pair]{Kuratowski pair}
  \begin{equation*}
    \braket{ a, b } = \set[\Big]{ \set{ a }, \set{ a, b } }.
  \end{equation*}

  We could define an ordered triple as \( \braket{ \braket{ a, b }, c } \), like many of the authors discussed in \fullref{rem:cartesian_products_and_functions}.

  For the sake of consistency in our definitions, we wanted to avoid working with tuples defined in terms of iterated Kuratowski pairs. We even introduced a special notation for Kuratowski pairs, just so we can avoid any confusion.

  Nevertheless, it is occasionally conventional to conflate \( (a, b) \) with \( \braket{ a, b } \), as well as the ordered pairs \( (a, (b, c)) \) and \( ((a, b), c) \) and the triple \( (a, b, c) \). \Fullref{thm:cartesian_product_universal_property} will justify using any definition of ordered tuple, as long as its usage is consistent.
\end{remark}

\begin{definition}\label{def:sequence}\mcite[45]{Halmos1960NaiveSetTheory}
  An \term{infinite sequence} or simply \term[ru=последовательность (\cite[10]{Архангельский1988КанторовскаяТеорияМножеств})]{sequence} is a \hyperref[def:indexed_family]{family} indexed by the \hyperref[thm:smallest_inductive_set_existence]{smallest inductive set} \( \omega \).

  Rather than using \( \seq{ a_k }_{k \in \omega} \), we will prefer the notation
  \begin{equation*}
    \seq{ a_k }_{k=1}^\infty,
  \end{equation*}
  where, in accordance with \fullref{rem:peano_arithmetic_zero}, for convenience we start indexing at \( 1 \).
\end{definition}
\begin{comments}
  \item Both sequences and \hyperref[def:ordered_tuple]{ordered tuples} are instances of transfinite sequences, which we will define in \fullref{def:transfinite_sequence}.
\end{comments}

\begin{definition}\label{def:enumeration}\mimprovised
  An \term[en=enumeration (\cite[190]{Kleene2002Logic})]{enumeration} of a set \( A \) is an \hyperref[def:ordered_tuple]{ordered tuple} or \hyperref[def:sequence]{infinite sequence} which has a unique term for every member of \( A \), and has no other terms.
\end{definition}
\begin{comments}
  \item If we regard indexed families as functions, then an enumeration is a tuple or sequence that is also \hyperref[def:function_invertibility/bijective]{bijective} as a function.
\end{comments}

\paragraph{Cartesian products}

\begin{definition}\label{def:cartesian_product}\mimprovised
  For an \hyperref[def:indexed_family]{indexed family} \( \seq{ A_k }_{k \in \mscrK} \), we define the \term[bg=Декартово произведение (\cite[367]{ГеновМиховскиМоллов1991Алгебра}), ru=Декартово произведение (\cite[11]{Архангельский1988КанторовскаяТеорияМножеств}), en=Cartesian product (\cite[36]{Halmos1960NaiveSetTheory})]{Cartesian product} \( \prod_{k \in \mscrK} A_k \) as the set of all \( \mscrK \)-\hyperref[def:indexed_family]{indexed families} \( \seq{ a_k }_{k \in \mscrK} \) such that, for every index \( k \) in \( \mscrK \), \( a_k \) belongs to \( A_k \).

  For a \hyperref[def:ordered_tuple]{list} \( A_1, \ldots, A_n \) of sets, we often prefer the notation
  \begin{equation*}
    A_1 \times \cdots \times A_n.
  \end{equation*}
\end{definition}
\begin{comments}
  \item We base this definition on \cite[36]{Halmos1960NaiveSetTheory} and \cite[11]{Архангельский1988КанторовскаяТеорияМножеств}, but we avoid defining binary Cartesian products and functions beforehand. See \fullref{rem:cartesian_products_and_functions} for a discussion of how Cartesian products are defined across the literature and why we chose this particular definition.

  \item After we prove \fullref{thm:cartesian_product_universal_property}, we will be able to regard the Cartesian product as a set of \hyperref[def:choice_function]{choice functions}.

  \item Taking the \( k \)-th coordinate of every indexed family in the product \( \prod_{k \in \mscrK} A_k \), we obtain a function from \( \prod_{k \in \mscrK} A_k \) to \( A_k \). This is defined as discussed in \fullref{def:cartesian_product_projection}.

  \item As shown in \fullref{thm:set_of_all_functions_via_cartesian_product}, in the degenerate case where \( A_k = A_m \) for \( k \neq m \), the Cartesian product is in a bijective correspondence with the \hyperref[def:set_of_all_functions]{set of all functions} from \( A \) to \( B \), which we denote by either \( B^A \) or \( \fun(A, B) \) depending on the situation. After we prove the aforementioned proposition, we will conflate \( B^A \) with \( \prod_{a \in A} B \).
\end{comments}

\begin{remark}\label{rem:family_to_indexed_family}
  As discussed in \fullref{rem:family_of_sets}, we can regard a set \( \mscrA \) as a container for other sets of interest, in which case we call \( \mscrA \) a \enquote{family of sets}.

  For every such family \( \mscrA \), we can define the \hyperref[def:indexed_family]{indexed family} \( \seq{ A }_{A \in \mscrA} \). This allows extending definitions like Cartesian products, as defined in \fullref{def:cartesian_product}, to non-indexed families.

  In fact, we can define the Cartesian product of the non-indexed family \( \mscrA \) of nonempty sets as the set of all \( \mscrA \)-indexed families \( \seq{ a_A }_{A \in \mscrA} \) such that \( a_A \) is in \( A \) for every set \( A \) in \( \mscrA \).

  Since we regard \( \mscrA \) as an index set anyway, we find it more convenient to give a definition in terms of indexed families directly. This allows us being explicit about the indices.

  On the other hand, in \fullref{def:choice_function} we define a choice function as a function \( f \) from a non-indexed family \( \mscrA \) of nonempty sets to the union \( \bigcup \mscrA \) such that \( f(A) \) is in \( A \) for every \( A \) in \( \mscrA \). This is the usage we will find convenient, for example, when working with \hyperref[def:equivalence_relation/quotient]{quotients} --- for example in our proof of \fullref{thm:category_skeleton_existence}.
\end{remark}

\paragraph{Relations}

\begin{definition}\label{def:relation}\mcite[41]{Enderton1977SetTheory}
  Let \( A_1, \ldots, A_n \) be a \hyperref[def:sequence]{finite sequence} of sets. We call any subset
  \begin{equation*}
    R \subseteq A_1 \times \cdots \times A_n
  \end{equation*}
  of their \hyperref[def:cartesian_product]{Cartesian product} an \( n \)-ary \term[bg=релация (\cite[367]{ГеновМиховскиМоллов1991Алгебра}), ru=отношение (\cite[25]{КолмогоровДрагалин2006Логика})]{relation}.

  We say that the values
  \begin{equation*}
    x_1 \in A_n, \ldots, x_n \in A_n
  \end{equation*}
  are \term{related} with respect to \( R \) if \( (x_1, \ldots, x_n) \in R \).

  Relations are sometimes implicitly assumed to be binary (i.e. \( n = 2 \)), for example by \incite[7]{Kelley1975GeneralTopology} or by \incite[1]{Engelking1989GeneralTopology}. Herbert Enderton initially defines them as binary in \mcite[40]{Enderton1977SetTheory}, but gives a more general definition one page later. We discuss binary relations specifically in \fullref{def:binary_relation}, and give here definitions that hold more generally.

  \begin{thmenum}[series=def:relation]
    \thmitem{def:relation/arity} For some small values of \( n \), we use the adjectives from \fullref{def:operation_arity_terminology} for describing the relation arity (e.g. unary, binary).

    \thmitem{def:relation/single_set} If all \( A_k \) for \( k = 1, \ldots, n \) are equal to the set \( A \), we say that \( R \subseteq A^n \) is a relation \hi{on \( A \)}.

    \thmitem{def:relation/empty} The relation is \term{empty} if it is the empty set, i.e. if no two elements are related.
  \end{thmenum}
\end{definition}

\begin{definition}\label{def:binary_relation}\mcite[40]{Enderton1977SetTheory}
  An important special case of \hyperref[def:relation]{relations} are \term{binary relations}. Given two sets, a binary relation between them is a subset of their \hyperref[def:cartesian_product]{Cartesian product}.

  In addition to the terminology for \fullref{def:relation}, we also introduce the following terms:
  \begin{thmenum}[series=def:binary_relation]
    \thmitem{def:binary_relation/converse}\mcite[44]{Enderton1977SetTheory} We defined the \term{converse relation} of \( R \) as
    \begin{equation*}
      R^{-1} \coloneqq \set{ (y, x) \given (x, y) \in R }.
    \end{equation*}

    \thmitem{def:binary_relation/diagonal}\mcite[8]{Kelley1975GeneralTopology} For every set \( A \), we define a special relation,
    \begin{equation*}
      \increment_A \coloneqq \set{ (x, x) \given x \in A },
    \end{equation*}
    which we call the \term[ru=диагональное (отношение) (\cite[def. 2.7]{Гуров2013ТеорияРешёток})]{diagonal relation} or \term{identity relation}.

    \thmitem{def:binary_relation/composition}\mcite[44]{Enderton1977SetTheory} Given two binary relations \( R \subseteq A \times B \) and \( T \subseteq B \times C \), we define their composition as
    \begin{equation*}
      T \bincirc R \coloneqq \set*{ (x, z) \in A \times C \given* \qexists {y \in B} \parens[\Big]{ (x, y) \in R \T{and} (y, z) \in T } }.
    \end{equation*}
  \end{thmenum}

  Whenever \( A = B \) and \( R \) is simply a binary relation over \( A \), the following are commonly used properties. They are presented as first-order formulas that can be used as axioms for some theory (with \hyperref[rem:first_order_formula_conventions/infix]{infix notation} for \( R \)):
  \begin{thmenum}[resume=def:binary_relation]
    \thmitem{def:binary_relation/reflexive}\mcite[def. 6.2.14(i)]{Hinman2005Logic} We call \( R \) \term[bg=рефлексивна (релация) (\cite[369]{ГеновМиховскиМоллов1991Алгебра}), ru=рефлексивное (отношение) (\cite[def. 2.7]{Гуров2013ТеорияРешёток})]{reflexive} if \( \Delta_A \subseteq R \), i.e. if every element of \( A \) is related with itself.

    The following formula is used as an axiom for \hyperref[def:strict_partial_order]{nonstrict partial orders} and \hyperref[def:entourage]{entourages}:
    \begin{equation}\label{eq:def:binary_relation/reflexive}
      \qforall \synx (\synx \mathbin{R} \synx).
    \end{equation}

    \thmitem{def:binary_relation/irreflexive}\mcite[def. 6.2.14(ii)]{Hinman2005Logic} We call \( R \) \term[ru=антирефлексивное (отношение) (\cite[def. 2.7]{Гуров2013ТеорияРешёток})]{irreflexive} if \( \Delta_A \cap R = \varnothing \), i.e. if no element of \( A \) is related with itself.

    The following formula is used as an axiom for \hyperref[def:strict_partial_order]{strict partial orders}:
    \begin{equation}\label{eq:def:binary_relation/irreflexive}
      \synneg \qexists \synx (\synx \mathbin{R} \synx).
    \end{equation}

    \thmitem{def:binary_relation/symmetric}\mcite[def. 6.2.14(ix)]{Hinman2005Logic} We call \( R \) \term[bg=симетрична (релация) (\cite[369]{ГеновМиховскиМоллов1991Алгебра}), ru=симметрическое (отношение) (\cite[def. 2.7]{Гуров2013ТеорияРешёток})]{symmetric} if \( R = R^{-1} \).

    The following formula is used as an axiom for \hyperref[def:equivalence_relation]{equivalence relations}, \hyperref[def:hypergraph/multigraph]{undirected graphs} and \hyperref[def:entourage]{entourages}:
    \begin{equation}\label{eq:def:binary_relation/symmetric}
      \synx \mathbin{R} \syny \synimplies \syny \mathbin{R} \synx.
    \end{equation}

    \thmitem{def:binary_relation/antisymmetric}\mcite[example 2.2.1(ii)(c)]{Hinman2005Logic} We call \( R \) \term[bg=антисиметрична (релация) (\cite[369]{ГеновМиховскиМоллов1991Алгебра}), ru=антисимметрическое (отношение) (\cite[def. 2.7]{Гуров2013ТеорияРешёток})]{antisymmetric} if \( R \cap R^{-1} = \Delta_X \).

    The following formula is used as an axiom for \hyperref[def:partially_ordered_set]{partial orders}:
    \begin{equation}\label{eq:def:binary_relation/antisymmetric}
      (\synx \mathbin{R} \syny \synwedge \syny \mathbin{R} \synx) \synimplies \synx \syneq \syny.
    \end{equation}

    \thmitem{def:binary_relation/transitive}\mcite[def. 6.2.14(iii)]{Hinman2005Logic} We call \( R \) \term[bg=транзитивна (релация) (\cite[369]{ГеновМиховскиМоллов1991Алгебра}), ru=транзитивное (отношение) (\cite[def. 2.7]{Гуров2013ТеорияРешёток})]{transitive} if \( R = R \bincirc R \).

    The following formula is used as an axiom for \hyperref[def:partially_ordered_set]{preorders}:
    \begin{equation}\label{eq:def:binary_relation/transitive}
      (\synx \mathbin{R} \syny \synwedge \syny \mathbin{R} \synz) \synimplies \synx \mathbin{R} \synz.
    \end{equation}

    \thmitem{def:binary_relation/connected}\mcite[63]{Enderton1977SetTheory} We call \( R \) \term[ru=полное (отношение) (\cite[def. 2.7]{Гуров2013ТеорияРешёток})]{connected} if any two member of \( A \) are related.

    The following formula is used as an axiom for \hyperref[def:totally_ordered_set]{nonstrict total orders}:
    \begin{equation}\label{eq:def:binary_relation/connected}
      \qforall \synx \qforall \syny (\synx \mathbin{R} \syny \synvee \syny \mathbin{R} \synx).
    \end{equation}

    \thmitem{def:binary_relation/trichotomy}\mcite[62]{Enderton1977SetTheory} We say that \( R \) satisfies \term[bg=трихотомия (\cite[11]{Тагамлицки1971ДиференциалноСмятане})]{trichotomy} if every two elements of \( A \) are either related or equal.

    The following formula is used as an axiom for \hyperref[def:totally_ordered_set]{strict total orders}:
    \begin{equation}\label{eq:def:binary_relation/trichotomy}
      \qforall \synx \qforall \syny (\synx \mathbin{R} \syny \synvee \syny \mathbin{R} \synx \synvee \syny = \synx).
    \end{equation}
  \end{thmenum}
\end{definition}
\begin{comments}
  \item Relations are the semantical counterpart to \hyperref[def:first_order_structure/interpretation/predicate]{first-order predicates} and are equivalent to Boolean-valued functions, as discussed in \fullref{rem:boolean_valued_functions_and_predicates}.
\end{comments}

\begin{example}\label{ex:def:binary_relation}
  \hyperref[def:binary_relation]{Binary relations} are used in vastly different contexts:
  \begin{itemize}
    \item \hyperref[def:function]{Functions} are special binary relations.
    \item \hyperref[ch:order_theory]{Orders} are also special binary relations.
    \item \hyperref[def:directed_graph]{Directed graphs} can be defined as binary relations.
    \item \hyperref[def:entourage]{Entourages} are binary relations in \hyperref[def:uniform_space]{uniform spaces}.
    \item Relations are equivalent to Boolean-valued functions as shown in \fullref{rem:boolean_valued_functions_and_predicates}, and are often used for defining semantics of predicate symbols in \hyperref[sec:first_order_logic]{first-order logic}.
  \end{itemize}
\end{example}

\begin{definition}\label{def:equivalence_relation}\mimprovised
  If a binary relation on the set \( A \) is \hyperref[def:binary_relation/reflexive]{reflexive}, \hyperref[def:binary_relation/symmetric]{symmetric} and \hyperref[def:binary_relation/transitive]{transitive}, we call it an \term[ru=отношение эквивалентности (\cite[28]{Винберг2014КурсАлгебры})]{equivalence relation}. In other words, an equivalence relation is a symmetric \hyperref[def:preordered_set]{preorder}.

  We often denote equivalence relations via the symbol \( \sim \).

  \begin{thmenum}
    \thmitem{def:equivalence_relation/coset} We define the \term{equivalence class} of \( x \in A \), also called its \term{coset}, as the set
    \begin{equation*}
      [x] \coloneqq \set{ y \in A \given x \sim y }
    \end{equation*}
    of all elements of \( A \) that are related to \( x \).

    \thmitem{def:equivalence_relation/quotient} We define the \term{quotient set} of \( A \) by \( \sim \) as the set
    \begin{equation*}
      A / {\sim} \ \coloneqq \set{ [x] \given x \in A }.
    \end{equation*}

     If we have a canonical way to choose a representative from each coset, then \( A / {\sim} \) may be regarded as a subset of \( A \). In general, this is not a subset relation but only an embedding.

    \thmitem{def:equivalence_relation/projection} Using forward references to \fullref{sec:functions}, we define the \term{canonical projection} as the function
    \begin{equation*}
      \begin{aligned}
        &\pi: A \to A / {\sim}  \\
        &\pi(x) \coloneqq [x].
      \end{aligned}
    \end{equation*}

    If we have a fixed \hyperref[def:choice_function]{choice function} \( c: A / {\sim} \to A \), we can also define the canonical embedding
    \begin{equation*}
      \begin{aligned}
        &\iota: A / {\sim} \to A \\
        &\iota([x]) \coloneqq c(x).
      \end{aligned}
    \end{equation*}

    We sometimes have an obvious choice function, for example in \fullref{thm:representatives_in_univariate_polynomial_quotient_set}. In this case, the canonical projection may be regarded as a function from \( A \) to the subset \( c(A / {\sim}) \) of \( A \). Otherwise, \( \pi \) can be regarded as a \hyperref[def:function]{set-valued map}.
  \end{thmenum}
\end{definition}

\begin{example}\label{ex:def:equivalence_relation}
  We list examples of \hyperref[def:equivalence_relation]{equivalence relations}:
  \begin{thmenum}
    \thmitem{ex:def:equivalence_relation/tuple} Given a \hyperref[def:cartesian_product]{Cartesian product} \( \prod_{k \in \mscrK} A_k \), for every \( m \in \mscrK \) we can define the equivalence relation
    \begin{equation*}
       \seq{ x_k }_{k \in \mscrK} \sim_m \seq{ y_k }_{k \in \mscrK} \T{if} x_m = y_m.
    \end{equation*}

    Then the quotient \(\prod_{k \in \mscrK} A_k / {\sim_m} \) has exactly one coset for every member of \( A_m \).
  \end{thmenum}
\end{example}

\begin{concept}\label{con:congruence_modulo_relation}
  If \( x \sim y \) for some \hyperref[def:equivalence_relation]{equivalence relation}, we say that they are \term{congruent modulo} \( \sim \). This concept specializes to congruence modulo normal subgroups defined in \fullref{rem:congruence_modulo_substructure}.
\end{concept}

\begin{proposition}\label{thm:equality_is_smallest_equivalence_relation}
  The equality \hyperref[def:binary_relation]{relation} \( = \) is the intersection of all equivalence relations.
\end{proposition}
\begin{proof}
  It is equivalent to the \hyperref[def:binary_relation/diagonal]{diagonal relation} \( \Delta_X \). It is the smallest reflexive (resp. symmetric and transitive) relation on \( A \), that is, the intersection of all reflexive (resp. symmetric and transitive) relations.
\end{proof}

\begin{definition}\label{def:set_cover}\mcite[44]{Engelking1989GeneralTopology}
  A \term{cover} of \( A \) is a \hyperref[rem:family_of_sets]{family} \( \mscrA \subseteq \pow(A) \) of nonempty subsets of \( A \) such that \( A = \bigcup \mscrA \). We sometimes use the term more loosely and say that an arbitrary family of sets \( \mscrA \) is a cover of \( A \) if \( A \subseteq \bigcup \mscrA \). The two definitions are identical if we intersect each set in \( \mscrA \) with \( A \) and exclude the empty sets.
\end{definition}

\begin{definition}\label{def:set_partition}\mcite[57]{Enderton1977SetTheory}
  A \term{partition} of \( A \) is a pairwise \hyperref[def:subset_ordering]{disjoint} \hyperref[def:set_cover]{cover}. In other words, the cover \( \mscrA \) is a partition if and only if each element of \( A \) belong to exactly one set in \( \mscrA \).
\end{definition}

\begin{proposition}\label{thm:equivalence_partition}
  Fix a set \( A \). Let \( {\sim} \) be a binary relation of \( A \). The following are equivalent:
  \begin{thmenum}
    \thmitem{thm:equivalence_partition/equivalence} \( {\sim} \) is an \hyperref[def:equivalence_relation]{equivalence relation}.

    \thmitem{thm:equivalence_partition/partition} There exists a \hyperref[def:set_partition]{partition} \( \mscrA \) of \( A \) such that \( x \sim y \) if and only if they belong to the same set in the partition \( \mscrA \).
  \end{thmenum}
\end{proposition}
\begin{proof}
  \ImplicationSubProof{thm:equivalence_partition/equivalence}{thm:equivalence_partition/partition} Let \( {\sim} \) be an equivalence relation on \( A \). The quotient set \( A / {\sim} \) is a partition. Indeed:
  \begin{itemize}
    \item Every element \( x \in A \) belongs exactly one equivalence class \( [x] \) by definition.

    \item The equivalence classes are disjoint. Indeed, assume the contrary. Then there exist \( x \) and \( y \) such that \( [x] \cap [y] \neq \varnothing \) and yet \( x \not\sim y \).

    Let \( z \in [x] \cap [y] \). Then \( z \sim x \) and \( z \sim y \), thus from transitivity of \( {\sim} \) we have \( x \sim z \sim y \) and hence \( x \sim y \), which contradicts our assumption that \( x \not\sim y \).

    Hence, either \( [x] = [x] \) or \( [x] \cap [y] = \varnothing \). That is, different equivalence classes are disjoint.
  \end{itemize}

  \ImplicationSubProof{thm:equivalence_partition/partition}{thm:equivalence_partition/equivalence} Let \( \mscrA \) be a partition of \( A \) such that \( x \sim y \) if and only if they both belong to the same set in \( \mscrA \).

  Given \( x \in A \), denote by \( A_x \) the set in \( \mscrA \) which contains \( x \). The family \( \seq{ A_x }_{x \in A} \) is well-defined since \( \mscrA \) is a partition, which means that \( x \) belongs to exactly one set in \( \mscrA \).

  \SubProofOf*[def:binary_relation/reflexive]{reflexivity} Clearly \( A_x = A_x \), hence \( x \sim x \).

  \SubProofOf*[def:binary_relation/symmetric]{symmetry} If \( x \sim y \), then \( A_x = A_y \), which implies \( A_y = A_x \) and thus \( x \sim y \).

  \SubProofOf*[def:binary_relation/transitive]{transitivity} If \( x \sim y \) and \( y \in z \), then \( A_x = A_y = A_z \) and thus \( x \sim z \).
\end{proof}

\begin{definition}\label{def:relation_closures}
  Let \( R \subseteq A^2 \) be a binary relation on the set \( A \). We introduce several \hyperref[def:moore_closure_operator]{Moore closure operators}:
  \begin{thmenum}
    \thmitem{def:relation_closures/reflexive}\mcite[example 9.4.1]{Rosen2019DiscreteMathematics} We define the \term{reflexive closure} of \( R \) as
    \begin{equation*}
      \cl^R(R) \coloneqq R \cup \Delta_X.
    \end{equation*}

    \thmitem{def:relation_closures/symmetric}\mcite[example 9.4.2]{Rosen2019DiscreteMathematics} We define the \term{symmetric closure} of \( R \) as
    \begin{equation*}
      \cl^S(R) \coloneqq R \cup R^{-1}.
    \end{equation*}

    \thmitem{def:relation_closures/transitive}\mcite[\S 9.4.4]{Rosen2019DiscreteMathematics} We define the \term{transitive closure} of \( R \) as
    \begin{equation*}
      \cl^T(R) \coloneqq \bigcup \set{ R^k \given k = 1, 2, \ldots },
    \end{equation*}
    where \( R^k \) is iterated \hyperref[def:binary_relation/composition]{composition} of \( R \).

    Note that this is very different from the transitive closure of a set defined in \fullref{def:transitive_closure_of_a_set}.
  \end{thmenum}
\end{definition}

\begin{definition}\label{def:transitive_reduction}\mcite[11]{Rosen2019DiscreteMathematics}
  Fix a binary relation \( R \). We say that \( Q \subseteq R \) is a \term{transitive reduction} of \( R \) if it is a \hyperref[def:extremal_points/maximal_and_minimal_element]{minimal} relation such that \( \cl^T(Q) = \cl^T(R) \).

  If there exists a smallest relation, it is the unique transitive reduction, and we denote it by \( \red^T(R) \).
\end{definition}

\begin{proposition}\label{thm:def:relation_closures}
  \hyperref[def:relation_closures]{Binary relation closures} have the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:relation_closures/reflexive_relation} The symmetric and transitive closures of a reflexive relation are also symmetric.
    \thmitem{thm:def:relation_closures/symmetric_relation} The reflexive and transitive closures of a symmetric relation are also symmetric.
    \thmitem{thm:def:relation_closures/transitive_relation} The reflexive closure of a transitive relation is also transitive. The symmetric closure of a transitive relation may not be transitive --- see \fullref{ex:thm:def:relation_closures/symmetric_and_transitive}.

    \thmitem{thm:def:relation_closures/reflexive_and_symmetric} The reflexive and symmetric closures commute:
    \begin{equation}\label{eq:thm:def:relation_closures/reflexive_and_symmetric}
      \cl^S \cl^R(R) = \cl^R \cl^S(R).
    \end{equation}

    \thmitem{thm:def:relation_closures/reflexive_and_transitive} The transitive and reflexive closures commute:
    \begin{equation}\label{eq:thm:def:relation_closures/reflexive_and_transitive}
      \cl^R \cl^T(R) = \cl^T \cl^R(R).
    \end{equation}

    \thmitem{thm:def:relation_closures/symmetric_and_transitive} For the transitive and symmetric closures of \( R \) we have
    \begin{equation}\label{eq:thm:def:relation_closures/symmetric_and_transitive}
      \cl^S \cl^T(R) \subseteq \cl^T \cl^S(R).
    \end{equation}

    The converse holds if \( R \) is symmetric but not in general --- see \fullref{ex:thm:def:relation_closures/symmetric_and_transitive}.
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:relation_closures/reflexive_relation} Trivial.
  \SubProofOf{thm:def:relation_closures/symmetric_relation} Trivial.
  \SubProofOf{thm:def:relation_closures/transitive_relation} Trivial.
  \SubProofOf{thm:def:relation_closures/reflexive_and_symmetric} Trivial.
  \SubProofOf{thm:def:relation_closures/reflexive_and_transitive} The reflexive closure only adds pairs of the form \( (x, x) \). Thus, if \( (x, y) \in \cl^T(\cl^R(R)) \) for \( x \neq y \), then \( (x, y) \in \cl^T(R) \subseteq \cl^R(\cl^T(R)) \).

  Conversely, if \( (x, y) \in \cl^R(\cl^T(R)) \) for \( x \neq y \), then \( (x, y) \in \cl^T(R) \subseteq \cl^R(\cl^T(R)) \).

  \SubProofOf{thm:def:relation_closures/symmetric_and_transitive} If \( (x, y) \in \cl^S(\cl^T(R)) \), then we have the following possibilities:
  \begin{itemize}
    \item If \( (x, y) \in R \), obviously \( (x, y) \in \cl^T(\cl^S(R)) \).
    \item If \( (x, y) \in \cl^T(R) \setminus R \), then there exists some natural number \( k > 1 \) such that \( (x, y) \in R^k \).

    Since \( R^k \subseteq [\cl^S(R)]^k \), as can be shown via induction, we have \( (x, y) \in [\cl^S(R)]^k \). We thus conclude that \( (x, y) \in \cl^T(\cl^S(R)) \).

    \item Finally, if \( (x, y) \not\in \cl^T(R) \), then \( (y, x) \in \cl^T(R) \). As in the previous step, we can show that \( (y, x) \in \cl^T(\cl^S(R))) \). The latter set is symmetric, hence \( (x, y) \in \cl^T(\cl^S(R)) \).
  \end{itemize}

  Since \( (x, y) \) was arbitrary, we conclude that \eqref{eq:thm:def:relation_closures/symmetric_and_transitive} holds.

  Furthermore, if \( R \) is symmetric, then
  \begin{equation*}
    \cl^T \cl^S(R)
    =
    \cl^T(R)
    \reloset {\ref{thm:def:relation_closures/reflexive_relation}} =
    \cl^S \cl^T(R).
  \end{equation*}
\end{proof}

\begin{example}\label{ex:thm:def:relation_closures/symmetric_and_transitive}
  We will show that \hyperref[def:relation_closures/symmetric]{symmetric} and \hyperref[def:relation_closures/transitive]{transitive} closures of relations do not commute. This is also a consequence of the difference between \hyperref[def:graph_connectedness/weak]{weak} and \hyperref[def:graph_connectedness/strong]{strong} connectedness of directed (multi)graphs.

  Consider the set \( A = \set{ a, b, c } \) and the relation \( R = \set{ (a, b), (c, b) } \).

  \begin{figure}[!ht]
    \begin{equation*}
      \includegraphics[page=1]{output/ex__thm__def__relation_closures__symmetric_and_transitive}
    \end{equation*}
    \caption{The relation \( R \) from \fullref{ex:thm:def:relation_closures/symmetric_and_transitive} regarded as \hyperref[def:directed_graph]{directed graphs} with the additional arcs from \( \cl^S(R) \) dashed.}\label{fig:ex:thm:def:relation_closures/symmetric_and_transitive}
  \end{figure}

  It should be noted that \( R \) is \hyperref[def:binary_relation/transitive]{transitive}. Thus,
  \begin{equation*}
    \cl^S(\cl^T(R)) = \cl^S(R) = R \cup \set{ (b, a), (b, c) }.
  \end{equation*}

  The latter set is not transitive because \( (a, b) \) and \( (b, c) \) both belong to \( \cl^S(R) \), but \( (a, c) \) does not.

  This shows that the converse of \eqref{eq:thm:def:relation_closures/symmetric_and_transitive} does not hold in general.
\end{example}

\begin{proposition}\label{thm:equivalence_closure}
  The \hyperref[def:relation_closures/reflexive]{reflexive}, \hyperref[def:relation_closures/symmetric]{symmetric} and \hyperref[def:relation_closures/transitive]{transitive} closure \( \cl^T \cl^S \cl^R (R) \) of any relation \( R \) is an \hyperref[def:equivalence_relation]{equivalence relation}.
\end{proposition}
\begin{comments}
  \item This holds for any permutation of the closures as long as \( \cl^T \) is applied \hi{after} \( \cl^S \). This latter restriction is due to \fullref{thm:def:relation_closures/symmetric_and_transitive}.
  \item An alternative construction of the equivalence closure is given in \fullref{ex:recursively_defined_relation}.
\end{comments}
\begin{proof}
  Let \( R \subseteq A \times B \) be an arbitrary relation. By \fullref{thm:def:relation_closures/reflexive_relation}, \( \cl^S \cl^R (R) \) is reflexive. It is also symmetric as the symmetric closure of \( \cl^R(R) \).

  Then the transitive closure \( \cl^T \cl^S \cl^R (R) \) is also symmetric and reflexive by \fullref{thm:def:relation_closures/reflexive_relation} and \fullref{thm:def:relation_closures/symmetric_relation}.

  Therefore, \( \cl^T \cl^S \cl^R (R) \) is an equivalence relation.
\end{proof}
