\subsection{Affine spaces}\label{subsec:affine_spaces}

We provide here general definitions and statements about affine spaces over arbitrary fields.

\begin{definition}\label{def:affine_space}\mcite[def. 2.1.1]{Gallier2011}
  An \term{affine space} over the \hyperref[def:field]{field} \( \BbbK \) is a triple \( (A, \vect A, \tau) \), where
  \begin{thmenum}[series=def:affine_space]
    \thmitem{def:affine_space/points} \( A \) is a set, whose members we call \term{points}.

    \thmitem{def:affine_space/vectors} \( \vect A \) is a \hyperref[def:vector_space]{vector space} over \( \BbbK \), whose members we call \term{vectors}. We also call them \term{free vectors}, as opposed to \term{bound vectors}, which are simply pairs of points --- a \term{beginning} and an \term{end}.

    \thmitem{def:affine_space/action} \( \tau: \vect A \times A \to A \) is a \hyperref[def:group_action]{group action} of the additive group of \( \vect A \) that links bound and free vectors. For a bound vector from \( x \) to \( y \), we require that there exists a unique free vector \( v \) satisfying \( y = \tau_v(x) \). We also say that \( y \) is a \term{translation} of \( x \) in the \term{direction} \( v \).

    We will use the notation \( \vect{xy} \) for this unique free vector.
  \end{thmenum}

  We define the \term{dimension} of \( A \) as the vector space dimension of \( \vect A \).

  Usually \( A = \vect A \) and \( \tau_v(x) = x + v \), in which case the distinction between \enquote{points} and \enquote{vectors} is only informal. We call this the \term{natural affine structure} on \( \vect A \). The free vector \( \vect{xy} \) is then \( y - x \). We implicitly associate the natural affine structure with every vector space --- usually the \hyperref[def:sequence_space]{tuple vector space} \( \BbbK^n \).

  \begin{figure}[!ht]
    \hfill
    \hfill
    \includegraphics[align=c]{output/def__affine_space__vectors}
    \hfill
    \includegraphics[align=c]{output/def__affine_space__points}
    \hfill
    \caption{Vectors acting on points in an \hyperref[def:affine_space]{affine space}.}\label{fig:def:affine_space}
  \end{figure}
\end{definition}

\begin{example}\label{ex:x2_as_affine_space}
  Simple yet nontrivial example of \hyperref[def:affine_space]{affine spaces} are \hyperref[def:multi_valued_function/graph]{function graphs}.
  \begin{itemize}
    \item The set of points is the following subset of \( \BbbR^2 \):
    \begin{equation*}
      A \coloneqq \set{ (x, y) \given y = x^2 }.
    \end{equation*}

    \begin{figure}[!ht]
      \centering
      \includegraphics{output/ex__x2_as_affine_space}
      \caption{The affine space from \cref{ex:x2_as_affine_space}.}\label{fig:ex:x2_as_affine_space}
    \end{figure}

    \item The set of vectors is the unidimensional vector space \( \BbbR \).

    \item The action of \( \BbbR \) on \( A \) is
    \begin{equation*}
      \tau_t(x, y) \coloneqq (x + t, y + t^2).
    \end{equation*}
  \end{itemize}
\end{example}

\begin{definition}\label{def:affine_coordinate_system}
  Let \( (A, \vect A, \tau) \) be an \hyperref[def:affine_space]{affine space} over \( \BbbK \), let \( O \) be a distinguished point of \( A \) and let \( \vect E \) be a \hyperref[def:hamel_basis]{basis} of \( \vect A \). We call the pair \( (O, E) \) an \term{affine coordinate system} of \( A \) with \term{origin} \( O \) and \term{basis} \( \vect E \). If \( \vect E \) is \hyperref[def:orthogonality]{orthonormal}, we say that the coordinate system itself is orthonormal. Usually \( \vect A \) is finite dimensional, in which case \( \vect E = \set{ e_1, \ldots, e_n } \), and we denote the coordinate system by \( O e_1 \cdots e_n \).

  For every point \( x \) in \( A \), we call the free vector \( \vect{Ox} \) its \term{radius vector} with respect to the origin \( O \). This gives us an explicit isomorphism between the set \( A \) of points and the set \( \vect A \) of free vectors.

  The choice of basis \( \vect E \) then gives an isomorphism between \( A \) and the \hyperref[def:free_semimodule]{free vector space} \( \BbbK^{\oplus E} \). If \( \vect E = \set{ e_1, \ldots, e_n } \), the corresponding coordinate system allows us to associate a tuple of coordinates from \( \BbbK^n \) for each point in \( A \).

  Using the notation \( x_v \coloneqq \pi_v(\vect{Ox}) \), we associate the family \( \seq{ x_v \given v \in \vect E } \) to every point \( x \) and call its members the \term{affine coordinates} of \( x \) with respect to the coordinate system. We have
  \begin{equation}\label{eq:def:affine_coordinate_system/coordinates}
    \vect{Ox} = \sum_{e \in \vect E} x_e \cdot e.
  \end{equation}

  This relates to \hyperref[def:barycentric_coordinate_system]{barycentric coordinate systems} via \fullref{thm:affine_and_barycentric_coordinate_systems}.
\end{definition}

\begin{remark}\label{rem:affine_combinations}
  We cannot define the familiar addition and scalar multiplication of points that does not depend on a choice of coordinate system. We can, however, define a certain type of linear combination of points, which we call \term{affine combinations}.

  Let \( (A, \vect A, \tau) \) be an \hyperref[def:affine_space]{affine space} over \( \BbbK \), let \( x_1, \ldots, x_n \) be points in \( A \) and let \( t_1, \ldots, t_n \) be scalars that sum to \( 1_\BbbK \).

  For any two origin points \( O \) and \( P \), we have
  \begin{equation*}
    \underbrace{ \sum_{k=1}^n t_k \vect{O x_k} }_{v_O}
    =
    \sum_{k=1}^n t_k \parens[\Big]{ \vect{OP} + \vect{P x_k} }
    =
    \underbrace{ \parens*{ \sum_{k=1}^n t_k } }_{1_\BbbK} \vect{OP} + \underbrace{ \sum_{k=1}^n t_k \vect{P x_k} }_{v_P}.
  \end{equation*}

  Therefore,
  \begin{equation*}
    \tau_{v_O}(O) = \tau_{\vect{OP} + v_P}(O) = \tau_{v_P}(\tau_{\vect{OP}}(O)) = \tau_{v_P}(P).
  \end{equation*}

  We denote this common value by
  \begin{equation*}
    \sum_{k=1}^n t_k x_k.
  \end{equation*}

  We also use the term \enquote{affine combination} for linear combinations of vectors whose coefficients sum to one.

  Formally, it is sufficient to consider only affine combinations of two points, i.e.
  \begin{equation}\label{eq:rem:affine_combinations}
    \lambda x + (1 - \lambda) y.
  \end{equation}

  The affine combination of \( n \) points can then be defined via \hyperref[rem:natural_number_recursion]{recursion}:
  \begin{equation*}
    \sum_{k=1}^n t_k x_k = \begin{dcases}
      x_n,                                                          &n = 1 \\
      t_1 x_1 + (1 - t_1) \sum_{k=2}^n \frac {t_k} {(1 - t_1)} x_k, &n > 1
    \end{dcases}
  \end{equation*}
\end{remark}

\begin{proposition}\label{thm:rem:affine_combinations}
  \hyperref[rem:affine_combinations]{Affine combinations} have the following basic properties:
  \begin{thmenum}
    \thmitem{thm:rem:affine_combinations/inverse_of_action} For any point \( x \) and vector \( v \),
    \begin{equation*}
      \tau_v^{-1}(x) = \tau_{-v}(x).
    \end{equation*}

    \thmitem{thm:rem:affine_combinations/inverse} For any two points \( x \) and \( y \),
    \begin{equation*}
      \vect{xy} = -\vect{xy}.
    \end{equation*}

    \thmitem{thm:rem:affine_combinations/chasles} For any three points \( x \), \( y \) and \( z \),
    \begin{equation}\label{eq:thm:rem:affine_combinations/chasles}
      \vect{xz} = \vect{xy} + \vect{yz}.
    \end{equation}

    This is called Chasles' identity.

    \thmitem{thm:rem:affine_combinations/vectors_to_points} If we are given the vector affine combination \( w = \lambda u + (1 - \lambda) v \), for any point \( x \) we have the point affine combination
    \begin{equation*}
      \tau_w(x) = \lambda \cdot \tau_u(x) + (1 - \lambda) \cdot \tau_v(x).
    \end{equation*}
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:rem:affine_combinations/inverse_of_action} If \( y = \tau_v(x) \), then
  \begin{equation*}
    x = \tau_{-v + v}(x) = \tau_{-v}(y).
  \end{equation*}

  \SubProofOf{thm:rem:affine_combinations/inverse} Follows from \fullref{thm:rem:affine_combinations/inverse_of_action}.

  \SubProofOf{thm:rem:affine_combinations/chasles}
  \begin{equation*}
    \tau_{\vect{xy} + \vect{yz}}(x)
    =
    \tau_{\vect{yz} + \vect{xy}}(x)
    =
    \tau_{\vect{yz}}(\tau_{\vect{xy}}(x))
    =
    \tau_{\vect{yz}}(y)
    =
    z
    =
    \tau_{\vect{xz}}(x).
  \end{equation*}

  Then \eqref{eq:thm:rem:affine_combinations/chasles} follows.

  \SubProofOf{thm:rem:affine_combinations/vectors_to_points} Follows from the definition by noting that, for any point \( x \),
  \begin{equation*}
    w = \lambda u + (1 - \lambda) v
    =
    \vect{x, \tau_w(x)} = \lambda \cdot \vect{x, \tau_u(x)} + (1 - \lambda) \cdot \vect{x, \tau_v(x)}.
  \end{equation*}
\end{proof}

\begin{definition}\label{def:affine_hull}\mimprovised
  The \term{affine hull} of the set \( S \) of points is the set of all arbitrary (i.e. not necessarily binary) \hyperref[rem:affine_combinations]{affine combinations} of members of \( S \). It is a \hyperref[def:closure_operator]{closure operator}.
\end{definition}
\begin{defproof}
  We will show that the affine hull operator \( H: \pow(A) \to \pow(A) \) is a closure operator.

  \SubProof{Proof that \( H \) is \SubProofOf[def:extensive_function]{extensive}} Obviously \( S \subseteq H(S) \).

  \SubProofOf[def:magma/idempotent]{idempotence} Consider the affine combination \( \lambda x + (1 - \lambda) y \) of points from \( H(S) \). Suppose that \( x = t_x a_x + (1 - t_x) b_x \) and \( y = t_y a_y + (1 - t_y) b_y \), where \( a_x \), \( a_y \), \( b_x \) and \( b_y \) are points from \( S \).

  Then
  \begin{equation*}
    \lambda x + (1 - \lambda) y
    =
    \lambda t_x u_x + \lambda (1 - t_x) v_x + (1 - \lambda) t_y u_y + (1 - \lambda) (1 - t_y) v_y.
  \end{equation*}

  This is an affine combination of members of \( S \). Therefore, \( A(A(S)) = A(S) \).

  \SubProofOf[def:order_homomorphism/increasing]{monotonicity} If \( S_1 \subseteq S_2 \), then \( H(S_2) \) contains the affine combinations of the members of \( S_1 \) in addition to others. Hence, \( H(S_1) \subseteq H(S_2) \).
\end{defproof}

\begin{definition}\label{def:affine_subspace}\mcite[25]{Gallier2011}
  Let \( B \) be a set of points in the \hyperref[def:affine_space]{affine space} \( (A, \vect A, \tau) \). Fix an origin point \( O \) in \( B \) and define the set
  \begin{equation}\label{eq:def:affine_subspace/direction}
    \vect B \coloneqq \set{ \vect{Ob} \given b \in B \T{and} b \neq O }.
  \end{equation}

  We present two equivalent conditions under which the set \( \vect B \) does not depend on the choice of origin. If any of them holds, we say that \( \vect B \) is the \term{direction} of \( B \) and that \( (B, \vect B, \tau) \) is an \term{affine subspace} of \( (A, \vect A, \tau) \).

  \begin{thmenum}
    \thmitem{def:affine_subspace/hull} If \( B \) coincides with its \hyperref[def:affine_hull]{affine hull}.
    \thmitem{def:affine_subspace/linear} If \( \vect B \) is a \hyperref[def:module/submodel]{vector subspace} of \( \vect A \).
  \end{thmenum}
\end{definition}
\begin{defproof}
  \SubProof{Proof of independence of origin} Let
  \begin{align*}
    \vect B_O \coloneqq \set{ \vect{Ob} \given b \in B \T{and} b \neq O },
    &&
    \vect B_P \coloneqq \set{ \vect{Pb} \given b \in B \T{and} b \neq P }.
  \end{align*}

  Let \( x \) be a point in \( B \) and consider the vector \( \vect{P x} \) from \( \vect B_P \). We have
  \begin{equation*}
    \vect{P x}
    \reloset {\ref{thm:rem:affine_combinations/chasles}} =
    \vect{PO} + \vect{O x}
    \reloset {\ref{thm:rem:affine_combinations/inverse}} =
    \vect{OO} - \vect{OP} + \vect{O x}.
  \end{equation*}

  Thus,
  \begin{equation*}
    \tau_{\vect{Px}}(O) = O - P + x.
  \end{equation*}

  The latter is an affine combination of points of \( B \), hence it is again a point of \( B \). That is, \( \vect{Px} \) is the free vector that takes \( O \) to \( O - P + x \), and hence \( \vect{Px} \) belongs to \( \vect B_O \).

  Generalizing on \( x \), we conclude that \( \vect B_P \subseteq \vect B_O \). The converse inclusion follows automatically.

  \ImplicationSubProof{def:affine_subspace/hull}{def:affine_subspace/linear} Suppose that \( B \) coincides with its affine hull.

  Let \( x \) and \( y \) be points in \( B \). Note that \( z \coloneqq x + y - O \) is an affine combination and thus belongs to \( B \). Then
  \begin{equation*}
    \vect{Ox} + \vect{Oy}
    =
    \vect{Ox} + \vect{Oy} - \vect{OO}
    =
    \vect{Oz}
    \in
    \vect B.
  \end{equation*}

  Now let \( x \) be a point in \( B \) and \( \lambda \) be a scalar. Then \( y \coloneqq \lambda x + (1 - \lambda) O \) is an affine combination and thus belongs to \( B \). Hence,
  \begin{equation*}
    \lambda \vect{Oy}
    =
    \lambda \vect{Oy} + (1 - \lambda) \vect{OO}
    =
    \vect{Oy}
    \in
    \vect B.
  \end{equation*}

  Therefore, \( \vect B \) is closed under linear combinations and is thus a subspace of \( \vect A \).

  \ImplicationSubProof{def:affine_subspace/linear}{def:affine_subspace/hull} Fix some point \( O \) in \( B \) and suppose that \( \vect B \) is a vector subspace of \( \vect A \).

  Fix two points \( x \) and \( y \) in \( B \) and some scalar \( \lambda \). Then there exists some point \( z \) in \( B \) such that
  \begin{equation*}
    \vect{Oz} = \lambda \vect{Ox} + (1 - \lambda) \vect{Oy}.
  \end{equation*}

  Then \( z = \lambda x + (1 - \lambda) y \), which implies that \( B \) is closed under affine combinations.
\end{defproof}

\begin{proposition}\label{thm:affine_subspace_of_subspace}
  \hyperref[def:affine_subspace]{Affine subspaces} of affine subspaces of \( A \) are subspaces of \( A \).
\end{proposition}
\begin{proof}
  Trivial.
\end{proof}

\begin{definition}\label{def:affine_parallelism}\mcite[25]{Gallier2011}
  We say that two \hyperref[def:affine_subspace]{affine subspaces} of a common ambient space are \term{parallel} if their directions coincide. We write \( B \parallel C \).
\end{definition}

\begin{proposition}\label{thm:parallel_subspace_through_point}
  For every point \( x \) and every \hyperref[def:affine_subspace]{affine subspace} \( A \), there exists a unique subspace \hyperref[def:affine_parallelism]{parallel} to \( A \) passing through \( x \).

  The case of an \hyperref[def:affine_line]{affine line} is a restatement of Euclid's \enquote{Proposition \( \beta. \)} (see \cite[8]{Fitzpatrick2008}):
  \begin{quote}
    To place a straight-line equal to a given straight-line at a given point (as an extremity).
  \end{quote}
\end{proposition}
\begin{proof}
  Define the set
  \begin{equation*}
    B \coloneqq \set{ \tau_v(x) \given v \in \vect A }.
  \end{equation*}

  It obviously contains \( x \) and obviously the directions \( \vect A \) and \( \vect B \) coincide, hence \( A \) and \( B \) are parallel.

  It remains to show uniqueness. Suppose that \( C \) also contains \( x \) and is parallel to \( B \). Let \( y \) be a point of \( B \). Then \( \vect{yx} \) is also a vector in \( \vect C \), hence \( y = \tau_{\vect{yx}}(x) \) is a point in \( C \). Therefore, \( B = C \).
\end{proof}

\begin{definition}\label{def:affine_space_of_solutions}\mimprovised
  Consider the \hyperref[rem:system_of_equations]{system} of \( n \) linear equations and \( m \) variables over the field \( \BbbK \) in matrix form \( Ax = b \). If at least one solution \( x_0 \) exists, then all solutions are contained in the set
  \begin{equation}\label{eq:def:affine_space_of_solutions}
    \set{ x_0 + x \given x \in \ker A }.
  \end{equation}

  This is an \hyperref[def:affine_subspace]{affine subspace} of the domain \( \BbbK^m \) of \( A \). We call it the \term{solution space} of the system. If no solutions exist, the solution space should be an empty set, hence formally not an affine space.
\end{definition}
\begin{defproof}
  We will prove that the set \eqref{eq:def:affine_space_of_solutions} is precisely the set of solutions of the system.

  If \( x \in \ker A \), then
  \begin{equation*}
    A(x_0 + x) = Ax_0 + Ax = Ax_0.
  \end{equation*}

  Conversely, if \( Ax_1 = b \), then \( A(x_1 - x_0) = \vect 0 \), and thus \( x_1 - x_0 \in \ker A \). Then \( x_1 = x_0 + (x_1 - x_0) \) belongs to the aforementioned solution space.
\end{defproof}

\begin{proposition}\label{thm:system_of_equations_unique_solution}
  The \hyperref[rem:system_of_equations]{system of linear equations} \( Ax = b \) has a unique solution if and only if \( A \) is invertible.
\end{proposition}
\begin{proof}
  \SufficiencySubProof If \( Ax = b \) has a unique solution, then the \hyperref[def:affine_space_of_solutions]{solution space} has dimension zero, the kernel of \( A \) is empty, and \( A \) is invertible.

  \NecessitySubProof If \( A \) is invertible, then \( x = A^{-1} b \) is a solution.
\end{proof}

\begin{definition}\label{def:affine_dependence}\mimprovised
  We say that the set of points \( E \) is \term{affinely independent} if any of the following conditions holds:

  \begin{thmenum}
    \thmitem{def:affine_dependence/hull} The \hyperref[def:affine_hull]{affine hull} of \( E \) strictly contains the affine hulls of any subset of \( E \).

    \thmitem{def:affine_dependence/combinations} Given a sequence of points \( O, e_1, \ldots, e_n \) from \( E \), the conditions
    \begin{align*}
      \sum_{k=1}^n t_k = 0,
      &&
      \sum_{k=1}^n t_k \vect{O e_k} = \vect 0
    \end{align*}
    together imply that \( t_1 = \cdots = t_n \).

    \thmitem{def:affine_dependence/linear}\mcite[def. 2.4]{Gallier2011} Given any origin point \( O \) from \( E \), the set
    \begin{equation*}
      \set{ \vect{O e} \given e \in E \T{and} e \neq O }
    \end{equation*}
    is linearly independent.

    If this condition holds for \( O \), it also holds if we replace \( O \) with any other point in \( E \).
  \end{thmenum}
\end{definition}
\begin{proof}
  \SubProofOf{def:affine_dependence/linear} Suppose that
  \begin{equation*}
    \set{ \vect{O e} \given e \in E \T{and} e \neq O }
  \end{equation*}
  is linearly independent. We will show that
  \begin{equation*}
    \set{ \vect{P e} \given e \in E \T{and} e \neq P }
  \end{equation*}
  is also linearly independent for any \( P \neq O \). Let
  \begin{equation*}
    \sum_{k=1}^n t_k \vect{P e_k} = \vect 0.
  \end{equation*}

  \Fullref{thm:rem:affine_combinations/chasles} implies
  \begin{equation*}
    \sum_{k=1}^n t_k \vect{P e_k}
    =
    \sum_{k=1}^n t_k \vect{O e_k} + \sum_{k=1}^n t_k \vect{P O}
    =
    \sum_{k=1}^n t_k \vect{O e_k} + \parens*{ -\sum_{k=1}^n t_k } \vect{O P}.
  \end{equation*}

  Since the vectors \( \vect{O e_1}, \cdots, \vect{O e_n}, \vect{O P} \) are linearly independent, we conclude that
  \begin{equation*}
    t_1 = \cdots = t_n = 0.
  \end{equation*}

  Thus, the set
  \begin{equation*}
    \set{ \vect{P b} \given e \in E \T{and} e \neq P }
  \end{equation*}
  is linearly independent.

  \ImplicationSubProof{def:affine_dependence/hull}{def:affine_dependence/combinations} Suppose that the affine hull of \( E \) strictly contains the affine hull of any subset.

  Let
  \begin{align*}
    \sum_{k=1}^n t_k = 0,
    &&
    \sum_{k=1}^n t_k \vect{O e_k} = \vect 0.
  \end{align*}

  Suppose that \( t_{k_0} \) is nonzero for some index \( k_0 \). Then
  \begin{equation*}
    t_{k_0} = - \sum_{k \neq k_0} t_k
  \end{equation*}
  and
  \begin{equation*}
    \vect{O e_{k_0}} = -\sum_{k \neq k_0} \frac {t_k} {t_{k_0}} \vect{O e_k}.
  \end{equation*}

  Thus, \( \vect{O e_{k_0}} \) is an affine combination of other vectors from \( E \), and hence the affine hull of \( E \setminus \set{ e_{k_0} } \) coincides with the affine hull of \( E \). This contradicts our initial assumption.

  Therefore,
  \begin{equation*}
    t_1 = \cdots = t_n = 0.
  \end{equation*}

  \ImplicationSubProof{def:affine_dependence/combinations}{def:affine_dependence/linear} Suppose that \fullref{def:affine_dependence/combinations} holds for \( E \). Fix some point \( O \) from \( E \). We will show that the set
  \begin{equation*}
    \set{ \vect{O e} \given e \in E \T{and} e \neq O }
  \end{equation*}
  is linearly independent.

  Aiming at a contradiction, suppose that
  \begin{equation*}
    \sum_{k=1}^n t_k \vect{O e_k} = \vect 0.
  \end{equation*}

  Let
  \begin{equation*}
    T \coloneqq \sum_{k=1}^n t_k.
  \end{equation*}

  Suppose that \( T \) is nonzero. Then
  \begin{equation*}
    \sum_{k=1}^n t_k \vect{O e_k} + (-T) \vect 0 = \vect 0.
  \end{equation*}

  The coefficients of this combination sum to \( 0 \). Therefore, by our assumption \fullref{def:affine_dependence/combinations}, they are all equal to zero. But the last coefficient is \( -T \), which we have assumed is nonzero.

  The obtained contradiction shows that \( T = 0 \). Then again from \fullref{def:affine_dependence/combinations}, we have
  \begin{equation*}
    t_1 = \cdots = t_n = 0.
  \end{equation*}

  Therefore,
  \begin{equation*}
    \set{ \vect{O e} \given e \in E \T{and} e \neq O }
  \end{equation*}
  is a linearly independent set of vectors.

  \ImplicationSubProof{def:affine_dependence/linear}{def:affine_dependence/hull} Let \( A \) be a strict subset of \( E \). Fix some point \( O \) from \( E \setminus A \) and suppose that the set
  \begin{equation*}
    \set{ \vect{O e} \given b \in E \T{and} b \neq O }
  \end{equation*}
  is linearly independent. We will show that \( O \) is not in the affine hull of \( A \).

  Aiming at a contradiction, suppose that \( O \) is an affine combination of members of \( A \):
  \begin{equation*}
    O = \sum_{k=1}^n t_k a_k.
  \end{equation*}

  We have
  \begin{equation*}
    \vect 0
    =
    \vect{O O} - \sum_{k=1}^n t_k \vect {O a_k}
    =
    \sum_{k=1}^n t_k \vect{O a_k},
  \end{equation*}
  which, due to linear independence, implies that
  \begin{equation*}
    t_1 = \cdots = t_n = 0.
  \end{equation*}

  Therefore, \( O \) is not an affine combination of members of \( A \) since the coefficients do not sum to \( 1 \).
\end{proof}

\begin{proposition}\label{thm:linear_and_affine_bases}
  Let \( (A, \vect A, \tau) \) be an \hyperref[def:affine_space]{affine space}. Let \( E \) be a set of points with a fixed origin point \( O \) and let
  \begin{equation*}
    \vect E \coloneqq \set{ \vect{Oe} \given e \in E }.
  \end{equation*}

  \begin{thmenum}
    \thmitem{thm:linear_and_affine_bases/dependence} The vectors in \( \vect E \) are \hyperref[def:linear_dependence]{linearly independent} if and only if the points in \( E \) are \hyperref[def:affine_dependence]{affinely independent}.

    \thmitem{thm:linear_and_affine_bases/hulls} The \hyperref[def:semimodule/submodel]{linear span} of \( \vect E \) is \( \vect A \) if and only if the \hyperref[def:affine_hull]{affine hull} of \( E \) is \( A \).
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:linear_and_affine_bases/dependence} This is the statement of \fullref{def:affine_dependence/linear}.

  \SubProofOf{thm:linear_and_affine_bases/hulls}
  \SufficiencySubProof* Suppose that the linear span of \( \vect E \) is \( \vect A \). Fix some point \( x \) in \( A \). Then \( \vect{Ox} \) is a linear combination of members of \( \vect E \):
  \begin{equation*}
    \vect{Ox} = \sum_{k=1}^n t_k \vect{O x_k}.
  \end{equation*}

  Then
  \begin{equation*}
    x = \parens*{ 1 - \sum_{k=1}^n t_k } O + \sum_{k=1}^n t_k x_k.
  \end{equation*}

  \NecessitySubProof* Suppose that the affine hull of \( E \) is \( A \). Let \( v \) be some vector in \( \vect A \) and let \( x \coloneqq \tau_v(O) \). We have
  \begin{equation*}
    x = \sum_{k=1}^n t_k e_k
  \end{equation*}
  for some points \( e_1, \ldots, e_n \) from \( E \) and some scalars that sum to one. Then
  \begin{equation*}
    v = \vect{Ox} = \sum_{k=1}^n t_k \vect{O e_k}.
  \end{equation*}

  We have shown that any vector in \( \vect A \) is a linear combination of vectors in \( \vect E \).
\end{proof}

\begin{definition}\label{def:barycentric_coordinate_system}
  Let \( (A, \vect A, \tau) \) be an \hyperref[def:affine_space]{affine space} over \( \BbbK \), let \( E \) be a set of \hyperref[def:affine_dependence]{affinely independent} whose \hyperref[def:affine_hull]{affine hull} is \( A \). Let \( O \) be a distinguished origin point from \( E \). We call the pair \( (O, E) \) a \term{barycentric coordinate system} of \( A \) with \term{origin} \( O \) and \term{basis} \( E \). We call the points in \( E \) the \term{basis points} of the coordinate system.

  \Fullref{thm:linear_and_affine_bases} implies that the set
  \begin{equation}\label{eq:def:barycentric_coordinate_system/linear_basis}
    \vect E \coloneqq \set{ \vect{Oe} \given e \in E }
  \end{equation}
  is a linear basis of \( \vect A \).

  We associate with the point \( x \) its \term{barycentric coordinates} with respect to the coordinate system:
  \begin{equation*}
    x_e \coloneqq \begin{cases}
      \pi_{\vect{Oe}}(\vect{Ox}) &e \in E \setminus \set{ O }, \\
      1 - \sum_{e \neq O} x_e    &e = O.
    \end{cases}
  \end{equation*}

  We have
  \begin{equation}\label{eq:def:barycentric_coordinate_system/coordinates}
    x = \sum_{e \in E} x_e \cdot e = \parens*{ 1 - \sum_{e \neq O} x_e } \cdot O + \sum_{e \neq O} x_e \cdot e.
  \end{equation}

  This relates to \hyperref[def:affine_coordinate_system]{affine coordinate systems} via \fullref{thm:affine_and_barycentric_coordinate_systems}.
\end{definition}

\begin{proposition}\label{thm:affine_and_barycentric_coordinate_systems}
  Let \( E \) be a set of points in the affine space \( (A, \vect A, \tau) \) and define \( \vect E \) as in \eqref{eq:def:barycentric_coordinate_system/linear_basis}.

  Then the pair \( (O, \vect E) \) is an \hyperref[def:affine_coordinate_system]{affine coordinate system} if and only if \( (O, E) \) is a \hyperref[def:barycentric_coordinate_system]{barycentric coordinate system}. Furthermore, the coordinates are directly related because
  \begin{equation*}
    x = \parens*{ 1 - \sum_{e \neq O} x_e } \cdot O + \sum_{e \neq O} x_e \cdot e
  \end{equation*}
  and
  \begin{equation*}
    \vect{Ox} = \parens*{ 1 - \sum_{e \neq O} x_e } \cdot \underbrace{\vect{OO}}_{\vect 0} + \sum_{e \neq O} x_e \cdot \vect{Oe}.
  \end{equation*}
\end{proposition}
\begin{proof}
  Trivial.
\end{proof}

\begin{definition}\label{def:affine_operator}
  Let \( (A, \vect A, \tau) \) and \( (B, \vect B, \sigma) \) be \hyperref[def:affine_space]{affine spaces}. We say that the function \( {f: \vect A \to W} \) between points is an \term{affine operator} if any of the following equivalent conditions hold:
  \begin{thmenum}
    \thmitem{def:affine_operator/combination} \( f \) preserves \hyperref[def:affine_hull]{affine combinations}. That is, for any scalar \( \lambda \),
    \begin{equation}\label{eq:def:affine_operator/combination}
      f\parens[\Big]{ \lambda x + (1 - \lambda) y } = \lambda f(x) + (1 - \lambda) f(y).
    \end{equation}

    \thmitem{def:affine_operator/translation} For a fixed origin point \( O \), the following function is a linear operator:
    \begin{equation}\label{eq:def:affine_operator/translation/general}
      \begin{aligned}
        &T: \vect A \to W \\
        &T(v) \coloneqq \vect{ f(O), f(\tau_v(O)) }.
      \end{aligned}
    \end{equation}

    It is important to note that \( T \), if it is linear for \( O \), does not depend on the choice of \( O \).

    When \( A = \vect A \) and \( B = \vect B \), this function has the simpler form
    \begin{equation}\label{eq:def:affine_operator/translation/natural}
      T(v) \coloneqq f(v) - f(\vect 0).
    \end{equation}
  \end{thmenum}
\end{definition}
\begin{defproof}
  \SubProofOf{def:affine_operator/translation} Suppose that \( T_O(v) = \vect{ f(O), f(\tau_v(O)) } \) is linear in \( v \). Then
  \begin{balign*}
    T_O(v)
    &=
    \vect{ f(O), f(\tau_v(O)) }
    = \\ &=
    \vect{ f(\tau_{v-v}(O)), f(\tau_v(O)) }
    = \\ &=
    -\vect{ f(\tau_v(O)), f(\tau_{v-v}(O)) }
    = \\ &=
    -\vect{ f(P), f(\tau_{-v}(P)) }
    = \\ &=
    -T_P(-v)
    = \\ &=
    T_P(v).
  \end{balign*}

  Therefore, the choice of point in the definition of \( T(v) \) is irrelevant.

  \ImplicationSubProof{def:affine_operator/combination}{def:affine_operator/translation} Suppose that \eqref{eq:def:affine_operator/combination} holds. Fix some point \( x \).

  \SubProofOf[eq:def:semimodule/homomorphism/additive]{additivity} \Fullref{thm:rem:affine_combinations/vectors_to_points} implies
  \begin{equation*}
    \tau_{u + v}(O)
    =
    \tau_{u + v - 0}(O)
    =
    \tau_u(O) + \tau_v(O) - O.
  \end{equation*}

  Since \( f \) preserves affine combinations, we have
  \begin{equation*}
    f(\tau_{u + v}(O))
    =
    f(\tau_u(O) + \tau_v(O) - O)
    =
    f(\tau_u(O)) + f(\tau_v(O)) - f(O).
  \end{equation*}

  Then
  \begin{balign*}
    T(u + v)
    &=
    \vect{ f(O), f(\tau_{u + v}(O)) }
    = \\ &=
    \vect{ f(O), f(\tau_u(O)) + f(\tau_v(O)) - f(O) }
     = \\ &=
    \vect{ f(O), f(\tau_u(O)) } + \vect{ f(O), f(\tau_v(O)) } - \vect{ f(O), f(O) }
    = \\ &=
    \vect{ f(O), f(\tau_u(O)) } + \vect{ f(O), f(\tau_v(O)) }
    = \\ &=
    T(u) + T(v).
  \end{balign*}

  \SubProofOf[eq:def:semimodule/homomorphism/homogeneity]{homogeneity} Similarly,
  \begin{equation*}
    T(\lambda v)
    =
    \vect{ f(O) , f(\tau_{\lambda v}(O)) }
    =
    \lambda \vect{ f(O) , f(\tau_v(O)) } + (1 - \lambda) \vect{ f(O) , f(O) }
    =
    \lambda T(v).
  \end{equation*}

  \ImplicationSubProof{def:affine_operator/translation}{def:affine_operator/combination} Suppose that \( T \) is linear. Fix two points \( x \) and \( y \), a scalar \( \lambda \) and an origin point \( O \). Let \( z \coloneqq \lambda x + (1 - \lambda) y \) and \( P \coloneqq f(O) \).

  Then
  \begin{equation*}
    \vect{Oz} = \lambda \cdot \vect{Ox} + (1 - \lambda) \cdot \vect{Oy}.
  \end{equation*}

  Thus,
  \begin{equation*}
    T(\vect{Oz}) = \vect{ f(O), f(\tau_{\vect{Oz}}(O)) } = \vect{ P f(z) }.
  \end{equation*}

  On the other hand,
  \begin{equation*}
    T(\vect{Oz})
    =
    \lambda T(\vect{Ox}) + (1 - \lambda) T(\vect{Oy})
    =
    \lambda \vect{ P f(x) } + (1 - \lambda) \vect{ P f(y) }.
  \end{equation*}

  Therefore,
  \begin{equation*}
    f(z) = \lambda f(x) + (1 - \lambda) f(y).
  \end{equation*}
\end{defproof}

\begin{proposition}\label{thm:image_of_affine_operator}
  The image of an \hyperref[def:affine_operator]{affine operator} \( f: A \to B \) is an \hyperref[def:affine_subspace]{affine subspace} of \( B \).
\end{proposition}
\begin{proof}
  Trivial.
\end{proof}

\begin{proposition}\label{thm:affine_operator_fixed_point}
  The point \( x_0 \) is a \hyperref[def:fixed_point]{fixed point} of the \hyperref[def:affine_operator]{affine endofunction} \( f: A \to A \) if and only if
  \begin{equation}\label{eq:thm:affine_operator_fixed_point}
    f(x) = \tau_{T(\vect{x_0 x})}(x_0),
  \end{equation}
  where \( T \) is the linear part of \( f \).
\end{proposition}
\begin{proof}
  \SufficiencySubProof Let \( x_0 \) be a fixed point of \( f(x) \). Then
  \begin{equation*}
    T(v) \coloneqq \vect{x_0,f(\tau_v(x_0)}
  \end{equation*}
  is a linear operator since \( f \) is affine. Thus,
  \begin{equation*}
    T(\vect{x_0 x}) = \vect{x_0,f(x)}.
  \end{equation*}

  Therefore,
  \begin{equation*}
    f(x) = \tau_{\vect{x_0,f(x)}}(x_0) = \tau_{T(\vect{x_0 x})}(x_0)
  \end{equation*}

  \NecessitySubProof Suppose that \eqref{eq:thm:affine_operator_fixed_point} holds. Then
  \begin{equation*}
    f(x_0) = \tau_{T(\vect 0)}(x_0) = x_0.
  \end{equation*}
\end{proof}

\begin{definition}\label{def:category_of_small_affine_spaces}
  Suppose that we are given a \hyperref[def:grothendieck_universe]{Grothendieck universe} \( \mscrU \), which is safe to assume to be the smallest suitable one as explained in \fullref{def:large_and_small_sets}. We describe the \term{category of \( \mscrU \)-small affine spaces} as the following \hyperref[rem:concrete_categories]{concrete category}:

  \begin{itemize}
    \item The \hyperref[def:category/objects]{set of objects} is the set of all \hyperref[def:affine_space]{affine spaces} \( (A, \vect A, \tau) \), whose set of points \( A \) is \( \mscrU \)-small.

    \item The \hyperref[def:category/morphisms]{morphisms} from \( (A, \vect A, \tau) \) to \( (B, \vect B, \sigma) \) are the \hyperref[def:affine_operator]{affine operators} from \( A \) to \( B \).
  \end{itemize}
\end{definition}

\begin{remark}\label{rem:geometric_shape}
  A \term{geometric shape} is an informal notion that refers to certain special sets of points in an affine space. Shapes in two-dimensional spaces are called \term{figures} and shapes in three dimensions are called \term{bodies}.

  Important kinds of shapes include
  \begin{itemize}
    \item Other affine spaces whose points are points of the ambient space.
    \item Affine varieties, defined in \fullref{def:affine_algebraic_set}.
    \item Parametric curves, defined in \fullref{def:parametric_curve}.
  \end{itemize}

  All the above have the concept of dimensions. Unidimensional shapes are called \term{curves}; bidimensional shapes --- \term{surfaces}. In spaces of finite dimension \( n \), shapes of dimension \( n - 1 \) are called \term{hypersurfaces}.

  When two geometric shapes intersect, we say that they are \term{incident}. This relates to \hyperref[def:graph_incidence]{(hyper)graph incidence} via \hyperref[def:directed_multigraph_geometric_realization]{geometric realizations}.
\end{remark}

\begin{definition}\label{def:affine_line}\mimprovised
  We say that the set \( L \) of points in an \hyperref[def:affine_space]{affine space} \( (A, \vect A, \tau) \) of dimension at least two is an \term{affine line} or simply \term{line} if any of the following equivalent conditions hold:

  \begin{thmenum}
    \thmitem{def:affine_line/subspace} \( L \) is a unidimensional \hyperref[def:affine_subspace]{affine subspace}.

    \thmitem{def:affine_line/parametric} There exists a point \( o \), called the \term{origin}, and a nonzero vector \( d \), called the \term{directional} vector, such that \( L \) is the image of the \hyperref[def:affine_operator]{affine function}
    \begin{equation}\label{eq:def:affine_line/parametric}
      \begin{aligned}
        &l: \BbbK \to A \\
        &l(t) \coloneqq \tau_{t d}(o).
      \end{aligned}
    \end{equation}

    We refer to the function \( l \) as a \term{parametrization} of \( L \).
  \end{thmenum}
\end{definition}
\begin{defproof}
  \SubProofOf{def:affine_line/parametric} \Fullref{thm:rem:affine_combinations/vectors_to_points} implies that \( l \) satisfies \fullref{def:affine_operator/combination} and is therefore an affine function.

  \ImplicationSubProof{def:affine_line/subspace}{def:affine_line/parametric} Suppose that \( L \) is a unidimensional affine subspace and fix two points \( o \) and \( a \) from \( L \).

  Let \( x \) be any point in \( L \). Since \( L \) is unidimensional, the vectors \( \vect{ox} \) and \( \vect{oa} \) are linearly dependent. Suppose that \( \vect{ox} = t \cdot \vect{oa} \). Define \( d \coloneqq \vect{oa} \). Then
  \begin{equation*}
    x = \tau_{\vect{ox}}(o) = \tau_{td}(o).
  \end{equation*}

  We conclude that \( L \) is the image of the function \( l(t) = \tau_{td}(o) \).

  \ImplicationSubProof{def:affine_line/parametric}{def:affine_line/subspace} Suppose that \( l(t) = \tau_{td}(o) \) is an affine function that \( L = l(\BbbK) \). \Fullref{thm:image_of_affine_operator} implies that \( L \) is an affine subspace of \( A \).

  The points \( o \), \( l(t_x) \) and \( l(t_y) \) are affinely dependent because, either \( t_y = 0 \) and \( o = l(t_y) \) or
  \begin{equation*}
    \vect{o,l(t_x)} = t_x d = \frac {t_x} {t_y} t_y d = \frac {t_x} {t_y} \vect{o,l(t_y)}.
  \end{equation*}

  Therefore, \( L \) is an affine space of dimension at most one. It is nonzero, hence it is also a space of dimension at least one.
\end{defproof}

\begin{definition}\label{def:collinear_points}\mimprovised
  We say that a set of points in an affine space of dimension at least two is \term{collinear} if there exists an \hyperref[def:affine_line]{affine line} that contains them.
\end{definition}

\begin{proposition}\label{thm:pair_of_points_is_collinear}
  Two or fewer distinct points are always collinear. Furthermore, there is exactly one line passing through two distinct points.

  The case of exactly two points is a restatement of Euclid's first postulate (see \cite[7]{Fitzpatrick2008}):
  \begin{quote}
    Let it have been postulated to draw a straight-line from any point to any point.
  \end{quote}
\end{proposition}
\begin{proof}
  If we have fewer than two points, we may choose additional points so that we have two.

  Given two distinct points \( o \) and \( a \), we simply define \( d \coloneqq \vect{oa} \) and \( l(t) \coloneqq \tau_{td}(o) \). Then \( o = l(0) \) and \( a = l(1) \).
\end{proof}

\begin{proposition}\label{thm:crossing_lines}
  If two lines intersect in more than one point, they coincide.
\end{proposition}
\begin{proof}
  Let \( g \) and \( h \) be two lines, and let \( d \) and \( e \) be directional vectors for them. Suppose that \( x \) and \( y \) are distinct intersection points, and let \( y = x + td \) and \( y = x + re \). Then
  \begin{equation*}
    \vect 0 = y - y = td - er,
  \end{equation*}
  hence \( d \) and \( e \) are linearly dependent. Therefore, \( g \) and \( h \) coincide.
\end{proof}

\begin{definition}\label{def:crossing_lines}
  We say that two lines \term{cross} if they intersect and are not \hyperref[def:affine_parallelism]{parallel}. \Fullref{thm:crossing_lines} implies that they should intersect in exactly one point (because otherwise they would coincide). We call this point the \term{crossing point}.
\end{definition}

\begin{definition}\label{def:transversal_line}\mimprovised
  A \term{transversal line} for two distinct \hyperref[def:affine_line]{affine lines} is a third line that crosses both of them.
\end{definition}

\begin{definition}\label{def:affine_plane}\mimprovised
  Planes are particularly important yet simple \hyperref[rem:geometric_shape]{surfaces}. We say that the set \( \Pi \) of points in an \hyperref[def:affine_space]{affine space} \( (A, \vect A, \tau) \) of dimension at least three is an \term{affine plane} or simply \term{plane} if any of the following equivalent conditions hold:

  \begin{thmenum}
    \thmitem{def:affine_plane/subspace} \( \Pi \) is a two-dimensional \hyperref[def:affine_subspace]{affine subspace}.

    \thmitem{def:affine_plane/parametric} There exists a point \( o \), called the \term{origin}, and linearly independent vectors \( d \) and \( e \), called the \term{directions}, such that \( \Pi \) is the image of the \hyperref[def:affine_operator]{affine function}
    \begin{equation}\label{eq:def:affine_plane/parametric}
      \begin{aligned}
        &\pi: \BbbK^2 \to A \\
        &\pi(t, r) \coloneqq \tau_{t d + r e}(o).
      \end{aligned}
    \end{equation}

    We refer to the function \( \pi \) as a \term{parametrization} of \( L \).
  \end{thmenum}
\end{definition}
\begin{defproof}
  \SubProofOf{def:affine_plane/parametric} \Fullref{thm:rem:affine_combinations/vectors_to_points} implies that \( \pi \) satisfies \fullref{def:affine_operator/combination} and is therefore an affine function.

  \ImplicationSubProof{def:affine_plane/subspace}{def:affine_plane/parametric} Suppose that \( \Pi \) is a two-dimensional affine subspace and fix three points \( o \), \( a \) and \( b \) from \( \Pi \).

  Let \( x \) be any point in \( \Pi \). Since \( \Pi \) is two-dimensional, the vectors \( \vect{ox} \), \( \vect{oa} \) and \( \vect{ob} \) are linearly dependent. Suppose that \( \vect{ox} = t \cdot \vect{oa} + r \cdot \vect{ob} \). Define \( d \coloneqq \vect{oa} \) and \( e \coloneqq \vect{ob} \). Then
  \begin{equation*}
    x = \tau_{\vect{ox}}(o) = \tau_{td + re}(o).
  \end{equation*}

  We conclude that \( \Pi \) is the image of the function \( \pi(t) \coloneqq \tau_{td + re}(o) \).

  \ImplicationSubProof{def:affine_plane/parametric}{def:affine_plane/subspace} Suppose that \( \pi(t, r) = \tau_{td + re}(o) \) is an affine function such that \( \Pi = \pi(\BbbK, \BbbK) \). \Fullref{thm:image_of_affine_operator} implies that \( \Pi \) is an affine subspace of \( A \). Furthermore, the points \( o \), \( \pi(0, 1) \) and \( \pi(1, 0) \) are affinely independent, hence \( \Pi \) has dimension at least two.

  We will show that \( \Pi \) has dimension at most two by demonstrating that the points \( o \), \( \pi(t_x, r_x) \), \( \pi(t_y, r_y) \) and \( \pi(t_z, r_z) \) are affinely dependent. Consider the matrix
  \begin{equation*}
    \begin{pmatrix}
      t_y & t_z \\
      r_y & r_z
    \end{pmatrix}.
  \end{equation*}

  Its determinant is \( t_y r_z - t_z r_y \).

  \begin{itemize}
    \item If \( t_y r_z - t_z r_y = 0 \), then the points \( \pi(t_y, r_y) \) and \( \pi(t_z, r_z) \) are affinely dependent. We have several possibilities
    \begin{itemize}
      \item If \( t_y = r_y = 0 \), then \( \pi(t_y, r_y) = o \).

      \item If \( t_y = 0 \) and \( r_y \neq 0 \), then from \( t_z r_y = 0 \) it follows that \( t_z = 0 \).

      But \( r_z = \frac {r_z} {r_y} r_y \). Hence,
      \begin{equation*}
        \pi(t_z, r_z) = \tau_{\ifrac {r_z} {r_y}}(\pi(t_y, r_y)).
      \end{equation*}

      \item If \( t_y \neq 0 \), then
      \begin{equation*}
        t_y r_z = t_y \frac {t_z} {t_y} r_y,
      \end{equation*}
      which implies that \( r_z = \ifrac {t_z} {t_y} r_y \). Hence,
      \begin{equation*}
        \pi(t_z, r_z) = \tau_{\ifrac {t_z} {t_y}}(\pi(t_y, r_y)).
      \end{equation*}
    \end{itemize}

    \item Otherwise, we utilize \fullref{thm:inverse_of_2x2_matrix} to solve the \hyperref[rem:system_of_equations]{system of equations}
    \begin{equation*}
      \begin{pmatrix}
        t_y & t_z \\
        r_y & r_z
      \end{pmatrix}
      \begin{pmatrix}
        \lambda \\
        \mu
      \end{pmatrix}
      =
      \begin{pmatrix}
        t_x \\ r_x
      \end{pmatrix}.
    \end{equation*}

    \begin{equation*}
      \begin{pmatrix}
        \lambda \\
        \mu
      \end{pmatrix}
      =
      \frac 1 {t_y r_z - t_z r_y}
      \begin{pmatrix}
        r_z  & -t_z \\
        -r_y & t_y
      \end{pmatrix}
      \begin{pmatrix}
        t_x \\ r_x
      \end{pmatrix}
      =
      \frac 1 {t_y r_z - t_z r_y}
      \begin{pmatrix}
        t_x r_z - t_z r_x \\
        t_y r_x - t_x r_y
      \end{pmatrix}
    \end{equation*}

    Therefore,
    \begin{equation*}
      t_x d + r_x e
      =
      \frac {t_x r_z - t_z r_x} {t_y r_z - t_z r_y} (t_y d + r_y e) + \frac {t_y r_x - t_x r_y} {t_y r_z - t_z r_y} (t_z d + r_z e).
    \end{equation*}

    That is, \( \vect{o,\pi(t_x,r_x)} \) is a linear combination of \( \vect{o,\pi(t_y,r_y)} \) and \( \vect{o,\pi(t_z,r_z)} \).
  \end{itemize}
\end{defproof}

\begin{definition}\label{def:coplanar_points}\mimprovised
  We say that a set of points in an affine space of dimension at least three is \term{coplanar} if there exists an \hyperref[def:affine_plane]{affine plane} that contains them.
\end{definition}

\begin{proposition}\label{thm:triple_of_points_is_coplanar}
  Three or fewer distinct points are \hyperref[def:coplanar_points]{coplanar}. Furthermore, there is exactly one plane passing through three non-collinear points.
\end{proposition}
\begin{proof}
  If we have fewer than three points, we may choose additional points so that we have three.

  Given three distinct points \( o \), \( a \) and \( b \), we simply define \( d \coloneqq \vect{oa} \).
  \begin{itemize}
    \item If \( \vect{ob} = \lambda d \), choose \( e \) as any vector linearly independent from \( d \).
    \item Otherwise, let \( e \coloneqq \vect{ob} \).
  \end{itemize}

  Define \( \pi(t, r) \coloneqq \tau_{td + re}(o) \). Then \( o = \pi(0, 0) \) and \( a = \pi(1, 0) \) and, depending on whether \( \vect{ob} = td \), either \( b = \pi(\lambda, 0) \) or \( b = \pi(0, 1) \).
\end{proof}

\begin{proposition}\label{thm:two_lines_are_coplanar}
  Two lines are always coplanar. Furthermore, if the lines are not \hyperref[def:affine_parallelism]{parallel}, there is exactly one plane containing them.
\end{proposition}
\begin{proof}
  Follows from \fullref{thm:triple_of_points_is_coplanar}.
\end{proof}

\begin{definition}\label{def:normal_vector}\mimprovised
  A \term{normal vector} for an \hyperref[def:affine_subspace]{affine subspace} \( L \) is a nonzero vector that is \hyperref[def:orthogonality]{orthogonal} to every vector in the direction \( \vect L \).
\end{definition}

\begin{example}\label{ex:def:normal_vector}
  We list several examples of \hyperref[def:normal_vector]{normal vectors}.

  \begin{thmenum}
    \thmitem{ex:def:normal_vector/full} The space \( \BbbR^n \) as a subspace of itself has no normal vectors, since the orthogonal complement of \( \BbbR^n \) is the trivial subspace, but we explicitly require normal vectors to be nonzero.

    \thmitem{ex:def:normal_vector/empty} Conversely, every vector in \( \BbbR^n \) is normal for the trivial subspace.

    \thmitem{ex:def:normal_vector/vector_subspace} For the vector subspace \( \BbbR^k \) of \( \BbbR^n \), the normal for \( \BbbR^k \) vectors form the \hyperref[def:orthogonal_complement]{orthogonal complement}
    \begin{equation*}
      \BbbR^{n-k} \cong \set{ (0, \ldots, 0, x_{k+1}, \cdots, x_n) \given (x_1, \ldots, x_n) \in \BbbR^n }.
    \end{equation*}
  \end{thmenum}
\end{example}

\begin{definition}\label{def:affine_hyperplane}
  Hyperplanes are particularly important yet simple \hyperref[rem:geometric_shape]{hypersurfaces}. We say that the set \( H \) of points in an \hyperref[def:affine_space]{affine space} \( (A, \vect A, \tau) \) of finite dimension \( n \) is an \term{affine hyperplane} or simply \term{hyperplane} if any of the following equivalent conditions hold:

  \begin{thmenum}
    \thmitem{def:affine_hyperplane/subspace} \( H \) is an \hyperref[def:affine_subspace]{affine subspace} of dimension \( n - 1 \).

    \thmitem{def:affine_hyperplane/functional} There exists a nontrivial \hyperref[def:affine_operator]{affine} \hyperref[rem:functional]{functional} \( h: A \to \BbbK \) such that
    \begin{equation*}
      H = h^{-1}(0) = \set{ x \in A \given h(x) = 0 }.
    \end{equation*}
  \end{thmenum}
\end{definition}
\begin{defproof}
  \ImplicationSubProof{def:affine_hyperplane/subspace}{def:affine_hyperplane/functional} Let \( H \) be an affine subspace of dimension \( n - 1 \). Fix a \hyperref[def:barycentric_coordinate_system]{barycentric coordinate system} \( O e_1 \ldots e_{n-1} \) in \( H \) and let \( e_n \in A \setminus H \) be affinely independent from them. Denoting the decomposition of \( x \) by \( x = x_1 e_1 + \cdots + x_n e_n \), define
  \begin{equation*}
    \begin{aligned}
      &h: A \to \BbbK \\
      &h(x_1, \ldots, x_n) \coloneqq x_n.
    \end{aligned}
  \end{equation*}

  Then \( h^{-1}(0) \) is precisely the set of all points that do not depend on \( e_n \). This is an affine space of dimension \( n - 1 \) that contains \( H \) as a subset; hence \( h^{-1}(0) = H \).

  \ImplicationSubProof{def:affine_hyperplane/functional}{def:affine_hyperplane/subspace} Suppose that \( h: A \to \BbbK \) is an affine functional and let \( H \coloneqq h^{-1}(0) \).

  Since \( h \) is an affine operator, any affine combination in \( H \) is mapped to zero and hence again belongs to \( H \). Thus, \( H \) is an affine subspace of \( A \).

  We must show that \( H \) has dimension \( n - 1 \). First note that, since \( h \) is an affine operator, for a fixed origin point \( O \) the operator \( T(v) \coloneqq h(\tau_v(O)) - h(O) \) is a linear map from \( \vect A \) to \( \BbbK \). The direction \( \vect H \) of \( H \) is the kernel of \( T \).

  Since \( h \) is nontrivial, from \fullref{thm:rank_nullity_theorem} it follows that
  \begin{equation*}
    n = \dim \vect A = \dim \vect H + \dim \img h = \dim \vect H + 1.
  \end{equation*}

  Therefore, the dimension of \( H \) is \( n - 1 \).
\end{defproof}
