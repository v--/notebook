\section{Logical theories}\label{sec:logical_theories}

As in \fullref{sec:first_order_models}, we will only be interested in (sets of) closed first-order formulas.

\paragraph{First-order theories}

\begin{definition}\label{def:first_order_theory}\mcite[def. 1.4.5]{Hinman2005Logic}
  The \term{closure} of the set \( \Gamma \) of closed formulas in the \hyperref[def:first_order_language]{first-order language} \( \mscrL \) is the set
  \begin{equation*}
    \cl(\Gamma) \coloneqq \set{ \varphi \in \op*{Form} \given \Gamma \vDash \varphi }.
  \end{equation*}

  If necessary, we may distinguish between the syntactic closure \( \cl^\vdash(\Gamma) \) and the semantic closure \( \cl^\vDash(\Gamma) \) of \( \Gamma \).

  \begin{thmenum}
    \thmitem{def:first_order_theory/axiomatized}\mcite[def. 1.4.37]{Hinman2005Logic} We say that \( \Gamma \) is \term{axiomatized} by \( \Delta \) if \( \Gamma = \cl(\Delta) \). If \( \Delta \) is clear from the context, we call its members (nonlogical) \term{axioms}.

    \medskip

    \thmitem{def:first_order_theory/complete}\mcite[def. 1.4.8]{Hinman2005Logic} The set \( \Gamma \) of closed formulas is said to be \term{complete} if every for every formula in \( \varphi \), either \( \Gamma \vDash \varphi \) or \( \Gamma \vDash \synneg \varphi \).

    \thmitem{def:first_order_theory/consistent} Given a deductive system, the set \( \Gamma \) of formulas is said to be \term[bg=противоречива,ru=противоречивая]{inconsistent} if \( \Gamma \vdash \synbot \) and \term{consistent} otherwise.
  \end{thmenum}
\end{definition}
\begin{comments}
  \item Closedness of a set of closed formulas should not be confused with \fullref{def:logical_framework/completeness}, which defines completeness of a deductive system via how it relates to semantics.

  \item Peter Hinman in \incite[def. 1.4.5]{Hinman2005Logic} calls \( \cl(\Gamma) \) the \enquote{theory generated by \( \Gamma \)}, but we avoid the term \enquote{theory} altogether as much as possible.

  \item This definition straightforwardly adapts to propositional formulas.
\end{comments}

\begin{proposition}\label{thm:formulas_unsatisfiable_iff_inconsistent}
   Assuming \hyperref[def:classical_logic]{classical logic}, a theory \( \Gamma \) is \hyperref[def:propositional_model]{unsatisfiable} if and only if it is semantically \hyperref[def:first_order_theory/consistent]{inconsistent}.
\end{proposition}
\begin{proof}
  \SufficiencySubProof Assume first that \( \Gamma \) is unsatisfiable. Then for all zero models of \( \Gamma \) any formula is satisfied vacuously, in particular that any model of \( \Gamma \) satisfies \( \synbot \). Thus, \( \Gamma \vDash \synbot \) and, by \fullref{thm:classical_first_order_logic_soundness_and_complete}, \( \Gamma \vdash \synbot \). Therefore, \( \Gamma \) is inconsistent.

  \NecessitySubProof Let \( \Gamma \) be inconsistent and suppose that \( \mscrX = (X, I) \) is a model of \( \Gamma \). Fix any valuation \( v \) in \( \mscrX \). Since \( \Gamma \vdash \synbot \), \fullref{thm:classical_first_order_logic_soundness_and_complete} implies that \( \Bracks{\synbot}_v = T \).

  By the \hyperref[def:first_order_valuation/formula_valuation]{definition of formula valuation}, however, we have \( \Bracks{\synbot}_v = F \). The obtained contradiction shows that \( \mscrX \) cannot be a model of \( \Gamma \) and since this structure was chosen arbitrarily, we conclude that \( \Gamma \) is unsatisfiable.
\end{proof}

\paragraph{The L\"owenheim-Skolem theorems}

\begin{theorem}[First-order compactness theorem]\label{thm:first_order_compactness_theorem}\mcite[thm. 3.1.2]{Hinman2005Logic}
  If every finite subset of the set \( \Gamma \) of closed formulas is satisfiable, then \( \Gamma \) itself is satisfiable.
\end{theorem}
\begin{comments}
  \item The theorem also applies, with adaptations based on \fullref{rem:propositional_logic_as_first_order_logic}, to propositional formulas.
\end{comments}

\begin{theorem}[Downward L\"owenheim-Skolem theorem]\label{thm:downward_lowenheim_skolem_theorem}\mcite[thm. 2.3.35]{Hinman2005Logic}
  Let \( \Gamma \) be a set of closed first-order formulas over some arbitrary language. Suppose that \( \Gamma \) has a \hyperref[def:first_order_model]{model} of \hyperref[def:set_finiteness]{infinite} \hyperref[thm:cardinality_existence]{cardinality}.

  Then \( \Gamma \) also has a \hyperref[def:set_countability]{countable} model.
\end{theorem}

\begin{example}[Skolem's paradox]\label{ex:skolems_paradox}
  From \fullref{thm:downward_lowenheim_skolem_theorem} it follows that \hyperref[def:zfc]{\logic{ZFC}}, if it is consistent, has a model at is at most countably infinite. The \hyperref[def:zfc/infinity]{axiom of infinity} states that no model of \logic{ZFC} is finite. Therefore, there exists a model of \logic{ZFC} that is countably infinite. But we can construct uncountable sets in \logic{ZFC}.

  Therefore, either:
  \begin{itemize}
    \item Uncountable sets within the metatheory are fundamentally different from those within the object theory.
    \item Uncountable sets are paradoxical and \logic{ZFC} must disallow them in order to be consistent.
    \item \logic{ZFC} is inconsistent even when restricted to countable sets.
  \end{itemize}
\end{example}

\begin{theorem}[Upward L\"owenheim-Skolem theorem]\label{thm:upward_lowenheim_skolem_theorem}\mcite[thm. 3.4.9]{Hinman2005Logic}
  Let \( \Gamma \) be a set of closed first-order formulas over some arbitrary language. Suppose that \( \Gamma \) has a \hyperref[def:first_order_model]{model} of \hyperref[def:set_finiteness]{infinite} \hyperref[thm:cardinality_existence]{cardinality} \( \kappa \).

  Then for every \hyperref[def:set_finiteness]{infinite} \hyperref[def:cardinal]{cardinal} \( \mu \), the theory \( \Gamma \) also has a model of cardinality \( \mu \).
\end{theorem}

\paragraph{Categories of first-order models}

\begin{definition}\label{def:category_of_small_first_order_models}\mimprovised
  Let \( \mscrL \) be a first-order language and let \( \Gamma \) be a nonempty set of formulas. Suppose that we are given a \hyperref[def:grothendieck_universe]{Grothendieck universe} \( \mscrU \), which is safe to assume to be the smallest suitable one as explained in \fullref{def:large_and_small_sets}. We define the \term{category of \( \mscrU \)-small models} for \( \Gamma \) as the following \hyperref[rem:concrete_categories]{concrete category}:

  \begin{itemize}
    \item The \hyperref[def:category/objects]{objects} are the \( \mscrU \)-small models of \( \Gamma \).

    \item The \hyperref[def:category/morphisms]{morphisms} between two models are the \hyperref[def:first_order_homomorphism]{structure homomorphisms} between them.
  \end{itemize}
\end{definition}

\begin{remark}\label{rem:positive_formulas_in_category_of_models}
  We usually want \( \Gamma \) to be a set of \hyperref[def:positive_formula]{positive formulas} because, in general, homomorphisms are not injective and the homomorphic image of a model may fail to be a model. \Fullref{thm:positive_formulas_preserved_under_homomorphism} shows that if all formulas in \( \Gamma \) are positive, the image of any homomorphism is again a model and thus an object in the category.
\end{remark}

\begin{example}\label{ex:def:category_of_small_first_order_models}
  This is an incomplete list of categories of small models of \hyperref[def:first_order_theory]{first-order theories} that can be found in this monograph:
  \begin{itemize}
    \item The categories \hyperref[def:pointed_set/category]{\( \cat{Set_*} \)}, \hyperref[def:set_with_involution/category]{\( \cat{Inv} \)}, \hyperref[def:semigroup/category]{\( \cat{Mag} \)}, \hyperref[def:monoid/category]{\( \cat{Mag}_* \)}, \hyperref[def:monoid]{\( \cat{Mon} \)}, \hyperref[def:group/category]{\( \cat{Grp} \)} and \hyperref[def:abelian_group]{\( \cat{Ab} \)}, whose relations are crucial for the definition and properties of groups.

    \item The category \hyperref[def:semiring/category]{\( \cat{SRing} \)} of semirings, \hyperref[def:semimodule]{\( \cat{SMod}_R \)} of semimodules, \hyperref[def:ring/category]{\( \cat{Ring} \)} of rings and \hyperref[def:module/category]{\( \cat{Mod}_R \)} of modules, which are all based on commutative monoids.

    \item The categories \hyperref[def:partially_ordered_set]{\( \cat{Pos} \)} in order theory and the related \hyperref[def:preordered_set/category]{\( \cat{PreOrd} \)}, \hyperref[def:totally_ordered_set]{\( \cat{Tos} \)}, as well as \hyperref[def:lattice/category]{\( \cat{Lat} \)}, \hyperref[def:heyting_algebra/category]{\( \cat{Heyt} \)} and \hyperref[def:boolean_algebra/category]{\( \cat{Bool} \)} in lattice theory.
  \end{itemize}

  In contrast:
  \begin{itemize}
    \item We define the category \hyperref[def:category_of_small_topological_spaces]{\( \cat{Top} \)}  of topological spaces and all of its related categories within set theory without a corresponding first-order theory, and similarly for the \hyperref[def:category_of_small_affine_spaces]{category of affine spaces}.

    \item The category \hyperref[def:category_of_small_sets]{\( \cat{Set} \)} of sets with respect to either \logic{ZFC}, \logic{ZFC+U} or na\"ive set theory is not the same as the category of \( \mscrU \)-small models of set theory. Instead, it is a category within a fixed set theory. Within the metatheory of this monograph, we work within a fixed model of \logic{ZFC+U} with respect to \hyperref[def:classical_logic]{classical logic}.

    \item Similarly, we do not care about models of \hyperref[def:peano_arithmetic]{Peano arithmetic} enough to study its category of \( \mscrU \)-small models. Instead, we only use a single model and denote it by \( \BbbN \).
  \end{itemize}
\end{example}

\begin{definition}\label{def:subobject_and_quotient}\mcite[126]{MacLane1998Categories}
  For an object \( X \) in some \hyperref[def:category]{category}, define an equivalence relation on \hyperref[def:morphism_invertibility/left_cancellative]{monomorphisms} \( f: A \to X \) and \( g: B \to X \) with codomain \( X \) to hold if there exists an isomorphism \( h: A \to B \) such that \( f = g \bincirc h \). We call the equivalence classes of this relation \term{subobjects} of \( X \).

  This definition seems vague, and we will indeed say \enquote{\( A \) is a subobject} rather than \enquote{The equivalence class of \( f \) is a subobject} or even \enquote{\( f \) is a subobject}. In \hyperref[rem:concrete_categories]{concrete categories}, as long as the set-theoretic image of a function is an object, we can simply take this image as \enquote{the} canonical subobject.

  \hyperref[thm:categorical_principle_of_duality]{Dually}, for the relation where for two epimorphisms \( f: X \to A \) and \( g: X \to B \) there exists an isomorphism \( h: A \to B \) such that \( f = g \bincirc h \), we say that the equivalence classes are \term{quotient objects} of \( X \).
\end{definition}

\begin{proposition}\label{thm:def:subobject_and_quotient}
  \hyperref[def:subobject_and_quotient]{Subobjects and quotients} have the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:subobject_and_quotient/self} Every object is both a subobject and a quotient of itself.
    \thmitem{thm:def:subobject_and_quotient/zero} A \hyperref[def:universal_objects/zero]{zero object} is both a subobject and a quotient object of every object.
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:subobject_and_quotient/self} The identity isomorphism \( \id: A \to A \) is both a monomorphism into \( A \) and an epimorphism from \( A \).

  \SubProofOf{thm:def:subobject_and_quotient/zero} Let \( Z \) be a zero object and \( A \) be an arbitrary object.

  There exists a unique morphism \( f: Z \to A \). It is a monomorphism because, given a pair of parallel morphisms \( g: B \to Z \) and \( h: B \to Z \) satisfying \( f \bincirc g = f \bincirc h \), we have \( g = h \) simply because \( Z \) is a terminal object. The condition \( f \bincirc g = f \bincirc h \) is not every necessary.

  Thus, \( Z \) is a subobject of \( A \). We can similarly show that it is a quotient object.
\end{proof}

\begin{definition}\label{def:simple_object}\mimprovised
  In a \hyperref[def:category]{category} with a \hyperref[def:universal_objects/zero]{zero object} \( Z \), we say that an object \( A \) is \term{simple} if its only \hyperref[def:subobject_and_quotient]{quotient objects} are \( Z \) and \( A \) itself.
\end{definition}

\begin{proposition}\label{thm:first_order_categorical_invertibility}
  Fix a \hyperref[def:category_of_small_first_order_models]{category of small models} of a \hyperref[def:first_order_theory]{first-order theory}.

  \begin{thmenum}
    \thmitem{thm:first_order_categorical_invertibility/injective} Every \hyperref[def:set_valued_map/empty]{\hi{nonempty}} injective homomorphism is a \hyperref[def:morphism_invertibility/left_cancellative]{categorical monomorphism}.

    This holds for any \hyperref[def:first_order_embedding]{structure embedding}. In particular, via the canonical inclusion, every \hyperref[def:first_order_submodel]{submodel} of \( \mscrX \) is a \hyperref[def:subobject_and_quotient]{categorical subobject} of \( \mscrX \).

    A partial converse always holds --- every \hyperref[def:morphism_invertibility/left_cancellative]{split monomorphism} is injective.

    If the \hyperref[def:concrete_category]{forgetful functor} \( U: \cat{C} \to \cat{Set} \) has a \hyperref[def:category_adjunction]{left adjoint}, as it often does, then every monomorphism is injective. Otherwise, a homomorphism may be left invertible with respect to homomorphisms but not general functions.

    \thmitem{thm:first_order_categorical_invertibility/surjective} \hyperref[thm:categorical_principle_of_duality]{Dually}, every surjective homomorphism is a \hyperref[def:morphism_invertibility/right_cancellative]{categorical epimorphism}.

    In particular, via the canonical projection, every \hyperref[def:first_order_quotient]{quotient structure} of \( \mscrX \) is a \hyperref[def:subobject_and_quotient]{categorical quotient object} of \( \mscrX \).

    A partial converse always holds --- every \hyperref[def:morphism_invertibility/right_cancellative]{split epimorphism} is surjective.

    If the \hyperref[def:concrete_category]{forgetful functor} \( U: \cat{C} \to \cat{Set} \) has a \hyperref[def:category_adjunction]{right adjoint}, then every epimorphism is surjective.

    \thmitem{thm:first_order_categorical_invertibility/bijective} Every \hyperref[def:first_order_embedding]{structure isomorphism} is a \hyperref[def:morphism_invertibility/isomorphism]{categorical isomorphism} and vice versa.
  \end{thmenum}
\end{proposition}
\begin{proof}
  All follow from \fullref{thm:concrete_category_function_invertibility}.
\end{proof}

\begin{proposition}\label{thm:first_order_direct_product_is_categorical_product}
  Consider the \hyperref[def:category_of_small_first_order_models]{category of small models} of a \hyperref[def:first_order_theory]{first-order theory}. Suppose that \hyperref[def:first_order_direct_product]{direct products} exist, for example if the theory consists of \hyperref[def:positive_formula]{positive formulas} \hi{without disjunctions}.

  Then the \hyperref[def:discrete_category_limits]{categorical product} of a family of models is their \hyperref[def:first_order_direct_product]{direct product}.
\end{proposition}
\begin{comments}
  \item \Fullref{thm:direct_product_preserves_positive_formulas} ensures that positive formulas without disjunctions have direct products.
\end{comments}
\begin{proof}
  First note that the product \( A \coloneqq \prod_{k \in \mscrK} A_k \) with the \hyperref[thm:direct_product_projections]{projections} \( \pi \coloneqq \seq{ \pi_k }_{k \in \mscrK} \) are a \hyperref[def:category_of_cones/cone]{cone} for the \hyperref[def:discrete_category]{discrete} \hyperref[def:categorical_diagram]{diagram} \( \seq{ A_k }_{k \in \mscrK} \).

  Let \( (C, \alpha) \) also be a cone. We want to define a first-order homomorphism \( l_C: C \to A \) such that, for every \( m \in \mscrK \) and \( c \in C \),
  \begin{equation*}
    \alpha_m(c) = \pi_m(l_C(c)).
  \end{equation*}

  The value of \( l_C(c) \) is determined entirely by the action on each individual coordinate. This suggests the definition
  \begin{equation*}
    l_C(c) \coloneqq \seq{ \alpha_k(c) }_{k \in \mscrK}.
  \end{equation*}
\end{proof}

\begin{definition}\label{def:object_presentation}\mimprovised
  Consider the \hyperref[def:category_of_small_first_order_models]{category of small models} \( \cat{C} \) of a \hyperref[def:first_order_theory]{first-order theory} consisting of \hyperref[def:positive_formula]{positive formulas} over a language without predicates. Suppose that the \hyperref[def:concrete_category]{forgetful functor} \( U: \cat{C} \to \cat{Set} \) has a \hyperref[def:category_adjunction]{left adjoint} \( F: \cat{Set} \to \cat{C} \).

  Fix a \hyperref[def:set]{plain set} \( S \) and a \hyperref[def:binary_relation]{binary relation} \( {\sim} \) on \( S \). Let \( {\cong} \) be the \hyperref[def:first_order_congruence]{congruence} in \( F(S) \) \hyperref[def:first_order_generated_congruence]{generated} by \( {\sim} \). Then we can form the \hyperref[def:first_order_quotient]{quotient} \( F(S) / {\cong} \).

  If the model \( X \) is isomorphic to \( F(S) / {\cong} \), we say that \( (S, {\sim}) \) is a \term{presentation} of \( X \) with a set \( S \) of \term{generators} and \( {\sim} \) of \term{relators}\fnote{We regard \( {\sim} \) as a set of ordered pairs}.

  \begin{thmenum}
    \thmitem{def:object_presentation/generator_cardinality} We say that \( X \) is \term{finitely generated} if there exists a presentation with finitely many generators. We can introduce similar terminology for countably many generators, as well as other cardinalities.

    \thmitem{def:object_presentation/relator_cardinality} Analogously, we say that \( X \) is \term{finitely related} if there exists a presentation with finitely many relators, and similarly for other cardinalities.

    \thmitem{def:object_presentation/cardinality} Finally, we say that \( X \) is \term{finitely presented} if there exists a presentation where both the set of generators and set of relators are finite, and similarly for other cardinalities.
  \end{thmenum}
\end{definition}

\begin{proposition}\label{thm:object_presentation_existence}
  In the conditions of \fullref{def:object_presentation}, every object in \( \cat{C} \) has at least one \hyperref[def:object_presentation]{presentation}.
\end{proposition}
\begin{proof}
  Fix an object \( X \) in \( \cat{C} \) and denote its underlying set \( U(X) \) by \( S \).

  The unit \( \eta \) and counit \( \varepsilon \) of the adjunction exist have the following instances: morphisms \( \eta_S: S \to U(F(S)) \) and \( \varepsilon_X: F(S) \to X \) such that
  \begin{equation*}
    U(\varepsilon_X) \bincirc \eta_S = \id_S.
  \end{equation*}

  \Fullref{thm:homomorphism_induces_congruence} implies that the relation \( {\cong} \) such that \( a \cong a' \) if and only if \( \varepsilon_X(a) = \varepsilon_X(a') \) is a congruence. \Fullref{thm:quotient_structure_universal_property} then implies that there exists a unique homomorphism \( h: F(S) / {\cong} \to X \) such that
  \begin{equation*}
    h \bincirc \pi = \varepsilon_X.
  \end{equation*}

  But
  \begin{equation*}
    U(h \bincirc \pi) \bincirc \eta_S = U(\varepsilon_X) \bincirc \eta_S = \id_S.
  \end{equation*}

  This implies that \( U(h) \) is right invertible, and hence surjective.

  Note that \( h \) is injective by construction, and since the language contains no predicate symbols, injective homomorphisms are automatically embeddings. As a surjective embedding, \( h \) is an isomorphism between \( F(S) / {\cong} \) and \( X \).

  Define \( {\sim} \) as the restriction of \( {\cong} \) to members of \( S \). Then \( (S, \cong) \) is a presentation of \( X \).
\end{proof}

\paragraph{Lindenbaum-Tarski algebras}
