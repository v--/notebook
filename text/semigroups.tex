\section{Semigroups}\label{sec:semigroups}

We list here several basic algebraic structures that we will use mostly as building blocks for more complicated structures.

As discussed in \fullref{rem:first_order_model_notation}, listing all operations explicitly is cumbersome, and we will usually avoid it.

\begin{figure}[!ht]
  \caption{Generalizations of groups}\label{fig:monoid_hierarchy}
  \smallskip
  \hfill
  \begin{forest}
    for tree={grow=north}
    [
      {\hyperref[def:group]{Group}}
        [
          {\hyperref[def:set_with_involution]{Set with involution}}, edge label={node[midway, right=1em]{\( x^{-1} \) (unary)}}
        ]
        [
          {\hyperref[def:monoid]{Monoid}},
            [{\hyperref[def:semigroup]{Semigroup}}, edge label={node[midway, right=1em]{\( x \cdot y \) (binary)}}]
            [{\hyperref[def:pointed_set]{Pointed set}}, edge label={node[midway, left=1em]{\( e \) (nullary)}}]
        ]
    ]
  \end{forest}
  \hfill\hfill
\end{figure}

\begin{definition}\label{def:operation_on_set}\mcite[132]{Birkhoff1967LatticeTheory}
  An \term[bg=операция (\cite[def. IV.1]{ГеновМиховскиМоллов1991Алгебра}), ru=опярация (\cite[def. 1.4]{Эдельман1975Логика})]{operation} of arity \( n \) or \( n \)-ary operation on a \hyperref[def:set]{plain set} \( A \) is a \hyperref[def:function]{function} from \( A^n \) to \( A \).
\end{definition}
\begin{comments}
  \item The arity of an operation is not to be confused with the corresponding relation arity as defined in \fullref{def:relation/arity} --- functions are always binary relations.
  \item We introduce in \fullref{def:operation_arity_terminology} some common terminology based on the arity.
\end{comments}

\begin{definition}\label{def:operation_arity_terminology}\mcite[132]{Birkhoff1967LatticeTheory}
  We introduce the following terminology based on the arity \( n \) of an \hyperref[def:operation_on_set]{operation}:
  \begin{itemize}
    \item \term{Nullary} for \( n = 0 \).
    \item \term[bg=унарна (операция) (\cite[75]{ГеновМиховскиМоллов1991Алгебра}), ru=унарная (операция) (\cite[def. 1.4]{Эдельман1975Логика})]{Unary} for \( n = 1 \).
    \item \term[bg=бинарна (операция) (\cite[def. IV.1]{ГеновМиховскиМоллов1991Алгебра}), ru=бинарная (операция) (\cite[def. 1.4]{Эдельман1975Логика})]{Binary} for \( n = 2 \).
    \item \term[bg=тернарна (операция) (\cite[75]{ГеновМиховскиМоллов1991Алгебра}), ru=тернарная (операция) (\cite[def. 1.4]{Эдельман1975Логика})]{Ternary} for \( n = 3 \).
  \end{itemize}
\end{definition}

\paragraph{Pointed sets}

\begin{definition}\label{def:pointed_set}\mcite[26]{MacLane1998CategoryTheory}
  A \term[ru=множество с отмеченной точкой (\cite[16]{ЦаленкоШульгейфер1974ОсновыТеорииКатегорий})]{pointed set} is a simple algebraic structure --- a nonempty set \( X \) equipped with a distinguished element \( e \). It is an algebraic structure because \( e \) can be regarded as the sole value of a nullary \hyperref[def:operation_on_set]{operation} \( \ast: X^0 \to X \).

  We will call \( e \) the \term{origin} of \( X \) based on the terminology for \hyperref[def:affine_coordinate_system]{affine coordinate systems}.

  Pointed sets have the following metamathematical properties:
  \begin{thmenum}
    \thmitem{def:pointed_set/theory}\mimprovised Pointed sets can also be viewed as \hyperref[def:first_order_model]{models} of an empty \hyperref[def:first_order_theory]{theory} for a \hyperref[def:first_order_language]{first-order logic language} with a constant symbol, i.e. a nullary \hyperref[def:first_order_language/fun]{functional symbol}.

    \thmitem{def:pointed_set/homomorphism} A \hyperref[def:first_order_homomorphism]{first-order homomorphism} between the pointed sets \( (X, e_{X}) \) and \( (Y, e_{Y}) \) is, explicitly, a function \( \varphi: X \to Y \) that satisfies
    \begin{equation}\label{eq:def:pointed_set/homomorphism}
      \varphi(e_{X}) = e_{Y}.
    \end{equation}

    \thmitem{def:pointed_set/submodel} The set \( S \subseteq X \) is a \hyperref[def:first_order_submodel]{first-order submodel} of \( X \) if \( e \in S \).

    In particular, as a consequence of \fullref{thm:positive_formulas_preserved_under_homomorphism}, the image of a pointed set homomorphism is a submodel of its codomain.

    \thmitem{def:pointed_set/category} We denote the \hyperref[def:category_of_small_first_order_models]{category of \( \mscrU \)-small models} for this theory by \( \ucat{Set}_* \).
  \end{thmenum}
\end{definition}

\paragraph{Trivial objects}

\begin{concept}\label{rem:trivial_object}
  Some algebraic theories have an established \enquote{trivial structure} --- for example the \term{trivial group} \( \set{ e } \) defined by \incite[146]{Knapp2016BasicAlgebra} and \incite[42]{Aluffi2009Algebra}, also called a \enquote{zero group} by \incite[25]{MacLane1998CategoryTheory} or the \enquote{trivial module} \( \set{ 0 } \), used by \incite[175]{Aluffi2009Algebra}, also called a \enquote{zero module} by \incite[146]{Knapp2016BasicAlgebra}, \incite[25]{MacLane1998CategoryTheory} and even Paolo Aluffi himself in \cite[341]{Aluffi2009Algebra}. Dimension theory for modules allows characterizing the trivial module as a zero-dimensional module or vector space.

  All these are single-element models of the corresponding theories. We may also define trivial \hyperref[def:partially_ordered_set]{partially ordered sets}, which would be empty sets, trivial \hyperref[def:lattice]{lattices}, which could either be one-element or two-element sets depending on whether \( \syntop = \synbot \), and trivial \hyperref[def:directed_graph]{directed graphs}, which could be any of the things discussed in \fullref{rem:trivial_graph}. The trouble is that these are not well-established concepts.

  For the few purposes that we will need them for, it is possible to give a general definition for trivial objects --- see \fullref{def:trivial_object}.
\end{concept}

\begin{definition}\label{def:trivial_object}\mimprovised
  Let \( \cat{C} \) be a \hyperref[def:category]{category} that is \hyperref[def:concrete_category]{concrete} over the category \hyperref[def:pointed_set/category]{\( \cat{Set}_* \)} of pointed sets, and let \( U: \cat{C} \to \cat{Set}_* \) be the corresponding (\hyperref[def:functor_invertibility/faithful]{faithful}) forgetful functor.

  Then any preimage under \( U \) of any single-element pointed set is a \hyperref[def:universal_objects/zero]{zero object} in \( \cat{C} \). We will call such objects \term{trivial}.
\end{definition}
\begin{comments}
  \item Even if the category is concrete over \( \cat{Set}_* \), it may not have a zero object. As an example, we can remove the trivial pointed set and all related morphisms from \( \cat{Set}_* \) itself.
  \item We decided to use the term \enquote{trivial} rather than \enquote{zero} since it is better established in the context of algebra.
  \item In particular, any single-element pointed set is a zero object in the category \( \cat{Set}_* \).
  \item Other examples for which we will use this definition include \hyperref[def:group]{groups}, \hyperref[def:ring]{nonunital ring}, \hyperref[def:semimodule]{semimodules} and \hyperref[def:module]{modules} --- in the aforementioned cases, all single-element structures are isomorphic.
\end{comments}
\begin{defproof}
  Suppose that \( U(Z) = \set{ e } \).

  \SubProof{Proof that \( Z \) is an \hyperref[def:universal_objects/initial]{initial object}} For any morphism \( f: Z \to B \), the function \( U(f) \) \enquote{picks} an element out of \( U(B) \). The only choice of element that makes \( U(f) \) a pointed set homomorphism is the origin of \( U(B) \), and hence the image of the morphism set \( \cat{C}(Z, B) \) under \( U \) consists of only one function.

  Since \( U \) is a faithful functor, this means that \( \cat{C}(Z, B) \) also has only one element.

  The object \( B \) was chosen arbitrarily, so we conclude that \( Z \) is an initial object.

  \SubProof{Proof that \( Z \) is a \hyperref[def:universal_objects/initial]{terminal object}} If \( U(A) = \set{ e } \), then, for any morphism \( f: A \to Z \), the function \( U(f) \) must take the only possible value \( e \) at any element of \( U(Z) \). Again, since \( U \) is faithful, we conclude that \( Z \) is also a terminal object.
\end{defproof}

\paragraph{Kernels and cokernels}

\begin{definition}\label{def:zero_morphisms}
  Suppose that the category \( \cat{C} \) has a \hyperref[def:universal_objects/zero]{zero object} \( 0 \).

  \begin{thmenum}
    \thmitem{def:zero_morphisms/morphism}\mcite[20]{MacLane1998CategoryTheory} For every pair of objects \( A \) and \( B \) in \( \cat{C} \), there exists a unique morphism, called the \term[ru=нулевой морфизм (\cite[75]{ЦаленкоШульгейфер1974ОсновыТеорииКатегорий})]{zero morphism}, that \hyperref[def:factors_through]{uniquely factors through} \( 0 \):
    \begin{equation}\label{eq:def:zero_morphisms/morphism}
      \begin{aligned}
        \includegraphics[page=1]{output/def__zero_morphisms}
      \end{aligned}
    \end{equation}

    We denote this zero morphism by \( 0_{A,B} \) or even \( 0 \).

    \thmitem{def:zero_morphisms/kernel}\mcite[191]{MacLane1998CategoryTheory} We define the \term[ru=ядро (\cite[36]{ЦаленкоШульгейфер1974ОсновыТеорииКатегорий})]{kernel} cone of a morphism \( f: A \to B \) as the \hyperref[eq:def:equalizers/equalizer]{equalizer cone} of \( f \) and \( 0_{A,B} \).

    \Fullref{thm:equalizer_invertibility} implies that a kernel morphism is necessarily a monomorphism. The converse may not hold.

    \thmitem{def:zero_morphisms/cokernel}\mcite[64]{MacLane1998CategoryTheory} \hyperref[thm:categorical_principle_of_duality]{Dually}, we define the \term[ru=коядро (\cite[37]{ЦаленкоШульгейфер1974ОсновыТеорииКатегорий})]{cokernel} cocone of a morphism \( f: A \to B \) as the \hyperref[eq:def:equalizers/coequalizer]{coequalizer cocone} of \( f \) and \( 0_{A,B} \).

    \Fullref{thm:equalizer_invertibility} implies that a cokernel morphism is necessarily an epimorphism. The converse may not hold.

    \thmitem{def:zero_morphisms/image}\mcite[def. IX.1.15]{Aluffi2009Algebra} We define the \term{image} of a morphism \( f: A \to B \) as the kernel of the cokernel morphism.

    \medskip

    \thmitem{def:zero_morphisms/coimage}\mcite[def. IX.1.15]{Aluffi2009Algebra} Dually, we define the \term{coimage} of a morphism \( f: A \to B \) as the cokernel of the kernel morphism.
  \end{thmenum}
\end{definition}
\begin{comments}
  \item Neither the kernel, cokernel, image nor coimage of a morphism is guaranteed to exist.
\end{comments}

\begin{lemma}\label{thm:zero_morphism_composition}
  The left or right composition of a \hyperref[def:zero_morphisms/morphism]{zero morphism} with any other morphism is also a zero morphism.
\end{lemma}
\begin{proof}
  Consider the composition \( 0_{B,C} \bincirc f \), where \( f: A \to B \). The following diagram commutes because \( 0 \) is a terminal object:
  \begin{equation*}
    \begin{aligned}
      \includegraphics[page=1]{output/thm__zero_morphism_composition}
    \end{aligned}
  \end{equation*}

  The morphism \( 0_{A,C} \) uniquely factors through \( 0 \) by definition, and such a factorization is provided by \( 0_{0,C} \bincirc 0_{A,0} \). Then
  \begin{equation*}
    0_{A,C} = 0_{0,C} \bincirc 0_{A,0} = \underbrace{0_{0,C} \bincirc 0_{B,0}}_{0_{B,C}} \bincirc f.
  \end{equation*}

  Therefore, \( 0_{B,C} \bincirc f \) is also a zero morphism.

  An analogous proof can be given when composing \( f \) with a zero morphism on the right.
\end{proof}

\begin{theorem}[Image-coimage factorization]\label{thm:image_coimage_factorization}
  In a category with a zero object, for every morphism \( f: A \to B \), if both its \hyperref[def:zero_morphisms/image]{image} and \hyperref[def:zero_morphisms/coimage]{coimage} exist, there exists a unique morphism \( \widehat{f}: \co\img f \to \img f \) such that the following diagram commutes:
  \begin{equation*}
    \begin{aligned}
      \includegraphics[page=1]{output/thm__image_coimage_factorization}
    \end{aligned}
  \end{equation*}
\end{theorem}
\begin{proof}
  Consider the extended diagram
  \begin{equation*}
    \begin{aligned}
      \includegraphics[page=2]{output/thm__image_coimage_factorization}
    \end{aligned}
  \end{equation*}

  \SubProof{Construction of \( f': \co\img f \to B \)}

  The projection \( \pi: A \to \co\img f \) is a cokernel morphism of \( \iota' \) above, which is in turn a kernel morphism of \( \ker f \). Another coequalizer cocone for \( \iota' \) is \( (B, f) \). Indeed, \( \iota' \) itself satisfies
  \begin{equation}\label{eq:thm:image_coimage_factorization/f_cocone/1}
    f \bincirc \iota' = 0_{A, B} \bincirc \iota'.
  \end{equation}

  \Fullref{thm:zero_morphism_composition} implies that
  \begin{equation}\label{eq:thm:image_coimage_factorization/f_cocone/2}
    0_{A, B} \bincirc \iota' = 0_{\ker f, B}
  \end{equation}
  and
  \begin{equation}\label{eq:thm:image_coimage_factorization/f_cocone/3}
    0_{\ker f, B} = f \bincirc 0_{\ker f, A}.
  \end{equation}

  We can combine \eqref{eq:thm:image_coimage_factorization/f_cocone/1}, \eqref{eq:thm:image_coimage_factorization/f_cocone/2} and \eqref{eq:thm:image_coimage_factorization/f_cocone/3} to obtain
  \begin{equation*}
    f \bincirc \iota' = f \bincirc 0_{\ker f, A}.
  \end{equation*}

  Thus, \( (B, f) \) is also a coequalizer cocone for \( \iota' \), and hence there exists a unique morphism \( f': \co\img f \to B \) such that \( f = f' \bincirc \pi \).

  \SubProof{Construction of \( \widetilde{f}: \co\img f \to \img f \)} The embedding \( \iota: \img f \to B \) is a kernel morphism of \( \pi' \), which is a cokernel morphism of \( f \). As a cokernel morphism of \( f \), \( \pi' \) satisfies the following:
  \begin{equation*}
    \pi' \bincirc f = \underbrace{\pi' \bincirc 0_{A,B}}_{0_{A,\co\ker f}}.
  \end{equation*}

  But \( f = f' \bincirc \pi \), thus
  \begin{equation*}
    \pi' \bincirc f' \bincirc \pi = 0_{A,\co\ker f} = 0_{A,B} \bincirc \pi.
  \end{equation*}

  Since \( \pi \) is a cokernel morphism, \fullref{thm:equalizer_invertibility} implies that it is an epimorphism, and thus we can cancel it:
  \begin{equation*}
    \pi' \bincirc f' = \underbrace{0_{A,B}}_{\mathclap{0_{B,\co\ker f} \bincirc f'}}.
  \end{equation*}

  Hence, \( (\co\img f, f') \) is another equalizer cone for \( \pi' \), and there exists a unique homomorphism \( \widetilde{f}: \co\img f \to \img f \) such that \( f' = \pi \bincirc \widetilde{f} \).

  This is the desired homomorphism.
\end{proof}

\begin{proposition}\label{thm:zero_morphisms_pointed}
  Let \( \mscrL \) be a \hyperref[def:first_order_language]{first-order language} with no predicate symbols and a fixed nullary functional symbol \( \ast \). Let \( \Gamma \) be a theory over \( \mscrL \) that consists of \hyperref[def:positive_formula]{positive formulas} without existential quantifiers. Finally, let \( \cat{C} \) be the \hyperref[def:category_of_small_first_order_models]{category of \( \mscrU \)-small models} of \( \Gamma \), and suppose that \( \cat{C} \) has a \hyperref[def:trivial_object]{trivial object}.\fnote{All these requirements seem restrictive, yet the categories we will encounter will satisfy them.}

  We will denote the interpretation of \( \ast \) in the structure \( A \) via \( e_A \) rather than \( I_A(\ast) \).

  \begin{thmenum}
    \thmitem{thm:zero_morphisms_pointed/morphism} The unique \hyperref[def:zero_morphisms/morphism]{zero morphism} between the structures \( A \) and \( B \) is the function that sends each element of \( A \) to the origin of \( B \):
    \begin{equation*}
      \begin{aligned}
        &0_{A,B}: A \to B, \\
        &0_{A,B}(x) \coloneqq e_B.
      \end{aligned}
    \end{equation*}

    \thmitem{thm:zero_morphisms_pointed/kernel} The \hyperref[def:zero_morphisms/kernel]{categorical kernel} of a morphism \( f: A \to B \) is the \hyperref[def:set_valued_map/inverse]{preimage}
    \begin{equation*}
      f^{-1}(e_B) = \set{ x \in A \given f(x) = e_B }.
    \end{equation*}

    We denote this set via \( \ker f \). The kernel pair is \( (\ker f, \iota) \), where \( \iota \) is the canonical embedding from \( \ker f \) to \( A \).

    \thmitem{thm:zero_morphisms_pointed/cokernel} Dually, the \hyperref[def:zero_morphisms/cokernel]{categorical cokernel} of a morphism \( f: A \to B \) is the \hyperref[def:first_order_quotient]{quotient} of \( B \) by the \hyperref[def:first_order_congruence]{congruence} \hyperref[def:first_order_generated_congruence]{generated} by the relation \( {\sim} \) defined as
    \begin{equation*}
      y \sim e_B \T{when} y \in f[A].
    \end{equation*}

    We denote this quotient via \( \co\ker f \). The cokernel pair is \( (\co\ker f, \pi) \), where \( \pi \) is the canonical projection from \( B \) to \( \co\ker f \).

    \thmitem{thm:zero_morphisms_pointed/image} The \hyperref[def:zero_morphisms/image]{categorical image} of a morphism \( f: A \to B \) is the \hyperref[def:set_valued_map/image]{set-theoretic image} \( f[A] \).

    \thmitem{thm:zero_morphisms_pointed/coimage} Dually, the \hyperref[def:zero_morphisms/coimage]{categorical coimage} of a morphism \( f: A \to B \) is the \hyperref[def:first_order_quotient]{quotient} of \( A \) by the \hyperref[def:first_order_congruence]{congruence} \hyperref[def:first_order_generated_congruence]{generated} by the relation \( {\sim} \) defined as
    \begin{equation*}
      x \sim e_A \T{when} f(x) = e_B.
    \end{equation*}
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:zero_morphisms_pointed/morphism} Trivial.

  \SubProofOf{thm:zero_morphisms_pointed/kernel}

  \SubProof*{Proof that \( \ker f \) is a submodel of \( A \)} As the preimage of the submodel \( \set{ e_B } \) of \( B \), \( \ker f \) is a substructure of \( A \) as a consequence of \fullref{thm:def:first_order_homomorphism/preimage_is_substructure}. As a substructure, \( \ker f \) is a model of \( \Gamma \) as a consequence of \fullref{thm:substructure_is_model}.

  \SubProof*{Proof that \( (\ker f, \iota) \) is an equalizer cone} The following diagram must commute:
  \begin{equation*}
    \begin{aligned}
      \includegraphics[page=1]{output/thm__zero_morphisms_pointed}
    \end{aligned}
  \end{equation*}

  Indeed, if \( a \in \ker f \), then by definition \( f(\iota(x)) = f(a) = e_B \).

  \SubProof*{Proof that \( (\ker f, \iota) \) is universal} If \( (X, g) \) is another cone, there must exist a homomorphism \( \widetilde g: X \to \ker f \) such that the following diagram commutes:
  \begin{equation*}
    \begin{aligned}
      \includegraphics[page=2]{output/thm__zero_morphisms_pointed}
    \end{aligned}
  \end{equation*}

  In order for \( (X, g) \) to be a cone, for every element \( a \) of \( X \) we need \( f(g(a)) \) to be \( e_B \), which in turn requires \( g(a) \) to be in the preimage \( f^{-1}(e_B) \).

  Therefore, we can restrict the codomain of \( g \) to \( \ker f \) to obtain the desired homomorphism \( \widetilde g: X \to \ker f \).

  \SubProofOf{thm:zero_morphisms_pointed/cokernel}

  \SubProof*{Proof that \( \co\ker f \) is a model of \( \Gamma \)} Follows from \fullref{thm:quotient_preserves_positive_formulas}.

  \SubProof*{Proof that \( (\co\ker f, \pi) \) is a coequalizer cocone} The following diagram must commute:
  \begin{equation*}
    \begin{aligned}
      \includegraphics[page=3]{output/thm__zero_morphisms_pointed}
    \end{aligned}
  \end{equation*}

  Indeed, for every \( b \) in \( f[A] \), we must have \( \pi(b) = \pi(e_B) \), which is guaranteed by \( f(x) \cong e_B \).

  \SubProof*{Proof that \( (\co\ker f, \pi) \) is universal} If \( (X, g) \) is another cocone, there must exist a homomorphism \( \widetilde g: \co\img f \to Y \) such that the following diagram commutes:
  \begin{equation*}
    \begin{aligned}
      \includegraphics[page=4]{output/thm__zero_morphisms_pointed}
    \end{aligned}
  \end{equation*}

  In order for \( (\co\ker f, \pi) \) to be a cokernel, for every \( b \) in \( B \), even outside \( f[A] \), \( \widetilde g \) must satisfy
  \begin{equation}\label{eq:thm:zero_morphisms_pointed/cokernel/homomorphism}
    \widetilde{g}(\pi(b)) = g(b).
  \end{equation}

  We will now show that \( b \cong b' \) implies \( g(b) = g(b') \), which would allow us to use \eqref{eq:thm:zero_morphisms_pointed/cokernel/homomorphism} as a definition\fnote{We could also use \fullref{thm:quotient_structure_universal_property} to prove the statement, but it would not make the proof simpler.}.

  \Fullref{thm:homomorphism_induces_congruence} implies that the relation \( b \congdot b' \) defined to hold when \( g(b) = g(b') \) is a \hyperref[def:first_order_congruence]{congruence}. Furthermore, since \( (X, g) \) is a cocone, it must satisfy \( g(b) = e_Y \) whenever \( b \) is in \( f[A] \), which in turn implies that \( b \congdot b' \) for all pairs \( b \) and \( b' \) in \( f[A] \).

  But \( {\cong} \) is defined as the intersection of all congruences satisfying the latter condition. Therefore, \( {\cong} \) must be a subset of \( {\congdot} \).

  Then \( b \cong b' \) implies \( b \congdot b' \). Restated in terms of the respective homomorphisms, this means that \( \pi(b) = \pi(b') \) implies \( g(b) = g(b') \). Thus, the function \( \widetilde{g} \) is well-defined by \eqref{eq:thm:zero_morphisms_pointed/cokernel/homomorphism}.

  This shows that \( (\co\ker f, \pi) \) is a cokernel pair of \( f \).

  \SubProofOf{thm:zero_morphisms_pointed/image} Based on \fullref{thm:zero_morphisms_pointed/cokernel}, the cokernel of \( f \) is \( B / {\cong} \) based on the relation \( {\cong} \) generated by \( f(x) \sim e_B \) for all \( x \in A \), and the corresponding projection \( \pi \) is the cokernel morphism.

  Based on \fullref{thm:zero_morphisms_pointed/kernel}, the category-theoretic image of \( f \), the kernel of \( \pi \), is the preimage of the origin \( \pi(e_B) \) of \( B / {\cong} \) under \( \pi \), i.e. the equivalence class of \( e_B \) under \( {\cong} \).

  Therefore, the set-theoretic image \( f[A] \) necessarily belongs to the category-theoretic image \( \img f \).

  \Fullref{thm:def:first_order_homomorphism/image_is_substructure} implies that \( f[A] \) is a substructure of \( B \) and \fullref{thm:substructure_is_model} implies that it is a model of \( \Gamma \). Hence, \( f[A] \) is an object in the category \( \cat{C} \).

  As a substructure of \( \mscrY \), it is closed under function applications in \( \mscrY \), hence it contains the equivalence class of \( e_B \) under \( {\cong} \).

  Therefore, it \( f[A] \) is both a subset and a superset of \( \img f \), which means they are equal.

  \SubProofOf{thm:zero_morphisms_pointed/coimage} Based on \fullref{thm:zero_morphisms_pointed/kernel}, the categorical kernel of \( f \) is the preimage of \( e_B \) under \( f \), and the corresponding embedding \( \iota \) is the kernel morphism.

  Based on \fullref{thm:zero_morphisms_pointed/cokernel}, the category-theoretic coimage of \( f \), the cokernel of \( \iota \), is \( A / {\cong} \) based on the relation \( {\cong} \) generated by \( x \sim e_A \) for every \( x \) in \( \ker f = f^{-1}(e_B) \).
\end{proof}

\paragraph{Sets with involutions}

\begin{definition}\label{def:set_with_involution}\mimprovised
  A \term{set with an involution} is a \hyperref[def:set]{set} \( X \) with a unary \hyperref[def:morphism_invertibility/involution]{involution} \( (\anon)^{-1} \).

  Sets with involutions have the following metamathematical properties:
  \begin{thmenum}
    \thmitem{def:set_with_involution/theory} We define the theory of sets with involution as a theory over the language consisting of a single unary functional symbol \( \anon^{-1} \) with the sole axiom
    \begin{equation}\label{eq:def:set_with_involution/theory/axiom}
      (\synx^{-1})^{-1} \syneq \synx.
    \end{equation}

    \thmitem{def:set_with_involution/homomorphism} A \hyperref[def:first_order_homomorphism]{first-order homomorphism} between sets with involutions \( X \) and \( Y \) is a function \( \varphi: X \to Y \) satisfying
    \begin{equation}\label{eq:def:set_with_involution/homomorphism}
      \varphi(x^{-1})
      =
      \varphi(x)^{-1}.
    \end{equation}

    \thmitem{def:set_with_involution/submodel} Any subset of a set with involution is again a set with involution.

    In particular, as a consequence of \fullref{thm:positive_formulas_preserved_under_homomorphism}, the \hyperref[def:set_valued_map/image]{image} of a homomorphism \( \varphi: X \to Y \) is a submodel of \( Y \).

    The \hyperref[thm:substructures_form_complete_lattice/bottom]{bottom substructure} of any set with involution is the empty set.

    See \fullref{rem:empty_first_order_structures} regarding allowing empty sets as first-order structures.

    \thmitem{def:set_with_involution/category} We introduce no special notation for the corresponding \hyperref[def:category_of_small_first_order_models]{category of \( \mscrU \)-small models}.
  \end{thmenum}
\end{definition}

\paragraph{Semigroups}

\begin{definition}\label{def:binary_operation}
  An important special case of \hyperref[def:operation_on_set]{operations} are binary operations. Given a set \( A \), a \term{binary operation} is simply a function \( \cdot: A^2 \to A \), usually denoted via \hyperref[rem:first_order_formula_conventions/infix]{infix notation}.

  The following \hyperref[def:first_order_syntax/formula]{formulas}, or rather their \hyperref[def:universal_closure]{universal closures}, are common \hyperref[def:first_order_theory/axiomatized]{axioms}:
  \begin{thmenum}
    \thmitem{def:binary_operation/associative}\mcite[\S 1.18(\( \alpha \))]{Ляпин1960Полугруппы} \term[bg=асоциативност (\cite[11]{ГеновМиховскиМоллов1991Алгебра}), ru=ассоциативность, en=associativity (\cite[329]{RosenEtAl2018DiscreteMathematicsHandbook})]{Associativity}:
    \begin{equation}\label{eq:def:binary_operation/associative}
      (\synx \cdot \syny) \cdot \synz = \synx \cdot (\syny \cdot \synz).
    \end{equation}

    \thmitem{def:binary_operation/commutative}\mcite[\S 1.18(\( \beta \))]{Ляпин1960Полугруппы} \term[bg=комутативност (\cite[11]{ГеновМиховскиМоллов1991Алгебра}), ru=коммутативность, en=commutativity (\cite[329]{RosenEtAl2018DiscreteMathematicsHandbook})]{Commutativity}:
    \begin{equation}\label{eq:def:binary_operation/commutative}
      \synx \cdot \syny \syneq \syny \cdot \synx.
    \end{equation}

    \thmitem{def:binary_operation/idempotent}\mcite[\S 3.1]{Мальцев1970АлгебраическиеСистемы} \term[ru=идемпотентность, en=idempotence (\cite[33]{RosenEtAl2018DiscreteMathematicsHandbook})]{Idempotence}:
    \begin{equation}\label{eq:def:binary_operation/idempotent}
      \synx \cdot \synx \syneq \synx.
    \end{equation}

    \thmitem{def:binary_operation/cancellative}\mcite[\( 1.18(\varepsilon) \)]{Ляпин1960Полугруппы} Left and right \term[ru=сокращение, bg=съкращаване (\cite[77]{ГеновМиховскиМоллов1991Алгебра}), en=cancellation (\cite[324]{RosenEtAl2018DiscreteMathematicsHandbook})]{cancellation}:
    \begin{align}
      \qforall \synz (\synz \cdot \synx \syneq \synz \cdot \syny) \synimplies \synx \syneq \syny
      \label{eq:def:binary_operation/cancellative/left}
      \\
      \qforall \synz (\synx \cdot \synz \syneq \syny \cdot \synz) \synimplies \synx \syneq \syny
      \label{eq:def:binary_operation/cancellative/right}
    \end{align}
  \end{thmenum}
\end{definition}

\begin{example}\label{ex:def:binary_operation}
  We list several examples of \hyperref[def:binary_operation]{binary operations} satisfying different properties.

  \begin{thmenum}
    \thmitem{ex:def:binary_operation/algebraic} \hyperref[eq:def:binary_operation/associative]{Associative} \hyperref[def:binary_operation]{binary operations} on a set are abundant and are part of the definition of essential algebraic structures like \hyperref[def:group]{groups}, \hyperref[def:ring]{rings}, \hyperref[def:vector_space]{vector spaces} and \hyperref[def:lattice]{(semi)lattices}.

    These operations are \term{homogeneous} in the sense that their signature only contains a single set, unlike \hyperref[def:group_action]{group actions} and scalar products in \hyperref[def:vector_space]{vector spaces}.

    \thmitem{ex:def:binary_operation/composition} The quintessential example of a non-\hyperref[def:binary_operation/commutative]{commutative} operation is \hyperref[def:set_valued_map/composition]{composition} in any set of functions or, more generally, \hyperref[def:category/composition]{morphism composition} in any \hyperref[def:category]{category}.

    Composition is \hyperref[def:binary_operation/associative]{associative}. \hyperref[def:binary_operation/cancellative]{Cancellation} with respect to composition is discussed in \fullref{def:morphism_invertibility} and, for function composition, in \fullref{thm:function_invertibility_categorical}.

    \thmitem{ex:def:binary_operation/midpoint} The midpoint operation
    \begin{equation*}
      (x, y) \mapsto \dfrac {x + y} 2
    \end{equation*}
    on \( \BbbR \) is commutative and cancellative, but not associative.
  \end{thmenum}
\end{example}

\begin{remark}\label{rem:binary_operation_syntax_trees}
  \hyperref[def:binary_operation]{Binary operations} are easily extended to higher arities. Given a binary operation \( +: A \times A \to A \), we can extend it via \fullref{thm:omega_recursion} to arbitrary \( n \)-tuples \( x_1, \ldots, x_n \) via parentheses:
  \begin{equation}\label{eq:rem:binary_operation_syntax_trees/right}
    (x_1 + (x_2 + \cdots + (x_{n-1} + x_n) \cdots )).
  \end{equation}

  This expression corresponds to the \hyperref[con:abstract_syntax_tree]{abstract syntax tree}
  \begin{equation}\label{eq:rem:binary_operation_syntax_trees/tree/basic}
    \begin{aligned}
      \includegraphics[page=1]{output/rem__binary_operation_syntax_trees}
    \end{aligned}
  \end{equation}

  Several things can be noted here.
  \begin{thmenum}
    \thmitem{rem:binary_operation_syntax_trees/associativity} When exchanging the order of the parentheses in the expression \eqref{eq:rem:binary_operation_syntax_trees/right}, only the root is changed in the syntax tree \eqref{eq:rem:binary_operation_syntax_trees/tree/basic}.

    Thus, for an \hyperref[def:binary_operation/associative]{associative} binary operation, abstract syntax trees can instead be represented as finite ordered rooted trees like
    \begin{equation}\label{eq:rem:binary_operation_syntax_trees/tree/associative}
      \begin{aligned}
        \includegraphics[page=2]{output/rem__binary_operation_syntax_trees}
      \end{aligned}
    \end{equation}

    Of course, \( n \)-ary trees can still be used for non-associative binary operations, as long as we have selected a strategy for \hyperref[con:evaluation]{evaluation}. If we evaluate \eqref{eq:rem:binary_operation_syntax_trees/tree/associative} as we would evaluate \eqref{eq:rem:binary_operation_syntax_trees/right}, we say that the operation is \term{right associative}. Dually, if we evaluate \eqref{eq:rem:binary_operation_syntax_trees/tree/associative} as we would evaluate
    \begin{equation}\label{eq:rem:binary_operation_syntax_trees/left}
      (( \cdots (x_1 + x_2) + \cdots + x_{n-1}) + x_n),
    \end{equation}
    we say that the operation is \term{left associative}.

    Note that, unlike associativity, left and right associativity are not properties of the operation, but rather conventions on how to evaluate expressions without explicit parentheses. For example, in a \hyperref[def:heyting_algebra]{Heyting algebra}, the \hyperref[def:heyting_algebra]{relative pseudocomplement} \( \synimplies \) is not associative, but we can, following the convention used by \incite[12]{Hindley1997BasicSTT} for types, introduce a convention for the relative pseudocomplement to be right associative so that
    \begin{equation*}
      x \synimplies y \synimplies z
    \end{equation*}
    is evaluated as
    \begin{equation*}
      (x \synimplies (y \synimplies z)).
    \end{equation*}

    \thmitem{rem:binary_operation_syntax_trees/commutativity} If, additionally, the operation is \hyperref[def:binary_operation/commutative]{commutative}, we can regard the syntax tree as if the tree was a plain unordered (but still node-labeled) tree.

    Commutativity allows us to swap summands inside parentheses, and associativity is needed to \enquote{remove} the parentheses. Thus, it makes sense to always place parentheses in operations that are commutative but not associative.

    An an example, consider the real number midpoint operation
    \begin{equation*}
      x \oplus y \coloneqq \frac {x + y} 2
    \end{equation*}
    from \fullref{ex:def:binary_operation/midpoint}. It is commutative and not associative, and in the expression \( x \oplus y \oplus z \), we can swap \( x \) with \( y \) but not with \( z \). This can be very unintuitive. We aim to always write parentheses for non-associative operations.

    \thmitem{rem:binary_operation_syntax_trees/infinite} Suppose that \( + \) is associative and commutative. Suppose also that we are given an \hyperref[def:indexed_family]{indexed family} \( \seq{ x_k }_{k \in \mscrK} \) of elements of \( M \). We can construct an infinite tree with root \( + \) and children \( \seq{ x_k }_{k \in \mscrK} \).

    This is not strictly a syntax tree. Syntax trees are necessarily finite, and our family \( \mscrK \) may even be uncountable. Nevertheless, we can sometimes evaluate this tree to obtain a member of the monoid.
    \begin{thmenum}
      \thmitem{rem:binary_operation_syntax_trees/infinite/lattice} The operations of a \hyperref[def:lattice]{lattice} arise by specializing \hyperref[def:extremal_points/supremum_and_infimum]{suprema and infima} to binary sets. Conversely, as discussed in \fullref{thm:lattice_from_binary_operations}, the binary lattice operations induce a \hyperref[def:partially_ordered_set]{partial order}, and we can define arbitrary suprema and infima. If the lattice happens to be \hyperref[def:complete_lattice]{complete}, instead of the binary operations, we can use
      \begin{equation*}
        \bigvee_{k \in \mscrK} x_k = \sup\set{ x_k \given k \in \mscrK }.
      \end{equation*}

      \thmitem{rem:binary_operation_syntax_trees/infinite/convergence} If \( M \) is a \hyperref[rem:topological_first_order_structures]{topological monoid} and if \( \mscrK = \set{ 1, 2, 3, \ldots } \), the family is a \hyperref[def:sequence]{sequence}, and we can define the sequence of partial sums
      \begin{equation*}
        \seq*{ \sum_{k=1}^n x_k }_{n=1}^\infty
      \end{equation*}

      This gives rise to \hyperref[def:convergent_series]{series} discussed in \fullref{sec:series} and \fullref{sec:real_series}. A limit may not exist for the net, unfortunately, and if it does, it may not be unique (if the topology is not \hyperref[def:separation_axioms/T2]{Hausdorff}).

      \thmitem{rem:binary_operation_syntax_trees/infinite/direct_sum} Suppose that \( M \) has an \hyperref[def:monoid]{neutral element} \( 0_M \). If only finitely many elements of the family are different from \( 0_M \), we regard the ordinary summation operation as well-defined on the whole family and write
      \begin{equation*}
        s \coloneqq \sum_{k \in \mscrK} x_k.
      \end{equation*}

      Technically, this involves selecting a \hyperref[def:well_ordered_set]{well-ordering} \( x_{1_n}, \ldots, x_{k_n} \) on the set
      \begin{equation*}
        \set{ x_k \given k \in \mscrK \T{and} x_k \neq 0 }
      \end{equation*}
      and assigning to \( s \) the result of the iterated binary operation
      \begin{equation*}
        (x_{1_n} + (x_{2_n} + \cdots + (x_{k_{n-1}} + x_{k_n}) \cdots)).
      \end{equation*}

      Commutativity ensures that the sum \( s \) does not depend on the order of summands (and hence on the well-order we have chosen). Adding any member of the family would not change the sum, which justifies this shorthand definition. Furthermore, since we only sum finitely many summands, we can construct a well-ordering using \fullref{thm:omega_recursion} without relying on the \hyperref[def:zfc/choice]{axiom of choice}.

      This is fundamental for the definition of \hyperref[def:semimodule_direct_sum]{direct sums}, which in turn are used to define \hyperref[def:linear_combination]{linear combinations} and \hyperref[def:polynomial_algebra]{polynomials}.
    \end{thmenum}
  \end{thmenum}
\end{remark}

\begin{remark}\label{rem:bourbaki}
  Nicholas Bourbaki is a pseudonym for a changing group of French mathematicians who in the 1930s have united to produce a systematic exposition of many areas of mathematics. Armand Borel, one of the group's third generation members, writes the following in \cite[1]{Borel1998Bourbaki}:
  \begin{displayquote}
    In the early thirties the situation of mathematics in France at the university and research levels, the only ones of concern here, was highly unsatisfactory. World War I had essentially wiped out one generation. The upcoming young mathematicians had to rely for guidance on the previous one, including the main and illustrious protagonists of the so-called 1900 school, with strong emphasis on analysis. Little information was available about current developments abroad, in particular about the flourishing German school (Göttingen, Hamburg, Berlin), as some young French mathematicians (J. Herbrand, C. Chevalley, A. Weil, J. Leray) were discovering during visits to those centers.

    In 1934 A. Weil and H. Cartan were Ma\^itres de Conf\'erences (the equivalent of assistant professors) at the University of Strasbourg. One main duty was, of course, the teaching of differential and integral calculus. The standard text was the Trait\'e d'Analyse of E. Goursat, which they found wanting in many ways. Cartan was frequently bugging Weil with questions on how to present this material, so that at some point, to get it over with once and for all, Weil suggested they write themselves a new Trait\'e d'Analyse. This suggestion was spread around, and soon a group of about ten mathematicians began to meet regularly to plan this treatise. It was soon decided that the work would be collective, without any acknowledgment of individual contributions. In summer 1935 the pen name Nicolas Bourbaki was chosen.
  \end{displayquote}
  and later
  \begin{displayquote}
    A first question to settle was how to handle references to background material. Most existing books were found unsatisfactory. Even B. v.d. Waerden's \textit{Moderne Algebra}, which had made a deep impression, did not seem well suited to their needs (besides being in German). Moreover, they wanted to adopt a more precise, rigorous style of exposition than had been traditionally used in France, so they decided to start from scratch and, after many discussions, divided this basic material into six \enquote{books}, each consisting possibly of several volumes, namely:
    \begin{enumerate}[label=\Roman*]
      \item Set Theory
      \item Algebra
      \item Topology
      \item Functions of One Real Variable
      \item Topological Vector Spaces
      \item Integration
    \end{enumerate}

    These books were to be linearly ordered: references at a given spot could only be to the previous text in the same book or to an earlier book (in the given ordering). The title \enquote{\'El\'ements de Math\'ematique} was chosen in 1938. It is worth noting that they chose \enquote{Math\'ematique} rather than the much more usual \enquote{Math\'ematiques}. The absence of the \enquote{s} was of course quite intentional, one way for Bourbaki to signal its belief in the unity of mathematics.

    The first volumes to appear were the Fascicle of Results on Set Theory (1939) and then, in the forties, Topology and three volumes of Algebra.
  \end{displayquote}

  The members of the group are recruited among selected guests on their seminars and by tradition retire at 50. A lot of reorganization to the aforementioned planned structure was needed to accommodate both the evolving group and the evolving mathematics. \bycite{Aluffi2009Algebra}, which attempts to introduce algebra and category theory simultaneously, is a word play on their naming scheme. The latest book is \cite{Bourbaki2023ThéoriesSpectrales3à5}, published in 2023.

  The level of influence of their work varies widely:
  \begin{itemize}
    \item The ubiquitous \hyperref[def:empty_set]{empty set} symbol \( \varnothing \) is attributed to the 1939 edition of \cite[E II.1]{Bourbaki1970ThéorieDesEnsembles} by \cite{Miller2019EarliestUsesOfLogicSymbols}. Another early notation is \( 0 \), used by \incite[12]{Hausdorff1935Mengenlehre} and as late as \bycite[10]{Натансон1974ВещественныйАнализ}.

    \item The ubiquitous \hyperref[def:naive_set_theory]{set membership} symbol \( {\in} \) is also attributed to Bourbaki's 1939 set theory book. Another early notation is \( \varepsilon \), used again by \incite[11]{Hausdorff1935Mengenlehre}, as early as \bycite[X]{Peano1889PA} and as late as \bycite[1]{Kelley1975GeneralTopology}.

    \item On the other hand, their concept of \hyperref[def:magma]{magmas} is not used often, as discussed in \fullref{rem:magma_terminology}.

    \item Their convention for capitalizing \hyperref[con:indeterminate]{indeterminates} is scarcely used, as discussed in \fullref{rem:conventions_for_indeterminates}.
  \end{itemize}

  Borel himself comments on his view of the Bourbaki style of writing before joining the group
  \begin{displayquote}
    I was rather put off by the very dry style, without any concession to the reader, the apparent striving for the utmost generality, the inflexible system of internal references and the total absence of outside ones.
  \end{displayquote}

  \incite[121]{Kuyk1977ComplementarityInMathematics} comments the work of Bourbaki as follows:
  \begin{displayquote}
    A main driving force of this group is the problem of the unity of mathematics. At the beginning of the 20\textsuperscript{th} century, mathematics was a series of disciplines, founded on particular notions, delimited with precision and interconnected in many ways, thereby permitting one area to fructify the other. Continued investigation has shown the existence of a central core, which bridges the many diverse parts. The essence of this unity came to be seen in the progressive systematization of relations existing between the diverse mathematical theories and is today (for the Bourbaki group at least) known under the name of \enquote*{axiomatic method}.

    Now the phrase \enquote*{axiomatic method} is usually an application of formal logic, or deductive reasoning. But this the Bourbaki group considers to be nothing other than an external form which the mathematician gives to his thoughts. It is there for communication and it is useful to have its vocabulary and syntax clearly analysed. But it is still only the surface of mathematics and the least interesting aspect of it at that.

    According to the Bourbaki mathematicians, axiomatics catches what formal logic misses, namely, the profound \textit{intelligibility} of mathematics. Where a superficial observer will see two entirely distinct theories, the mathematical genius may suddenly see a distinct analogy between them in their structure. And it is the task of the axiomatic method to search for such common structures in externally differing theories.
  \end{displayquote}

  Adrian Mathias criticizes Bourbaki's style for diverging from the developments in formal logic, and sticking to obscure formalisms. In \cite[48]{Mathias2013BourbakiCriticism}, he summarizes it as follows:
  \begin{displayquote}
    Hilbert in 1922, in joint work with Bernays, proposed an alternative treatment of predicate logic which, despite its many unsatisfactory aspects, was adopted by Bourbaki for their series of books and by Godement for his treaties on algebra, though leading him to express distrust in logic.

    It is this distrust, intensified to a phobia by the vehemence of Dieudonn\'e's writings, and fostered by, for example, the errors and obscurities of a well-known undergraduate textbook, that has, I suggest, led to the exclusion of logic from the CAPES examination. Centralist rigidity has preserved the underlying confusion and consequently flawed teaching; the recovery will start when mathematicians adopt a post-G\"odelian treatment of logic.
  \end{displayquote}
\end{remark}

\begin{remark}\label{rem:magma_terminology}
  There are two major candidates for a term for a set equipped with a \hyperref[def:binary_operation]{binary operation}:
  \begin{itemize}
    \item \enquote{Magma} is used for a set with a binary operation in \hyperref[rem:bourbaki]{Bourbaki}'s \cite[def. A I.1]{Bourbaki1970Algèbre1à3}, and earlier usage can be found the 1954 lectures \cite[18]{Serre1992LieGroups} of Jean-Pierre Serre, one of the group's members. Out of our references, the only other authors using these definitions are \incite[8]{Holtkamp2011RootedTrees}, \incite[177]{GiuntiMazzola2012DynamicalSystemsOnMonoids} and \incite[33]{UnivalentProject2024OctoberHoTT} (for types).

    \incite[1]{BosmaCannonMatthews1994MagmaLanguage}, when describing the design of the computer algebra system Magma, explain that the name is based on Bourbaki's definition. Some authors use \enquote{magma} to refer to this system rather than the algebraic structure, for example \incite{Rotman2015AdvancedModernAlgebraPart1}, \incite{ConwaySloane1998SpherePackings} and \incite{CoxLittleOShea2015IdealsVarietiesAlgorithms}.

    \item \enquote{Groupoid} is used for a set with a binary operation by
    \incite[145]{Knauer2019AlgebraicGraphTheory},
    \incite[example 21.3]{Golan1999Semirings},
    \incite[257]{HillePhillips1996FunctionalAnalysis},
    \incite[89]{Мальцев1970АлгебраическиеСистемы} (as \enquote{группоид}),
    \incite[34]{Курош1973ОбщаяАлгебра} (as \enquote{группоид}) and
    \incite[121]{БелоусовТкачёв2004ДискретнаяМатематика} (as \enquote{группоид}).

    Bourbaki use \enquote{groupo\"ide} in \cite[def. A I.127]{Bourbaki1970Algèbre1à3} for \hyperref[def:binary_operation/cancellative]{cancellative} \hyperref[def:semigroup]{semigroups} with generalized \hyperref[def:monoid_inverse]{inverses}.

    We avoid the term because it coincides with groupoids in category theory, which we define in \fullref{def:groupoid}. Other authors using the term in this context include
    \incite[20]{MacLane1998CategoryTheory},
    \incite[def. 1.1.11]{Riehl2016CategoryTheory},
    \incite[12]{Jacobson1989BasicAlgebraII},
    \incite[example 4.6]{Aluffi2009Algebra} and
    \incite[def. 1.1.29]{Perrone2024StartingCategoryTheory}.

    \item There are also other terms for a set with a binary operation, for example \enquote{мультипликативное множество} (\enquote{multiplicative set}), used by \incite[20]{Ляпин1960Полугруппы}.
  \end{itemize}

  We are not interested in the structural theory at such generality, for which reason we will refrain from defining magmas and instead define semigroups in \fullref{def:semigroup} as an \hyperref[def:binary_operation/associative]{associative} magma. This latter definition is almost unambiguous --- it is used by
  \incite[144]{MacLane1998CategoryTheory},
  \incite[29]{Jacobson1985BasicAlgebraI},
  \incite[133]{Rotman2015AdvancedModernAlgebraPart1},
  \incite[126]{Aluffi2009Algebra},
  \incite[145]{Knauer2019AlgebraicGraphTheory},
  \incite[def. 8.2.1]{HillePhillips1996FunctionalAnalysis},
  \incite[56]{Savage2008ModelsOfComputation},
  \incite[1]{Golan1999Semirings},
  \incite[375]{Mendelson2015Logic},
  \incite[2]{Pin1998TropicalSemirings},
  \incite[28]{Ляпин1960Полугруппы} (as \enquote{полугруппа}),
  \incite[90]{Мальцев1970АлгебраическиеСистемы} (as \enquote{полугруппа}),
  \incite[34]{Курош1973ОбщаяАлгебра} (as \enquote{полугруппа}) and
  \incite[135]{Кострикин2000АлгебраЧасть1} (as \enquote{полугруппа}),
  \incite[121]{БелоусовТкачёв2004ДискретнаяМатематика} (as \enquote{полугруппа}) and
  \incite[\S 2.2.1]{Новиков2013ДискретнаяМатематика} (as \enquote{полугруппа}).

  Bourbaki define a \enquote{left semi-group} in \cite[exerc. I.2.11]{Bourbaki1998Algebra1to3} as a \hyperref[def:binary_operation/cancellative]{left-cancellative} magma.
\end{remark}

\begin{definition}\label{def:semigroup}\mcite[28]{Ляпин1960Полугруппы}
  A \term[ru=полугруппа (\cite[28]{Ляпин1960Полугруппы}), en=semigroup (\cite[144]{MacLane1998CategoryTheory})]{semigroup} is a nonempty set \( G \) equipped with a \hyperref[def:operation_arity_terminology]{binary} \hyperref[def:operation_on_set]{operation} \( \cdot: G \times G \to G \), called the \term{semigroup operation}. We often denote this operation by juxtaposition as \( xy \) instead of \( x \cdot y \).

  We will call the operation \term{multiplication} or, in the case of \hyperref[def:endomorphism_monoid]{endomorphism monoids} --- \term{composition}. See also the notes in \fullref{con:additive_semigroup} regarding additive semigroups and in \fullref{def:monoid_delooping} regarding the order of operands.

  \begin{thmenum}[series=def:semigroup]
    \thmitem{def:semigroup/theory}\mimprovised In analogy to the \hyperref[def:pointed_set/theory]{theory of pointed sets}, we can define the theory of semigroups as an empty theory over a language with a single \hyperref[rem:first_order_formula_conventions/infix]{infix} binary functional symbol.

    \thmitem{def:semigroup/homomorphism}\mcite[348]{Ляпин1960Полугруппы} A \hyperref[def:first_order_homomorphism]{first-order homomorphism} between the semigroups \( (G, \cdot_{G}) \) and \( (H, \cdot_{H}) \) is, explicitly, a function \( \varphi: G \to H \) such that
    \begin{equation}\label{eq:def:semigroup/homomorphism}
      \varphi(x \cdot_{G} y) = \varphi(x) \cdot_{H} \varphi(y)
    \end{equation}
    for all \( x, y \in G \).

    \thmitem{def:semigroup/submodel}\mcite[133]{Ляпин1960Полугруппы} The set \( A \subseteq G \) is a \hyperref[def:first_order_substructure]{first-order submodel} of \( G \) if it is closed under the semigroup operation, that is, if \( x, y \in A \) implies \( xy \in A \).

    We call \( A \) a \term[ru=подполугруппа]{sub-semigroup} of \( G \).

    As a consequence of \fullref{thm:positive_formulas_preserved_under_homomorphism}, the image of a semigroup homomorphism is a sub-semigroup of its codomain.

    \thmitem{def:semigroup/category}\mimprovised We introduce no special notation for the \hyperref[def:category_of_small_first_order_models]{category of \( \mscrU \)-small models} for the theory of semigroups.

    \thmitem{def:semigroup/exponentiation}\mcite[86]{Тыртышников2017ОсновыАлгебры} We define an additional \term{exponentiation} operation for positive integers \( n \) \hyperref[thm:omega_recursion]{recursively} as
    \begin{equation}\label{eq:def:semigroup/exponentiation}
      x^n \coloneqq \begin{cases}
        x,               &n = 1 \\
        x^{n-1} \cdot x, &n > 1
      \end{cases}
    \end{equation}

    \thmitem{def:semigroup/opposite}\mimprovised The \term{opposite semigroup} of \( (G, \cdot) \) is the semigroup \( (G, \star) \) with multiplication reversed:
    \begin{equation*}
      x \star y \coloneqq y \cdot x.
    \end{equation*}

    We denote the opposite semigroup by \( G^\oppos \). This is justified in \fullref{def:monoid/opposite}.
  \end{thmenum}
\end{definition}

\begin{definition}\label{def:power_semigroup}\mcite[1]{McCarthyHayes1973PowerSemigroup}
  Given a \hyperref[def:semigroup]{semigroup} \( (G, \cdot) \), its \hyperref[def:basic_set_operations/power_set]{power set} \( \pow(G) \) is also a semigroup with the operation
  \begin{equation*}
    A \star B \coloneqq \set{ a \cdot b \given a \in A \T{and} b \in B }.
  \end{equation*}

  We will call this the \term{power semigroup} of \( G \). There is an obvious injection
  \begin{equation*}
    \begin{aligned}
      &\iota: G \to \pow(G), \\
      &\iota(g) \coloneqq \set{ g }.
    \end{aligned}
  \end{equation*}
\end{definition}
\begin{comments}
  \item Operations on sets are used for \hyperref[def:topological_vector_space]{topological vector spaces} by \incite[6]{Rudin1991FunctionalAnalysis}, \incite[4]{Rockafellar1997ConvexAnalysis}, \incite[4]{Clarke2013OptimalControl}, \incite[25]{МагарилИльяевТихомиров2002ВыпуклыйАнализ}.

  \item Note that this concept is distinct from \hyperref[def:semiring_ideal/product]{product ideals}, which use the same notation.

  \item Power semigroups are ordered --- see \fullref{ex:def:ordered_semigroup/power}
\end{comments}

\begin{example}\label{ex:def:power_semigroup}
  We list some examples of \hyperref[def:power_semigroup]{power semigroups}:
  \begin{thmenum}
    \thmitem{ex:def:power_semigroup/cancellative} The cancellative property does not extend to the power semigroup.

    Consider the additive group \hyperref[def:group_of_integers_modulo]{\( \BbbZ_2 \)}. It is a cancellative semigroup as a consequence of \fullref{thm:def:group/cancellative}. Define the sets \( A \coloneqq \set{ 0, 1 } \) and \( B \coloneqq \set{ 0 } \). Then
    \begin{equation*}
      A + A = A = A + B,
    \end{equation*}
    however we cannot cancel \( A \) from the left because \( A \neq B \).
  \end{thmenum}
\end{example}

\paragraph{Semigroup exponentiation}

\begin{definition}\label{def:semigroup_power}\mimprovised
  In the context of \hyperref[def:semigroup/exponentiation]{exponentiation}, if \( y = x^n \), we say that \( y \) is the \term{\( n \)-th power} of \( x \) if \( x^n = y \) and that \( x \) is an \term{\( n \)-th root} of \( y \).

  We will use the following terminology based on \hyperref[def:hypercubic_number]{hypercubic numbers}:
  \begin{center}
    \begin{tabular}{lll}
      \toprule
      \( n \) & \( x \)            & \( y \)       \\
      \midrule
      \( 2 \) & \term{square root} & \term{square} \\
      \( 3 \) & \term{cubic root}  & \term{cube}   \\
      \bottomrule
    \end{tabular}
  \end{center}
\end{definition}
\begin{comments}
  \item The term \enquote{root} is discussed in \fullref{rem:root_terminology}, along with how it relates to \hyperref[def:root_of_polynomial]{polynomial roots}, \hyperref[def:algebraic_equation]{algebraic equations} and \hyperref[def:zero_of_function]{zeros of functions}.

  \item While \( y \) is the unique \( n \)-th power of \( x \), \( x \) is only one of many possible roots of \( y \).

  \item In the case of positive \hyperref[def:real_numbers]{real numbers}, we have a canonical choice of \( n \)-th roots given by \fullref{def:principal_nonnegative_nth_root}, where we use the notation \( \sqrt[n]{ x } \). We also have such a canonical choice for square roots of negative real numbers --- see \fullref{def:principal_real_square_root}.
\end{comments}

\begin{remark}\label{rem:square_and_quadratic}
  The \hyperref[def:semigroup_power]{square root} is a solution to a \hyperref[def:polynomial_degree_terminology]{quadratic} \hyperref[def:algebraic_equation]{equation}, although a \hyperref[def:semigroup_power]{cubic root} is a solution to a \hyperref[def:polynomial_degree_terminology]{cubic} equation.

  According to \incite[8]{ConwayGuy1998BookOfNumbers}, both \enquote{square} and \enquote{quadratic} derive from the Latin \enquote{ex quadrem}. In Russian \enquote{square root} and \enquote{quadratic equation} both use the same adjective, \enquote{квадратный} (\enquote{quadratic}), however English term are for some reason different.
\end{remark}

\begin{proposition}\label{thm:semigroup_exponentiation_properties}
  \hyperref[def:semigroup/exponentiation]{Exponentiation} in a \hyperref[def:semigroup]{semigroup} \( G \) has the following basic properties:

  \begin{thmenum}
    \thmitem{thm:semigroup_exponentiation_properties/commutativity} We have the following \hyperref[def:binary_operation/commutative]{commutativity}-like property: for any \( x \) in \( G \) and any positive integer \( n \), we have
    \begin{equation}\label{eq:thm:semigroup_exponentiation_properties/commutativity}
      x^n = x x^{n-1} = x^{n-1} x.
    \end{equation}

    \thmitem{thm:semigroup_exponentiation_properties/multiplication} If \( G \) is \hyperref[def:semiring/commutative]{commutative}, then, for any two members \( x \) and \( y \) of \( G \) and any positive integer \( n \),
    \begin{equation}\label{eq:thm:semigroup_exponentiation_properties/multiplication}
      (xy)^n = x^n \cdot y^n
    \end{equation}

    \thmitem{thm:semigroup_exponentiation_properties/distributive} Exponentiation distributes over multiplication: for any member \( x \) of \( G \) and any two positive integers \( n \) and \( m \),
    \begin{equation}\label{eq:thm:semigroup_exponentiation_properties/distributive}
      x^{n + m} = x^n x^m.
    \end{equation}

    \thmitem{thm:semigroup_exponentiation_properties/repeated} For any member \( x \) of \( M \) and any two positive integers \( n \) and \( m \),
    \begin{equation}\label{eq:thm:semigroup_exponentiation_properties/repeated}
      (x^n)^m = x^{nm}.
    \end{equation}
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:semigroup_exponentiation_properties/commutativity} We use induction on \( n \). The cases \( n = 1 \) and \( n = 2 \) are obvious. For \( n > 2 \), we have
  \begin{equation*}
    x^n
    \reloset {\eqref{eq:def:semigroup/exponentiation}} =
    x x^{n-1}
    \reloset {\T{ind.}} =
    x x^{n-2} x
    \reloset {\eqref{eq:def:semigroup/exponentiation}} =
    x^{n-1} x.
  \end{equation*}

  \SubProofOf{thm:semigroup_exponentiation_properties/multiplication} We use induction on \( n \). The case \( n = 1 \) is obvious. For \( n > 1 \), we have
  \begin{equation*}
    (xy)^n = x^n \cdot y^n
    \reloset {\eqref{eq:def:semigroup/exponentiation}} =
    (xy) \cdot (xy)^{n-1}
    \reloset {\T{ind.}} =
    (xy) \cdot x^{n-1} \cdot y^{n-1}
    \reloset {\eqref{eq:def:binary_operation/commutative}} =
    x \cdot x^{n-1} \cdot y \cdot y^{n-1}
    =
    x^n \cdot y^n.
  \end{equation*}

  \SubProofOf{thm:semigroup_exponentiation_properties/distributive} We use induction on \( n \). The case \( n = 1 \) follows directly from \eqref{eq:def:semigroup/exponentiation}. The case \( n > 1 \) follows from
  \begin{equation*}
    x^{n + m}
    \reloset {\eqref{eq:def:semigroup/exponentiation}} =
    x x^{n + (m - 1)}
    \reloset {\T{ind.}} =
    x x^{n-1} x^m
    \reloset {\eqref{eq:def:semigroup/exponentiation}} =
    x^n x^m.
  \end{equation*}

  \SubProofOf{thm:semigroup_exponentiation_properties/repeated} We use induction on \( n \). The case \( n = 1 \) is obvious and the rest follows from
  \begin{equation*}
    (x^n)^m
    \reloset {\eqref{eq:def:semigroup/exponentiation}} =
    x^n (x^n)^{m-1}
    \reloset {\T{ind.}} =
    x^n x^{n (m - 1)}
    \reloset {\eqref{eq:thm:semigroup_exponentiation_properties/multiplication}} =
    =
    x^{nm}.
  \end{equation*}
\end{proof}

\paragraph{Ordered semirings}

\begin{definition}\label{def:ordered_semigroup}\mcite[535]{Ляпин1960Полугруппы}
  A (partially) \term[ru=частично упорядоченная полугруппа (\cite[535]{Ляпин1960Полугруппы})]{ordered semigroup} is a \hyperref[def:semigroup]{semigroup} \( M \) equipped with a \hyperref[def:partially_ordered_set]{partial order} \( \leq \) such that \( x \leq y \) implies \( xz \leq yz \) and \( zx \leq zy \) for every \( z \) in \( M \).
\end{definition}
\begin{comments}
  \item The category of small ordered semigroups is a \hyperref[def:concrete_category]{concrete category} over both the \hyperref[def:semigroup/category]{category of semigroups} and the \hyperref[def:partially_ordered_set]{category of partially ordered sets}.
\end{comments}

\begin{proposition}\label{thm:def:ordered_semigroup}
  \hyperref[def:ordered_semigroup]{Ordered semigroups} have the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:ordered_semigroup/cancellative} If the semigroup is \hyperref[def:binary_operation/cancellative]{cancellative}, then \( x < y \) implies \( xz < yz \) and \( zx < zy \).
  \end{thmenum}
\end{proposition}
\begin{comments}
  \item \hyperref[def:group]{Groups} behave better with respect to ordering --- see \fullref{thm:ordered_group}.
\end{comments}
\begin{proof}
  \SubProofOf{thm:def:ordered_semigroup/cancellative} Trivial.
\end{proof}

\begin{example}\label{ex:def:ordered_semigroup}
  We list several examples of \hyperref[def:ordered_semigroup]{ordered semigroups}:

  \begin{thmenum}
    \thmitem{ex:def:ordered_semigroup/natural_numbers} The \hyperref[def:natural_numbers]{natural numbers} with addition form an ordered semigroup as a consequence of \fullref{thm:natural_numbers_are_well_ordered}; and so do \( \BbbZ \), \( \BbbQ \), \( \BbbR \) and \( \BbbC \).

    \thmitem{ex:def:ordered_semigroup/ordinal} More generally, every \hyperref[def:successor_and_limit_ordinal]{limit ordinal} as the set of all smaller ordinals is an ordered semigroup under \hyperref[def:ordinal_arithmetic/addition]{ordinal addition}.

    Unlike addition in natural numbers, however, ordinal addition is not commutative as shown in \fullref{ex:ordinal_addition}.

    \thmitem{ex:def:ordered_semigroup/semilattice} Every \hyperref[def:semilattice]{join-semilattice} \( (X, \synvee) \) is an ordered semigroup with the lattice order. Indeed, if \( x \leq y \), then
    \begin{itemize}
      \item If \( z \leq x \), then
      \begin{equation*}
        x = x \synvee z \leq y \synvee z = y.
      \end{equation*}

      \item If \( x \leq z \leq y \), then
      \begin{equation*}
        z = x \synvee z \leq y \synvee z = y.
      \end{equation*}

      \item If \( z \geq y \), then
      \begin{equation*}
        z = x \synvee z \leq y \synvee z = z.
      \end{equation*}
    \end{itemize}

    Every \hyperref[def:semilattice]{meet-semilattice} is also an ordered semigroup.

    \thmitem{ex:def:ordered_semigroup/power} Any \hyperref[def:power_semigroup]{power semigroup} is a Boolean algebra as discussed in \fullref{thm:boolean_algebra_of_subsets}, and hence also an ordered semigroup as a consequence of \fullref{ex:def:ordered_semigroup/semilattice}.
  \end{thmenum}
\end{example}

\paragraph{Monoids}

\begin{definition}\label{def:monoid}\mcite[def. 1.1]{Jacobson1985BasicAlgebraI}
  A \term[ru=моноид (\cite[94]{Мальцев1970АлгебраическиеСистемы})]{monoid} is a \hyperref[def:semigroup]{semigroup} with a distinguished element \( e \) such that \( ex = x = xe \) for every \( x \). Such an element is obviously unique, and we call it the \term{neutral element} of the monoid. This makes monoids \hyperref[def:pointed_set]{pointed sets}.

  \begin{thmenum}
    \thmitem{def:monoid/theory}\mimprovised The theory of monoids consists of \hyperref[eq:def:binary_operation/associative]{associativity} and the axiom
    \begin{equation}\label{eq:def:monoid/theory/neutral}
      \qforall \synx (e \cdot \synx \syneq \synx \synwedge \synx \cdot e \syneq \synx)
    \end{equation}
    over the combined language of \hyperref[def:pointed_set/theory]{pointed sets} and \hyperref[def:semigroup/theory]{semigroups}.

    \thmitem{def:monoid/homomorphism}\mcite[def. 1.6]{Jacobson1985BasicAlgebraI} A \hyperref[def:first_order_homomorphism]{first-order homomorphism} between monoids is a function that is both a \hyperref[def:pointed_set/homomorphism]{pointed set homomorphism} and a \hyperref[def:semigroup/homomorphism]{semigroup homomorphism}, that is, it satisfies both \eqref{eq:def:pointed_set/homomorphism} and \eqref{eq:def:semigroup/homomorphism}.

    \thmitem{def:monoid/submodel}\mcite[29]{Jacobson1985BasicAlgebraI} The set \( A \subseteq M \) is a \hyperref[def:first_order_submodel]{first-order submodel} of the monoid \( M \) if it contains \( e \). This is equivalent to \( A \) being a pointed subset.

    We say that \( A \) is a \term{submonoid}.

    As a consequence of \fullref{thm:positive_formulas_preserved_under_homomorphism}, the image of a monoid homomorphism is a submonoid of its codomain.

    \thmitem{def:monoid/category}\mcite[12]{MacLane1998CategoryTheory} The \hyperref[def:category_of_small_first_order_models]{category of \( \mscrU \)-small models} \( \ucat{Mon} \) of monoids is \hyperref[def:concrete_category]{concrete} with respect to both the \hyperref[def:pointed_set/category]{category of \( \mscrU \)-small pointed sets} and \hyperref[def:semigroup/category]{category of \( \mscrU \)-small semigroups}.

    As such, it has a \hyperref[def:universal_objects/zero]{zero object} --- any one-element monoid --- and it satisfies \fullref{thm:zero_morphisms_pointed}.

    We will discuss the free monoid functor in \fullref{thm:free_monoid_universal_property}. Then from \fullref{thm:first_order_categorical_invertibility} it will follow that monoid monomorphisms are injective functions.

    For epimorphisms a similar statement does not hold, unfortunately. The embedding \( \iota: \BbbN \to \BbbZ \) is an epimorphism by \fullref{thm:grothendieck_monoid_completion_universal_property}, but it is clearly not surjective.

    \thmitem{def:monoid/trivial}\mimprovised Any single-element monoid, i.e. every zero object in \( \ucat{Mon} \), is as trivial object in the sense of \fullref{def:trivial_object}. We will call it \enquote{the} trivial monoid.

    \thmitem{def:monoid/exponentiation}\mcite[86]{Тыртышников2017ОсновыАлгебры} We extend \hyperref[def:semigroup/exponentiation]{semigroup exponentiation} to all nonnegative integers by additionally defining
    \begin{equation*}
      x^0 \coloneqq e.
    \end{equation*}

    \thmitem{def:monoid/commutative}\mcite[41]{Jacobson1985BasicAlgebraI} We usually write \hyperref[def:binary_operation/commutative]{commutative} monoids additively as explained in \fullref{con:additive_semigroup}. We denote the subcategory of commutative monoids by \( \ucat{CMon} \).

    \thmitem{def:monoid/opposite}\mimprovised The \hyperref[def:monoid_delooping]{delooping} of the \hyperref[def:semigroup/opposite]{opposite semigroup} for a monoid \( M \) is the \hyperref[def:opposite_category]{opposite category} of the delooping of \( M \). This justifies the notation \( M^\oppos \)
  \end{thmenum}
\end{definition}
\begin{comments}
  \item The requirement of associativity is conventional but not strictly necessary. Non-associative monoids will not be useful to us, however.
\end{comments}

\begin{example}\label{ex:def:monoid}
  We list several important examples \hyperref[def:monoid]{monoids}.

  \begin{thmenum}
    \thmitem{ex:def:monoid/natural_numbers} The \hyperref[def:natural_numbers]{nonnegative natural numbers} with addition form a quintessential example of a monoid. We prove in \fullref{thm:natural_number_addition_properties} that they are a monoid.

    \thmitem{ex:def:monoid/weak_limit_cardinal} More generally, for every \hyperref[def:successor_and_limit_cardinal/weak_limit]{weak limit cardinal}, the set of smaller cardinals is a commutative monoid under \hyperref[def:cardinal_arithmetic/addition]{cardinal addition} as a consequence of \fullref{thm:cardinal_addition_algebraic_properties}.

    \thmitem{ex:def:monoid/limit_ordinal} For a \hyperref[def:successor_and_limit_ordinal]{limit ordinal}, however, the set of smaller ordinals is \hi{non-commutative} under \hyperref[def:ordinal_arithmetic/addition]{ordinal addition} as a consequence of \fullref{thm:ordinal_addition_algebraic_properties}.

    \thmitem{ex:def:monoid/kleene_star} Another important example of a monoid is the \hyperref[def:formal_language/kleene_star]{Kleene star} \( \mscrA \) over some \hyperref[def:formal_language]{alphabet} \( \mscrA \).

    The importance for monoid theory comes from the free monoid universal property described in \fullref{thm:free_monoid_universal_property}.

    \thmitem{ex:def:monoid/semilattice} If a \hyperref[def:semilattice]{join-semilattice} is bounded from below, it is a monoid as a consequence of \eqref{eq:def:bounded_lattice/theory/bot}. A similar statement holds for \hyperref[def:lattice/meet]{meet-semilattice}.

    \thmitem{ex:def:monoid/power} The \hyperref[def:power_semigroup]{power semigroup} \( \pow(M) \) of a monoid \( M \) is also a monoid --- \( \iota(1_M) = \set{ 1_M } \) is a neutral element.
  \end{thmenum}
\end{example}

\begin{example}\label{ex:monoid_cancellation_not_preserved_by_homomorphism}\mcite{MathSE:semigroup_cancellation_not_preserved}
  \hyperref[def:monoid/homomorphism]{Monoid homomorphisms} may not preserve the \hyperref[def:binary_operation/cancellative]{cancellation property}. For example, the \hyperref[def:natural_numbers]{natural numbers} \( \BbbN \) are a cancellative monoid under addition, as shown in \fullref{thm:natural_number_addition_properties}, but the homomorphism
  \begin{equation*}
    \begin{aligned}
      &h: (\BbbN, +) \to (\BbbF_2, \max) \\
      &h(n) \coloneqq \begin{cases}
        0, &n = 0 \\
        1, &n > 0
      \end{cases}
    \end{aligned}
  \end{equation*}
  does not preserve the cancellation property.

  Indeed, \( \max\set{ 0, 1 } = \max\set{ 1, 1 } \), but \( 0 \neq 1 \).
\end{example}

\begin{definition}\label{def:monoid_idempotent}\cite[1]{Golan1999Semirings}
  We say that an element \( x \) of a \hyperref[def:monoid]{monoid} (or, more generally, a \hyperref[def:semigroup]{semigroup}) is \term[ru=идемпотент (\cite[72]{Ляпин1960Полугруппы}), en=idempotent]{idempotent} if \( x^2 = x \). Since the neutral element is always idempotent, we call idempotent elements distinct from it \term{nontrivial}.
\end{definition}
\begin{comments}
  \item Thus, the monoid operation is itself idempotent in the sense of \fullref{def:binary_operation/idempotent} if and only if every element is idempotent.
\end{comments}
