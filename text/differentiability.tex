\subsection{Differentiability}\label{subsec:differentiability}

Let \( X \) and \( Y \) be Hausdorff \hyperref[def:topological_vector_space]{topological vector spaces} and let \( U \subseteq X \) be an open set.

\begin{definition}\label{def:differentiability}
  Out goal is to study the following \hyperref[def:set_valued_map/partial]{partial} operator:
  \begin{balign}\label{def:differentiability/partial_operator}
     & \partial: \cat{Set}(U, Y) \times U \times X \to Y                             \\
     & \partial(f, x, h) \coloneqq \lim_{t \downarrow 0} \frac {f(x + th) - f(x)} t.
  \end{balign}

  We implicitly assume that \( t \neq 0 \) because otherwise the definition would not make sense.

  We only use the operator \( \partial \) inside this definition. See \fullref{rem:derivative_notation} for a discussion of derivative notation.

  The quotient under the limit sign is called a \term{difference quotient}.

  For each function \( f: U \to Y \), each point \( x_0 \in X \) and each \enquote{direction} vector \( x_0 \in X \), we want to obtain a value in \( Y \), which we will call the \term{directional derivative} of \( f \) at \( x_0 \) in the direction \( h \). Note that \( h \) is allowed to range over \( X \).

  The existence of a directional derivative is already a harsh condition, however we impose even harsher restrictions

  \begin{thmenum}
    \thmitem{def:differentiability/first_variation}\mcite[sec. 0.2.1]{ИоффеТихомиров1974}If, for fixed \( f \) and \( x_0 \), the directional derivative \( \partial(f, x_0, h) \) exists for all directions \( h \), we define the \term{first variation} of \( f \) at \( x_0 \) as
    \begin{balign*}
       & \delta f(x_0): X \to Y                            \\
       & [\delta f(x_0)](h) \coloneqq \partial(f, x_0, h).
    \end{balign*}

    Within its domain of definition of \( \delta \), which is stricter than that of \( \partial \), the operator \( \delta \) is a \hyperref[def:function_currying]{currying} of \( \partial \). We are interested in how the operator \( \delta f(x) \) varies as \( x \) varies.

    Note that \( \delta f(x_0) \) is an operator from \( X \) to \( Y \) even if \( f \) is a function from \( U \subsetneq X \) to \( Y \).

    Note that, in general, the first variation operator \( \delta f(x_0) \) is not linear - for example, by \fullref{thm:convex_one_sided_derivatives_sublinear}, the first variation of a general convex functions is, at most, sublinear. See \fullref{subsec:nonsmooth_derivatives} for how \enquote{nonlinear derivatives} are handled.

    \thmitem{def:differentiability/gateaux}\mcite[sec. 0.2.1]{ИоффеТихомиров1974}If the first variation \( \delta f(x_0) \) is a continuous linear operator, we say that \( f \) is \term{Gateaux differentiable} or \term{weakly differentiable} at \( x_0 \) with \term{Gateaux derivative} \( f'_G(x_0) \coloneqq \delta f(x_0) \).

    Since \( f'(x_0) \) is linear in \( h \), we can replace \( t \downarrow 0 \) with \( t \to 0 \) in \fullref{def:differentiability/partial_operator} and reformulate this condition of Gateaux differentiability as the existence of a continuous linear operator \( \Lambda: X \to Y \) such that
    \begin{equation}\label{def:differentiability/gateaux/condition}
      \Lambda(h) = \lim_{t \to 0} \frac {f(x_0 + h) - f(x_0)} t.
    \end{equation}

    If \( \Lambda \) exists, we usually denote it by \( D_G f(x_0) \) or \( f_G'(x_0) \) and call it the \term{Gateaux derivative} of \( f \) at \( x_0 \). See \fullref{rem:derivative_notation} for a discussion of the notation.

    \thmitem{def:differentiability/frechet}\mcite[sec. 0.2.1]{ИоффеТихомиров1974}We now restrict our attention to \hyperref[def:banach_space]{Banach spaces}. We say that \( f \) is \term{Frechet differentiable} or \term{strongly differentiable} at \( x_0 \) if there exists a continuous linear operator \( \Lambda: X \to Y \) such that
    \begin{equation}\label{def:differentiability/frechet/condition}
      \lim_{h \to 0} \frac {\norm{f(x_0 + h) - f(x_0) - \Lambda(h)}_Y} {\norm{h}_X} = 0.
    \end{equation}

    If \( \Lambda \) exists, we usually denote it by \( D f(x_0) \) or \( f(x_0) \) and call it the \term{Frechet derivative} of \( f \) at \( x_0 \). See \fullref{rem:derivative_notation} for a discussion of the notation.

    Note that \fullref{def:differentiability/gateaux/condition} uses convergence in the topology of \( Y \) while \fullref{def:differentiability/frechet/condition} uses convergence in \( \BbbR \). We discuss in \fullref{rem:gateaux_vs_frechet} how Frechet differentiability is a special \enquote{uniform} case of Gateaux differentiability.

    \thmitem{def:differentiability/strict}\mcite[33]{DontchevRockafellar2014}If there exists a continuous linear operator \( \Lambda \) such that
    \begin{equation}\label{def:differentiability/strict/condition}
      \lim_{\substack{y \to x_0 \\ z \to x_0}} \frac {\norm{f(y) - f(z) - \Lambda (y - z)}_Y} {\norm{y - z}_X} = 0,
    \end{equation}
    we say that \( f \) is \term{strictly differentiable} at \( x_0 \).
  \end{thmenum}
\end{definition}

\begin{remark}\label{rem:derivative_notation}
  The following are standard notations for derivatives (some of the comments are based on \cite[146]{ФихтенгольцОсновыТом2}):
  \begin{thmenum}
    \thmitem{rem:derivative_notation/lagrange} We already used \term{Lagrange's notation} \( f'(x_0) \) and \( f_G'(x_0) \) in \fullref{def:differentiability}. Brevity is the only benefit of this notation. It becomes convenient when the functions have no name is a burden for directional derivatives.

    The second and third derivatives of \( f \) at \( x_0 \) are denoted as \( f^{''}(x_0) \) and \( f^{'''}(x_0) \) and the \( n \)-th derivative of is denoted as \( f^{(n)} \).

    See \fullref{def:nonsmooth_derivatives} for variations of this notation.

    \thmitem{rem:derivative_notation/newton} Newton's notation is similar to that of Leibniz, but depends on placing dots on top of \( f \), e.g. \( \ddot{f}(x_0) \coloneqq f''(x_0) \). This is used in areas like mathematical physics, however it has not become standard in more pure areas of analysis.

    \thmitem{rem:derivative_notation/euler} We use \term{Euler's notation} \( Df(x_0) \coloneqq f'(x_0) \) for more complicated expressions, e.g. \fullref{thm:derivative_limit_exchange}. The main benefit of this notation is that is allows to express differentiation as an operator, similar to what we defined in \fullref{def:differentiability}. The directional derivative of \( f \) at \( x_0 \) in the direction \( h \) is denoted as \( D_h f(x_0) \). Iterated differentiation corresponds to the standard notation for group composition: the \( n \)-th derivative at \( x_0 \) is denoted as \( D^n f(x_0) \).

    We also use other letters in the superscripts like \( D^G f(x_0) \) for Gateaux derivatives, \( D^\circ f(x_0) \) for Clarke's generalized derivatives, etc.

    \thmitem{rem:derivative_notation/phelps} Some authors like \cite{Phelps1993} use a variation of Euler's notation with \( \partial \) instead of \( D \). For example, directional derivatives are introduced as \( \partial^+ f(x_0)(h) \) in \cite[lemma 1.2]{Phelps1993}. This is consistent with the standard notation for subdifferentials - see \fullref{def:subdifferentials}, however Euler's notation appears to be more widely adoped.

    \thmitem{rem:derivative_notation/leibniz} The Leibniz notation for the derivative \( f'(x_0) \) is
    \begin{equation*}
      \diff f x (x_0) \coloneqq D f(x_0).
    \end{equation*}

    This notation is used extensively in integral calculus, however it is often confusing when manipulating derivatives. The fraction notation is unjustified in anything, but trivial cases and the partial derivative notation
    \begin{equation*}
      \diffp f x (x_0) \coloneqq D_x f(x_0)
    \end{equation*}
    is even more confusing.

    Note also that this depends on the convention of having variable names.
  \end{thmenum}
\end{remark}

\begin{remark}\label{rem:gateaux_vs_frechet}
  We will compare Gateaux \hyperref[def:differentiability/gateaux]{differentiability} with Frechet \hyperref[def:differentiability/frechet]{differentiability}. Let \( X \) and \( Y \) be Banach spaces, let \( U \subseteq X \) be an open set and let \( f: U \to Y \) be an arbitrary function. Fix a point \( x_0 \in U \).

  The continuous linear operator \( \Lambda: X \to Y \) is a Gateaux derivative if, for every \( \varepsilon > 0 \) and every direction \( h \in X \) there exists \( \delta_G^h > 0 \) such that
  \begin{equation}\label{rem:gateaux_vs_frechet/gateaux}
    \norm{\frac {f(x_0 + th) - f(x_0)} t - \inprod \Lambda h}_Y < \varepsilon \quad\forall t \in (0, \delta_G^h).
  \end{equation}

  In order for \( \Lambda \) to be a Frechet derivative, for every \( \varepsilon > 0 \) there must exist a \( \delta_F > 0 \), so that
  \begin{equation*}
    \frac{\norm{f(x_0 + h) - f(x_0) - \inprod \Lambda h}_Y} {\norm{h}_X} < \varepsilon \quad\forall h \in B(0, \delta_F) \setminus \{ 0 \},
  \end{equation*}
  which can be restated as
  \begin{equation}\label{rem:gateaux_vs_frechet/frechet}
    \norm{\frac {f(x_0 + th) - f(x_0)} t - \inprod \Lambda h}_Y < \varepsilon \quad\forall t \in (0, \delta_F) \ \forall h \in S_X.
  \end{equation}

  By comparing \fullref{rem:gateaux_vs_frechet/gateaux} to \fullref{def:differentiability/frechet}, we conclude that \( f \) is Frechet differentiable at \( x_0 \) if \( \inf_{h \in S_X} \delta^h_G > 0 \), that is, if \( f \) is Gateaux differentiable and the convergence of the Gateaux derivative is uniform on \( h \in S_X \).

  In particular, Frechet differentiability implies Gateaux differentiability.
\end{remark}

\begin{definition}\label{def:function_regular_at_point}
  We say that a function is \term{regular} at a point if its derivative at that point is nonzero.
\end{definition}

\begin{theorem}[Chain rule]\label{thm:chain_rule}
  \todo{Prove.}
\end{theorem}
