\section{First-order models}\label{sec:first_order_models}

\paragraph{Theories}

\begin{definition}\label{def:fol_theory}\mimprovised
  We restate here some definitions related to \hyperref[def:logical_theory]{logical theories}, adapted to \hyperref[def:first_order_logic]{first-order logic}.

  First and foremost, a (syntactic or semantic) \term[ru=теория (\cite[def. 3.1.1]{Герасимов2014Вычислимость}), en=theory (\cite[def. 2.4.1]{Hinman2005Logic})]{theory} is, as in \cref{def:general_logic_theory}, a set of sentences closed under logical consequence. For any set of sentences \( \Gamma \), we denote its consequence closure by \( \cat{Th}(\Gamma) \), and say that \( \Gamma \) \term{axiomatizes} \( \cat{Th}(\Gamma) \).

  \begin{thmenum}
    \thmitem{def:fol_theory/morphism} As in \cref{def:entailment_system_theory/morphism}, we call the \hyperref[def:fol_signature_category/morphisms]{first-order signature morphism} \( t: \Sigma \to \Theta \) a \term{theory morphisms} from \( (\Sigma, \Gamma) \) to \( (\Theta, \Delta) \) if the translation via \fullref{alg:fol_formula_signature_translation} of the formulas in \( \Gamma \) belong to \( \Delta \).

    \thmitem{def:fol_theory/extension} Of special interest is the case where \( t: \Sigma \to \Sigma^+ \) is the inclusion map of a \hyperref[def:fol_signature_extension]{signature extension}. In this case translation is does nothing, and \( t \) is a theory morphism from \( (\Sigma, \Gamma) \) to \( (\Sigma^+, \Gamma^+) \) if and only if \( \Gamma \) is a subset of \( \Gamma^+ \).

    We call \( \Gamma^+ \) an \term{extension} of \( \Gamma \).

    \thmitem{def:fol_theory/category} Based on theories and their morphisms, as per \cref{def:category_of_theories}, we have a category of (syntactic or semantic) theories \( \ucat{Th} \) for every \hyperref[def:grothendieck_universe]{Grothendieck universe} \( \mscrU \).

    \thmitem{def:fol_theory/conservative} As in \cref{def:entailment_system_theory/conservative}, we say that a theory morphism \( t: (\Sigma, \Gamma) \to (\Theta, \Delta) \) is \term[en=conservative extension (\cite[180]{Hinman2005Logic})]{conservative} when \( \Gamma \vdash_\Sigma \varphi \) implies \( \Delta \vdash_\Theta \op*{Sen}(t)(\varphi) \).

    Sufficiency is obvious for both semantic entailment and natural deduction, so it usually suffices to check that \( \Delta \vdash_\Theta \op*{Sen}(t)(\varphi) \) implies \( \Gamma \vdash_\Sigma \varphi \).

    \thmitem{def:fol_theory/model}\mcite[def. 2.4.4]{Hinman2005Logic} As in \cref{def:theory_of_institutional_model}, we define the \term{theory} \( \cat{Th}(\mscrX) \) \hi{of} a structure \( \mscrX \) as the set of all sentences valid in \( \mscrX \).

    \thmitem{def:fol_theory/consistent}\mcite[def. 2.6.19]{Герасимов2014Вычислимость} We call a first-order theory \term[ru=непротиворечивое (множество формул)]{consistent} if \( \Gamma \) contains no \hyperref[def:fol_semantics/tautology]{contradictions}, i.e. if \( \Gamma \) does not contain \( \synbot \).

    More generally, a set of sentences \( \Gamma \) is consistent if \( \synbot \) cannot be derived from it.

    We discuss consistent theories in a general setting in \cref{def:consistent_set_of_sentences}, and give equivalent conditions for syntactic theories in \cref{thm:propositional_semantic_inconsistency} and for semantic theories in \cref{thm:propositional_semantic_inconsistency}. The latter also shows that semantic consistency is equivalent to \hyperref[def:propositional_semantics/satisfaction]{satisfiability}.

    \thmitem{def:fol_theory/complete}\mcite[def. 2.4.i]{Hinman2005Logic} We call a first-order theory \( \Gamma \) \term[ru=полное (множество формул) (\cite[def. 2.6.20]{Герасимов2014Вычислимость})]{complete} if, for every sentence \( \varphi \), \( \Gamma \) contains either \( \varphi \) or \( \synneg \varphi \) (or possibly both, if the theory is inconsistent).

    More generally, a set of sentences \( \Gamma \) is complete if, for every sentence \( \varphi \), we can derive either \( \varphi \) or \( \synneg \varphi \) (or possibly both) from \( \Gamma \).

    We will discuss complete theories in a general setting in \cref{def:complete_set_of_sentences}, and prove in \cref{thm:propositional_syntactically_complete_set} that it coincides with our notion when restricted to classical logic.
  \end{thmenum}
\end{definition}

\begin{proposition}\label{thm:def:fol_theory}
  \hyperref[def:fol_theory]{First-order theories} have the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:fol_theory/model_theory_consistent_complete} For every structure \( \mscrX \), the theory \( \cat{Th}(\mscrX) \) is consistent and complete.

    \thmitem{thm:def:fol_theory/theory_morphism_reduct} For every \hyperref[def:fol_theory/morphism]{theory morphism} \( t: (\Sigma, \Gamma) \to (\Theta, \Delta) \), if \( \mscrY \) is a model of \( \Delta \), its \hyperref[def:fol_reduct_along_morphism]{reduct} \( \red_t(\mscrY) \) is a model of \( \Gamma \).

    The reduct is taken with respect to the underlying signature morphism of \( t \). We show that the theory morphism is also compatible with this reduct.
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:fol_theory/model_theory_consistent_complete} Analogous to \cref{thm:def:propositional_theory/model_theory_consistent_complete}.

  \SubProofOf{thm:def:fol_theory/theory_morphism_reduct} Suppose that \( \mscrY \) is a model of \( \Delta \).

  Consider the theory morphism \( t: (\Sigma, \Gamma) \to (\Theta, \Delta) \). By definition, it is a signature morphism that translates formulas from \( \Gamma \) to formulas from \( \Delta \).

  The reduct \( \red_t(\mscrY) \) along the \hi{signature morphism} \( t \). Suppose that \( \mscrY \) is a model of \( \Delta \), i.e. \( \Bracks{\psi}_\mscrY = \semtop \) for every formula \( \psi \) in \( \Delta \). In particular, \( \Bracks{\varphi[t]}_\mscrY = \semtop \) for every \( \varphi \) in \( \Gamma \).

  \Cref{thm:fol_structure_reduct_denotation/formulas} implies that \( \Bracks{\varphi}_{\red_t(\mscrY)}^v = \semtop \) for every \( \varphi \) in \( \Gamma \); hence, \( \red_t(\mscrY) \) is a model of \( \Gamma \).
\end{proof}

\begin{definition}\label{def:fol_theory_model_functor}\mimprovised
  Consider the \hyperref[def:fol_institution]{first-order institution} over the \hyperref[def:grothendieck_universe]{Grothendieck universe} \( \mscrU \).

  This institution has a \hyperref[def:fol_institution/models]{model functor} \( \cat{Mod}: \cat{Sign} \to \cat{Cat}^{\oppos} \) which sends each \hyperref[def:fol_signature]{signature} \( \Sigma \) to the category \( \cat{Mod}(\Sigma) \) of all \hyperref[def:fol_structure]{structures} and \hyperref[def:fol_homomorphism]{homomorphisms} over \( \Sigma \), and each \hyperref[def:fol_signature_category/morphisms]{signature morphism} \( t: \Sigma \to \Theta \) to the corresponding \hyperref[def:fol_institution/models/hom]{reduct functor} \( \cat{Mod}(t): \cat{Mod}(\Theta) \to \cat{Mod}(\Sigma) \).

  We can extend \( \cat{Mod} \) to a functor \( \cat{Mod}: \cat{Th} \to \cat{Cat}^{\oppos} \) on the corresponding \hyperref[def:fol_theory/category]{category of theories}:
  \begin{thmenum}
    \thmitem{def:fol_theory_model_functor/obj} We send a theory \( \Gamma \) to the \hyperref[def:subcategory/full]{\hi{full} subcategory} of \( \cat{Mod}(\Sigma) \) of all structures in which \( \Gamma \) is \hyperref[def:fol_semantics/model]{valid}.

    We denote it by \( \cat{Mod}(\Gamma) \) and refer to it as the \term{category of \( \mscrU \)-small models of \( \Gamma \)}.

    It is important that we have required the subcategory \( \cat{Mod}(\Gamma) \) to be full. Thus, what counts as a model in \( \cat{Mod}(\Gamma) \) depend on the axioms of \( \Gamma \), but what counts as a homomorphism depend solely on \( \Sigma \). In particular, if \( \Gamma \) is the empty theory, then \( \cat{Mod}(\Gamma) \) coincides with \( \cat{Mod}(\Sigma) \).

    \thmitem{def:fol_theory_model_functor/hom} We send the \hyperref[def:fol_theory/morphism]{theory morphism} \( t: (\Sigma, \Gamma) \to (\Theta, \Delta) \) to the aforementioned reduct functor \( \cat{Mod}(t): \cat{Mod}(\Theta) \to \cat{Mod}(\Sigma) \). To highlight that the functor acts on theories, we denote it by \( \cat{Mod}(t): \cat{Mod}(\Delta) \to \cat{Mod}(\Gamma) \).

    The reduct functor only depends on the underlying signature morphism, but, as shown in \cref{thm:def:fol_theory/theory_morphism_reduct}, whether the reduct is a model of \( \Gamma \) generally depends on \( \Delta \).
  \end{thmenum}
\end{definition}
\begin{comments}
  \item For established theories, instead of \( \cat{Mod}(\Gamma) \), we introduce specific names. For example, we use \( \cat{Grp} \) for the \hyperref[def:group/category]{category of groups} or \( \cat{Lat} \) for \hyperref[def:lattice/theory]{category of lattices}.

  \item We have skipped the \( \mscrU \) prefix here for brevity, but all the aforementioned categories depend on \( \mscrU \).

  \item This definition is based on the discussion in \bycite[105]{GoguenBurstall1992Institutions}.
\end{comments}

\begin{proposition}\label{thm:def:fol_theory_model_functor}
  The \hyperref[def:fol_theory_model_functor]{theory model functor} \( \cat{Mod}: \cat{Th} \to \cat{Cat}^{\oppos} \) has the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:fol_theory_model_functor/reduct_faithful} For every theory morphism \( t: (\Sigma, \Gamma) \to (\Theta, \Delta) \), the corresponding reduct functor \( \cat{Mod}(t): \cat{Mod}(\Delta) \to \cat{Mod}(\Gamma) \) is \hyperref[def:functor_invertibility/faithful]{faithful}.
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:fol_theory_model_functor/reduct_faithful} Fix two models \( \mscrX = (X, I) \) and \( \mscrY = (Y, J) \) of \( \Delta \), and consider their reducts \( \red_t(\mscrX) = (X, I_t) \) and \( \red_t(\mscrY) = (Y, J_t) \). \Cref{thm:def:fol_theory/theory_morphism_reduct} implies that they are models of \( \Gamma \).

  If \( \red_t(h) \) and \( \red_t(g) \) coincide for homomorphisms \( h \) and \( g \) in \( \cat{Mod}(\Sigma) \), they agree as functions on \( X \), thus \( h \) and \( g \) also coincide as homomorphisms in \( \cat{Mod}(\Sigma) \). Hence, \( \cat{Mod}(t) \) is faithful.
\end{proof}

\begin{definition}\label{def:fol_theory_forgetful_functor}\mimprovised
  The \hyperref[def:fol_theory_model_functor/obj]{theory model functor} \( \cat{Mod}: \cat{Th} \to \cat{Cat}^{\oppos} \) naturally induces many \hyperref[def:concrete_category]{forgetful functors}.

  \begin{thmenum}
    \thmitem{def:fol_theory_forgetful_functor/reduct} For every theory morphism \( t: (\Sigma, \Gamma) \to (\Theta, \Delta) \), the corresponding reduct functor \( \cat{Mod}(t): \cat{Mod}(\Delta) \to \cat{Mod}(\Gamma) \) can be regarded as forgetful.

    \thmitem{def:fol_theory_forgetful_functor/set} For any category of models \( \cat{Mod}(\Gamma) \), there is a natural functor \( U: \cat{Mod}(\Gamma) \to \cat{Set} \) sending each structure to its universe and each homomorphism to its underlying function.
  \end{thmenum}
\end{definition}
\begin{defproof}
  \Cref{thm:def:fol_theory_model_functor/reduct_faithful} implies that the reduct functors are faithful, and the proof for \( U \) is even simpler, so the implicit requirement of faithfulness from \cref{def:concrete_category} is satisfied.
\end{defproof}

\begin{example}\label{ex:def:fol_theory_model_functor}
  We list examples related to \hyperref[def:fol_theory_model_functor]{theory model functor} \( \cat{Mod}: \cat{Th} \to \cat{Cat}^{\oppos} \):
  \begin{thmenum}
    \thmitem{ex:def:fol_theory_model_functor/order} The \hyperref[def:preordered_set/theory]{partially ordered sets} extend the \hyperref[def:preordered_set/theory]{theory of preordered sets} with the antisymmetry condition \eqref{eq:def:binary_relation/antisymmetric}.

    The homomorphisms of partially ordered sets are \hyperref[def:order_function/preserving]{order-preserving maps}, as in the case of the more general preordered sets. This is to be expected since we have not modified the signature.

    On the other hand, the \hyperref[def:lattice/theory]{theory of lattices} introduces new function symbols and only introduces the familiar inequalities via \hyperref[def:fol_definitional_extension]{definitional extensions}.

    \thmitem{ex:def:fol_theory_model_functor/groups} The \hyperref[def:group/theory]{theory of groups} extends \hyperref[def:monoid/theory]{that of monoids} with the unary symbol \( {\syninv} \), which forces it to also adapt the notion of homomorphisms.

    On the other hand, the \hyperref[def:abelian_group]{abelian groups} extend only the theory, so the homomorphisms of abelian groups are precisely those of groups.
  \end{thmenum}
\end{example}

\paragraph{Substructures}

\begin{definition}\label{def:fol_substructure}\mcite[def. 2.3.12]{Hinman2005Logic}
  Consider two \hyperref[def:fol_structure]{first-order structures} \( \mscrX = (X, I) \) and \( \mscrY = (Y, J) \) over the same \hyperref[def:fol_signature]{signature} \( \Sigma \).

  We say that \( \mscrY \) is a \term[ru=подструктура (\cite[114]{ШеньВерещагин2017ЯзыкиИИсчисления})]{substructure} of \( \mscrX \) if, For every \( n \)-ary symbol \( s \) in \( \Sigma \), the interpretation \( J(s) \) is a \hyperref[def:set_valued_map/restriction]{restriction} of \( I(s) \) to \( Y^n \).

  By abuse of notation, we may write \( J = I\restr_Y \) for the interpretation and \( \mscrY = \mscrX\restr_Y \) for the substructure itself.

  \begin{thmenum}
    \thmitem{def:fol_substructure/inclusion}\mimprovised The inclusion \( \iota: X \to Y \) is a \hyperref[def:fol_homomorphism]{homomorphism}. Furthermore, we show in \cref{thm:def:fol_embedding/inclusion} that it is an \hyperref[def:fol_embedding]{embedding}.

    \thmitem{def:fol_substructure/submodel}\mimprovised In case both \( \mscrX \) and \( \mscrY \) are both \hyperref[def:fol_semantics/model]{models} of the same \hyperref[def:fol_theory]{theory}, we say that \( \mscrY \) is a \term[ru=подмодель (\cite[53]{Мальцев1970АлгебраическиеСистемы})]{submodel} of \( \mscrX \).
  \end{thmenum}
\end{definition}
\begin{comments}
  \item Substructures correspond to \hyperref[def:categorical_subobject]{categorical subobjects}; see \cref{thm:fol_categorical_subobjects}.
\end{comments}

\begin{proposition}\label{thm:fol_substructure_characterization}
  Given a structure \( \mscrX = (X, I) \), the subset \( A \subseteq X \) is (the domain of) a substructure of \( \mscrX \) if and only if it is closed under \( I(f) \) for every function symbol \( f \).
\end{proposition}
\begin{proof}
  \SufficiencySubProof By definition.
  \NecessitySubProof Suppose that, for every function symbol \( f \) of arity \( n \), \( I(f)(a_1, \ldots, a_n) \) belongs to \( A \) whenever \( a_1, \ldots, a_n \) do.

  Then we can define an interpretation \( J(f) \) as \( I(f) \) restricted to \( A^n \). The structure \( (A, J) \) then vacuously satisfies \cref{def:fol_substructure}, i.e. is a substructure of \( \mscrX \).
\end{proof}

\begin{proposition}\label{thm:def:fol_substructure}
  \hyperref[def:fol_substructure]{First-order substructures} have the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:fol_substructure/homomorphism_image} Fix structures \( \mscrX = (X, I) \) and \( \mscrY = (Y, J) \).

    For every \hyperref[def:fol_homomorphism]{homomorphism} \( h: \mscrX \to \mscrY \) and every substructure \( \mscrX' = (X', I') \) of \( \mscrX \), the set-theoretic image \( h[X'] \) is (the domain of) a substructure of \( \mscrY \).

    \thmitem{thm:def:fol_substructure/homomorphism_preimage} Similarly, for every homomorphism \( h: \mscrX \to \mscrY \) and every substructure \( \mscrY' = (Y, J') \) \hi{of \( \mscrY \)}, the set-theoretic preimage \( h^{-1}(Y') \) is (the domain of) a substructure of \( \mscrX \).
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:fol_substructure/homomorphism_image} Fix a function symbol \( f \) of arity \( n \).

  For every tuple \( b_1, \ldots, b_n \) in \( h[X'] \), there exists a tuple \( a_1, \ldots, a_n \) of preimages. Thus,
  \begin{equation*}
    I(f)(b_1, \ldots, b_n)
    =
    J(f)(h(a_1), \ldots, h(a_n))
    =
    h(I(f)(a_1, \ldots, a_n)),
  \end{equation*}
  which also belongs to \( h[X'] \).

  Therefore, \( h[X'] \) is closed under function application. \Cref{thm:fol_substructure_characterization} implies that \( h[X'] \) is the domain of a substructure of \( \mscrY \).

  \SubProofOf{thm:def:fol_substructure/homomorphism_preimage} Fix a function symbol \( f \) of arity \( n \).

  For every tuple \( a_1, \ldots, a_n \) in \( h^{-1}(Y') \), we have
  \begin{equation*}
    J(f)(h(a_1), \ldots, h(a_n))
    =
    h(I(f)(a_1, \ldots, a_n)),
  \end{equation*}
  so \( I(f)(a_1, \ldots, a_n) \) also belongs to \( h^{-1}(Y') \).
\end{proof}

\begin{definition}\label{def:fol_monomorphism}\mimprovised
  Consider some \hyperref[def:fol_theory_model_functor/obj]{category of models} \( \cat{Mod}(\Gamma) \). Based on the categorical terminology from \cref{def:morphism_invertibility/left_cancellative}, we say that the homomorphism \( h: \mscrX \to \mscrY \) is a \term{monomorphism} if it is left-cancellative, i.e. if \( h \bincirc g_1 = h \bincirc g_2 \) implies that \( g_1 = g_2 \).

  We say that \( h \) \term{splits} if it has a \hyperref[def:morphism_invertibility/left_invertible]{left inverse}, i.e. a homomorphism \( g: \mscrY \to \mscrX \) such that \( g \bincirc h = \id_\mscrX \).
\end{definition}
\begin{comments}
  \item If \( h \) has a left inverse, \cref{thm:def:morphism_invertibility/split_monomorphism} implies that it automatically follows that it is a monomorphism.

  \item Since \( \cat{Mod}(\Gamma) \) generally has less objects than \( \cat{Mod}(\Delta) \) if \( \Gamma \subseteq \Delta \), it is possible for \( h \) to be a monomorphism in \( \cat{Mod}(\Delta) \) but not in \( \cat{Mod}(\Gamma) \).

  \item This definition is a direct restatement of the general categorical one, but the context allows some simplifications. For many useful theories, monomorphisms between first-order models are precisely injective homomorphisms. See \cref{rem:def:fol_monomorphism}.

  Split monomorphisms, on the other hand, are more restrictive than even \hyperref[def:fol_embedding]{embeddings} --- see \cref{ex:def:fol_embedding/no_left_inverse}.
\end{comments}

\begin{remark}\label{rem:def:fol_monomorphism}
  \hyperref[def:fol_monomorphism]{Monomorphisms} of first-order models are better behaved than those in general categories. This mainly stems from the connection to set-theoretic invertibility.

  Indeed, consider the \hyperref[def:fol_theory_forgetful_functor/set]{forgetful functor} \( U: \cat{Mod}(\Gamma) \to M \) and structures \( \mscrX = (X, I) \) and \( \mscrY = (Y, J) \). The universes \( X \) and \( Y \) are by definition nonempty, so \cref{thm:concrete_category_function_invertibility/injective} implies that, for any homomorphism \( h: \mscrX \to \mscrY \), the following are equivalent:
  \begin{itemize}
    \item \( U(h) \) is left-cancellative (i.e. a categorical monomorphism) in \( \cat{Set} \).

    \item \( U(h) \) is left-invertible (i.e. a categorical split monomorphism) in \( \cat{Set} \).

    \item \( U(h) \) is injective.
  \end{itemize}

  Thus, if \( U(h) \) is injective, it is left-cancellative, i.e. \( U(h) \bincirc \alpha_1 = U(h) \bincirc \alpha_2 \) must imply \( \alpha_1 = \alpha_2 \) for all \hi{functions} \( \alpha_1 \) and \( \alpha_2 \). This is a stronger conditions than left cancellation of \( h \), where \( \alpha_1 \) and \( \alpha_2 \) must be homomorphisms. So injective homomorphisms are monomorphisms. The converse may fail, but counterexamples are sparse; see \cite{MathSE:categories_where_monomorphisms_differ_from_injective_morphisms}.

  Nevertheless, as shown in \cref{thm:concrete_category_function_invertibility/injective}, monomorphisms are precisely injective homomorphisms when \( U: \cat{Mod}(\Gamma) \to M \) has a \hyperref[def:category_adjunction]{left adjoint}. This is the case, for example, for \hyperref[def:fol_equational_theory]{equational theories}, which have \hyperref[def:fol_free_term_model]{free term models}.

  We can say less about the left invertibility of \( h \). Indeed, if \( U(h) \) is injective, it is left-invertible, but \( h \) may fail to be. If \( \alpha \bincirc U(h) = \id_X \) for \hi{some} function \( \alpha \), the mere existence of \( \alpha \) does not entail the existence of a homomorphism \( g \) such that \( U(g) = \alpha \). In fact, we show in \cref{ex:def:fol_embedding/no_left_inverse} that left invertible homomorphisms are even more general than \hyperref[def:fol_embedding]{first-order embeddings}.
\end{remark}

\begin{definition}\label{def:fol_isomorphism}
  Consider some \hyperref[def:fol_theory_model_functor/obj]{category of models} \( \cat{Mod}(\Gamma) \). We say that a \hyperref[def:fol_homomorphism]{first-order homomorphism} \( h: \mscrX \to \mscrY \) is an \term[ru=изоморфизм (\cite[170]{Герасимов2014Вычислимость}), en=isomorphism (\cite[def. 2.3.1]{Hinman2005Logic})]{isomorphism} if any of the following equivalent conditions hold:
  \begin{thmenum}
    \thmitem{def:fol_isomorphism/categorical}\mimprovised \( h \) is a \hyperref[def:fol_isomorphism]{categorical isomorphism} in \( \cat{Mod}(\Sigma) \): there exists an inverse homomorphism \( g \) such that \( g \bincirc h \) is the identity in \( \mscrX \) and \( h \bincirc g \) is the identity in \( \mscrY \).

    \thmitem{def:fol_isomorphism/inverse}\mimprovised \( h \) is a \hyperref[def:function_invertibility/bijective]{bijective} homomorphism and its set-theoretic inverse \( h^{-1} \) is a homomorphism.

    \thmitem{def:fol_isomorphism/direct}\mcite[170]{Герасимов2014Вычислимость} \( h \) is a \hyperref[def:fol_homomorphism/predicates]{strong} \hyperref[def:function_invertibility/bijective]{bijective} homomorphism.

    If the signature has no predicate symbols, all homomorphisms are strong, so it is sufficient for the homomorphism to be bijective.
  \end{thmenum}
\end{definition}
\begin{comments}
  \item \Cref{ex:bijective_order_homomorphism_not_isomorphism} demonstrates how a bijective homomorphism may fail to be an isomorphism.
\end{comments}
\begin{defproof}
  \EquivalenceSubProof{def:fol_isomorphism/categorical}{def:fol_isomorphism/inverse} Follows from \cref{thm:concrete_category_function_invertibility/bijective}.

  \EquivalenceSubProof{def:fol_isomorphism/inverse}{def:fol_isomorphism/direct} If \( h \) is bijective, the inequality in \eqref{eq:def:fol_homomorphism/predicates} for \( h^{-1} \) coincides with the converse inequality for \( h \).
\end{defproof}

\begin{example}\label{ex:bijective_order_homomorphism_not_isomorphism}
  Consider the \hyperref[def:integers]{set of integers} \( \BbbZ \) endowed with two different \hyperref[def:partially_ordered_set]{partial orders}:
  \begin{itemize}
    \item The standard total order \( \leq \) where \( n \leq m \) if there exists a nonnegative integer \( k \) such that \( n + k = m \).
    \item The equality relation \( = \).
  \end{itemize}

  The identity \( \id(x) = x \) is an \hyperref[def:order_function]{order homomorphisms} from \( (\BbbZ, =) \) to \( (\BbbZ, \leq) \). Indeed, for any integers \( n \) and \( m \), \( n = m \) implies \( n \leq m \).

  Furthermore, the identity function is bijective. The inverse of \( \id \), which is again \( \id \), is not however a homomorphism from \( (\BbbZ, \leq) \) to \( (\BbbZ, =) \) since, for example, \( 1 \leq 2 \), but \( 1 \neq 2 \).

  Hence, \( \id: (\BbbZ, =) \to (\BbbZ, \leq) \) is a bijective homomorphism, but not an isomorphism.
\end{example}

\begin{definition}\label{def:fol_embedding}
  Consider some \hyperref[def:fol_theory_model_functor/obj]{category of models} \( \cat{Mod}(\Gamma) \). We say that the homomorphism \( h: \mscrX \to \mscrY \) is an \term[en=embedding (\cite[def. 2.3.26(ii)]{Hinman2005Logic})]{isomorphic embedding} if it satisfies any of the following equivalent conditions:
  \begin{thmenum}
    \thmitem{def:fol_embedding/direct}\mcite[def. 2.3.26(ii)]{Hinman2005Logic} \( h \) is a strong injective homomorphism.

    If the signature has no predicate symbols, all homomorphisms are strong, so it is sufficient for the homomorphism to be injective.

    \thmitem{def:fol_embedding/substructure}\mcite[120]{VanDalen2004LogicAndStructure} The \hyperref[def:set_valued_map/restriction]{corestriction} of \( h \) to its image \( \mscrY\restr_{h[X]} \) is an \hyperref[def:fol_isomorphism]{isomorphism}.
  \end{thmenum}
\end{definition}
\begin{defproof}
  \ImplicationSubProof{def:fol_embedding/direct}{def:fol_embedding/substructure} Suppose that \( h \) is a strong injective homomorphism.

  Its corestriction \( h' \) to its image \( \mscrY\restr_{h[X]} \) is then a strong bijective homomorphism. It thus satisfies \cref{def:fol_isomorphism/direct}, making \( h' \) an isomorphism.

  \ImplicationSubProof{def:fol_embedding/substructure}{def:fol_embedding/direct} Suppose that the corestriction \( h' \) of \( h \) to \( \mscrY_{h[X]} \) is an isomorphism.

  Then \( h' \) satisfies the equivalent conditions in \cref{def:fol_isomorphism}; in particular, it is a strong bijective homomorphism. Then \( h \) is a strong injective homomorphism.
\end{defproof}

\begin{remark}\label{rem:embeds_isomorphically}
  We sometimes refer to \hyperref[def:fol_embedding]{first-order embeddings} as \enquote{isomorphic embeddings} to highlight that they are not merely an injective function.

  For example, we can say that \( \mscrY \) embeds isomorphically into \( \mscrX \).

  Similar terminology is used, among others, by \incite[100]{Enderton1977SetTheory}.
\end{remark}

\begin{proposition}\label{thm:def:fol_embedding}
  \hyperref[def:fol_embedding]{First-order embeddings} have the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:fol_embedding/inclusion} The inclusion \( \iota: Y \to X \) of the \hyperref[def:fol_substructure]{substructure} \( \mscrY = (Y, J) \) into \( \mscrX = (X, I) \) is an embedding.

    \thmitem{thm:def:fol_embedding/monomorphism} Every embedding is a \hyperref[def:fol_monomorphism]{monomorphism} (left-cancellative homomorphism).

    \thmitem{thm:def:fol_embedding/split_monomorphism} Every \hyperref[def:fol_monomorphism]{split monomorphism} (left-invertible homomorphism) is an embedding.
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:fol_embedding/inclusion} Clearly the inclusion \( \iota: Y \to X \) is injective. Furthermore, it is a strong homomorphism because it vacuously satisfies \eqref{eq:def:fol_homomorphism/functions} and \eqref{eq:def:fol_homomorphism/predicates}.

  \SubProofOf{thm:def:fol_embedding/monomorphism} Follows from \cref{thm:concrete_category_function_invertibility/injective} since an embedding is by definition injective.

  \SubProofOf{thm:def:fol_embedding/split_monomorphism} Let \( g: \mscrY \to \mscrX \) be a left inverse of \( h: \mscrX \to \mscrY \).

  \Cref{thm:concrete_category_function_invertibility/injective} implies that \( h \) is injective. Furthermore, we have
  \begin{equation*}
    I(p)(a_1, \ldots, a_n)
    \leq
    J(p)\parens[\big]{ h(a_1), \ldots, h(a_n) }
    \leq
    I(p)\parens[\big]{ g(h(a_1)), \ldots, g(h(a_n)) }
    =
    I(p)(a_1, \ldots, a_n),
  \end{equation*}
  so the homomorphism is strong. Thus, it satisfies \cref{def:fol_embedding/direct}, i.e. it is an embedding.
\end{proof}

\begin{example}\label{ex:def:fol_embedding}
  We list examples of \hyperref[def:fol_embedding]{first-order embeddings}:
  \begin{thmenum}
    \thmitem{ex:def:fol_embedding/no_left_inverse} Consider the embedding \( h(n) \coloneqq 2n \) of the additive group \( (\BbbZ, +) \) into itself.

    It is indeed an embedding because it is obviously injective, and there are no predicate symbols in the theory of abelian groups.

    Suppose it has a left inverse \( g \). Then
    \begin{equation*}
      n = [g \bincirc h](n) = g(2n) = 2 g(n),
    \end{equation*}
    so \( g(n) = n / 2 \). But \( n / 2 \) must be an integer, which is not possible if \( n \) is odd.

    The obtained contradiction shows that \( h \) has no left inverse, and that having a left inverse is stronger than being an embedding.
  \end{thmenum}
\end{example}

\begin{definition}\label{def:categorical_subobject}\mcite[18]{Jacobson1989BasicAlgebraII}
  For an object \( X \) in some \hyperref[def:category]{category}, define an equivalence relation on \hyperref[def:morphism_invertibility/left_cancellative]{monomorphisms} \( f: A \to X \) and \( g: B \to X \) with a common codomain \( X \) to hold if there exists an \hyperref[def:morphism_invertibility/isomorphism]{isomorphism} \( h: A \to B \) such that \( f = g \bincirc h \).

  We call the equivalence classes of this relation \term{subobjects} of \( X \).
\end{definition}
\begin{comments}
  \item This particular definition is discussed in \cite{MathSE:categorical_subobject_definition}. We give several examples in \cref{ex:def:categorical_subobject}.

  \item In many categories, especially those that are \hyperref[rem:concrete_categories]{concrete}, subobjects are determined by inclusion maps of \enquote{canonical} objects. This is the case for \hyperref[def:subset]{subsets}, \hyperref[def:group/submodel]{subgroups}, \hyperref[def:topological_subspace]{subspaces}, \hyperref[def:undirected_graph/subgraph]{subgraphs} and others.

  In fact, we will mostly regard subobjects as concrete canonical objects.
\end{comments}
\begin{defproof}
  We must show that the above equivalence is indeed an equivalence relation.

  \SubProofOf[def:binary_relation/reflexive]{reflexivity} For every morphism, we have \( f = f \bincirc \id \) by definition.

  \SubProofOf[def:binary_relation/symmetric]{symmetry} If \( f = g \bincirc h \) for some isomorphism \( h \), then \( g = f \bincirc h^{-1} \).

  \SubProofOf[def:binary_relation/transitive]{transitivity} If \( f = g \bincirc h \) and \( k = g \bincirc l \), then
  \begin{equation*}
    f = g \bincirc h = (k \bincirc l^{-1}) \bincirc h = k \bincirc (l^{-1} \bincirc h).
  \end{equation*}
\end{defproof}

\begin{example}\label{ex:def:categorical_subobject}
  We list examples of \hyperref[def:categorical_subobject]{categorical subobjects}:
  \begin{thmenum}
    \thmitem{ex:def:categorical_subobject/sets} Consider the \hyperref[def:category_of_small_sets]{category of small sets} \( \cat{Set} \).

    By definition, \( \set{ 1 } \) is a subset of \( \set{ 1, 2 } \). Categorically, this is manifested by the inclusion \( \iota_1: \set{ 1 } \to \set{ 1, 2 } \). It is clearly injective and, by \cref{thm:function_invertibility_categorical/nonempty_left_invertible}, a categorical monomorphism. Thus, \( \iota_1 \) induces a subobject.

    Similarly, \( \set{ 2 } \) is a subset of \( \set{ 1, 2 } \), and the inclusion map \( \iota_2: \set{ 2 } \to \set{ 1, 2 } \) induces a subobject.

    There is a unique isomorphism \( h: \set{ 1 } \to \set{ 2 } \), however,
    \begin{equation*}
      1 = \iota_1(1) \neq \iota_2(h(1)) = 2,
    \end{equation*}
    so the two subsets correspond to different categorical subobjects.

    On the other hand, the map \( 2 \mapsto 1 \) is equivalent to \( \iota_1 \). To avoid confusion, we will focus on inclusion maps.
  \end{thmenum}
\end{example}

\begin{proposition}\label{thm:fol_categorical_subobjects}
  Consider some \hyperref[def:fol_theory_model_functor/obj]{category of models} \( \cat{Mod}(\Gamma) \).

  If \( \mscrY = (Y, J) \) and \( \mscrZ = (Z, K) \) are \hyperref[def:fol_substructure]{submodels} of \( \mscrX = (X, I) \), the inclusions \( \iota_Y: Y \to X \) and \( \iota_Z: Z \to X \) induce the same \hyperref[def:categorical_subobject]{categorical subobject} of \( \mscrX \) in \( \cat{Mod}(\Gamma) \) if and only if \( Y = Z \).
\end{proposition}
\begin{proof}
  \SufficiencySubProof Suppose that \( \iota_Y: Y \to X \) and \( \iota_Z: Z \to X \) are equivalent, i.e. there exists some isomorphism \( h: Y \to Z \) such that \( \iota_Y = \iota_Z \bincirc h \).

  Both \( \iota_Y \) and \( \iota_Z \) are embeddings by \cref{thm:def:fol_embedding/inclusion}, and hence monomorphisms by \cref{thm:def:fol_embedding/monomorphism}, so they naturally induce subobjects.

  For every \( b \) in \( Y \), we have \( b = \iota_Y(b) = \iota_Z(h(b)) = h(b) \), which in particular implies that all elements of \( Y \) belong to \( Z \).

  Similarly, for every \( c \) in \( Z \), we have \( c = \iota_Z(c) = \iota_Y(h^{-1}(c)) = h(c) \), which implies that \( Z \) is a subset of \( Y \). We have used here that the categorical isomorphism \( h \) is bijective, which follows from the equivalences in \cref{def:fol_isomorphism}.

  \NecessitySubProof Conversely, suppose that \( Y = Z \). Then \( \iota_Y = \iota_Z \), so obviously they correspond to the same subobject.
\end{proof}

\paragraph{Generated substructures}

\begin{definition}\label{def:fol_intersection_substructure}\mimprovised
  Fix a \hyperref[def:fol_structure]{first-order structure} \( \mscrX = (X, I) \) and a family \( \seq{ (X_k, I_k) }_{k \in \mscrK} \) of \hyperref[def:fol_substructure]{substructures}.

  If the intersection \( \bigcap_{k \in \mscrK} X_k \) is nonempty, restricting the interpretations gives us a substructure of \( \mscrX \), which we call the \term{intersection substructure}.
\end{definition}
\begin{comments}
  \item In case the substructures are disjoint, their intersection is empty, and we have disallowed structures with empty domains. If we allow empty domains, as per \cref{rem:fol_empty_universe/semantics}, then the condition for the substructures not to be disjoint is unnecessary.

  \item As shown in \cref{thm:intersection_of_fol_submodels}, for most theories we will consider, the intersection of submodels of \( \mscrX \) will also be a submodel.
\end{comments}
\begin{defproof}
  We must show that \( \bigcap_{k \in \mscrK} X_k \) is indeed the universe of a substructure, which amounts to showing that it is closed under applications the signature functions.

  Let \( f \) be a function symbol of arity \( n \) and let \( a_1, \ldots, a_n \) be members of the intersection. For every index \( k \), the elements \( a_1, \ldots, a_n \) belong to \( X_k \), and hence \( I(f)(a_1, \ldots, a_n) \) belongs to \( X_k \). Generalizing \( k \), we conclude that \( I(f)(a_1, \ldots, a_n) \) belongs to the intersection.
\end{defproof}

\begin{proposition}\label{thm:intersection_of_fol_submodels}
  If the \hyperref[def:fol_theory]{theory} \( \Gamma \) has an axiomatization without existential quantifiers, then the \hyperref[def:fol_intersection_substructure]{intersection} of \hyperref[def:fol_substructure]{submodels} is again a submodel.
\end{proposition}
\begin{proof}
  Fix a family \( \seq{ (X_k, I_k) }_{k \in \mscrK} \) of substructures of \( \mscrX = (X, I) \) and let \( Y \coloneqq \bigcap_{k \in \mscrK} X_k \).

  Let \( \varphi \) be a formula that does not contain existential quantifiers. We will use \fullref{thm:induction_on_abstract_syntax} on \( \varphi \) to show that \( \Bracks{\varphi}_{\mscrX\restr_Y}^v = \semtop \) whenever \( \Bracks{\varphi}_{\mscrX\restr_{X_k}}^v = \semtop \) for every \( k \in \mscrK \) and every variable assignment \( v \) into \( Y \).

  We will only consider the case of universal formulas since the others are trivial:
  \begin{itemize}
    \item Suppose that \( \varphi = \qforall x \psi \), where the inductive hypothesis holds for \( \psi \).

    If \( \Bracks{\varphi}_{\mscrX\restr_{X_k}}^v = \semtop \), then, for every \( k \in \mscrK \),
    \begin{equation*}
      \bigwedge\set[\big]{ \Bracks{\psi}_{\mscrX\restr_{X_k}}^{v_{x \mapsto a}} \given* a \in X_k } = \semtop,
    \end{equation*}
    hence \( \Bracks{\psi}_{\mscrX\restr_{X_k}}^{v_{x \mapsto a}} = \semtop \) for every \( a \) in \( X_k \).

    Therefore, \( \Bracks{\psi}_{\mscrX\restr_Y}^{v_{x \mapsto a}} = \semtop \) for every \( a \) in \( Y \), which implies that \( \Bracks{\varphi}_{\mscrX\restr_Y}^v = \semtop \).
  \end{itemize}
\end{proof}

\begin{definition}\label{def:fol_generated_substructure}\mcite[prop. 2.3.16]{Hinman2005Logic}
  Let \( \mscrX = (X, I) \) be a \hyperref[def:fol_structure]{first-order structure}. Given a subset \( A \) of \( X \), we define the substructure \( \braket{ A } \) \term[ru=порожденная (\cite[55]{Мальцев1970АлгебраическиеСистемы})]{generated} by \( A \) as the \hyperref[def:fol_intersection_substructure]{intersection substructure} of all substructures whose domains contain \( A \).

  We denote the domain of this generated substructure by \( \braket{ A } \). \Cref{thm:moore_family_closure_operator} implies that it is a \hyperref[def:moore_closure_operator]{Moore closure operator} on \( \pow(X) \).
\end{definition}
\begin{comments}
  \item In particular, as a consequence of \cref{thm:closure_operator_minimality}, \( \braket{ A } \) is the least among all substructure domains containing \( A \).

  \item \Cref{thm:fol_generated_substructure_iteration} provides a useful characterization.
\end{comments}

\begin{proposition}\label{thm:fol_generated_substructure_iteration}
  Fix a \hyperref[def:fol_structure]{structure} \( \mscrX = (X, I) \) over \( \Sigma \). The \hyperref[def:fol_substructure]{substructure} of \( \mscrX \) \hyperref[def:fol_generated_substructure]{generated} by the set \( A \) is the smallest \hyperref[def:function_fixed_point]{fixed point} of the following operator:
  \begin{equation}\label{eq:thm:fol_generated_substructure_iteration/operator}
    \begin{aligned}
      &T: \pow(X) \to \pow(X), \\
      &T(S) \coloneqq S \cup \set{ I(f)(a_1, \ldots, a_{\# f}) \given f \in \op*{Fun}_\Sigma \T{and} a_1, \ldots, a_{\# f} \in S }.
    \end{aligned}
  \end{equation}

  Furthermore, \( \braket{ A } \) is the union of the sequence
  \begin{equation}\label{eq:thm:fol_generated_substructure_iteration/sequence}
    A_k \coloneqq \begin{cases}
      A,          &k = 0, \\
      T(A_{k-1}), &k > 0.
    \end{cases}
  \end{equation}
\end{proposition}
\begin{proof}
  That \( T \) has a fixed point \( F \) follows from \fullref{thm:knaster_tarski_theorem}. That \( F \) is the union of \( A_0, A_1, \ldots \) follows from \cref{thm:knaster_tarski_iteration/continuous}. The latter requires verifying that \( T \) is \hyperref[def:scott_continuity]{Scott-continuous}, which can be shown analogously to how it is done in \fullref{thm:recursively_defined_abstract_syntax}.

  It remains to show that \( \braket{ A } = F \). Since \( F \) is closed under \( I(f) \) for any function symbol \( f \), \cref{thm:fol_substructure_characterization} implies that it is a substructure of \( \mscrX \). By definition then \( \braket{ A } \subseteq F \).

  Conversely, an element \( a \) of \( F \) must belong to some \( A_k \). Without loss of generality, suppose that \( k \) is minimal. We will use induction on \( k \) to show that \( a \) belongs to every substructure of \( \mscrX \) containing \( A \).
  \begin{itemize}
    \item If \( k = 0 \), then \( A_0 = A \), so \( a \) clearly also belongs to every substructure containing \( A \).

    \item Otherwise, for some function symbol \( f \) of arity \( n \), \( a = I(f)(a_1, \ldots, a_n) \) for some elements \( a_1, \ldots, a_n \) from \( A_{k-1} \). By the inductive hypothesis, \( a_1, \ldots, a_n \) belong to every substructure containing \( A \); then so does \( a \).
  \end{itemize}

  It follows that \( F \subseteq \braket{ A } \).
\end{proof}

\begin{corollary}\label{thm:generated_substructure_coincides}
  Given a structure \( \mscrX = (X, I) \), the subset \( A \subseteq X \) is (the domain of) a substructure of \( \mscrX \) if and only if \( \braket{ A } = A \).
\end{corollary}
\begin{proof}
  Restatement of \cref{thm:fol_substructure_characterization} considering that the sequence \eqref{eq:thm:fol_generated_substructure_iteration/sequence} stabilizes immediately.
\end{proof}

\begin{theorem}[Induction on generated substructures]\label{thm:induction_on_generated_substructures}
  Over the \hyperref[def:fol_signature]{signature} \( \Sigma \), fix a \hyperref[def:fol_structure]{first-order structure} \( \mscrX = (X, I) \). Consider a subset \( A \) of \( X \), a formula \( \varphi \) over \( \Sigma \), a variable \( x \) and a variable assignment \( v \) into \( X \).

  Then, in order for the modified assignment \( v_{x \mapsto a} \) to satisfy \( \varphi \) for every \( a \) in the substructure \( \braket{ A } \) \hyperref[def:fol_generated_substructure]{generated} by \( A \), the following are sufficient:
  \begin{thmenum}
    \thmitem{thm:induction_on_generated_substructures/base} The \hyperref[def:fol_semantics/satisfaction]{assignment} \( v_{x \mapsto a} \) satisfies \( \varphi \) for every \( a \) in \( A \).

    \thmitem{thm:induction_on_generated_substructures/step} For every function symbol \( f \) in \( \Sigma \) of arity \( n \), if there exists a tuple \( a_1, \ldots, a_n \) such that \( v_{x \mapsto a_k} \) satisfies \( \varphi \) for every \( k = 1, \ldots, n \), then \( v_{x \mapsto I(f)(x_1, \ldots, x_n)} \) also satisfies \( \varphi \).
  \end{thmenum}
\end{theorem}
\begin{proof}
  Suppose that both \cref{thm:induction_on_generated_substructures/base} and \cref{thm:induction_on_generated_substructures/step} hold.

  Let \( a \) be an arbitrary member of \( \braket{ A } \). We will show that \( v_{x \mapsto a} \) satisfies \( \varphi \).

  We will use the characterization \eqref{eq:thm:fol_generated_substructure_iteration/sequence} of \( \braket{ A } \) from \cref{thm:fol_generated_substructure_iteration}. Let \( i \) be the smallest index such that \( a \) belongs to \( A_i \). We will use induction on \( i \).

  \begin{itemize}
    \item If \( i = 0 \), then \cref{thm:induction_on_generated_substructures/base} ensures that \( v_{x \mapsto a} \) satisfies \( \varphi \).

    \item Otherwise, \( a = I(f)(a_1, \ldots, a_n) \), where the inductive hypothesis holds for \( A_{i-1} \), then \cref{thm:induction_on_generated_substructures/step} is satisfied, and it implies that \( v_{x \mapsto a} \) satisfies \( \varphi \).
  \end{itemize}
\end{proof}

\paragraph{Direct products}

\begin{definition}\label{def:fol_direct_product}\mcite[def. 2.3.54]{Hinman2005Logic}
  Fix a family \( \seq{ \mscrX_k }_{k \in \mscrK} \) of \hyperref[def:fol_structure]{first-order structures} over a common signature \( \Sigma \), where \( \mscrX_k = (X_k, I_k) \) for every \( k \) in \( \mscrK \).

  We call the \term{direct product} of this family the structure \( (X, I) \) denoted by \( \prod_{k \in \mscrK} \mscrX_k \) (or \( \mscrX^\mscrK \) if all structures are equal to \( \mscrX \)), defined as follows:
  \begin{thmenum}
    \thmitem{def:fol_direct_product/domain} The domain \( X \) is the \hyperref[def:cartesian_product]{Cartesian product} \( \prod_{k \in \mscrK} X_k \) of the corresponding domains.

    \thmitem{def:fol_direct_product/functions} For every \( n \)-ary functional symbol \( f \) in \( \Sigma \), we let
    \begin{equation*}
      \mathllap{I(f)\parens[\big]{ \seq{ a_{1,k} }_{k \in \mscrK}, \ldots, \seq{ a_{n,k} }_{k \in \mscrK} }} \coloneqq \mathrlap{\seq[\big]{ I_k(f)(a_{1,k}, \ldots, a_{n,k}) }_{k \in \mscrK}.}
    \end{equation*}

    \thmitem{def:fol_direct_product/predicates} For every \( n \)-ary predicate symbol \( p \) in \( \Sigma \), we define its interpretation componentwise:
    \begin{equation*}
      \mathllap{I(p)\parens[\big]{ \seq{ a_{1,k} }_{k \in \mscrK}, \ldots, \seq{ a_{n,k} }_{k \in \mscrK} }} \coloneqq \mathrlap{\bigwedge_{k \in \mscrK} I_k(p)(a_{1,k}, \ldots, a_{n,k}).}
    \end{equation*}
  \end{thmenum}
\end{definition}

\begin{proposition}\label{thm:fol_direct_product_projections}
  The \hyperref[def:cartesian_product_projection]{projections} of the \hyperref[def:fol_direct_product]{direct product} of \hyperref[def:fol_structure]{first-order structures} are \hyperref[def:fol_homomorphism]{homomorphisms}.
\end{proposition}
\begin{proof}
  Consider the product \( \prod_{k \in \mscrK} \mscrX_k \) in the setting of \cref{def:fol_direct_product}.

  \SubProofOf{def:fol_homomorphism/functions} For every \( n \)-ary functional symbol \( f \) in \( \Sigma \), we have
  \begin{align*}
    &\phantom{{}={}}
    \pi_m\parens[\big]{ I(f)\parens[\big]{ \seq{ a_{1,k} }_{k \in \mscrK}, \ldots, \seq{ a_{n,k} }_{k \in \mscrK} } }
    = \\ &=
    \pi_m\parens[\big]{ \seq[\big]{ I_k(f)\parens{ a_{1,k}, \ldots, a_{n,k} } }_{k \in \mscrK} }
    = \\ &=
    I_m(f)\parens{ a_{1,m}, \ldots, a_{n,m} }
    = \\ &=
    I_m(f)\parens[\big]{ \pi_m\parens[\big]{ \seq{ a_{1,k} }_{k \in \mscrK} }, \ldots, \pi_m\parens[\big]{ \seq{ a_{n,k} }_{k \in \mscrK} } }.
  \end{align*}

  \SubProofOf{def:fol_homomorphism/predicates} Now fix an \( n \)-ary predicate symbol \( p \) in \( \Sigma \) and suppose that
  \begin{equation*}
    I(p)\parens[\big]{ \seq{ a_{1,k} }_{k \in \mscrK}, \ldots, \seq{ a_{n,k} }_{k \in \mscrK} } = \semtop.
  \end{equation*}

  Then
  \begin{equation*}
    I_m(p)(a_{1,m}, \ldots, a_{n,m}) = \semtop,
  \end{equation*}
  so
  \begin{equation*}
    I_m(p)\parens[\big]{ \pi_m\parens[\big]{ \seq{ a_{1,k} }_{k \in \mscrK} }, \ldots, \pi_m\parens[\big]{ \seq{ a_{n,k} }_{k \in \mscrK} } }
    =
    I_m(p)(a_{1,m}, \ldots, a_{n,m})
    =
    \semtop.
  \end{equation*}
\end{proof}

\begin{theorem}[Direct product universal property]\label{thm:direct_product_universal_property}
  Consider some \hyperref[def:fol_theory_model_functor/obj]{category of models} \( \cat{Mod}(\Gamma) \). The For a family \( \seq{ \mscrX_k }_{k \in \mscrK} \) of models of \( \Gamma \), suppose that the \hyperref[def:fol_direct_product]{direct product} \(  \prod_{k \in \mscrK} \mscrX_k \) is also a model of \( \Gamma \).

  Then \( \prod_{k \in \mscrK} \mscrX_k \) is a \hyperref[def:discrete_category_limits]{categorical product} in \( \cat{Mod}(\Gamma) \) --- the unique up to a unique \hyperref[def:fol_isomorphism]{isomorphism} model of \( \Gamma \) that satisfies the following \hyperref[rem:universal_mapping_property]{universal mapping property}:
  \begin{displayquote}
    If we are given a model \( \mscrY \) of \( \Gamma \) and, for every index \( k \) from \( \mscrK \), a homomorphism \( \beta_k: \mscrY \to \mscrX_k \), then there exists a homomorphism \( l_\mscrY: \mscrY \to \prod_{k \in \mscrK} \mscrX_k \) such that the following diagram commutes:
    \begin{equation}\label{eq:thm:direct_product_universal_property}
      \begin{aligned}
        \includegraphics[page=1]{output/thm__direct_product_universal_property}
      \end{aligned}
    \end{equation}
  \end{displayquote}
\end{theorem}
\begin{proof}
  Let \( \mscrX_k = (X_k, I_k) \) and \( \mscrY = (Y, J) \). Denote by \( I \) the interpretation in \( \prod_{k \in \mscrK} \mscrX_k \). \Fullref{thm:cartesian_product_universal_property} shows that
  \begin{equation*}
    \begin{aligned}
      &l_\mscrY: Y \to \prod_{k \in \mscrK} X_k \\
      &l_\mscrY(b) \coloneqq \seq{ \beta_k(b) }_{k \in \mscrK}
    \end{aligned}
  \end{equation*}
  is the unique function satisfying the universal property for Cartesian products.

  We must only show that it is a homomorphism.

  \SubProofOf{def:fol_homomorphism/functions} For every \( n \)-ary functional symbol \( f \), we have
  \begin{align*}
    l_\mscrY\parens[\big]{ J(f)(b_1, \ldots, b_n) }
    &=
    \seq[\big]{ \beta_k(J(f)(b_1, \ldots, b_n)) }_{k \in \mscrK}
    = \\ &=
    \seq[\big]{ I_k(f)(\beta_k(b_1), \ldots, \beta_k(b_n)) }_{k \in \mscrK}
    = \\ &=
    I(f)\parens[\big]{ \seq{ \beta_k(b_1) }_{k \in \mscrK}, \ldots, \seq{ \beta_k(b_n) }_{k \in \mscrK} }
    = \\ &=
    I(f)\parens[\big]{ l_\mscrY(b_1), \ldots, l_\mscrY(b_n) }.
  \end{align*}

  \SubProofOf{def:fol_homomorphism/predicates} Fix an \( n \)-ary predicate symbol \( p \). Suppose that
  \begin{equation*}
    J(p)(b_1, \ldots, b_n) = \semtop.
  \end{equation*}

  Then
  \begin{equation*}
    I(p)\parens[\big]{ l_\mscrY(b_1), \ldots, l_\mscrY(b_n) }
    =
    \bigwedge_{k \in \mscrK} I_k(p)\parens[\big]{ \beta_k(b_1), \ldots, \beta_k(b_n) }
    \geq
    J(p)(b_1, \ldots, b_n)
    =
    \semtop.
  \end{equation*}
\end{proof}

\begin{proposition}\label{thm:fol_homomorphism_as_substructure}
  Let \( \mscrX = (X, I) \) and \( \mscrY = (Y, J) \) be \hyperref[def:fol_structure]{structures} over the \hyperref[def:fol_signature]{signature} \( \Sigma \) \hi{without predicate symbols}. The \hyperref[def:function]{set-theoretic function} \( h: X \to Y \) is a \hyperref[def:fol_homomorphism]{homomorphism} if and only if it is (the domain of) a \hyperref[def:fol_substructure/submodel]{substructure} of the \hyperref[def:fol_direct_product]{direct product} \( \mscrX \times \mscrY \).
\end{proposition}
\begin{proof}
  \SufficiencySubProof Suppose that \( h: X \to Y \) is a homomorphism. We must show that \( h \) is closed under function application in \( \mscrX \times \mscrY \). Denote by \( K \) the interpretation in the structure \( \mscrX \times \mscrY \).

  Let \( f \) be an \( n \)-ary function symbol from \( \Sigma \). Then, for any \( n \)-tuple of pairs \( (a_1, b_1), \ldots, (a_n, b_n) \) from \( h \), we have
  \begin{equation*}
    K(f)\parens[\big]{ (a_1, b_1), \ldots, (a_n, b_n) }
    =
    \parens[\big]{ I(f)\parens[\big]{ a_1, \ldots, a_n }, J(f)\parens[\big]{ \underbrace{b_1}_{h(a_1)}, \ldots, \underbrace{b_n}_{h(a_n)} } }.
  \end{equation*}

  Since \( h \) satisfies \cref{def:fol_homomorphism/functions}, it follows that
  \begin{equation*}
    h\parens[\big]{ I(f)(a_1, \ldots, a_n) } = J(f)\parens[\big]{ h(a_1), \ldots, h(a_n) },
  \end{equation*}
  and thus
  \begin{equation*}
    K(f)\parens[\big]{ (a_1, b_1), \ldots, (a_n, b_n) }
  \end{equation*}
  belongs to \( h \).

  Therefore, due to \cref{thm:fol_substructure_characterization}, \( h \) is a substructure of \( \mscrX \times \mscrY \).

  \NecessitySubProof Conversely, suppose that \( h \) is (the domain of) a substructure of \( \mscrX \times \mscrY \). Again, denote by \( K \) the interpretation in \( \mscrX \times \mscrY \).

  We must show that \( h \) is a homomorphism. There are no predicate symbols, so we must only verify \cref{def:fol_homomorphism/functions}.

  Fix an \( n \)-ary functional symbol \( f \) and an \( n \)-tuple \( a_1, \ldots, a_n \) from \( X \). The pair \( (a_k, h(a_k)) \) obviously belongs to \( h \) for every \( k = 1, \ldots, n \). Since \( h \) is closed under application of \( I(f) \), it must contain
  \begin{equation*}
    K(f)\parens[\big]{ (a_1, h(a_1)), \ldots, (a_n, h(h_n)) }
    =
    \parens[\big]{ I(f)\parens[\big]{ a_1, \ldots, a_n }, J(f)\parens[\big]{ h(a_1), \ldots, h(a_n) } }.
  \end{equation*}

  Therefore,
  \begin{equation*}
    h\parens[\big]{ I(f)(a_1, \ldots, a_n) } = J(f)\parens[\big]{ h(a_1), \ldots, h(a_n) }.
  \end{equation*}
\end{proof}
