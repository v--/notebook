% I start my own macros with capital letters so that it is known that they are custom.
% The only exception is fullref

\usepackage{xspace} % \xspace
\usepackage{crossreftools} % \crtcrossreflabel
\usepackage{nameref} % \nameref
\usepackage{refcount} % \getrefbykeydefault
\usepackage{graphicx} % \scalebox

% Shorthands
\newcommand           \Cal       [1] {\symcal #1}
\newcommand           \BB        [1] {\symbb #1}
\newcommand           \Bold      [1] {\operatorname{\symbf{#1}}}
\newcommand           \Cat       [1] {\Bold{#1}}
\newcommand           \Op        [1] {\operatorname{#1}}
\newcommand           \Ol        [1] {\overline{#1}}
\newcommand           \Ti        [1] {\tilde{#1}}
\newcommand           \Ul        [1] {\underline{#1}}
\newcommand           \Vect      [1] {\overrightarrow{#1}}
\newcommand           \MultTo        {\rightrightarrows}
\newcommand           \Derives       {\overset * \implies}
\newcommand           \Co            {\operatorname{co}\!}
\newcommand           \Iff           {\Leftrightarrow}
\newcommand           \Implies       {\Rightarrow}
\newcommand           \ImpliedBy     {\Leftarrow}
% https://tex.stackexchange.com/questions/41186/big-asterisk-bigast-symbol
\newcommand           \Ast           {\mathop{\scalebox{1.5}{\raisebox{-0.2ex}{$\ast$}}}}

% Blackboard letters
\newcommand           \BN            {\BB N}
\newcommand           \BZ            {\BB Z}
\newcommand           \BQ            {\BB Q}
\newcommand           \BR            {\BB R}
\newcommand           \BC            {\BB C}
\newcommand           \Bk            {\BB k}
\newcommand           \BK            {\BB K}
\newcommand           \BF            {\BB F}

% Calligraphic letters
\DeclareMathOperator  \CA            {\Cal A}
\DeclareMathOperator  \CB            {\Cal B}
\DeclareMathOperator  \CC            {\Cal C}
\DeclareMathOperator  \CG            {\Cal G}
\DeclareMathOperator  \CH            {\Cal H}
\DeclareMathOperator  \CF            {\Cal F}
\DeclareMathOperator  \CK            {\Cal K}
\DeclareMathOperator  \CL            {\Cal L}
\DeclareMathOperator  \CM            {\Cal M}
\DeclareMathOperator  \CN            {\Cal N}
\DeclareMathOperator  \CO            {\Cal O}
\DeclareMathOperator  \CP            {\Cal P}
\DeclareMathOperator  \CR            {\Cal R}
\DeclareMathOperator  \CS            {\Cal S}
\DeclareMathOperator  \CT            {\Cal T}
\DeclareMathOperator  \CU            {\Cal U}
\DeclareMathOperator  \CV            {\Cal V}
\DeclareMathOperator  \CX            {\Cal X}
\DeclareMathOperator  \CY            {\Cal Y}

% Other shortcuts
\DeclareMathOperator  \ATanTwo       {arctan2}
\DeclareMathOperator  \OO            {O}
\DeclareMathOperator  \GL            {GL}

% Math text
\newcommand           \Tand          {\text{ and }}
\newcommand           \Tor           {\text{ or }}
\newcommand           \Timplies      {\text{ implies }}
\newcommand           \Tiff          {\text{ if and only if }}
\newcommand           \Tforall       {\text{ for all }}
\newcommand           \Twhenever     {\text{ whenever }}
\newcommand           \Ttimes        {\text{ times }}
\newcommand           \Totherwise    {\text{ otherwise }}
\newcommand           \TIndHyp       {\substack{\text{inductive} \\ \text{hypothesis}}}

% Operations
\newcommand           \Abs       [1] {\left\vert #1 \right\vert}
\newcommand           \Norm      [1] {\left\Vert #1 \right\Vert}
\newcommand           \Gen       [1] {\left\langle #1 \right\rangle}
\newcommand           \Prod      [2] {\left\langle #1, #2 \right\rangle}

% Operators
\DeclareMathOperator  \Ann           {ann}
\DeclareMathOperator  \Aut           {aut}
\DeclareMathOperator  \Bd            {bd}
\DeclareMathOperator  \Card          {card}
\DeclareMathOperator  \Ceil          {ceil}
\DeclareMathOperator  \Char          {char}
\DeclareMathOperator  \Cl            {cl}
\DeclareMathOperator  \Conv          {conv}
\DeclareMathOperator  \Der           {der}
\DeclareMathOperator  \Diam          {diam}
\DeclareMathOperator  \Dist          {dist}
\DeclareMathOperator  \Dom           {dom}
\DeclareMathOperator  \End           {end}
\DeclareMathOperator  \Epi           {epi}
\DeclareMathOperator  \Floor         {floor}
\DeclareMathOperator  \Frac          {frac}
\DeclareMathOperator  \Func          {func}
\DeclareMathOperator  \Gph           {gph}
\DeclareMathOperator  \Hom           {hom}
\DeclareMathOperator  \Id            {id}
\DeclareMathOperator  \Imag          {imag}
\DeclareMathOperator  \Img           {im}
\DeclareMathOperator  \Int           {int}
\DeclareMathOperator  \LC            {LC}
\DeclareMathOperator  \Len           {len}
\DeclareMathOperator  \Ord           {ord}
\DeclareMathOperator  \Pow           {pow}
\DeclareMathOperator  \Quot          {quot}
\DeclareMathOperator  \Ran           {ran}
\DeclareMathOperator  \Rank          {rank}
\DeclareMathOperator  \Real          {real}
\DeclareMathOperator  \Rev           {rev}
\DeclareMathOperator  \Rem           {rem}
\DeclareMathOperator  \Sign          {sign}
\DeclareMathOperator  \Span          {span}
\DeclareMathOperator  \Spec          {spec}
\DeclareMathOperator  \Supp          {supp}

% Index
\newcommand \IndexEntry          [2] {\index{#2}\textsuperscript{\hyperref[sec:index]{#1}}\xspace}
\newcommand \AOC                     {\IndexEntry{AOC}{Axiom of choice}}
\newcommand \LEM                     {\IndexEntry{LEM}{Law of the excluded middle}}
\newcommand \USC                     {\IndexEntry{USC}{Compactness of the unit sphere}}
\newcommand \IND                     {\IndexEntry{IND}{Induction}}

% Items
\newlist{RefList}{itemize}{2}
\newcommand  \ILabel        [1] {\item\label{#1}}
\newcommand  \IAxiom        [2] {\item[{\crtcrossreflabel{#2}[#1]}]}
\newcommand  \IRef          [1] {\item[\ref{#1}]}

% Misc
\newcommand \URL                 [1] {\href{#1}{\texttt{#1}}}
\newcommand \Caption             [2] {\caption{#2}\crtcrossreflabel{}[#1]}

\newcommand \MarginCite [2][] {%
  \leavevmode\marginpar{%
    \raggedleft\footnotesize{%
      \cite{#2} \\ \mbox{\vbox{%
        % https://tex.stackexchange.com/a/50131
        \ifnum0<0#1\relax
          page #1
        \else
          #1
        \fi
      }}%
    }%
  }%
}

% https://tex.stackexchange.com/a/66096
\newcommand \fullref [1] {%
  \cref{#1}%
  \if\vcenter\getrefbykeydefault{#1}{name}{}\vcenter
  \else
    \ (\nameref{#1})%
  \fi
}

\newcommand \Fullref [1] {%
  \Cref{#1}%
  \if\vcenter\getrefbykeydefault{#1}{name}{}\vcenter
  \else
    \ (\nameref{#1})%
  \fi
}

% https://tex.stackexchange.com/questions/34312/how-to-create-a-command-with-key-values
\directlua{require "lua/footnote_translations.lua"}
\newcommand \Def [2][] {%
  \textbf{#2}%
  \directlua{
    footnote_translations("\luaescapestring{\unexpanded{#1}}")
  }%
}
