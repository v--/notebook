\ExplSyntaxOn

%% In order to speed up compilation, I usually use pdflatex for development.
\sys_if_engine_luatex:F
  {
    % Imitate some macros from unicode-math
    \DeclareMathOperator \Alpha   {A}
    \DeclareMathOperator \Beta    {B}
    \DeclareMathOperator \Eta     {H}
    \DeclareMathOperator \Tau     {T}
    \DeclareMathOperator \Iota    {I}
    \DeclareMathOperator \omicron {o}

    % https://tex.stackexchange.com/a/564222
    \NewDocumentCommand \DefineAlphabet {mmmm}
      {% #1 = prefix, #2 = command, #3 = start, #4 = end
        \int_step_inline:nnn { `#3 } { `#4 }
          {
            \cs_new_protected:cpx { #1 \char_generate:nn { ##1 }{ 11 } }
              {
                \exp_not:N #2 { \char_generate:nn { ##1 } { 11 } }
              }
          }
      }

    \let\Bbbk\relax

    \DefineAlphabet {Bbb}   \mathbb   {A} {Z}
    \DefineAlphabet {Bbb}   \mathbb   {a} {z}
    \DefineAlphabet {mscr}  \mathcal  {A} {Z}
    \DefineAlphabet {mscr}  \mathcal  {a} {z}
    \DefineAlphabet {mfrak} \mathfrak {A} {Z}
    \DefineAlphabet {mfrak} \mathfrak {a} {z}

    \let\DefineAlphabet\relax

    % stix2 doesn't behave well with text symbols, so I use math symbols instead
    \cs_if_exist:cT {setlist}
      {
        \setlist[itemize,1]{label=\( \bullet \)}
        \setlist[itemize,3]{label=\( \ast \)}
      }

    \cs_if_exist:cT {AtBeginBibliography}
      {
        \AtBeginBibliography
          {
            \fontencoding{T2A}
            \selectfont
          }
      }
  }

\ExplSyntaxOff
