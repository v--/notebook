\ExplSyntaxOn

%% In order to speed up compilation, I usually use pdflatex for development.
\sys_if_engine_luatex:TF
  {
    \RequirePackage{fontspec}
    \RequirePackage
      [
        warnings-off={mathtools-colon,mathtools-overbracket}
      ]
      {unicode-math}

    \setmainfont{STIX~Two~Text}
    \setsansfont{Libertinus~Sans}
    \setmathfont{STIX~Two~Math}
  }
  {
    \RequirePackage[T2A,T1]{fontenc}
    \RequirePackage[not1,notextcomp]{stix2} % Serf and math font families; load after amsmath despite documentation, it breaks otherwise
    \RequirePackage[sans,tt=false,ScaleRM=1.075]{libertinus} % Sans-serif
    \DeclareFontFamilySubstitution{T2A}{stix2}{LibertinusSerif-TLF} % Fallback font that looks similar to STIX Two Text
  }

\ExplSyntaxOff
