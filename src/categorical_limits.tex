\subsection{Categorical limits}\label{subsec:categorical_limits}

\begin{definition}\label{def:comma_category}\mcite[def. 2.3.1]{Leinster2016Basic}
  Comma categories allow us to define morphisms between morphisms, which becomes useful in, for example, the concise definition of a limit in \fullref{def:category_of_cones/limit}.

  \begin{thmenum}
    \thmitem{def:comma_category/variable} We first prove the most general construction. Let \( F: \cat{A} \to \cat{C} \) and \( G: \cat{B} \to \cat{C} \) be any two functors with a common codomain. We define their \term{comma category} \( (F \downarrow G) \) as follows:

    \begin{itemize}
      \item The \hyperref[def:category/objects]{set of objects} \( \obj(F \downarrow G) \) is the set of triples \( (A, s, B) \), where \( A \in \cat{A} \), \( B \in \cat{B} \) and \( s: F(A) \to G(B) \).

      \item The \hyperref[def:category/morphisms]{set of morphisms} \( [F \downarrow G]((A, s, B), (A', s', B')) \) is the set of pairs
      \begin{equation*}
        (f: A \to A', g: B \to B'),
      \end{equation*}
      such that the following diagram commutes:
      \begin{equation}\label{eq:def:comma_category/variable}
        \begin{aligned}
          \includegraphics[page=1]{output/def__comma_category.pdf}
        \end{aligned}
      \end{equation}

      \item The \hyperref[def:category/composition]{composition of morphisms} is their pairwise composition, analogically to \hyperref[def:product_category]{product categories}.

      \item The \hyperref[def:category/identity]{identity morphism} on the object \( (A, s, B) \) is the identity pair \( (\id_A, \id_B) \).
    \end{itemize}

    \thmitem{def:comma_category/fixed} It is often the case where either \( F \) or \( G \) are constant. If, instead of \( G \), we are given an object \( X \) in \( \cat{C} \), we use the constant functor \( \Delta_X^{\cat{1}}: \cat{1} \to \cat{C} \) with domain the \hyperref[def:universal_categories]{terminal category} \( \cat{1} \), in order to use the comma category \( (F \downarrow \Delta_X^{\cat{1}}) \).

    We can thus simplify \fullref{def:comma_category/variable} as follows:

    \begin{minipage}[t]{0.43\textwidth}
      \begin{equation*}
        (F \downarrow X) \coloneqq (F \downarrow \Delta_X^{\cat{1}}).
      \end{equation*}

      \begin{itemize}
        \item The \hyperref[def:category/objects]{set of objects} \( \obj(F \downarrow X) \) is
        \begin{equation*}
          \set{ (A, s) \given s: F(A) \to X }
        \end{equation*}

        \item The \hyperref[def:category/morphisms]{hom-set}
        \begin{equation*}
          [F \downarrow X]\parens[\Big]{ (A, s), (A', s') }
        \end{equation*}
        is the set of \( f: A \to A' \), such that
        \begin{equation}\label{eq:def:comma_category/fixed/right}
          \begin{aligned}
            \includegraphics[page=2]{output/def__comma_category.pdf}
          \end{aligned}
        \end{equation}
      \end{itemize}
    \end{minipage}
    \begin{minipage}[t]{0.43\textwidth}
      \begin{equation*}
        (X \downarrow G) \coloneqq (\Delta_X^{\cat{1}} \downarrow G)
      \end{equation*}

      \begin{itemize}
        \item The \hyperref[def:category/objects]{set of objects} \( \obj(X \downarrow G) \) is
        \begin{equation*}
          \set{ (s, B) \given s: X \to F(B) }
        \end{equation*}

        \item The \hyperref[def:category/morphisms]{hom-set}
        \begin{equation*}
          [X \downarrow G]\parens[\Big]{ (s, B), (s', B') }
        \end{equation*}
        is the set of \( g: B \to B' \), such that
        \begin{equation}\label{eq:def:comma_category/fixed/left}
          \begin{aligned}
            \includegraphics[page=3]{output/def__comma_category.pdf}
          \end{aligned}
        \end{equation}
      \end{itemize}
    \end{minipage}
  \end{thmenum}
\end{definition}

\begin{definition}\label{def:category_of_cones}
  Let \( D: \cat{I} \to \cat{C} \) be a \hyperref[def:categorical_diagram]{diagram}.

  \begin{thmenum}
    \thmitem{def:category_of_cones/category} We define \term{category of cones} to \( D \) as the \hyperref[def:comma_category/fixed]{constant-functor comma category}
    \begin{equation*}
      \cat{Cone}(D) \coloneqq \underbrace{ (\Delta^{\cat{I}} \downarrow D) }_{(\Delta^{\cat{I}} \downarrow \Delta^{\cat{1}}_{D})},
    \end{equation*}
    where \( \Delta^{\cat{I}}: \cat{C} \to [\cat{I}, \cat{C}] \) is the \( \cat{I} \)-shaped \hyperref[def:diagonal_functor]{diagonal functor} on \( \cat{C} \).

    \thmitem{def:category_of_cones/cone} A \term{cone} is simply a member of \( \cat{Cone}(D) \).

    Explicitly, a cone with \term{vertex} \( A \in \cat{C} \) is a pair \( (\Delta^{\cat{I}}_A, \alpha) \), where \( \Delta^{\cat{I}}_A \) is the constant functor at \( A \) and \( \alpha \) is a natural transformation from \( \Delta^{\cat{I}}_A \) to \( D \).

    Even more explicitly, a cone is a family of morphisms
    \begin{equation}\label{eq:def:category_of_cones/cone}
      \seq{ \alpha_i: A \to D(i) }_{i \in \cat{I}}.
    \end{equation}
    satisfying a simplified naturality condition (compared to \eqref{eq:def:natural_transformation/diagram}). For every morphism \( u: i \to j \) in \( \cat{I} \), the following diagram must commute:
    \begin{equation}\label{eq:def:category_of_cones/cone_nat}
      \begin{aligned}
        \includegraphics[page=1]{output/def__category_of_cones.pdf}
      \end{aligned}
    \end{equation}

    Note that this diagram is very different from \eqref{eq:def:comma_category/fixed/right}, they merely look similar.

    \thmitem{def:category_of_cones/limit} A \term{limit} of the diagram \( D \) is a \hyperref[def:universal_objects/terminal]{terminal object} of the cone category \( \cat{Cone}(D) \).

    Explicitly, a limit is a cone \( (L, \pi) \) such that, for every cone \( (A, \alpha) \), there exists a unique \hyperref[eq:def:comma_category/fixed]{cone morphism} \( l_A: (A, \alpha) \to (L, \pi) \).

    Even more explicitly, a limit is a cone \( (L, \pi) \) satisfying the following \hyperref[rem:universal_mapping_property]{universal mapping property}:
    \begin{displayquote}
      For every cone \( (A, \alpha) \), there exists a unique morphism \( l_A: A \to L \) such that following diagram commutes for every index morphism \( u: i \to j \):
      \begin{equation}\label{eq:def:category_of_cones/limit}
        \begin{aligned}
          \includegraphics[page=2]{output/def__category_of_cones.pdf}
        \end{aligned}
      \end{equation}
    \end{displayquote}

    From \fullref{thm:def:universal_objects/properties/terminal} and \fullref{thm:universal_objects_as_adjunctions/terminal} it follows that a limit, if it exists, is unique up to a unique isomorphism.

    Limits are also called \term{projective limits} and, somewhat confusingly, \term{inverse limits}. The components of the natural transformation \( \pi \) are commonly called \term{canonical projections}.

    Without further context, we usually refer to \( L \) as \hi{the} limit and \( (L, \pi) \) as the limit cone.

    \thmitem{def:category_of_cones/cocone} \hyperref[thm:categorical_principle_of_duality]{Dually}, a \term{cocone} with vertex \( A \) is a family of morphisms
    \begin{equation}\label{eq:def:category_of_cones/cocone}
      \seq{ \alpha_i: D(i) \to A }_{i \in \cat{I}}.
    \end{equation}
    satisfying the naturality condition that for every morphism \( u: i \to j \) in \( \cat{I} \), the following diagram must commute:
    \begin{equation}\label{eq:def:category_of_cones/cocone_nat}
      \begin{aligned}
        \includegraphics[page=3]{output/def__category_of_cones.pdf}
      \end{aligned}
    \end{equation}

    \thmitem{def:category_of_cones/colimit} A \term{colimit} of the diagram \( D \) is an \hyperref[def:universal_objects/initial]{initial object} of the cocone category \( (D \downarrow \Delta) \).

    There are two major differences compared to limits: a colimit is an initial object, not a terminal object, and its underlying comma category is \( (D \downarrow \Delta) \), not \( (\Delta^{\cat{I}} \downarrow D) \).

    The analogous diagram to \eqref{eq:def:category_of_cones/limit} is exactly its \hyperref[thm:categorical_principle_of_duality]{dual}:
    \begin{equation}\label{eq:def:category_of_cones/colimit}
      \begin{aligned}
        \includegraphics[page=4]{output/def__category_of_cones.pdf}
      \end{aligned}
    \end{equation}

    Colimits are also called \term{inductive limits} and, somewhat confusingly, \term{direct limits}. The components of the natural transformation \( \pi \) are commonly called \term{canonical coprojections}.

    Without further context, we usually refer to \( L \) as \hi{the} colimit and \( (L, \iota) \) as the colimit cone.
  \end{thmenum}
\end{definition}

\begin{proposition}\label{thm:categorical_limit_duality}
  For every \hyperref[def:category_of_cones/cone]{cone} \( (A, \alpha) \) of the \hyperref[def:categorical_diagram]{diagram} \( D \) in \( \cat{C} \), \( (A, \alpha^{\opcat}) \) is a \hyperref[def:category_of_cones/cone]{cocone} of \( D^{\opcat} \) in the \hyperref[def:dual_category]{dual category} \( \cat{C}^{\opcat} \).

  Even more, for every \hyperref[def:category_of_cones/limit]{limit} \( (L, \pi) \) of \( D \) in \( \cat{C} \), \( (L, \pi^{\opcat}) \) is a \hyperref[def:category_of_cones/colimit]{colimit} of \( D^{\opcat} \) in \( \cat{C}^{\opcat} \).

  This is part of the duality principles listed in \fullref{thm:categorical_principle_of_duality}.
\end{proposition}
\begin{proof}
  Note that the defining diagrams \eqref{eq:def:category_of_cones/cone}, \eqref{eq:def:category_of_cones/cone_nat} and \eqref{eq:def:category_of_cones/limit} are dual to \eqref{eq:def:category_of_cones/cocone}, \eqref{eq:def:category_of_cones/cocone_nat} and \eqref{eq:def:category_of_cones/colimit}.
\end{proof}

\begin{lemma}\label{thm:categorical_limit_uniqueness_lemma}
  Any two limits (resp. colimits) of a diagram are isomorphic.

  We prove a stronger result in \fullref{thm:categorical_limit_uniqueness}.
\end{lemma}
\begin{proof}
  Let \( (L', \pi') \) and \( (L^\dprime, \pi^\dprime) \) be two limits over the diagram \( D: \cat{I} \to \cat{C} \). The definition \eqref{eq:def:category_of_cones/limit} of a limit implies that
  \begin{equation}\label{eq:thm:categorical_limit_uniqueness}
    \begin{aligned}
      \includegraphics[page=1]{output/thm__categorical_limit_uniqueness.pdf}
    \end{aligned}
  \end{equation}
  commutes.

  Therefore, the limits \( L' \) and \( L^\dprime \) are isomorphic.

  Now let \( (L', \pi') \) and \( (L^\dprime, \pi^\dprime) \) be colimits. By \fullref{thm:categorical_limit_duality}, \( (L', \pi'^{\opcat}) \) and \( (L^\dprime, {\pi^\dprime}^{\opcat}) \) are limits in the dual category and are thus isomorphic. By \fullref{thm:morphism_invertibility_duality}, the colimits are isomorphic.
\end{proof}

\begin{proposition}\label{thm:categorical_limit_is_adjoint}
  Suppose that, for a given category \( \cat{C} \), the limits over all \( \cat{I} \)-shaped diagrams exist. Denote by \( \lim(D) \) the vertex of the limiting cone of the diagram \( D \).

  Given a natural transformation \( \alpha: D \to E \) between diagrams, the diagram \eqref{eq:thm:categorical_limit_is_adjoint/c_triangle} defining a limit uniquely determines a morphism \( \lim(D) \) to \( \lim(E) \). Denote this morphism by \( \lim(\alpha) \).

  We have defined a functor
  \begin{equation*}
    \lim: [\cat{I}, \cat{C}] \to \cat{C}.
  \end{equation*}

  This functor is \hyperref[def:category_adjunction]{right adjoint} to the diagonal functor
  \begin{equation*}
    \Delta: \cat{C} \to [\cat{I}, \cat{C}]
  \end{equation*}

  \hyperref[thm:categorical_principle_of_duality]{Dually}, the colimit functor
  \begin{equation*}
    \co\lim: [\cat{I}, \cat{C}] \to \cat{C}
  \end{equation*}
  is left adjoint to \( \Delta \).
\end{proposition}
\begin{proof}
  It is sufficient to prove this for limits since the statement for colimits follows from the duality principles \fullref{thm:category_adjunction_duality} and \fullref{thm:categorical_limit_duality}. The unit \( \eta: \id_{\cat{C}} \to [{\lim} \bincirc \Delta] \) of the adjunction
  \begin{equation*}
    \Delta \dashv \lim
  \end{equation*}
  is the unique morphism from an object \( A \) of \( \cat{C} \) to the limit of its constant diagram \( \Delta_A: \cat{I} \to \cat{C} \) such that \eqref{eq:def:category_of_cones/limit} commutes. The counit is more complicated because its components are themselves natural transformations:
  \begin{equation*}
    \begin{aligned}
      \varepsilon:       &[\Delta \bincirc \lim] \Rightarrow \id_{[\cat{I}, \cat{C}]} \\
      \varepsilon_D:     &\Delta(\lim D) \Rightarrow D \\
      \varepsilon_{D,i}: &\lim(D) \to D(i),
    \end{aligned}
  \end{equation*}
  where \( \varepsilon_{D,i} \) are the projections of the limit.

  For any diagram \( D: \cat{I} \to \cat{C} \), the following triangle commutes:
  \begin{equation}\label{eq:thm:categorical_limit_is_adjoint/ic_triangle}
    \begin{aligned}
      \includegraphics[page=1]{output/thm__categorical_limit_is_adjoint.pdf}
    \end{aligned}
  \end{equation}

  Indeed,
  \begin{equation*}
    \eta_{\lim(D)}: \lim(D) \to \smash{ \overbrace{\lim(\Delta_{\lim(D)})}^{[{\lim} \bincirc \Delta \bincirc {\lim}](D)} }
  \end{equation*}
  is the unique morphism such that \eqref{eq:def:category_of_cones/limit} commutes, and (somewhat) similarly for
  \begin{equation*}
    \lim(\varepsilon_D): [{\lim} \bincirc \Delta \bincirc {\lim}](D) \to \lim(D).
  \end{equation*}

  It follows that both \( \lim(D) \) and \( [{\lim} \bincirc \Delta \bincirc {\lim}](D) \) are limits over the same diagram. By \fullref{thm:categorical_limit_is_adjoint}, they are isomorphic, and hence \eqref{eq:thm:categorical_limit_is_adjoint/ic_triangle} commutes.

  Also, for any object \( A \) in \( \cat{C} \), the following triangle also commutes:
  \begin{equation}\label{eq:thm:categorical_limit_is_adjoint/c_triangle}
    \begin{aligned}
      \includegraphics[page=2]{output/thm__categorical_limit_is_adjoint.pdf}
    \end{aligned}
  \end{equation}

  Indeed,
  \begin{equation*}
    \Delta(\eta_A) = \seq{ \eta_A: A \to \lim(\Delta_A) }_{i \in \cat{I}}
  \end{equation*}
  is the constant family consisting of \( \eta_A \) and
  \begin{equation*}
    \varepsilon_{\Delta(A)} = \seq{ \pi_i^{\Delta_A}: \lim(\Delta_A) \to \underbrace{\Delta_A(i)}_{A} }_{i \in \cat{I}}.
  \end{equation*}
  is a constant family of the single projection of the limit to \( A \). From the commutativity of \eqref{eq:def:category_of_cones/limit} it follows that \eqref{eq:thm:categorical_limit_is_adjoint/c_triangle} also commutes.
\end{proof}

\begin{corollary}\label{thm:categorical_limit_uniqueness}
  A limit (resp. colimit) of a diagram, if it exists, is unique up to a unique isomorphism.

  This statement strengthens \fullref{thm:categorical_limit_uniqueness_lemma}.
\end{corollary}
\begin{proof}
  Follows from \fullref{thm:functor_adjoint_uniqueness} and \fullref{thm:categorical_limit_is_adjoint}.
\end{proof}

\begin{remark}\label{rem:limit_universal_mapping_property}
  The limit diagram \eqref{eq:def:category_of_cones/limit} may seem unrelated to the universal mapping properties discussed in \fullref{rem:universal_mapping_property}, however it is actually a special case.

  Suppose that, for a given category \( \cat{C} \), the limits over all \( \cat{I} \)-shaped diagrams exist and fix a diagram \( D: \cat{I} \to \cat{C} \). Consider the functors
  \begin{align*}
    \lim:   &[\cat{I}, \cat{C}] \to \cat{C} \\
    \Delta: &\cat{C} \to [\cat{I}, \cat{C}]
  \end{align*}
  discussed in \fullref{thm:categorical_limit_is_adjoint}. We have established that \( \Delta \dashv \lim \).

  For every diagram \( D: \cat{I} \to \cat{C} \), there exist unique up to a unique isomorphism object \( \lim(D) \) in \( \cat{C} \) and canonical projection map \( \pi: [\Delta \bincirc {\lim}(D)] \to D \) satisfying the following universal mapping property:
  \begin{displayquote}
    For every object \( A \) in \( \cat{C} \) and for every natural transformation \( \alpha: \Delta(A) \Rightarrow D \), there exists a unique morphism \( l: A \to \lim(D) \) such that the following diagram commutes:
    \begin{equation}\label{eq:rem:limit_universal_mapping_property/ic_triangle}
      \begin{aligned}
        \includegraphics[page=1]{output/rem__limit_universal_mapping_property.pdf}
      \end{aligned}
    \end{equation}
  \end{displayquote}

  For a fixed index object \( i \in \cat{I} \), this becomes:
  \begin{equation}\label{eq:rem:limit_universal_mapping_property/c_triangle_basic}
    \begin{aligned}
      \includegraphics[page=2]{output/rem__limit_universal_mapping_property.pdf}
    \end{aligned}
  \end{equation}

  The defining diagram \eqref{eq:def:category_of_cones/limit} of a limit simply encodes the cone naturality condition \eqref{eq:def:category_of_cones/cone_nat} into \eqref{eq:rem:limit_universal_mapping_property/c_triangle_basic}.

  Except for being simpler to check, limits defined via universal mapping properties have the advantage (compared to adjoint functors) that limits can exist for some diagrams and not for others.

  The construction for colimits is dual.
\end{remark}

\begin{proposition}\label{thm:limits_of_identity_functor}
  Fix an arbitrary category \( \cat{C} \).

  \begin{thmenum}
    \thmitem{thm:limits_of_identity_functor/initial_object_is_limit} If \( I \) is an \hyperref[def:universal_object/initial]{initial object} of \( \cat{C} \), \( (I, \xi) \) is a limit cone of the \hyperref[eq:def:category_of_small_categories/identity]{identify functor} \( \id_{\cat{C}} \), where
    \begin{equation*}
      \xi \coloneqq \seq{ \xi_A: I \to A }_{A \in \cat{C}}
    \end{equation*}
    is the family of unique morphisms with domain \( I \).

    \thmitem{thm:limits_of_identity_functor/limit_is_initial_object} Conversely, if \( (L, \pi) \) is a limit cone of the identity, then \( L \) is an initial object.
  \end{thmenum}

  \hyperref[thm:categorical_principle_of_duality]{Dually}, by \fullref{thm:universal_object_duality} and \fullref{thm:categorical_limit_duality}, the cocones (and colimits) of the identity functor are the terminal objects.
\end{proposition}
\begin{proof}
  \SubProofOf{thm:limits_of_identity_functor/initial_object_is_limit} For an initial object \( I \) with morphisms \( \xi \), and for any morphism \( f: B \to C \), from the uniqueness of the arrows in \( \xi \) it follows that \( \xi_C = f \bincirc \xi_B \). Thus, the following naturality diagram commutes:
  \begin{equation}\label{eq:def:thm:limits_of_identity_functor/initial_object_is_limit/nat}
    \begin{aligned}
      \includegraphics[page=1]{output/thm__limits_of_identity_functor.pdf}
    \end{aligned}
  \end{equation}

  Therefore, \( (I, \xi) \) is a cone.

  Now let \( (A, \alpha) \) be another cone. The naturality of \( \alpha \) implies that the following diagram commutes for every object \( B \):
  \begin{equation}\label{eq:def:thm:limits_of_identity_functor/initial_object_is_limit/half_limit}
    \begin{aligned}
      \includegraphics[page=2]{output/thm__limits_of_identity_functor.pdf}
    \end{aligned}
  \end{equation}

  In particular, since \( \xi_I = \id_I \), for every morphism \( g: A \to I \) we have
  \begin{equation}\label{eq:def:thm:limits_of_identity_functor/initial_object_is_limit/cone_morphism_uniqueness}
    \begin{aligned}
      \includegraphics[page=3]{output/thm__limits_of_identity_functor.pdf}
    \end{aligned}
  \end{equation}
  which shows that \( \alpha_I = g \) and thus \( \alpha_I \) is the unique morphism from \( A \) to \( I \).

  Therefore, for any morphism \( f: B \to C \), the following diagram commutes:
  \begin{equation}\label{eq:def:thm:limits_of_identity_functor/initial_object_is_limit/limit}
    \begin{aligned}
      \includegraphics[page=4]{output/thm__limits_of_identity_functor.pdf}
    \end{aligned}
  \end{equation}

  This is precisely the defining diagram for a limit cone. Therefore, \( (I, \xi) \) is a limit.

  \SubProofOf{thm:limits_of_identity_functor/limit_is_initial_object} Let \( (L, \pi) \) be a limit cone of the identity. The component \( \pi_B \) of the natural transformation \( \pi \) is a morphism from \( L \) to \( B \). In order for \( L \) to be an initial object, these morphisms must be unique.

  Since \( (L, \pi) \) is a limit cone, for any cone \( (A, \alpha) \) and any morphism \( f: B \to C \), there exists a unique morphism \( l_A: A \to L \) such that the following diagram commutes:
  \begin{equation}\label{eq:def:thm:limits_of_identity_functor/limit_is_initial_object/limit}
    \begin{aligned}
      \includegraphics[page=5]{output/thm__limits_of_identity_functor.pdf}
    \end{aligned}
  \end{equation}

  In particular, there exists a unique map \( l_L: L \to L \) for the cone \( (L, \pi) \) such that the following diagram commutes:
  \begin{equation}\label{eq:def:thm:limits_of_identity_functor/limit_is_initial_object/endomorphism_uniqueness}
    \begin{aligned}
      \includegraphics[page=6]{output/thm__limits_of_identity_functor.pdf}
    \end{aligned}
  \end{equation}

  Since \eqref{eq:def:thm:limits_of_identity_functor/limit_is_initial_object/endomorphism_uniqueness} commutes with \( \id_L \) instead of \( l_L \), by uniqueness it follows that \( l_L = \id_L \). Since, by the naturality of \( \pi \), \( \pi_L \) also satisfies this condition, \( \pi_L = \id_L \).

  From the naturality of \( \pi \), for any map \( f: L \to C \) it follows that the following diagram commutes:
  \begin{equation}\label{eq:def:thm:limits_of_identity_functor/limit_is_initial_object/morphism_uniqueness}
    \begin{aligned}
      \includegraphics[page=7]{output/thm__limits_of_identity_functor.pdf}
    \end{aligned}
  \end{equation}

  Therefore, \( f = \pi_B \). Since \( f \) was an arbitrary morphism with domain \( L \), we conclude that \( L \) has a unique morphism to every object in \( \cat{C} \). Hence, \( L \) is an initial object.
\end{proof}
