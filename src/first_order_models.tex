\subsection{First-order models}\label{subsec:first_order_models}

Much of \fullref{subsec:first_order_logic} is dedicated to semantic equivalences between logical formulas, which are formulated and proved using \hyperref[def:first_order_structure]{structures}. This section is dedicated to the study of structures themselves and relations between them. While model theory is a wide topic, for the purposes of this document we are only interested in the following questions:

\begin{itemize}
  \item Which subsets of a structure form a \hyperref[def:first_order_substructure]{substructure}?

  This is answered by \fullref{def:first_order_substructure} and by \fullref{def:first_order_generated_substructure}. Vacuously, if the language contains no functional symbols, by \fullref{thm:def:first_order_substructure/no_functions} every subset of a structure is a substructure. Such is the case with \hyperref[def:set]{sets} themselves, with \hyperref[def:partially_ordered_set]{partially ordered sets} or with \hyperref[def:metric_space]{metric} and \hyperref[def:topological_space]{topological spaces}.

  \Fullref{thm:substructures_form_complete_lattice} shows that the set of all substructures of a structure is worth studying in itself.

  \item Given a model of some set \( \Gamma \) of formulas, which substructures and \hyperref[def:first_order_homomorphism]{homomorphic} images of the model are again models of \( \Gamma \)?

  This is answered by \fullref{thm:positive_formulas_preserved_under_homomorphism}, \fullref{thm:arbitrary_formulas_preserved_under_isomorphisms} and \fullref{thm:functions_over_model_form_model}.
\end{itemize}

\begin{definition}\label{def:first_order_substructure}
  Let \( \mscrX = (X, I) \) be a structure for the language \( \mscrL \) and let \( Y \subseteq X \). We say that \( \mscrY = (Y, I) \) is a \term{substructure} of \( \mscrX \) if it satisfies any of the following equivalent conditions:

  \begin{thmenum}
    \thmitem{def:first_order_substructure/deductive} If \( Y \) is closed under function application, that is, for any functional symbol \( f \) in \( \mscrL \) with arity \( n \), we have \( I(f)(Y^n) \subseteq Y \).

    \thmitem{def:first_order_substructure/inductive} The universe \( Y \) is a \hyperref[def:fixed_point]{fixed point} of the operator
    \begin{equation}\label{eq:def:first_order_substructure/inductive/operator}
      \begin{aligned}
        &T: \pow(X) \to \pow(X) \\
        &T(A) \coloneqq A \cup \set*{ x \in X \given \qexists{f \in \boldop{Fun}} \qexists{x_1, \ldots, x_{\#f} \in A} f\Bracks{x_1, \ldots, x_{\#f}} = x },
      \end{aligned}
    \end{equation}
    which enlarges \( A \) with the union of all image of \( A \) under functions of the language \( \mscrL \).

    Note that the formula inside \eqref{eq:def:first_order_substructure/inductive/operator} is in the metalanguage despite using syntax similar to first-order logic formulas.
  \end{thmenum}
\end{definition}
\begin{proof}
  By definition of \( T \), \( Y \) if a fixed point if and only if
  \begin{equation*}
    \set*{ x \in X \given \qexists{f \in \boldop{Fun}} \qexists{x_1, \ldots, x_{\#f} \in A} f\Bracks{x_1, \ldots, x_{\#f}} = x } \subseteq Y.
  \end{equation*}

  This condition is clearly satisfied if \( B \) satisfies \fullref{def:first_order_substructure/deductive}.

  If, instead \( Y \) is a fixed point of \( T \), for the \( n \)-ary functional symbol \( f \in \boldop{Fun} \) and for any tuple \( x_1, \ldots, x_n \), the value \( I(f)(x_1, \ldots, x_n) \) belongs to \( Y \). Therefore, \fullref{def:first_order_substructure/deductive} is satisfied.
\end{proof}

\begin{remark}\label{rem:topological_first_order_structures}\mimprovised
  Let \( \mscrX = (X, I) \) be a structure over some language \( \mscrL \) without predicate symbols.

  If, for every functional symbol \( f \), the interpretation \( I(f) \) is a \hyperref[def:global_continuity]{continuous function}, we call \( \mscrX \) a \term{topological structure}.

  For every algebraic structure defined in \fullref{sec:group_theory} and \fullref{sec:ring_theory}, there exists a topological equivalent. We discuss \hyperref[def:topological_group]{topological groups} and \hyperref[def:topological_vector_space]{topological vector spaces} through the document, especially in \fullref{sec:functional_analysis}.

  Naturally, every substructure of a topological structure is again a topological structure.
\end{remark}

\begin{example}\label{ex:def:first_order_substructure/vector_space}
  The classic definition for a subset \( U \) of a \hyperref[def:vector_space]{vector space} \( \mscrV \) being a vector subspace is that \( U \) is closed under \hyperref[def:linear_combination]{linear combinations}. Linear combinations are simply finite \hyperref[def:multi_valued_function/superposition]{superpositions} of addition and scalar multiplication in \( \mscrV \). So this condition ensures that \( U \) is closed under application of the functional symbols corresponding to addition and scalar multiplication.

  See \fullref{thm:span_via_linear_combinations} for a further discussion.
\end{example}

\begin{proposition}\label{thm:def:first_order_substructure/properties}
  Fix a language \( \mscrL \). The \hyperref[def:first_order_substructure]{first order substructures} of a structure \( \mscrX = (X, I) \) have the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:first_order_substructure/no_functions} If \( \mscrL \) has no functional symbols, then \( (Y, I) \) is a substructure where \( Y \) is any subset of \( X \).

    \thmitem{thm:def:first_order_substructure/intersection} Let \( \seq{ (Y_k, I) }_{k \in \mscrK} \) be a family of substructures of \( \mscrX \). Then their \term{intersection structure} \( \parens*{\bigcap_{k \in \mscrK} Y_k, I} \) is again a substructure of \( \mscrX \).
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:first_order_substructure/no_functions} Both conditions in \fullref{def:first_order_substructure} are vacuously satisfied if there are no functional symbols in \( \mscrL \).

  \SubProofOf{thm:def:first_order_substructure/intersection} For any functional symbol \( f \) in \( \mscrL \) with arity \( n \), we have
  \begin{equation*}
    I(f)\parens*{\parens*{\bigcap_{\smash{k \in \mscrK}} Y_k}^n}
    \reloset {\ref{thm:def:function_image/intersection}} \subseteq
    \bigcap_{k \in \mscrK} I(f)(Y_k^n) \subseteq \bigcap_{k \in \mscrK} \mscrY_k.
  \end{equation*}

  Therefore, \( \parens*{\bigcap_{k \in \mscrK} Y_k, I} \) is indeed a substructure of \( \mscrX \).
\end{proof}

\begin{definition}\label{def:first_order_generated_substructure}
  Let \( \mscrX = (X, I) \) be a structure over \( \mscrL \) and let \( A \subseteq X \) be any set. The set \( A \) is said to \term[bg=поражда,ru=порождает]{generate} the substructure \( \mscrY = (Y, I) \) if it satisfies any of the equivalent statements:
  \begin{thmenum}
    \thmitem{def:first_order_generated_substructure/smallest} Out of all substructures of \( \mscrX \) whose domain contains \( A \), the domain \( \mscrY \) is the smallest with respect to \hyperref[def:subset]{set inclusion}.

    \thmitem{def:first_order_generated_substructure/intersection} \( \mscrY \) is the intersection structure of all substructures of \( \mscrX \) that contain \( A \).
  \end{thmenum}
\end{definition}
\begin{proof}
  Let \( \seq{ (Y_k, I) }_{k \in \mscrK} \) be the family of all substructures of \( \mscrX \) whose domains contain \( A \). Fix one of these substructures, say \( (Y_{k_0}, I) \).

  We have the obvious inclusion
  \begin{equation*}
    \bigcap_{k \in \mscrK} Y_k \subseteq Y_{k_0}.
  \end{equation*}

  The reverse inclusion holds if and only if \( Y_{k_0} \) is contained in each one of domains \( Y_k \) for \( k \in \mscrK \). In other words, \( Y_{k_0} \) is the smallest of the domains \( \seq{ Y_k }_{k \in \mscrK} \) with respect to set inclusion if and only if \( Y_{k_0} \) equals their intersection.
\end{proof}

\begin{example}\label{ex:def:first_order_generated_substructure}
  Common examples of generated substructures are the \hyperref[def:semimodule/submodel]{linear span} discussed in \fullref{thm:span_via_linear_combinations} and the \hyperref[def:generated_ring_ideal]{generated ring ideals}.
\end{example}

\begin{proposition}\label{thm:first_order_generated_substructures_exist}
  Let \( \mscrX = (X, I) \) be a structure for the language \( \mscrL \).

  Every subset of \( X \) has a \hyperref[def:first_order_generated_substructure]{generated substructure}.
\end{proposition}
\begin{proof}
  Given a set \( Y \subseteq X \), we apply \fullref{thm:knaster_tarski_theorem} to the \hyperref[thm:boolean_algebra_of_subsets]{Boolean algebra of all subsets} \( \pow(X) \) with the operator
  \begin{equation*}
    \begin{aligned}
      &R: \pow(X) \to \pow(X) \\
      &R(A) \coloneqq Y \cup T(A),
    \end{aligned}
  \end{equation*}
  where \( T \) is defined in \eqref{eq:def:first_order_substructure/inductive/operator}.

  We thus obtain the smallest fixed point \( Z \) of \( T \), which contains \( Y \) and satisfies \fullref{def:first_order_substructure/inductive}. The structure \( \mscrZ = (Z, I) \) is thus a substructure of \( \mscrX \).

  Furthermore, \( \mscrZ \) is unique because its domain is the smallest set invariant under \( R \).
\end{proof}

\begin{proposition}\label{thm:substructures_form_complete_lattice}
  Fix a structure \( \mscrX = (X, I) \) for the language \( \mscrL \).

  The set of all substructures of a \( \mscrX \) forms a complete lattice with respect to set inclusion of domains. It is isomorphic to a complete \hyperref[def:semilattice/submodel]{sublattice} of the Boolean algebra \( \pow(X) \) described in \fullref{thm:boolean_algebra_of_subsets}.

  Explicitly:
  \begin{thmenum}
    \thmitem{thm:substructures_form_complete_lattice/join} The \hyperref[def:semilattice/join]{join} of the family of substructures with domains \( \seq{ (Y_k, I) }_{k \in \mscrK} \) is the \hyperref[def:first_order_generated_substructure]{generated substructure} of the set \( \bigcup_{k \in \mscrK} Y_k \).

    \thmitem{thm:substructures_form_complete_lattice/top} The \hyperref[def:partially_ordered_set_extremal_points/top_and_bottom]{top element} is the substructure \( \mscrX \) itself. Any substructures that are different from \( \mscrX \) are called \term{proper}.

    \thmitem{thm:substructures_form_complete_lattice/meet} The \hyperref[def:semilattice/meet]{meet} of the family of substructures \( \seq{ (Y_k, I) }_{k \in \mscrK} \) is simply the \hyperref[thm:def:first_order_substructure/intersection]{intersection structure} of the family.

    \thmitem{thm:substructures_form_complete_lattice/bottom} The \hyperref[def:partially_ordered_set_extremal_points/top_and_bottom]{bottom element} of this lattice is the intersection of all substructures. This is called the \term{trivial substructure}. As a matter of fact, because the trivial substructures for any two structures are isomorphic, we refer to them collectively as the \term{trivial structure} because trivial substructures are isomorphic.

    As discussed in \fullref{rem:empty_models}, the empty set is not allowed to be the domain of a structure by definition. Nevertheless, for the sake of having a bottom element we allow structures with empty domains in this lattice.

    By \fullref{thm:order_category_isomorphism_properties/universal}, the trivial structures are the \hyperref[def:universal_objects/initial]{initial objects} of all \hyperref[def:category_of_small_first_order_models]{categories of models}.

    The trivial substructure usually consists only of the constants of \( \mscrL \) --- for example, the \hyperref[def:group/trivial]{trivial group} \( \set{ e } \) or the \hyperref[def:semilattice/trivial]{trivial bounded lattice} \( \set{ \top, \bot } \).
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:substructures_form_complete_lattice/join} Let \( (Y, I) \) be the generated substructure of the set \( A \coloneqq \bigcup_{k \in \mscrK} \mscrY_k \). From \fullref{def:first_order_generated_substructure/smallest} it follows that out of the domains of all substructures of \( \mscrX \), \( Y \) is the smallest that contains \( A \) and hence the smallest that contains \( Y_k \) for all \( k \in \mscrK \). Therefore, it is indeed the supremum of the family \( \seq{ (Y_k, I) }_{k \in \mscrK} \) with respect to set inclusion of domains.

  \SubProofOf{thm:substructures_form_complete_lattice/top} Since \( \mscrX \) is a substructure of itself, it is not only the supremum of the entire lattice, but actually the maximum.

  \SubProofOf{thm:substructures_form_complete_lattice/meet} The domain of the intersection structure of the family \( \seq{ (Y_k, I) }_{k \in \mscrK} \) of substructures of \( \mscrX \) is obviously the infimum of the family since its domain are the infimum in the Boolean algebra \( \pow(X) \) (see \fullref{thm:boolean_algebra_of_subsets}).

  \SubProofOf{thm:substructures_form_complete_lattice/bottom} It trivially follows from \fullref{thm:substructures_form_complete_lattice/meet} that the bottom element is the intersection of all substructures of \( \mscrX \).
\end{proof}

\begin{definition}\label{def:first_order_homomorphism}
  Let \( \mscrX = (X, I) \) and \( \mscrY = (Y, I) \) be structures over a common language. We say that the \hyperref[def:function]{function} \( h: X \to Y \) is a \term{homomorphism} between \( \mscrX \) and \( \mscrY \) if it preserves all functions and relations. Explicitly:
  \begin{thmenum}
    \thmitem{def:first_order_homomorphism/functions} For any functional symbol \( f \in \boldop{Fun} \) of arity \( n \) and any tuple \( x_1, \ldots, x_n \in X \) we have
    \begin{equation*}
      h\parens[\Big]{ I_X(f)(x_1, \ldots, x_n) } = I_Y(f) \parens[\Big]{ h(x_1), \ldots, h(x_n) }
    \end{equation*}

    \thmitem{def:first_order_homomorphism/predicates} For any predicate symbol \( p \in \boldop{Pred} \) of arity \( n \) and any \( x_1, \ldots, x_n \in X \),
    \begin{equation*}
      I_X(p) (x_1, \ldots, x_n) = T \T{implies} I_Y(p) \parens[\Big]{ h(x_1), \ldots, h(x_n) } = T.
    \end{equation*}
  \end{thmenum}
\end{definition}

\begin{remark}\label{rem:first_order_strong_homomorphism}
  Homomorphisms as they are defined in \fullref{def:first_order_homomorphism} are sometimes called \term{weak homomorphisms}. Under weak homomorphisms, it is possible that \( I_X(p) (x_1, \ldots, x_n) = F \) and yet \( I_Y(p) \parens[\Big]{ h(x_1), \ldots, h(x_n) } = T \).

  Logicians sometimes define \term{strong homomorphisms} where they replace \fullref{def:first_order_homomorphism/predicates} with the stronger condition
  \begin{equation*}
    I_X(p) (x_1, \ldots, x_n) = I_Y(p) \parens[\Big]{ h(x_1), \ldots, h(x_n) }.
  \end{equation*}

  This condition seems much more natural at first, but it is less useful in practice. For example, \hyperref[def:partially_ordered_set/homomorphism]{monotone maps} and \hyperref[eq:def:category_of_small_hypergraphs/homomorphism]{graph homomorphisms} are both weak homomorphisms and these are the most used definitions of homomorphisms in languages with predicate symbols. For this reason, we mostly avoid studying strong homomorphisms.

  They are useful for certain propositions like \fullref{thm:totally_ordered_strong_homomorphism}, however.
\end{remark}

\begin{proposition}\label{thm:def:first_order_homomorphism/properties}
  \hyperref[def:first_order_homomorphism]{First-order structure homomorphisms} have the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:first_order_homomorphism/submodel} If \( \mscrX = (X, I) \) is a structure and \( \mscrY = (Y, I) \) is a \hyperref[def:first_order_substructure]{substructure} of \( \mscrX \), then the \term{canonical embedding} function
    \begin{equation}\label{thm:def:first_order_homomorphism/submodel/canonical_embedding}
      \begin{aligned}
        &\iota: Y \to X \\
        &\iota(y) \coloneqq y
      \end{aligned}
    \end{equation}
    is indeed a \hyperref[def:first_order_homomorphism_invertibility/surjective]{homomorphism} (and thus an embedding in the sense of \fullref{def:first_order_homomorphism_invertibility}).

    \thmitem{thm:def:first_order_homomorphism/preserves_substructures} If \( \mscrX = (X, I_X) \) and \( \mscrY = (Y, I_Y) \) are structures and \( h: X \to Y \) is a (weak) homomorphism, then the \hyperref[def:multi_valued_function/image]{image} \( h(\mscrX) \coloneqq (h(X), I_Y) \) is a substructure of \( \mscrY \).

    \thmitem{thm:def:first_order_homomorphism/composition} The \hyperref[def:multi_valued_function/composition]{composition} of two homomorphisms is again a homomorphism.

    \thmitem{thm:def:first_order_homomorphism/term_valuation} Fix a homomorphism \( h: X \to Y \) and a term \( \tau \). For any variable assignments \( v_X \) and \( v_Y \) such that \( v_Y(\xi) = h(v_X(\xi)) \) for all \( \xi \in \boldop{Var}(\tau) \), we have
    \begin{equation*}
      h(\tau\Bracks{v_X}) = \tau\Bracks{v_Y}.
    \end{equation*}
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:first_order_homomorphism/submodel} The interpretation in the substructure \( \mscrY \) is the \hyperref[def:multi_valued_function/restriction]{restriction} \( I\restr_Y \) of \( I \) to \( \mscrY \) which simply restricts the domain of any predicate and function is indeed an interpretation in \( \mscrY \). Thus, \( (Y, I\restr_Y) \) is a structure.

  Conditions \fullref{def:first_order_homomorphism/functions} and \fullref{def:first_order_homomorphism/predicates} are both satisfied since the interpretation of any function and predicate is restricted to \( \mscrY \). Thus, \( \iota \) is a homomorphism.

  \SubProofOf{thm:def:first_order_homomorphism/preserves_substructures} To prove that \( (f(X), I_Y) \) is a substructure of \( \mscrY \), we will show that \fullref{def:first_order_substructure/deductive} holds.

  Indeed, due to \fullref{def:first_order_homomorphism/functions}, for any \( n \)-ary functional symbol and any tuple \( {x_1, \ldots, x_n \in X} \), we have that
  \begin{equation*}
    I_Y(f) \parens[\Big]{ h(x_1), \ldots, f(x_n) }
    \reloset {\ref{def:first_order_homomorphism/functions}} =
    h\parens[\Big]{ I_X(f)(x_1, \ldots, x_n) }
    \reloset {\ref{def:first_order_substructure/deductive}} \in
    h(X).
  \end{equation*}

  \SubProofOf{thm:def:first_order_homomorphism/composition} Let \( h: \mscrX \mapsto \mscrY \) and \( l: \mscrY \mapsto \mscrZ \) both be homomorphisms.

  \begin{itemize}
    \item \Fullref{def:first_order_homomorphism/functions} is satisfied because for any \( n \)-ary functional symbol \( f \) and any tuple \( x_1, \ldots, x_n \in X \),
    \begin{align*}
      &\phantom{{}={}}
      (l \bincirc h) \parens[\Big]{ I_X(f)(x_1, \ldots, x_n) }
      \reloset {\ref{def:first_order_homomorphism/functions}} = \\ &=
      l\parens[\Big]{ I_Y(f) \parens[\Big]{ h(x_1), \ldots, h(x_n) } }
      \reloset {\ref{def:first_order_homomorphism/functions}} = \\ &=
      I_{\mscrZ}(f) \parens[\Big]{ (l \bincirc h)(x_1), \ldots, (l \bincirc h)(x_n) }.
    \end{align*}

    \item \Fullref{def:first_order_homomorphism/predicates} is satisfied because for any \( n \)-ary predicate symbol \( p \) and any tuple \( x_1, \ldots, x_n \in X \),
    \begin{align*}
      &\phantom{{}={}}
      I_X(p) (x_1, \ldots, x_n)
      \reloset {\ref{def:first_order_homomorphism/predicates}} = \\ &=
      I_Y(p) \parens[\Big]{ h(x_1), \ldots, h(x_n) }
      \reloset {\ref{def:first_order_homomorphism/predicates}} = \\ &=
      I_{\mscrZ}(p) \parens[\Big]{ (l \bincirc h)(x_1), \ldots, (l \bincirc h)(x_n) }.
    \end{align*}
  \end{itemize}

  \SubProofOf{thm:def:first_order_homomorphism/term_valuation} We use induction on the structure of \( \tau \). If \( \tau \) is a variable, the statement is obvious from the compatibility condition for \( v_X \) and \( v_Y \). If \( \tau = f(\kappa_1, \ldots, \kappa_m) \), then
  \begin{align*}
    \tau\Bracks{v_Y}
    &=
    I(f) \parens[\Big]{ \kappa_1\Bracks{v_Y}, \ldots, \kappa_m\Bracks{v_Y} }
    = \\ &=
    I(f) \parens[\Big]{ h(\kappa_1\Bracks{v_X}), \ldots, h(\kappa_m\Bracks{v_X}) }
    \reloset {\ref{def:first_order_homomorphism/functions}} = \\ &=
    h\parens[\Big]{ I(f) \parens[\Big]{ \kappa_1\Bracks{v_X}, \ldots, \kappa_m\Bracks{v_X} } }
    = \\ &=
    h(\tau\Bracks{v_X}).
  \end{align*}
\end{proof}

\begin{definition}\label{def:first_order_homomorphism_invertibility}
  In connection with \fullref{def:function_invertibility} and \fullref{def:morphism_invertibility}, and more importantly \fullref{thm:first_order_categorical_invertibility}, we introduce the following terminology for homomorphisms:
  \begin{thmenum}
    \thmitem{def:first_order_homomorphism_invertibility/embedding} An \term{embedding} is an \hyperref[def:function_invertibility/injective]{injective} homomorphism.

    \thmitem{def:first_order_homomorphism_invertibility/surjective} The dual \hyperref[def:function_invertibility/surjective]{surjective} homomorphisms do not have an established name. The term \term{projection} is often used, but projections are conventionally idempotent.

    \thmitem{def:first_order_homomorphism_invertibility/isomorphism} An \term{isomorphism} is a \hyperref[def:function_invertibility/bijective]{bijective} homomorphism whose inverse is also a homomorphism. Equivalently, it is a bijective strong homomorphism.

    The peculiarity here is that the inverse in the sense of \fullref{def:morphism_invertibility/isomorphism} may not be a homomorphism in general. See \fullref{ex:bijective_order_homomorphism_not_isomorphism}. For examples where this condition can be relaxed, see \fullref{thm:automorphism_without_predicate_symbols} and \fullref{thm:totally_ordered_strict_isomorphisms}.

    \thmitem{def:first_order_homomorphism_invertibility/endomorphism} An \term{endomorphism} is a homomorphism that is also an \hyperref[def:multi_valued_function/endofunction]{endofunction}.

    \thmitem{def:first_order_homomorphism_invertibility/automorphism} A homomorphism that is both an endomorphism and an isomorphism is called an \term{automorphism}.
  \end{thmenum}
\end{definition}

\begin{example}\label{ex:bijective_order_homomorphism_not_isomorphism}
  Consider the \hyperref[def:set_of_integers]{set of integers \( \BbbZ \)} endowed with two different \hyperref[def:partially_ordered_set]{partial orders}:
  \begin{itemize}
    \item The standard total order \( \leq \) where \( n \leq m \) if there exists a nonnegative integer \( k \) such that \( n + k = m \).
    \item The equality \( = \) relation, which is simply the \hyperref[def:binary_relation/diagonal]{diagonal relation} \( \increment \).
  \end{itemize}

  The identity \( \id(x) = x \) is an \hyperref[def:partially_ordered_set/homomorphism]{order homomorphisms} from \( (\BbbZ, =) \) to \( (\BbbZ, \leq) \). Indeed, for any integers \( n \) and \( m \), \( n = m \) implies \( n \leq m \).

  Furthermore, the identity function is bijective. The inverse of \( \id \), which is again \( \id \), is not however a homomorphism from \( (\BbbZ, \leq) \) to \( (\BbbZ, =) \) since, for example, \( 1 \leq 2 \), but \( 1 \neq 2 \).

  Hence, \( \id: (\BbbZ, =) \to (\BbbZ, \leq) \) is a bijective homomorphism, but not an isomorphism.
\end{example}

\begin{proposition}\label{thm:automorphism_without_predicate_symbols}
  Let \( \mscrL \) be a language without predicate symbols. Then any bijective homomorphism between structures for \( \mscrL \) is an \hyperref[def:first_order_homomorphism_invertibility/isomorphism]{isomorphism}.

  This applies to arbitrary languages if we restrict ourselves to \hyperref[rem:first_order_strong_homomorphism]{strong homomorphisms}.
\end{proposition}
\begin{proof}
  If \( \mscrL \) has no predicate symbols, then \fullref{def:first_order_homomorphism/predicates} is vacuously satisfied for the inverse of any bijective homomorphism. It is just as well satisfied if we restrict ourselves to strong homomorphisms.
\end{proof}

\begin{definition}\label{def:positive_formula}
  We say that a \hyperref[def:propositional_syntax/formula]{propositional formula} \( \varphi \) is \term{positive} if it contains only \hyperref[def:conjunctive_disjunctive_normal_form/literal]{positive literals} and the propositional constants \hyperref[def:propositional_language/constants/verum]{top \( \top \)} and \hyperref[def:propositional_language/constants/falsum]{bottom \( \bot \)} connected using \hyperref[def:propositional_language/connectives/conjunction]{conjunction \( \wedge \)} and \hyperref[def:propositional_language/connectives/disjunction]{disjunction \( \vee \)}.

  The point of positive formulas is to avoid \hyperref[def:propositional_language/negation]{negation \( \neg \)}. This definition is not equivalent to \hyperref[def:positive_implicational_deductive_system]{positive implicational formulas} where \( \rightarrow \) is the only connective. We avoid adding \( \rightarrow \) because that would allow us, assuming classical logic, to derive negation using \fullref{thm:boolean_equivalences/negation_bottom}.

  Positive formulas are used in \fullref{thm:positive_formulas_preserved_under_homomorphism}, which fails to hold for some non-positive formulas (see \fullref{ex:monoid_cancellation_not_preserved_by_homomorphism}).

  When dealing with first-order logic, we simply use \hyperref[thm:first_order_substitution_equivalence/propositional]{substitution} to replace propositional variables with atomic formulas. This way we obtain positive first-order formulas with \hyperref[thm:implicit_universal_quantification]{implicit universal quantification}. Of course, we can always add explicit universal quantifiers, but we avoid existential quantifiers because of \fullref{thm:first_order_quantifiers_are_dual}.
\end{definition}

\begin{proposition}\label{thm:positive_formulas_preserved_under_homomorphism}
  Let \( \mscrX = (X, I) \) and \( \mscrY = (Y, I) \) be structures over a common language \( \mscrL \) and let \( h: X \to Y \) be a \hyperref[def:first_order_homomorphism]{homomorphism} between them. Take \( \Gamma \) to be a nonempty set of \hyperref[def:positive_formula]{positive formulas}.

  Then \( h \) preserves models of \( \Gamma \). That is, if \( \mscrX \vDash \Gamma \) then \( (h(X), I_Y) \vDash \Gamma \).
\end{proposition}
\begin{proof}
  Let \( v \) a variable assignment in \( \mscrY \). Let \( v_X: \boldop{Var} \to X \) be an assignment such that for any variable \( \xi \) we have
  \begin{equation*}
    v_X(\xi) \in h^{-1}(v_Y(\xi)).
  \end{equation*}

  At least one such assignment exists due to \fullref{def:zfc/choice}. If \( h \) is injective, this assignment is unique.

  We will show that
  \begin{equation}\label{thm:positive_formulas_preserved_under_homomorphism/ind_hyp_x}
    \mscrX \vDash_{v_X} \varphi
  \end{equation}
  implies
  \begin{equation}\label{thm:positive_formulas_preserved_under_homomorphism/ind_hyp_y}
    (h(X), I_Y) \vDash_{v_Y} \varphi.
  \end{equation}

  We assume \eqref{thm:positive_formulas_preserved_under_homomorphism/ind_hyp_x} for \( \varphi \) and we use induction on the structure of \( \varphi \) to prove \eqref{thm:positive_formulas_preserved_under_homomorphism/ind_hyp_y}, starting with different \hyperref[def:first_order_syntax/atomic_formula]{atomic formulas}:
  \begin{itemize}
    \item The constant \( \top \) is vacuously preserved by homomorphisms because it does not depend on the interpretation or variable assignment.

    \item Suppose that \( \varphi = (\tau_1 \doteq \tau_2) \). We have \( \tau_1\Bracks{v_X} = \tau_2\Bracks{v_X} \) and hence \( h(\tau_1\Bracks{v_X}) = h(\tau_2\Bracks{v_X}) \) and
    \begin{equation*}
      \tau_1\Bracks{v_Y}
      \reloset {\ref{thm:def:first_order_homomorphism/term_valuation}} =
      h(\tau_1\Bracks{v_X})
      =
      h(\tau_2\Bracks{v_X})
      \reloset {\ref{thm:def:first_order_homomorphism/term_valuation}} =
      \tau_2\Bracks{v_Y}.
    \end{equation*}

    \item Suppose that \( \varphi \) is the predicate formula \( p(\tau_1, \ldots, \tau_n) \). By assumption for every variable assignment in \( \mscrX \) and, in particular, for any \( v_X \),
    \begin{equation*}
      \mscrX \vDash_{v_X} p(\tau_1, \ldots, \tau_n),
    \end{equation*}
    then
    \begin{equation}\label{eq:thm:positive_formulas_preserved_under_homomorphism/predicates/x}
      I_X(p) \parens[\Big]{ \tau_1\Bracks{v_X}, \ldots, \tau_n\Bracks{v_X} } = T.
    \end{equation}

    By definition of homomorphism, we have
    \begin{equation}\label{eq:thm:positive_formulas_preserved_under_homomorphism/predicates/y}
      I_Y(p) \parens[\Big]{ h(\tau_1\Bracks{v_X}), \ldots, h(\tau_n\Bracks{v_X}) } = T.
    \end{equation}

    Now
    \begin{equation*}
      (h(X), I_Y) \vDash_{v_Y} p(\tau_1, \ldots, \tau_n),
    \end{equation*}
    follows from \fullref{thm:def:first_order_homomorphism/term_valuation}.

    If \( h \) is a \hyperref[rem:first_order_strong_homomorphism]{strong homomorphism}, then the converse also holds, i.e. \eqref{eq:thm:positive_formulas_preserved_under_homomorphism/predicates/x} follows from \eqref{eq:thm:positive_formulas_preserved_under_homomorphism/predicates/y}. See \fullref{thm:arbitrary_formulas_preserved_under_isomorphisms} for an application of this converse.

    \item Suppose that \( \varphi = \psi_1 \wedge \psi_2 \) and that the inductive hypothesis holds for \( \psi_1 \) and \( \psi_2 \).

    Since \( \varphi\Bracks{v_X} = T \) by assumption, by definition of valuation of conjunction we have
    \begin{equation*}
      \psi_1\Bracks{v_X}
      =
      \psi_2\Bracks{v_X}
      =
      T.
    \end{equation*}

    This allows us to apply the inductive hypothesis to obtain
    \begin{equation*}
      \psi_1\Bracks{v_Y}
      =
      \psi_2\Bracks{v_Y}
      =
      T.
    \end{equation*}
    and conclude that
    \begin{equation*}
      \varphi\Bracks{v_Y}
      =
      \psi_1\Bracks{v_Y} \wedge \psi_2\Bracks{v_Y}
      =
      T \wedge T
      =
      T.
    \end{equation*}

    \item Suppose that \( \varphi = \psi_1 \vee \psi_2 \) and that the inductive hypothesis holds for \( \psi_1 \) and \( \psi_2 \).

    Since the formula \( \varphi \) is valid in \( \mscrX \), at least one of \( \psi_1 \) or \( \psi_2 \) is valid under \( v_X \). For different \( v_X \) the valuation pair \( (\psi_1\Bracks{v_X}, \psi_2\Bracks{v_X}) \) may be different, but will always have at least one \( T \) value.

    The inductive hypothesis holds for both \( \psi_1 \) and \( \psi_2 \) and therefore \( (\psi_1\Bracks{v_Y}, \psi_2\Bracks{v_Y}) \) also contains at least one \( T \) value.

    This allows us to conclude that
    \begin{equation*}
      \varphi\Bracks{v_Y}
      =
      \psi_1\Bracks{v_Y} \vee \psi_2\Bracks{v_Y}
      =
      T.
    \end{equation*}

    \item To see how this proof fails for conditionals, consider \( \varphi = (\psi_1 \rightarrow \psi_2) \). Then \( \varphi\Bracks{v_X} = T \) implies either \( \psi_1\Bracks{v_X} = F \) or \( \psi_1\Bracks{v_X} = \psi_2\Bracks{v_X} = T \).

    If \( \psi_1\Bracks{v_X} = \psi_2\Bracks{v_X} = F \), we have \( \varphi\Bracks{v_X} = T \), but we cannot conclude that \( \varphi\Bracks{v_Y} = T \) because that would require the \hyperref[def:material_implication/inverse]{inverse} of the inductive hypothesis to hold for \( \psi_1 \) and \( \psi_2 \).

    See \fullref{ex:monoid_cancellation_not_preserved_by_homomorphism} for an example where a conditional is not preserved by a homomorphism.
  \end{itemize}

  Since \( v \) was chosen arbitrarily, we conclude that
  \begin{equation*}
    (h(X), I_Y) \vDash \varphi.
  \end{equation*}
\end{proof}

\begin{corollary}\label{thm:substructure_is_model}
  If \( \Gamma \) is a set of positive formulas, any \hyperref[def:first_order_substructure]{substructure} of a model of \( \Gamma \) is again a model of \( \Gamma \).
\end{corollary}
\begin{proof}
  Follows from \fullref{thm:def:first_order_homomorphism/submodel} and \fullref{thm:positive_formulas_preserved_under_homomorphism}.
\end{proof}

\begin{proposition}\label{thm:arbitrary_formulas_preserved_under_isomorphisms}\mcite[thm. 25.9]{OpenLogicFull}
  If \( \mscrX = (X, I_X) \) is a model of \( \Gamma \) and if \( h: X \to Y \) is a embedding from \( \mscrX \) to \( \mscrY = (Y, I_Y) \), then \( (h(X), I_Y) \) is also a model of \( \Gamma \).

  We say that embeddings preserve arbitrary formulas.

  If \( (h(X), I_Y) \) is a model of \( \Gamma \), then \( \mscrX \) is also a model if \( h \) is a \hyperref[rem:first_order_strong_homomorphism]{strong homomorphism}.

  We say that strong embeddings reflect arbitrary formulas.
\end{proposition}
\begin{proof}
  The proof simply extends the induction in the proof of \fullref{thm:arbitrary_formulas_preserved_under_isomorphisms} to
  \begin{equation*}
    \varphi\Bracks{v_Y} = \varphi\Bracks{v_Y}
  \end{equation*}
  which allows us to use the usual induction on the negation and all connectives and quantifiers.

  The result regarding strong homomorphisms is shown in the note about \eqref{eq:thm:positive_formulas_preserved_under_homomorphism/predicates/x} following from \eqref{eq:thm:positive_formulas_preserved_under_homomorphism/predicates/y} under strong homomorphisms.
\end{proof}

\begin{proposition}\label{thm:functions_over_model_form_model}
  Let \( \Gamma \) to be a nonempty set of \hyperref[def:positive_formula]{positive formulas}. Let \( \mscrX \) be a model of \( \Gamma \) and let \( A \) be any nonempty set. Consider the set \( Y \coloneqq \fun(A, \mscrX) \) of \hyperref[def:function]{all set functions} from \( A \) to \( X \).

  Define the function \( \iota: X \mapsto Y \) by sending each \( x \in X \) to the corresponding constant function in \( Y \).

  Define the interpretation \( I_Y \) as follows:
  \begin{itemize}
    \item For each \( n \)-ary functional symbol \( f \) in \( \mscrL \), define the interpretation of the functions \( k_1, \ldots, k_n \) componentwise as
    \begin{equation*}
      \begin{aligned}
        &I_Y(f): Y^n \to Y \\
        &I_Y(f) \parens[\Big]{ k_1, \ldots, k_n } \coloneqq \parens[\Big]{ s \mapsto I(f) \parens[\Big]{ k_1(s), \ldots, k_n(s) } }.
      \end{aligned}
    \end{equation*}

    \item For each \( n \)-ary predicate symbol \( p \) in \( \mscrL \), define \( I_Y(p) \subseteq Y^n \) via
    \begin{equation*}
      \begin{aligned}
        &I_Y(p): Y^n \to \set{ T, F } \\
        &I_Y(p) \parens[\Big]{ k_1, \ldots, k_n } \coloneqq \bigwedge \set[\Big]{ I(p) \parens[\Big]{ k_1(s), \ldots, k_n(s) } \given* s \in S }.
      \end{aligned}
    \end{equation*}

    That is, \( I_Y(p) (k_1, \ldots, k_n) = T \) if and only if \( I(p) (k_1(s), \ldots, k_n(s)) = T \) simultaneously for all \( s \in S \).
  \end{itemize}

  Then the structure \( \mscrY = (Y, I_Y) \) is also a model of \( \Gamma \) and \( \iota: \mscrX \to \mscrY \) is an embedding.
\end{proposition}
\begin{proof}
  It is obvious that \( \mscrY \) is a structure and that \( \iota \) is an embedding. We will prove using induction on the structure of a formula \( \varphi \) that \( \mscrX \vDash \varphi \) implies \( \mscrY \vDash \varphi \).

  Let \( v_Y \) be a variable assignment in \( \mscrY \).

  Suppose that \( \mscrX \vDash \varphi \). We use induction on the structure of \( \varphi \) to show that \( \varphi\Bracks{v_Y} = T \).
  \begin{itemize}
    \item If \( \varphi \) is a propositional constant, its value does not depend on \( v_Y \) and thus \( \varphi\Bracks{v_Y} = \varphi\Bracks{v_X} \).

    \item If \( \varphi = (\tau_1 \doteq \tau_2) \), then \( \tau_1\Bracks{v_X} = \tau_2\Bracks{v_X} \) for all assignments \( v_X \) in \( \mscrX \), hence for any \( s \in S \) we have \( \parens[\Big]{\tau_1\Bracks{v_Y}}(s) = \parens[\Big]{\tau_2\Bracks{v_Y}}(s) \) since both sides of the equality here are elements of \( \mscrX \).

    \item Analogously, if \( \varphi = p(\tau_1, \ldots, \tau_n) \), then
    \begin{equation*}
      I_Y(p) \parens[\Big]{ k_1, \ldots, k_n }
      =
      \bigwedge \set[\Big]{ I(p) \parens[\Big]{ k_1(s), \ldots, k_n(s) } \given* s \in S }
      =
      \bigwedge \set{ T \given s \in S }
      =
      T.
    \end{equation*}

    \item Analogous to the proof of \fullref{thm:positive_formulas_preserved_under_homomorphism}, conjunction and disjunction formulas that are valid in \( \mscrX \) are valid in \( \mscrY \) while conditional formulas may fail to be valid. See \fullref{ex:thm:functions_over_model_of_positive_formulas_form_model} for examples where this proposition fails.
  \end{itemize}
\end{proof}

\begin{example}\label{ex:thm:functions_over_model_of_positive_formulas_form_model}
  While the statement of \fullref{thm:functions_over_model_form_model} may be a little cryptic, a few examples show that it is actually obvious.
  \begin{itemize}
    \item \hyperref[def:boolean_function]{Boolean functions} have their values in the Boolean algebra \( \set{ T, F } \). Let \( S \) be the set of all tuples of values in \( \set{ T, F }^n \) for arbitrary \( n \). That is,
    \begin{equation*}
      S \coloneqq \bigcup_{n \geq 1} \set{ T, F }^n.
    \end{equation*}

    Then from \fullref{thm:functions_over_model_form_model} it follows that the set \( B = \fun(S, \set{ T, F }) \) of all Boolean functions of arbitrary arities is again a Boolean algebra. See \fullref{thm:lindenmaum_tarski_algebra_of_full_propositional_logic/bijection} for further discussion.

    \item If \( R \) is a \hyperref[def:ring]{ring} and \( A \) is any set, then \( \fun(A, R) \) is again a ring with componentwise operations --- see \fullref{thm:functions_over_semimodule}.

    This is useful in functional analysis where we study real-valued and complex-valued functions over arbitrary sets.

    \item If \( \BbbK \) is a field, then in general \( \fun(A, \BbbK) \) is not a field. The simplest example are the real-valued real functions --- \( \sin(x) \) has no multiplicative inverse since \( \sfrac 1 {\sin(x)} \) is not defined for \( x = 2k\pi, k = 1, 2, \ldots \). We can form a \hyperref[def:ring_localization]{field of fractions}, but in general fields of fractions over function rings no longer correspond to functions --- they are purely algebraic constructions, just like \hyperref[def:formal_power_series]{formal power series}.

    This happens because the definition of a field and, more generally has a non-positive axiom --- it requires every nonzero element to have a multiplicative inverse, which can be described formally as
    \begin{equation*}
      \qforall \xi \parens[\Big]{ (\xi \doteq 0) \vee \qexists \eta (\xi \cdot \eta \doteq 1) }.
    \end{equation*}

    As discussed in \fullref{def:positive_formula}, a formula with an existential quantifier may fail to be positive.
  \end{itemize}
\end{example}

\begin{definition}\label{def:first_order_definability}
  Fix a \hyperref[def:first_order_syntax]{first-order language} \( \mscrL \) and a \hyperref[def:first_order_structure]{structure} \( \mscrX = (X, I) \) for \( \mscrL \).

  To every formula \hyperref[def:first_order_syntax]{formula} \( \varphi[\xi_1, \ldots, \xi_n] \) there corresponds a set \( A \subseteq X^n \) such that
  \begin{equation*}
    (x_1, \ldots, x_n) \in A \T{if and only if} \varphi\Bracks{x_1, \ldots, x_n} = T.
  \end{equation*}

  We say that \( \varphi \) \term{defines} \( A \). An arbitrary set \( A \subseteq X^n \) is \term{definable} if there exists a formula \( \varphi \) that defines \( A \).

  See \fullref{thm:cumulative_hierarchy_model_of_zfc} for how this concept deeply relates to set theory.
\end{definition}

\begin{proposition}\label{thm:automorphism_preserves_validity}
  Let \( \mscrX = (X, I) \) be a structure over some language \( \mscrL \). Then for every formula \( \varphi[\xi_1, \ldots, \xi_n] \) in \( \mscrL \) and any \hyperref[def:first_order_homomorphism_invertibility/automorphism]{automorphism} \( h: X \to X \) we have
  \begin{equation*}
    \varphi\Bracks{x_1, \ldots, x_n} = \varphi\Bracks{h(x_1), \ldots, h(x_n)}.
  \end{equation*}
\end{proposition}
\begin{proof}
  Let \( x_1, \ldots, x_n \) be points in \( X \) such that
  \begin{equation*}
    \varphi\Bracks{x_1, \ldots, x_n} = T.
  \end{equation*}

  Since \( h \) is a homomorphism, it follows that
  \begin{equation*}
    \varphi\Bracks{h(x_1), \ldots, h(x_n)} = \varphi\Bracks{x_1, \ldots, x_n} = T.
  \end{equation*}

  Conversely, suppose that \( x_1, \ldots, x_n \) are points in \( X \) such that
  \begin{equation*}
    \varphi\Bracks{h(x_1), \ldots, h(x_n)} = T.
  \end{equation*}

  Then since \( h^{-1} \) is a homomorphism, we have
  \begin{equation*}
    \varphi\Bracks{h^{-1}(h(x_1)), \ldots, h^{-1}(h(x_n))}
    =
    \varphi\Bracks{x_1, \ldots, x_n}
    =
    T.
  \end{equation*}

  Therefore,
  \begin{equation*}
    \varphi\Bracks{h(x_1), \ldots, h(x_n)} = T \T{if and only if} \varphi\Bracks{x_1, \ldots, x_n} = T,
  \end{equation*}
  which is equivalent to the statement of the proposition.
\end{proof}

\begin{corollary}\label{thm:automorphism_of_definable_set}
  Let \( \mscrX = (X, I) \) be a structure over some language \( \mscrL \).

  \begin{thmenum}
    \thmitem{thm:automorphism_of_definable_set/direct} If the set \( A \subseteq X \) is \hyperref[def:first_order_definability]{definable} and if \( h: X \to X \) is an automorphism, then \( h(A) = A \).
    \thmitem{thm:automorphism_of_definable_set/contrapositive} If for some automorphism \( h: X \to X \) we have \( h(A) \neq A \), then the set \( A \subseteq X \) is not definable.
  \end{thmenum}
\end{corollary}
\begin{proof}
  \SubProofOf{thm:automorphism_of_definable_set/direct} If \( A \) is definable via \( \varphi[\xi] \), then by \fullref{thm:automorphism_preserves_validity} for any automorphism \( h: X \to X \) we have \( \varphi\Bracks{x} = \varphi\Bracks{h(x)} \). Thus, the set \( h(A) \) is just as well-definable via \( \varphi \), which implies \( A = h(A) \).

  \SubProofOf{thm:automorphism_of_definable_set/contrapositive} This is the contrapositive of \fullref{thm:automorphism_of_definable_set/direct}.
\end{proof}
