\subsection{Cardinals}\label{subsec:cardinals}

\begin{definition}\label{def:equinumerosity}\mcite[129 \\ 145]{Enderton1977Sets}
  We say that two sets are \term{equinumerous} if there exists a \hyperref[def:function_invertibility/bijective]{bijective function} between them.

  If there exists an \hyperref[def:function_invertibility/injective]{injective} function from \( A \) to \( B \) that is not necessarily \hyperref[def:function_invertibility/surjective]{surjective}, we say that \( A \) is \term{dominated by} \( B \) or that \( B \) \term{dominates} \( A \). If \( B \) dominates \( A \) and they are not equinumerous, we say that \( B \) \term{strictly dominates} \( A \).

  Equinumerosity arises naturally outside of the theory of cardinal numbers, unlike set dominance. We are usually instead interested only in injective functions that preserve some structure, i.e. \hyperref[def:first_order_homomorphism_invertibility/embedding]{embeddings}.
\end{definition}

\begin{lemma}\label{thm:three_equinumerous_sets_lemma}\mcite[prop. 6.9]{OpenLogicFull}
  If \( A \subseteq B \subseteq C \) and \( A \) is \hyperref[def:equinumerosity]{equinumerous} with \( C \), then \( B \) is equinumerous with \( C \).
\end{lemma}
\begin{proof}
  If \( B = C \), the lemma is trivial since the \hyperref[def:multi_valued_function/identity]{identity function} \( \id_B: B \to B \) is bijective. If \( B \subsetneq C \), however, the identity \( \id_B \) must be extended in order to be a bijective function between \( B \) and \( C \). It will actually be simpler for us to define a function from \( C \) to \( B \).

  Let \( f: C \to A \) be a bijective function (such a function exists by the statement of the lemma). Define the set
  \begin{equation*}
    I \coloneqq \bigcap\set{ X \subseteq C \given (C \setminus B) \subseteq X \T{and} f(X) \subseteq X }
  \end{equation*}
  of all intermediate sets between \( C \setminus B \) and \( C \) that are invariant under \( f \).

  Use \hyperref[rem:natural_number_recursion]{natural number recursion} to build the function
  \begin{equation*}
    \begin{aligned}
      &g: C \to B \\
      &g(x) \coloneqq \begin{cases}
        x,    &x \in C \setminus I \\
        f(x), &x \in I
      \end{cases}
    \end{aligned}
  \end{equation*}

  By construction, \( C \setminus B \subseteq I \) and thus \( C \setminus I \subseteq C \setminus (C \setminus B) = B \). Therefore the range of \( g \) really is \( B \). We must show that \( g \) is injective and surjective.

  Let \( g(x_1) = g(x_2) \) for some members \( x_1 \) and \( x_2 \) of \( C \). If \( x_1 \) and \( x_2 \) both belong to either \( I \) or \( C \setminus I \), it is trivial to see that \( x_1 = x_2 \). It turns out that these are two only possible scenarios. Indeed, without loss of generality, suppose that \( x_1 \in I \) and \( x_2 \in C \setminus I \). Then \( f(x_2) = g(x_2) = g(x_1) = x_1 \). Since \( I \) is invariant under \( f \) and \( x_1 \in I \), we have \( x_2 = f(x_1) \in I \), which contradicts our choice of \( x_2 \). Therefore \( g \) is an injective function.

  To see that \( g \) is also surjective, suppose that there exists some \( y \in B \setminus g[B] \). If \( y \in I \), then by the invariance of \( f \) we have \( g(y) = f(y) \in I \) and thus \( g(y) \not\in B \), which contradicts our definition of \( g \). If instead \( y \in C \setminus I \), then \( g(y) = y \) and thus \( y \in g[B] \), which contradicts our choice of \( y \). The obtained contradictions show that \( g \) is surjective.
\end{proof}

\begin{theorem}[Cantor-Schr\"oder-Bernstein theorem]\label{thm:cantor_schroder_bernstein_theorem}\mcite[sec. 6.5]{OpenLogicFull}
  If two sets \hyperref[def:equinumerosity]{dominate} each other, they are \hyperref[def:equinumerosity]{equinumerous}.
\end{theorem}
\begin{proof}
  Let \( f: A \to B \) and \( g: B \to A \) be injective functions. From \fullref{thm:function_composition_invertibility} it follows that \( g \bincirc f: A \to A \) is also an injective function. If we restrict its range to its image \( g[f[A]] \), it becomes bijective. Hence \( A \) is equinumerous with \( g[f[A]] \). Since \( g[f[A]] \subseteq g[B] \subseteq A \), from \fullref{thm:three_equinumerous_sets_lemma} it follows that \( A \) is equinumerous with \( g[B] \), which is the desired result.
\end{proof}

\begin{remark}\label{rem:cardinal_definition}
  \hyperref[def:equinumerosity]{Set domination} generalizes the \hyperref[def:subset]{subset relation} between sets.

  If we take a family \( \mscrA \) of sets, then domination is a \hyperref[def:preordered_set]{preorder} rather than a true \hyperref[def:partial_order]{partial order}.
  \begin{itemize}
    \item Reflexivity follows because the \hyperref[def:multi_valued_function/identity]{identity function} for any set is injective.
    \item Transitivity is a consequence of \fullref{thm:function_composition_invertibility}.
    \item Antisymmetry fails if \( A \) dominates \( B \) and \( B \) dominates \( A \) but \( A \neq B \). For example, the map \( n \mapsto 2n \) from all natural numbers \( \BbbN \) to the even natural numbers \( 2\BbbN \) is injective and the identity map on \( 2\BbbN \) is an injective function from \( 2\BbbN \) to \( \BbbN \), however \( \BbbN \neq 2\BbbN \)
  \end{itemize}

  As a matter of fact, \hyperref[def:equinumerosity]{equinumerosity} is also a preorder and the proof for that is identical.

  If we partition \( \mscrA \) using the \hyperref[def:equinumerosity]{equinumerosity relation} if follows from \fullref{thm:preorder_to_partial_order} that the result will be a partial ordered set. The equivalence classes of this partition are then subfamilies of \( \mscrA \) such that every two sets in a single subfamily are equinumerous. For example, if \( \mscrA = \set{ \set{ A, B }, \set{ C, I }, \set{ A }, \set{ C } } \), then the corresponding equivalence classes are \( \set{ \set{ A, B }, \set{ C, I } } \) and \( \set{ \set{ A }, \set{ C } } \).

  Each of these equivalence classes consists of sets that are identical in \enquote{size} (not to be confused with \enquote{large} and \enquote{small} sets as defined in \fullref{def:large_and_small_sets}). In the above example, the corresponding equivalence classes correspond to sets of sizes \( 1 \) and \( 2 \). If we want to extend this notion of \enquote{size} to infinite sets, we must introduce a hierarchy of \enquote{sizes}. A natural candidate for such a hierarchy are the equivalence classes themselves. Unfortunately, this would mean that every family of sets has a different hierarchy. Since the entire universe is only available within the metatheory, we cannot partition the universe itself and must instead resort to finding a concrete representative of each possible equivalence class. We will call these representatives \term{cardinal numbers}.

  As explained in the proof of \fullref{thm:cardinality_existence}, it will be convenient for us to define cardinal numbers as certain \hyperref[def:ordinal]{ordinal numbers} --- see \fullref{def:cardinal}.
\end{remark}

\begin{definition}\label{def:cardinal}
  A \term{cardinal number} or simply \term{cardinal} is an \hyperref[def:ordinal]{ordinal} that is not \hyperref[def:equinumerosity]{equinumerous} with any smaller ordinal. We usually denote them using the small Greek letters \( \kappa \), \( \mu \) and \( \nu \).

  A cardinal is by definition an ordinal and this is useful. For example, the cardinals are well-ordered in the sense of \fullref{thm:ordinals_are_well_ordered}.

  We often regard cardinal numbers as abstract entities, however. It is thus accepted to call the ordinal itself the \term{initial ordinal} of the cardinal.
\end{definition}

\begin{lemma}\label{thm:natural_number_is_not_equinumerous_to_proper_subset}
  No natural number (as a member of \hyperref[thm:smallest_inductive_set_existence]{\( \omega \)}) is equinumerous to a proper subset of itself.
\end{lemma}
\begin{proof}
  We will use \fullref{thm:omega_induction} on \( n \in \omega \). The lemma holds vacuously for \( n = 0 \).

  Now suppose that \( n \) is not equinumerous to a proper subset of itself and, aiming at a contradiction, suppose that there exists a subset \( E \subseteq \op{succ}(n) \) and a bijective function \( {f: \op{succ}(n) \to E} \).
  \begin{itemize}
    \item If \( n \in E \), then \( E \setminus \set{ n } \) is a subset of \( n \) and thus the restriction \( f\restr_n: n \to (E \setminus \set{ n }) \) is a bijective function.
    \item If \( n \not\in E \), then \( E \) is a subset of \( n \) and thus \( f\restr_n: n \to E \) is a bijective function.
  \end{itemize}

  In both cases we obtain that \( n \) is equinumerous with a proper subset of itself, which is a contradiction. Hence this also holds for \( \op{succ}(n) \).

  The induction principle allows us to conclude that the lemma holds for all natural numbers.
\end{proof}

\begin{proposition}\label{thm:natural_numbers_are_cardinals}
  The natural numbers (as members of \hyperref[thm:smallest_inductive_set_existence]{\( \omega \)}) are \hyperref[def:cardinal]{cardinals}.
\end{proposition}
\begin{proof}
  Fix a natural number \( n \in \omega \). Note that for every \( m < n \), \( m \) is a proper subset of \( n \) by \fullref{thm:ordinal_ordering_via_subsets}. From \fullref{thm:natural_number_is_not_equinumerous_to_proper_subset} it follows that no ordinal strictly smaller than \( n \) is equinumerous with \( n \) and hence \( n \) is an initial ordinal.
\end{proof}

\begin{proposition}\label{thm:omega_is_a_cardinal}
  The \hyperref[thm:smallest_inductive_set_existence]{smallest inductive set \( \omega \)} is a \hyperref[def:cardinal]{cardinal}. When regarded as a cardinal, we denote it by \( \aleph_0 \).
\end{proposition}
\begin{proof}
  We will use induction on \( n < \omega \) to show that no function \( f: \omega \to n \) is surjective. This is trivial for \( 0 \). Suppose that it holds for some fixed \( n \). Let \( f: \omega \to \op{succ}(n) \) be any function. Define
  \begin{equation*}
    \begin{aligned}
      &g: \omega \to n \\
      &g(m) \coloneqq \begin{cases}
        f(m), &f(m) < n \\
        0,    &f(m) = n
      \end{cases}
    \end{aligned}
  \end{equation*}

  Our inductive hypothesis states that \( g \) cannot be surjective. Hence \( f \) also cannot be surjective.

  Therefore \( \omega \) is an initial ordinal.
\end{proof}

\begin{proposition}\label{thm:cardinality_existence}
  Every set \( A \) is equinumerous with a unique \hyperref[def:cardinal]{cardinal}. We denote this cardinal by \( \card(A) \) and call it the \term{cardinality} of \( A \).
\end{proposition}
\begin{proof}
  By \fullref{thm:well_ordering_theorem} there exists a relation \( \prec \) that well-orders \( A \). The \hyperref[thm:well_ordered_order_type_existence]{order type} \( \ord(A, \prec) \) is an ordinal that is equinumerous with \( A \), however it may not be the smallest one. Fortunately, we can define
  \begin{equation*}
    \card(A) \coloneqq \min\set{ \beta \leq \ord(A, \prec) \given \beta \T{is equinumerous with} A }.
  \end{equation*}
\end{proof}

\begin{proposition}\label{thm:cardinality_order_compatibility}
  The set \( A \) is dominated by \( B \) if and only if \( \card(A) \leq \card(B) \).
\end{proposition}
\begin{proof}
  \SufficiencySubProof First suppose that \( \card(A) \leq \card(B) \). By \fullref{thm:ordinal_ordering_via_subsets}, we have \( \card(A) \subseteq \card(B) \) and thus the identity function \( \id_{\card(A)} \) is an injective function from \( \card(A) \) to \( \card(B) \). Since \( A \) is equinumerous with \( \card(A) \) and \( B \) is equinumerous with \( \card(B) \), by \fullref{thm:function_composition_invertibility} we obtain that there is an injective function from \( A \) to \( B \) and hence \( B \) dominates \( A \).

  \NecessitySubProof Conversely, let \( f: A \to B \) be an injective function. We again use \fullref{thm:function_composition_invertibility} to conclude that \( \card(B) \) dominates \( \card(A) \).

  We will show that \( \card(A) > \card(B) \) leads to a contradiction, which by the trichotomy of cardinals will entail that \( \card(A) \leq \card(B) \). If we suppose that \( \card(A) > \card(B) \), then \( \card(B) \subseteq \card(A) \) and hence the identity on \( \card(B) \) is an injective function. Thus \( \card(A) \) dominates \( \card(B) \) and vice versa, which by \fullref{thm:cantor_schroder_bernstein_theorem} implies that \( \card(A) \) is equinumerous with \( \card(B) \). It follows that \( \card(A) = \card(B) \), which contradicts our assumption that \( \card(A) > \card(B) \).

  Therefore \( \card(A) \leq \card(B) \).
\end{proof}

\begin{corollary}\label{thm:set_domination_relation_trichotomy}
  Any two sets are either equinumerous or one strictly dominates the other.
\end{corollary}
\begin{proof}
  Follows from cardinal trichotomy and \fullref{thm:set_domination_relation_trichotomy}.
\end{proof}

\begin{corollary}[Pigeonhole principle]\label{def:pigeonhole_principle}
  If we have more pigeons than pigeonholes, then at least one pigeonhole must contain multiple pigeons in it.

  More formally, if \( \card(A) > \card(B) \), then there exists no injective function from \( A \) to \( B \).
\end{corollary}
\begin{proof}
  This is a corollary of \fullref{thm:set_domination_relation_trichotomy}.
\end{proof}

\begin{theorem}[Cantor's power set theorem]\label{thm:cantor_power_set_theorem}\mcite[thm. 6B]{Enderton1977Sets}
  The power set of any set \( A \) \hyperref[def:equinumerosity]{strictly dominates} \( A \). That is,
  \begin{equation*}
    \card(A) < \card(\pow(A)).
  \end{equation*}
\end{theorem}
\begin{proof}
  The function \( x \mapsto \set{ x } \) is clearly an injective function from \( A \) to \( \pow(A) \), therefore \( \pow(A) \) dominates \( A \). The converse is not true, however.

  Indeed, fix some function \( f: A \to \pow(A) \) and define the set
  \begin{equation*}
    B \coloneqq \set{ x \in A \colon x \not\in f(x) }.
  \end{equation*}

  Note that \( B \subseteq A \) and thus \( B \in \pow(A) \), however \( B \) is not in the \hyperref[def:multi_valued_function/image]{image} of \( f \) and thus \( f \) is not \hyperref[def:function_invertibility/surjective]{surjective}.

  Since \( f \) was arbitrary, we conclude that no function from \( A \) to \( \pow(A) \) is surjective.
\end{proof}

\begin{definition}\label{def:finite_set}
  We say that the set \( A \) is \term{finite} if any of the following equivalent conditions hold:
  \begin{thmenum}
    \thmitem{def:finite_set/cardinality} The \hyperref[thm:cardinality_existence]{cardinality} of \( A \) is a natural number. That is, we have \( \card(A) < \aleph_0 \).

    \thmitem{def:finite_set/dedekind} The set \( A \) is not \hyperref[def:equinumerosity]{equinumerous} all of its proper subsets. That is, if \( B \) is a proper subset of \( A \), then no function from \( A \) to \( B \) is injective.
  \end{thmenum}

  If a set is not finite, we say that it is \term{infinite}. If a set does not satisfy \fullref{def:finite_set/dedekind}, we say that it is \term{Dedekind infinite}.
\end{definition}
\begin{proof}
  \ImplicationSubProof{def:finite_set/cardinality}{def:finite_set/dedekind} We will use \fullref{thm:omega_induction} on \( n < \aleph_0 \) to prove that all sets of cardinality \( n \) are not Dedekind infinite. The case \( n = 0 \) is vacuous. Suppose that all sets of cardinality \( n \) are not Dedekind infinite and suppose that \( A \) of cardinality \( \op{succ}(n) \) is Dedekind infinite.

  Then there exists a proper subset \( B \) of \( A \) that is equinumerous with \( \op{succ}(n) \). Since \( \op{succ}(n) \) is the cardinality of \( A \), there exists a bijective function \( f: A \to \op{succ}(n) \). Then \( f[B] \subseteq \op{succ}(n) \). Furthermore, the inequality is strict because otherwise any member of \( A \setminus B \) would contradict \fullref{def:pigeonhole_principle}. Therefore \( f[B] \) is a proper subset of \( \op{succ}(n) \) that is equinumerous with it. But this contradicts \fullref{thm:natural_number_is_not_equinumerous_to_proper_subset}.

  The obtained contradiction shows that \( A \) is also not Dedekind infinite.

  \ImplicationSubProof{def:finite_set/dedekind}{def:finite_set/cardinality} Let \( A \) be a Dedekind infinite set and let \( f: A \to B \) be a bijective function into some proper subset \( B \) of \( A \). We will construct an injective function from \( \omega \) to \( A \). Fix some member \( x_0 \in A \setminus B \) and recursively define
  \begin{equation*}
    \begin{aligned}
      &g: \omega \to A \\
      &g(n) \coloneqq \begin{cases}
        x_0,         &n = 0 \\
        f(g(n - 1)), &n > 0
      \end{cases}
    \end{aligned}
  \end{equation*}

  We now use induction on \( m \) to prove that \( g(n) = g(m) \) implies \( n = m \). Since \( g(0) \not\in B \) and \( g(n) \in B \) for any \( n > 0 \), the base case holds. Suppose that the inductive hypothesis holds for \( m \) and that for some \( n \) we have \( g(n) = g(m + 1) \). It is clear that \( g(0) \neq g(m + 1) \) so necessarily \( n > 0 \). We have
  \begin{equation*}
    f(g(n - 1))
    =
    g(n)
    =
    g(m + 1)
    =
    f(g(m)),
  \end{equation*}
  which by the inductive hypothesis implies that \( m = n - 1 \). Thus \( g(m + 1) = g(n) \) and the inductive step is proved.

  Therefore \( g \) is injective and thus \( A \) dominates \( \omega \). From \fullref{thm:cardinality_order_compatibility} it follows that \( \card(A) \geq \aleph_0 \) and thus \( \card(A) \) is not a natural number.
\end{proof}

\begin{proposition}\label{thm:cardinal_is_finite_iff_successor_ordinal}
  A nonzero cardinal is \hyperref[def:finite_set]{finite} if and only if it is a \hyperref[def:successor_ordinal]{successor ordinal}.
\end{proposition}
\begin{proof}
  Finite cardinals are natural numbers by definition and all nonzero natural numbers are successor ordinals.

  Conversely, suppose that \( \kappa = \op{succ}(\alpha) \) is a successor ordinal that is a cardinal. That is, \( \kappa \) is not equinumerous with any smaller ordinal and in particular with \( \alpha \). From \fullref{thm:cardinality_order_compatibility} it follows that \( \card(\alpha) < \kappa \).

  Let \( A \subseteq \kappa \) be a proper subset of \( \kappa \). We want to show that \( \card(A) < \kappa \).

  If \( \alpha \not\in A \), define \( B \coloneqq A \). Otherwise pick some member \( x_0 \in \kappa \setminus A \) and define
  \begin{equation*}
    B \coloneqq (A \cup \set{ x_0 }) \setminus \set{ \alpha }.
  \end{equation*}

  In both cases we have \( \card(A) = \card(B) \) but unlike \( A \), \( B \) is always a subset of \( \alpha \) since \( \kappa = \alpha \cup \set{ \alpha } \).

  Therefore
  \begin{equation*}
    \card(A) = \card(B) \leq \card(\alpha) < \kappa.
  \end{equation*}

  Hence \( \kappa \) dominates every proper subset, which by \fullref{def:finite_set/dedekind} means that \( \kappa \) is a finite cardinal.
\end{proof}

\begin{corollary}\label{thm:cardinal_is_infinite_iff_limit_ordinal}
  A cardinal is \hyperref[def:finite_set]{infinite} if and only if it is a \hyperref[def:successor_ordinal]{limit ordinal}.
\end{corollary}
\begin{proof}
  This is the contraposition to \fullref{thm:cardinal_is_finite_iff_successor_ordinal} excluding the zero cardinal.
\end{proof}

\begin{proposition}\label{thm:power_set_finiteness}
  A set is finite if and only if its \hyperref[def:basic_set_operations/power_set]{power set} is finite.
\end{proposition}

\begin{proposition}\label{thm:finite_unions_and_products_are_finite}
  All finite \hyperref[def:basic_set_operations/union]{unions} and \hyperref[def:cartesian_product]{Cartesian products} of finite sets are finite.
\end{proposition}

\begin{definition}\label{def:countability}
  We will introduce the notion of \term{countability}, which generalizes \hyperref[def:finite_set]{finiteness}.

  \begin{thmenum}
    \thmitem{def:countability/countably_infinite}\mcite[159]{Enderton1977Sets} The smallest infinite cardinal is \hyperref[thm:omega_is_a_cardinal]{\( \aleph_0 \)}. Every set with cardinality \( \aleph_0 \) is called \term{countably infinite}. These are precisely the sets which can be ordered into a \hyperref[def:sequence]{sequence}.

    \thmitem{def:countability/at_most_countable} A set that is either finite or countably infinite is called \term{at most countable}.

    \thmitem{def:countability/uncountable} Any set that \hyperref[def:equinumerosity]{strictly dominates} \( \aleph_0 \) is called \term{uncountable}. The smallest uncountable cardinal is denoted by \( \aleph_1 \).

    \thmitem{def:countability/continuum} The cardinality of \( \pow(\omega) \) has a special name --- the \term{cardinality of the continuum}. It is sometimes denoted by \( c \). See \fullref{hyp:continuum_hypothesis} for its relation to \( \aleph_1 \).
  \end{thmenum}

  See \fullref{rem:countability_etymology} for additional terminology that is potentially more ambiguous.
\end{definition}

\begin{remark}\label{rem:countability_etymology}
  Some authors, for example \cite[159]{Enderton1977Sets}, use the shorted term \term{countable}, however other authors use \enquote{countable} to mean \enquote{countably infinite}. The terms \term{denumerable} and \term{enumerable} are also used for \enquote{countably infinite} and \enquote{at most countable} respectively. This is done in \cite[def. 4.4]{OpenLogicFull}, for example. These terms are also ambiguous unfortunately.
\end{remark}

\begin{conjecture}[Continuum hypothesis]\label{hyp:continuum_hypothesis}\mcite[165]{Enderton1977Sets}
  The \hyperref[def:countability/continuum]{cardinality of the continuum} \( c \) is the \hyperref[def:countability/uncountable]{smallest uncountable cardinal} \( \aleph_1 \).
\end{conjecture}

\begin{remark}\label{rem:continuum_hypothesis}\mcite[165]{Enderton1977Sets}
  \Fullref{hyp:continuum_hypothesis} has been shown by G\"odel not to be disprovable in \hyperref[def:set]{\logic{ZFC}} and by Cohen not to be provable in \logic{ZFC}.
\end{remark}

\begin{proposition}\label{thm:omega_equinumerous_with_omega_squared}
  The smallest inductive set \( \omega \) is equinumerous with \( \omega \times \omega \).
\end{proposition}
\begin{proof}
  We can give a short proof using \fullref{thm:cantor_schroder_bernstein_theorem} using the injective functions \( (n, m) \mapsto 2^n 3^m \) in one direction and \( n \mapsto (n, 0) \) in the other direction. Proving the injectivity of \( f \), however, requires \fullref{thm:fundamental_theorem_of_arithmetic} and we prove the latter using machinery from \fullref{sec:commutative_algebra}. We will instead give a direct proof with an explicit construction. We will construct a bijective function from \( \omega \times \omega \) to \( \omega \) --- the function visualized in \cref{fig:thm:omega_equinumerous_with_omega_squared}.

  We begin by defining the diagonal in \cref{fig:thm:omega_equinumerous_with_omega_squared}. For each natural number \( k \), define the set of pairs that sum to \( k \):
  \begin{equation*}
    A_k \coloneqq \set{ (n, m) \in \omega \times \omega \given n + m = k }.
  \end{equation*}

  We can use induction to show that \( \card(A_k) = k + 1 \). That is, \( A_k \) can \enquote{fit} \( k + 1 \) numbers. We can now define the function
  \begin{equation*}
    \begin{aligned}
      &d: \omega \to \omega \\
      &d(n) \coloneqq \sum_{k=0}^n \card(A_n)
    \end{aligned}
  \end{equation*}
  that gives us how many numbers we have already \enquote{fit} in the first \( n \) diagonals.

  It is clear that that the point \( (n, m) \) lies in \( A_{n + m} \). We want to know how many numbers we have \enquote{fit} in the diagonal prior to that, for which we can use \( d(n + m - 1) \). This leads us to the definition
  \begin{equation*}
    \begin{aligned}
      &f: \omega \times \omega \to \omega \\
      &f(n, m) \coloneqq \begin{cases}
        0,                &n + m = 0 \\
        d(n + m - 1) + n, &n + m > 0. \\
      \end{cases}
    \end{aligned}
  \end{equation*}

  We will first show that \( f \) is injective using induction on \( n + m \) (that is, on the diagonals). Suppose that \( f(n_1, m_1) = f(n_2, m_2) \) implies \( n_1 = n_2 \) and \( m_1 = m_2 \) for all pairs with a sum less than \( l \). Let \( (n_1, m_1) \) and \( (n_2, m_2) \) be two points in \( A_l \) such that \( f(n_1, m_1) = f(n_2, m_2) \). The cases \( l <= 1 \) are trivial so suppose that \( l > 1 \). Then
  \begin{equation*}
    f(n_1, m_1)
    =
    d(n_1 + m_1 - 1) + n_1
    =
    l - 1 + d(n_1 + m_1 - 2) + n_1
    =
    l + f(n_1 - 1, m_1).
  \end{equation*}

  We can now apply the inductive hypothesis and obtain that \( n_1 = n_2 \) and \( m_1 = m_2 \). This proves injectivity.

  To see that \( f \) is surjective, we will use induction on \( k \in \omega \). The base case is again trivial. Now suppose that \( n + m > 0 \) and
  \begin{equation*}
    f(n, m) = d(n + m - 1) + n = k.
  \end{equation*}

  We have two cases:
  \begin{itemize}
    \item If \( m = 0 \), then
    \begin{equation*}
      f(0, n + m + 1) = d(n + m) + 0 = d(n + m - 1) + n + m = f(n, m) + 1.
    \end{equation*}

    \item If \( m > 0 \), then
    \begin{equation*}
      f(n + 1, m - 1) = d(n + m - 1) + n + 1 = f(n, m) + 1.
    \end{equation*}
  \end{itemize}

  In both cases we have shown that \( k + 1 = f(n, m) + 1 \) is in the image of \( f \), which concludes the proof of surjectivity (and hence bijectivity).

  Lastly, although it is not necessary for the proof, we can expand the definition of \( d \) to see that \( f \) is actually a \hyperref[def:polynomial]{polynomial}:
  \begin{equation*}
    f(n, m)
    =
    \sum_{k=0}^{n + m - 1} (k + 1) + n
    =
    \sum_{k=1}^{n + m} k + n
    \reloset {\eqref{eq:def:arithmetic_progression/finite_sum}} =
    \frac {(n + m) (n + m + 1)} 2 + n.
  \end{equation*}

  As an added benefit, this polynomial also handles the case \( n = m = 0 \).

  \begin{figure}
    \hfill
    \includegraphics{figures/thm__omega_equinumerous_with_omega_squared__diagonals.pdf}
    \hfill
    \includegraphics{figures/thm__omega_equinumerous_with_omega_squared__function.pdf}
    \hfill\hfill
    \caption{Visualization on an integer coordinate grid of the diagonal sets \( A_k \) and of the bijective function defined in \fullref{thm:omega_equinumerous_with_omega_squared}.}\label{fig:thm:omega_equinumerous_with_omega_squared}
  \end{figure}
\end{proof}

\begin{corollary}\label{thm:countable_product_of_countable_sets}
  A finite \hyperref[def:cartesian_product]{Cartesian product} of at most countable sets is at most countable.
\end{corollary}
\begin{proof}
  Let \( A_1, \ldots, A_n \) be a finite family of at most countable sets.

  Suppose that the inductive hypothesis holds for \( n \). Countability ensures that there exist injective functions \( g: A_1 \times \cdots \times A_n \times \omega \) and \( h: A_{n+1} \to \omega \). Denote by \( f \) the bijective function from \( \omega \) to \( \omega \times \omega \) obtained in \fullref{thm:omega_equinumerous_with_omega_squared} and define
  \begin{equation*}
    \begin{aligned}
      &F: A_1 \times \cdots \times A_n \times A_{n+1} \to \omega \\
      &F(a_1, \ldots, a_n, a_{n+1}) \coloneqq f(g(a_1, \ldots, a_n), h(a_{n+1}))
    \end{aligned}
  \end{equation*}

  By \fullref{thm:function_superposition_invertibility}, the function \( F \) is injective as a \hyperref[def:multi_valued_function/superposition]{superposition} of injective functions.

  Therefore \( \omega \) dominates the product \( A_1 \times \cdots \times A_n \), i.e. the product is countable.
\end{proof}

\begin{definition}\label{def:disjoint_union}
  The \term{disjoint union} of the \hyperref[def:indexed_family]{indexed family} \( \seq{ A_k }_{k \in \mscrK} \) of nonempty sets is
  \begin{equation*}
    \bigsqcup_{k \in \mscrK} A_k \coloneqq \set[\Big]{ (k, x) \given k \in \mscrK \T{and} x \in A_k }.
  \end{equation*}
\end{definition}

\begin{proposition}\label{thm:countably_infinite_union_of_countably_infinite_sets}\mcite[thm. 6Q]{Enderton1977Sets}
  A \hyperref[def:countability/countably_infinite]{countably infinite} union of countably infinite sets is countably infinite.
\end{proposition}
\begin{proof}
  Let \( \seq{ A_k }_{k \in \omega} \) be a countably infinite family of countably infinite sets. Define instead the disjoint family
  \begin{equation*}
    B_k \coloneqq \set{ (k, a) \given a \in A_k }.
  \end{equation*}

  Denote the union of the former family by \( A \) and of the latter family by \( B \). Since each \( A_k \) is countably infinite, so is \( A \). Furthermore, there exists an obvious injective function from \( B \) to \( A \), thus
  \begin{equation}\label{thm:countable_union_of_countable_sets/union_card_inequality}
    \aleph_0 \leq \card(A) \leq \card(B).
  \end{equation}

  Define the multi-valued mapping
  \begin{equation*}
    \begin{aligned}
      &\mscrG: \omega \to \fun(\omega, B) \\
      &\mscrG(k) \coloneqq \set{ g: \omega \to B_k \given g \T{is bijective} }.
    \end{aligned}
  \end{equation*}

  This is a total multi-valued function because we have assumed that \( B_k \) is countable for every \( k \in \mscrK \). \Fullref{thm:existence_of_multi_valued_function_selection} gives us a single-valued function \( G: \omega \to \fun(\omega, B) \). Since the family \( \seq{ B_k }_{k \in \omega} \) is disjoint, \( G \) is injective. We can thus \hyperref[rem:currying]{uncurry} \( G \) to obtain a function \( g \) from \( \omega \times \omega \) to \( B \).

  To prove that \( g \) is injective, suppose that \( g(n_1, m_1) = g(n_2, m_2) \). Then
  \begin{equation*}
    G(n_1)(m_1) = g(n_1, m_1) = g(n_2, m_2) = G(n_2)(m_2).
  \end{equation*}

  Note that \( n_1 \neq n_2 \) would lead to a contradiction because  \( \seq{ B_k }_{k \in \omega} \) is a disjoint family. So \( n_1 = n_2 \) and we obtain \( m_1 = m_2 \) since the function \( G(n_1): \omega \to B_k \) is injective. Therefore \( g \) itself is also injective.

  It is also surjective because for every \( a \in B \) there exists some \( k \in \omega \) such that
  \begin{equation*}
    a \in B_k = \img(G(k)).
  \end{equation*}

  Denote by \( f \) the bijective function from \( \omega \) to \( \omega \times \omega \) obtained in \fullref{thm:omega_equinumerous_with_omega_squared}. Then the function \( f \bincirc g: \omega \to B \) is bijective by \fullref{thm:function_composition_invertibility}. Therefore the union \( B \) is countably infinite. From \eqref{thm:countable_union_of_countable_sets/union_card_inequality} it follows that \( A \) is also countably infinite.
\end{proof}

\begin{corollary}\label{thm:at_most_countable_union_of_at_most_countable_sets}
  An \hyperref[def:countability/at_most_countable]{at most countable} union of at most countable sets is at most countable.
\end{corollary}
\begin{proof}
  Let \( \seq{ A_k }_{k \in \mscrK} \) be an at most countable family of at most countable sets. Denote their union by \( A \). For every \( A_k \) let \( g_k: A_k \to \omega \) be an injective function and define the \hyperref[def:disjoint_union]{disjoint union}
  \begin{equation*}
    B_k \coloneqq A_k \sqcup \set{ n \in \omega \given n \not\in \img(g_k) }
  \end{equation*}
  and the bijective function
  \begin{equation*}
    \begin{aligned}
      &h_k: B_k \to \omega \\
      &h_k(x) \coloneqq \begin{cases}
        (0, g_k(x)), &x \in A_k \\
        (1, x),      &\T{otherwise.}
      \end{cases}
    \end{aligned}
  \end{equation*}

  For every \( k \in \omega \setminus \mscrK \) instead define
  \begin{equation*}
    B_k \coloneqq \set{ (k, n) \given n \in \omega }
  \end{equation*}
  and let \( h_k: B_k \to \omega \) be the obvious bijective function.

  Then
  \begin{equation*}
    A
    =
    \bigcup_{k \in \mscrK} A_k
    \subseteq
    \bigcup_{k \in \mscrK} B_k
    \subseteq
    \bigcup_{k \in \omega} B_k
  \end{equation*}
  and the latter is countably infinite by \fullref{thm:countably_infinite_union_of_countably_infinite_sets}. Therefore \( A \) is at most countable.
\end{proof}
