\section{Category theory}\label{sec:category_theory}
\subsection{Categories}\label{subsec:categories}

\begin{definition}\label{def:category}\mcite\cite[def. 1.1.1]{Leinster2016Basic}
  A category is a generalization of the class of a \hyperref[def:preordered_set]{preordered set} (see \fullref{thm:preorder_category_correspondence}). In particular, the \hyperref[def:subset]{subset} relation in the \hyperref[def:set_zfc]{class of all sets} is a preorder (see \fullref{def:category_of_sets}).

  Note that a completely formal definition is difficult to give because it relies on intricacies of set theory (see the notes in \fullref{def:set_zfc}). Instead, we say that a \term{category} \( \cat{C} \) consists of \term{objects} and \term{morphisms}. See \fullref{rem:category_obj_hom} for further comments on the notation.

  \begin{thmenum}[series=def:category]
    \labitem[def:category/C1]{C1} The objects in \( \cat{C} \) are a \hyperref[def:set_zfc]{set-theoretic class}. We use the notation \( A \in \cat{C} \) to mean \enquote{\( A \) is an object in \( \cat{C} \)}.

    \labitem[def:category/C2]{C2} To each pair of objects \( A, B \in \cat{C} \), there corresponds a class \( \cat{C}(A, B) \) of morphisms, also called \term{arrows}. For a morphism \( f: A \to B \), we say that \( A \) is the \term{domain} of \( f \) and that \( B \) is the \term{codomain} of \( f \).

    We use the shorthand \( \cat{C}(A) \) for \( \cat{C}(A, A) \).

    \labitem[def:category/C3]{C3} For each triple of objects \( A, B, C \in \cat{C} \), there exists a \term{composition} \hyperref[def:function]{operation}
    \begin{equation*}
      \circ: \cat{C}(B, C) \times \cat{C}(A, B) \to \cat{C}(A, C).
    \end{equation*}

    The composition of \( f \in \cat{C}(A, B) \) and \( g \in \cat{C}(B, C) \) is denoted by \( g \circ f \). The order reversal notation comes from composition of functions.
  \end{thmenum}

  The definition of a category requires the following axioms to hold:
  \begin{thmenum}[resume=def:category]
    \labitem{def:category/identity}(identity) For each object \( A \in \cat{C} \), there exists a special morphism \( \id_A \in \cat{C}(A, A) \), called the \term{identity morphism}, such that whenever \( B \in \cat{C} \) and \( f: A \to B \), we have
    \begin{equation*}
      f \circ \id_A = \id_B \circ f = f.
    \end{equation*}

    \labitem{def:category/associativity}(associativity) Composition is associative, i.e. for each \( f \in \cat{C}(A, B) \), \( g \in \cat{C}(B, C) \) and \( h \in \cat{C}(C, D) \), we have
    \begin{equation*}
      (h \circ g) \circ f = h \circ (g \circ f).
    \end{equation*}
  \end{thmenum}
\end{definition}

\begin{remark}\label{rem:category_obj_hom}
  Some authors, e.g. \cite{Leinster2016Basic} or \cite{Aluffi2009}, use notations such as \( \op{obj}(C) \) to denote the class of objects. This notation does not benefit us in any way, so we do not use it.

  Some authors, e.g. \cite{MacLane1994}, use notations such as \( \op{hom}_{\cat{C}(A, B)} \) to denote the class of morphisms between the objects \( A, B \in \cat{C} \). We use this notation when dealing with algebraic structures. See, for example, \fullref{thm:linear_map_iff_function_on_basis}.

  The notation \( \cat{C}(A) \) is used as a shorthand for \( \cat{C}(A, A) \) and \( \hom_{\cat{C}(A)} \) is used as a shorthand for \( \hom_{\cat{C}(A, A)} \).
\end{remark}

\begin{example}\label{ex:categories}
  Examples of categories include:

  \begin{itemize}
    \item The category \( \cat{Set} \) of sets with functions (see \fullref{def:category_of_sets}).
    \item The category \( \cat{Top} \) of topological spaces with homomorphisms (see \fullref{def:category_of_topological_spaces}).
    \item The category \( \cat{Grp} \) of groups with homeomorphisms (see \fullref{def:category_of_sets}).
    \item Thin categories (see \fullref{def:thin_category}).
  \end{itemize}
\end{example}

\begin{definition}\label{def:category_cardinality}
  Let \( \cat{C} \) be a category. If for each pair \( A, B \in \cat{C} \) the class \( \cat{C}(A, B) \) is a set, we say that \( \cat{C} \) is \term{locally small}. If, in addition to this, the class of objects is a set, we say that \( \cat{C} \) is \term{small}.
\end{definition}

\begin{definition}\label{def:discrete_category}\mcite\cite[exmpl. 1.1.18(b]{Leinster2016Basic})
  If there are no morphisms in \( \cat{C} \) besides identity morphisms, we say that \( \cat{C} \) is a \term{discrete category}.
\end{definition}

\begin{definition}\label{def:generalized_element}\mcite\cite[def. 4.1.25]{Leinster2016Basic}
  Let \( \cat{C} \) be a category and \( A, B \in \cat{C} \). We say that the morphism \( f: A \to B \) is \term{a generalized element of \( B \) of shape \( A \)}. In the category \( \cat{Set} \), the morphism \( \in : 1 \to B \) is the standard element of the set \( B \) since there is a bijection between maps \( 1 \to B \) and elements of \( B \).
\end{definition}

\begin{definition}\label{def:morphism_invertibility}
  We introduce invertibility for morphisms in some category \( \cat{C} \) (compare with function invertibility, \fullref{def:function_invertibility}).

  \begin{thmenum}
    \labitem{def:morphism_invertibility/left_invertible} \( f: A \to B \) is called \term{left-invertible} if there exists a morphism \( g: B \to A \) such that \( g \circ f = \id_A \). In this case we call \( g \) a \term{left inverse of \( f \)}.

    \labitem{def:morphism_invertibility/monomorphism} \( f: C \to B \) is called a \term{monomorphism} or \term{monic morphism} or \term{left-cancellative morphism} or \term{embedding} if for any \( g, h: B \to A \) the equality \( f \circ g = f \circ h \) implies \( g = h \). We sometimes denote monomorphisms by \( f: C \hookrightarrow B \).

    \labitem{def:morphism_invertibility/right_invertible} \( f: A \to B \) is called \term{right-invertible} if there exists a morphism \( g: B \to A \) such that \( f \circ g = \id_B \). In this case we call \( g \) a \term{right inverse of \( f \)}.

    \labitem{def:morphism_invertibility/epimorphism} \( f: A \to B \) is called an \term{epimorphism} or \term{epic morphism} or \term{right-cancellative morphism} or \term{projection} if for any \( g, h: B \to C \) the equality \( g \circ f = h \circ f \) implies \( g = h \). We sometimes denote epimorphisms by \( f: C \twoheadrightarrow B \).

    \labitem{def:morphism_invertibility/isomorphism} \( f: A \to B \) is called \term{invertible} or an \term{isomorphism} if there exists a morphism \( g: B \to A \) that is both a left and a right inverse of \( f \). In this case we call \( g \) a (two-sided) \term{inverse of \( f \)} and we say that the objects \( A \) and \( B \) are isomorphic. We sometimes denote isomorphisms by \( f: A \cong B \) or \( A \overset f \cong B \).

    \labitem{def:morphism_invertibility/endomorphism} A morphism \( f: A \to A \) from an object to itself is called an \term{endomorphism} and if an endomorphism is an isomorphism, we call it an \term{automorphism}.
  \end{thmenum}
\end{definition}

\begin{proposition}\label{thm:at_most_one_isomorphism}\mcite\cite[exer. 1.1.13]{Leinster2016Basic}
  A morphism \( f: A \to B \) in any category \( \cat{C} \) can have at most one inverse.
\end{proposition}
\begin{proof}
  If \( f \) has no inverse, it has at most one inverse and the theorem follows.

  Now assume that \( f \) has two inverses \( g \) and \( h \), i.e.
  \begin{balign*}
    g \circ f = \id_A &  &  & f \circ g = \id_B,
    \\
    h \circ f = \id_A &  &  & f \circ h = \id_B.
  \end{balign*}

  It follows that \( g = h \) since
  \begin{balign*}
    g
    =
    g \circ \id_B
    =
    g \circ (f \circ h)
    =
    (g \circ f) \circ h
    =
    \id_A \circ h
    =
    h.
  \end{balign*}
\end{proof}

\begin{example}\label{ex:indiscrete_topology_universal_property}\mcite\cite[exer. 0.10]{Leinster2016Basic}
  Let \( S \) be a set. The indiscrete topological space \( I(S) \) and the canonical projection \( \pi: I(S) \to S \) are characterized by the following universal property: for any topological space \( X \) and any function \( f: X \to S \), there exists a unique continuous function \( \tilde f \) such that \( p \circ \tilde f = f \), that is, the following diagram commutes:
  \begin{equation*}
    \text{\todo{Add diagram}}\iffalse\begin{mplibcode}
      beginfig(1);
      input metapost/graphs;

      v1 := thelabel("$S$", origin);
      v2 := thelabel("$I(S)$", (2, 0) scaled u);
      v3 := thelabel("$X$", (1, -1) scaled u);

      a1 := straight_arc(v2, v1);
      a2 := straight_arc(v3, v1);

      d1 := straight_arc(v3, v2);

      draw_vertices(v);
      draw_arcs(a);

      draw d1 dotted;

      label.top("$p$", straight_arc_midpoint of a1);
      label.llft("$f$", straight_arc_midpoint of a2);
      label.lrt("$\hat f$", straight_arc_midpoint of d1);
      endfig;
    \end{mplibcode}\fi
  \end{equation*}
\end{example}
\begin{proof}
  Obviously \( I(S) \) and \( p \) exist. Assume they are not unique. Let the topological space \( Y \) and the function \( r: Y \to S \) satisfy the same universal property.

  Then by the universal property, there exist unique continuous functions \( \tilde p: I(S) \to Y \) and \( \tilde r: Y \to I(S) \) such that
  \begin{balign*}
    r \circ \tilde p = p
     &  &
    p \circ \tilde r = r.
  \end{balign*}

  Hence \( p = r \circ \tilde p = p \circ \tilde r \circ \tilde p \) and \( \tilde r \circ \tilde p = \id_{I(S)} \).

  Analogously, \( r = p \circ \tilde r = r \circ \tilde p \circ \tilde r \), so \( \tilde p \circ \tilde r = \id_Y \).

  Thus \( \tilde r \) and \( \tilde p \) are mutually inverse and \( I(S) \) is isomorphic to \( Y \).
\end{proof}

\begin{definition}\label{def:opposite_category}\mcite\cite[def. 1.1.9]{Leinster2016Basic}
  The \term{opposite} or \term{dual category} of \( \cat{C} \) is the category \( \cat{C}^{-1} \) such that
  \begin{itemize}
    \item The objects in \( \cat{C}^{-1} \) are the objects in \( \boldop{C} \).
    \item \( f^{-1} \in \cat{C}^{-1}(A, B) \iff f \in \boldop{C}(B, A) \), i.e. the morphisms are reversed.
  \end{itemize}
\end{definition}

\begin{example}
  The category \( \cat{Set}^{-1} \) has a morphism \( f: A \to B \) precisely when there exists a function \( f \) from the set \( B \) to the set \( A \). If \( f: A \to B \) is not invertible, then \( f \) is not a function.
\end{example}

\begin{definition}\label{def:subcategory}\mcite\cite[def. 1.2.18]{Leinster2016Basic}
  We call the category \( \boldop B \) a \term{subcategory} of \( \cat{A} \) if
  \begin{itemize}
    \item All objects in \( \boldop B \) are objects in \( \cat{A} \).
    \item All morphisms \( f \in \cat{B}(A, B) \) are morphisms in \( \cat{A}(A, B) \).
  \end{itemize}

  In case \( \cat{B}(A, B) = \cat{A}(A, B) \) for all objects \( A, B \in \boldop B \), we say that \( \boldop B \) is a \term{full subcategory}.
\end{definition}

\begin{definition}\label{def:skeletal_category}\mcite\cite[91]{MacLane1994}
  A subcategory \( \boldop S \) of \( \cat{A} \) is called \term{skeletal} or a \term{skeleton} of \( \cat{A} \) if it is full and if each object in \( \cat{A} \) is isomorphic to exactly one object in \( \boldop B \).

  A category \( \cat{A} \) is called \term{skeletal} if it is its own skeleton, i.e. the only isomorphisms in \( \cat{A} \) are equalities.
\end{definition}

\begin{remark}\label{rem:skeletal_subcategory_exists}
  A skeletal subcategory \( \boldop S \) of \( \cat{A} \) can be constructed using the axiom of choice by only selecting one object from each isomorphism class within \( \cat{A} \).
\end{remark}

\begin{definition}\label{def:product_category}\mcite\cite[exer. 1.1.14]{Leinster2016Basic}
  Let \( \cat{A} \) and \( \boldop B \) be categories. We define their \term{product category} \( \cat{A} \times \boldop B \) component-wise as
  \begin{itemize}
    \item The objects in \( \cat{A} \times \boldop B \) are pairs \( (A, B) \) where \( A \in \cat{A} \) and \( B \in \boldop B \).
    \item The morphisms in \( (\cat{A} \times \boldop B)[(A, B), (A', B')] \) are pairs \( (f, g) \) where \( f \in \cat{A}(A, A') \) and \( g \in \boldop{B}(B, B') \).
  \end{itemize}
  with identities \( \id_{(A,B)} =(\id_A, \id_B) \) and composition also defined component-wise.

  The definition naturally extends to any finite number of categories.

  For a special case, see the notes in \fullref{def:functor_category}.
\end{definition}

\begin{definition}\label{def:zero_objects}\mcite\cite[def. 2.1.7]{Leinster2016Basic}
  Let \( \cat{C} \) be a category and let \( A \in \cat{C} \).

  \begin{thmenum}
    \labitem{def:zero_objects/initial} If for any other object \( B \in \cat{C} \) there exists a unique morphism \( f: A \to B \), we call \( A \) an \term{initial object}. Clearly an initial object is unique up to isomorphism.

    \labitem{def:zero_objects/final} Analogously, if for any other object \( B \in \cat{C} \) there exists a unique morphism \( f: B \to A \), we call \( A \) a \term{terminal object} or \term{final object}.

    \labitem{def:zero_objects/zero} If \( A \) is both an initial and final object, we say that \( A \) is a zero object. A category with a zero object is called a \term{pointed category}.
  \end{thmenum}
\end{definition}

\begin{definition}\label{def:categorical_subobject}\mcite\cite[122]{MacLane1994}
  Let \( \cat{C} \) be a category and \( X \in \cat{C} \) be any object.

  Let \( u: Y \to X \) and \( v: Z \to X \) be \hyperref[def:morphism_invertibility]{monomorphisms}. If \( u = v \circ u' \) for some monomorphism \( u': Y \to Z \), we say that \term{\( u \) factors through \( v \)} and write \( u \leq v \). If both \( u \leq v \) and \( v \leq u \), we say that \( u \) and \( v \) are equivalent and write \( u \cong v \).

  The equivalence classes among the monomorphisms with a common codomain \( X \) are called \term{subobjects} of \( X \).
\end{definition}
