\section{Category theory}\label{sec:category_theory}
\subsection{Categories}\label{subsec:categories}

\begin{definition}\label{def:category}\MarginCite[def. 1.1.1]{Leinster2014}
  A category is a generalization of the class of a \hyperref[def:preordered_set]{preordered set} (see \fullref{thm:preorder_category_correspondence}). In particular, the \hyperref[def:subset]{subset} relation in the \hyperref[def:set_zfc]{class of all sets} is a preorder (see \fullref{def:category_of_sets}).

  Note that a completely formal definition is difficult to give because it relies on intricacies of set theory (see the notes in \fullref{def:set_zfc}). Instead, we say that a \Def{category} \( \Cat{C} \) consists of \Def{objects} and \Def{morphisms}. See \fullref{remark:category_obj_hom} for further comments on the notation.

  \begin{DefEnum}[series=def:category]
    \IAxiom{def:category/C1}{C1} The objects in \( \Cat{C} \) are a \hyperref[def:set_zfc]{set-theoretic class}. We use the notation \( A \in \Cat{C} \) to mean \enquote{\( A \) is an object in \( \Cat{C} \)}.

    \IAxiom{def:category/C2}{C2} To each pair of objects \( A, B \in \Cat{C} \), there corresponds a class \( \Cat{C}(A, B) \) of morphisms, also called \Def{arrows}. For a morphism \( f: A \to B \), we say that \( A \) is the \Def{domain} of \( f \) and that \( B \) is the \Def{codomain} of \( f \).

    We use the shorthand \( \Cat{C}(A) \) for \( \Cat{C}(A, A) \).

    \IAxiom{def:category/C3}{C3} For each triple of objects \( A, B, C \in \Cat{C} \), there exists a \Def{composition} \hyperref[def:function]{operation}
    \begin{equation*}
      \circ: \Cat{C}(B, C) \times \Cat{C}(A, B) \to \Cat{C}(A, C).
    \end{equation*}

    The composition of \( f \in \Cat{C}(A, B) \) and \( g \in \Cat{C}(B, C) \) is denoted by \( g \circ f \). The order reversal notation comes from composition of functions.
  \end{DefEnum}

  The definition of a category requires the following axioms to hold:
  \begin{DefEnum}[resume=def:category]
    \ILabel{def:category/identity}(identity) For each object \( A \in \Cat{C} \), there exists a special morphism \( \Id_A \in \Cat{C}(A, A) \), called the \Def{identity morphism}, such that whenever \( B \in \Cat{C} \) and \( f: A \to B \), we have
    \begin{equation*}
      f \circ \Id_A = \Id_B \circ f = f.
    \end{equation*}

    \ILabel{def:category/associativity}(associativity) Composition is associative, i.e. for each \( f \in \Cat{C}(A, B) \), \( g \in \Cat{C}(B, C) \) and \( h \in \Cat{C}(C, D) \), we have
    \begin{equation*}
      (h \circ g) \circ f = h \circ (g \circ f).
    \end{equation*}
  \end{DefEnum}
\end{definition}

\begin{remark}\label{remark:category_obj_hom}
  Some authors, e.g. \cite{Leinster2014} or \cite{Aluffi2009}, use notations such as \( \Op{obj}(C) \) to denote the class of objects. This notation does not benefit us in any way, so we do not use it.

  Some authors, e.g. \cite{MacLane1994}, use notations such as \( \Op{hom}_{\Cat{C}(A, B)} \) to denote the class of morphisms between the objects \( A, B \in \Cat{C} \). We use this notation when dealing with algebraic structures. See, for example, \fullref{thm:linear_map_iff_function_on_basis}.

  The notation \( \Cat{C}(A) \) is used as a shorthand for \( \Cat{C}(A, A) \) and \( \hom_{\Cat{C}(A)} \) is used as a shorthand for \( \hom_{\Cat{C}(A, A)} \).
\end{remark}

\begin{example}\label{ex:categories}
  Examples of categories include:

  \begin{itemize}
    \item The category \( \Cat{Set} \) of sets with functions (see \fullref{def:category_of_sets}).
    \item The category \( \Cat{Top} \) of topological spaces with homomorphisms (see \fullref{def:category_of_topological_spaces}).
    \item The category \( \Cat{Grp} \) of groups with homeomorphisms (see \fullref{def:category_of_sets}).
    \item Thin categories (see \fullref{def:thin_category}).
  \end{itemize}
\end{example}

\begin{definition}\label{def:category_cardinality}
  Let \( \Cat{C} \) be a category. If for each pair \( A, B \in \Cat{C} \) the class \( \Cat{C}(A, B) \) is a set, we say that \( \Cat{C} \) is \Def{locally small}. If, in addition to this, the class of objects is a set, we say that \( \Cat{C} \) is \Def{small}.
\end{definition}

\begin{definition}\label{def:discrete_category}\MarginCite[exmpl. 1.1.18(b]{Leinster2014})
  If there are no morphisms in \( \Cat{C} \) besides identity morphisms, we say that \( \Cat{C} \) is a \Def{discrete category}.
\end{definition}

\begin{definition}\label{def:generalized_element}\MarginCite[def. 4.1.25]{Leinster2014}
  Let \( \Cat{C} \) be a category and \( A, B \in \Cat{C} \). We say that the morphism \( f: A \to B \) is \Def{a generalized element of \( B \) of shape \( A \)}. In the category \( \Cat{Set} \), the morphism \( \in : 1 \to B \) is the standard element of the set \( B \) since there is a bijection between maps \( 1 \to B \) and elements of \( B \).
\end{definition}

\begin{definition}\label{def:morphism_invertibility}
  We introduce invertibility for morphisms in some category \( \Cat{C} \) (compare with function invertibility, \fullref{def:function_invertibility}).

  \begin{DefEnum}
    \ILabel{def:morphism_invertibility/left_invertible} \( f: A \to B \) is called \Def{left-invertible} if there exists a morphism \( g: B \to A \) such that \( g \circ f = \Id_A \). In this case we call \( g \) a \Def{left inverse of \( f \)}.

    \ILabel{def:morphism_invertibility/monomorphism} \( f: C \to B \) is called a \Def{monomorphism} or \Def{monic morphism} or \Def{left-cancellative morphism} or \Def{embedding} if for any \( g, h: B \to A \) the equality \( f \circ g = f \circ h \) implies \( g = h \). We sometimes denote monomorphisms by \( f: C \hookrightarrow B \).

    \ILabel{def:morphism_invertibility/right_invertible} \( f: A \to B \) is called \Def{right-invertible} if there exists a morphism \( g: B \to A \) such that \( f \circ g = \Id_B \). In this case we call \( g \) a \Def{right inverse of \( f \)}.

    \ILabel{def:morphism_invertibility/epimorphism} \( f: A \to B \) is called an \Def{epimorphism} or \Def{epic morphism} or \Def{right-cancellative morphism} or \Def{projection} if for any \( g, h: B \to C \) the equality \( g \circ f = h \circ f \) implies \( g = h \). We sometimes denote epimorphisms by \( f: C \twoheadrightarrow B \).

    \ILabel{def:morphism_invertibility/isomorphism} \( f: A \to B \) is called \Def{invertible} or an \Def{isomorphism} if there exists a morphism \( g: B \to A \) that is both a left and a right inverse of \( f \). In this case we call \( g \) a (two-sided) \Def{inverse of \( f \)} and we say that the objects \( A \) and \( B \) are isomorphic. We sometimes denote isomorphisms by \( f: A \cong B \) or \( A \overset f \cong B \).

    \ILabel{def:morphism_invertibility/endomorphism} A morphism \( f: A \to A \) from an object to itself is called an \Def{endomorphism} and if an endomorphism is an isomorphism, we call it an \Def{automorphism}.
  \end{DefEnum}
\end{definition}

\begin{proposition}\label{thm:at_most_one_isomorphism}\MarginCite[exer. 1.1.13]{Leinster2014}
  A morphism \( f: A \to B \) in any category \( \Cat{C} \) can have at most one inverse.
\end{proposition}
\begin{proof}
  If \( f \) has no inverse, it has at most one inverse and the theorem follows.

  Now assume that \( f \) has two inverses \( g \) and \( h \), i.e.
  \begin{BreakableAlign*}
    g \circ f = \Id_A &  &  & f \circ g = \Id_B,
    \\
    h \circ f = \Id_A &  &  & f \circ h = \Id_B.
  \end{BreakableAlign*}

  It follows that \( g = h \) since
  \begin{BreakableAlign*}
    g
    =
    g \circ \Id_B
    =
    g \circ (f \circ h)
    =
    (g \circ f) \circ h
    =
    \Id_A \circ h
    =
    h.
  \end{BreakableAlign*}
\end{proof}

\begin{example}\label{ex:indiscrete_topology_universal_property}\MarginCite[exer. 0.10]{Leinster2014}
  Let \( S \) be a set. The indiscrete topological space \( I(S) \) and the canonical projection \( \pi: I(S) \to S \) are characterized by the following universal property: for any topological space \( X \) and any function \( f: X \to S \), there exists a unique continuous function \( \tilde f \) such that \( p \circ \tilde f = f \), that is, the following diagram commutes:
  \begin{equation*}
    \begin{mplibcode}
      beginfig(1);
      input metapost/graphs;

      v1 := thelabel("$S$", origin);
      v2 := thelabel("$I(S)$", (2, 0) scaled u);
      v3 := thelabel("$X$", (1, -1) scaled u);

      a1 := straight_arc(v2, v1);
      a2 := straight_arc(v3, v1);

      d1 := straight_arc(v3, v2);

      draw_vertices(v);
      draw_arcs(a);

      draw d1 dotted;

      label.top("$p$", straight_arc_midpoint of a1);
      label.llft("$f$", straight_arc_midpoint of a2);
      label.lrt("$\hat f$", straight_arc_midpoint of d1);
      endfig;
    \end{mplibcode}
  \end{equation*}
\end{example}
\begin{proof}
  Obviously \( I(S) \) and \( p \) exist. Assume they are not unique. Let the topological space \( Y \) and the function \( r: Y \to S \) satisfy the same universal property.

  Then by the universal property, there exist unique continuous functions \( \tilde p: I(S) \to Y \) and \( \tilde r: Y \to I(S) \) such that
  \begin{BreakableAlign*}
    r \circ \tilde p = p
     &  &
    p \circ \tilde r = r.
  \end{BreakableAlign*}

  Hence \( p = r \circ \tilde p = p \circ \tilde r \circ \tilde p \) and \( \tilde r \circ \tilde p = \Id_{I(S)} \).

  Analogously, \( r = p \circ \tilde r = r \circ \tilde p \circ \tilde r \), so \( \tilde p \circ \tilde r = \Id_Y \).

  Thus \( \tilde r \) and \( \tilde p \) are mutually inverse and \( I(S) \) is isomorphic to \( Y \).
\end{proof}

\begin{definition}\label{def:opposite_category}\MarginCite[def. 1.1.9]{Leinster2014}
  The \Def{opposite} or \Def{dual category} of \( \Cat{C} \) is the category \( \Cat{C}^{-1} \) such that
  \begin{itemize}
    \item The objects in \( \Cat{C}^{-1} \) are the objects in \( \Bold{C} \).
    \item \( f^{-1} \in \Cat{C}^{-1}(A, B) \iff f \in \Bold{C}(B, A) \), i.e. the morphisms are reversed.
  \end{itemize}
\end{definition}

\begin{example}
  The category \( \Cat{Set}^{-1} \) has a morphism \( f: A \to B \) precisely when there exists a function \( f \) from the set \( B \) to the set \( A \). If \( f: A \to B \) is not invertible, then \( f \) is not a function.
\end{example}

\begin{definition}\label{def:subcategory}\MarginCite[def. 1.2.18]{Leinster2014}
  We call the category \( \Bold B \) a \Def{subcategory} of \( \Cat{A} \) if
  \begin{itemize}
    \item All objects in \( \Bold B \) are objects in \( \Cat{A} \).
    \item All morphisms \( f \in \Cat{B}(A, B) \) are morphisms in \( \Cat{A}(A, B) \).
  \end{itemize}

  In case \( \Cat{B}(A, B) = \Cat{A}(A, B) \) for all objects \( A, B \in \Bold B \), we say that \( \Bold B \) is a \Def{full subcategory}.
\end{definition}

\begin{definition}\label{def:skeletal_category}\MarginCite[91]{MacLane1994}
  A subcategory \( \Bold S \) of \( \Cat{A} \) is called \Def{skeletal} or a \Def{skeleton} of \( \Cat{A} \) if it is full and if each object in \( \Cat{A} \) is isomorphic to exactly one object in \( \Bold B \).

  A category \( \Cat{A} \) is called \Def{skeletal} if it is its own skeleton, i.e. the only isomorphisms in \( \Cat{A} \) are equalities.
\end{definition}

\begin{remark}\label{remark:skeletal_subcategory_exists}
  A skeletal subcategory \( \Bold S \) of \( \Cat{A} \) can be constructed using the axiom of choice by only selecting one object from each isomorphism class within \( \Cat{A} \).
\end{remark}

\begin{definition}\label{def:product_category}\MarginCite[exer. 1.1.14]{Leinster2014}
  Let \( \Cat{A} \) and \( \Bold B \) be categories. We define their \Def{product category} \( \Cat{A} \times \Bold B \) component-wise as
  \begin{itemize}
    \item The objects in \( \Cat{A} \times \Bold B \) are pairs \( (A, B) \) where \( A \in \Cat{A} \) and \( B \in \Bold B \).
    \item The morphisms in \( (\Cat{A} \times \Bold B)[(A, B), (A', B')] \) are pairs \( (f, g) \) where \( f \in \Cat{A}(A, A') \) and \( g \in \Bold{B}(B, B') \).
  \end{itemize}
  with identities \( \Id_{(A,B)} =(\Id_A, \Id_B) \) and composition also defined component-wise.

  The definition naturally extends to any finite number of categories.

  For a special case, see the notes in \fullref{def:functor_category}.
\end{definition}

\begin{definition}\label{def:zero_objects}\MarginCite[def. 2.1.7]{Leinster2014}
  Let \( \Cat{C} \) be a category and let \( A \in \Cat{C} \).

  \begin{DefEnum}
    \ILabel{def:zero_objects/initial} If for any other object \( B \in \Cat{C} \) there exists a unique morphism \( f: A \to B \), we call \( A \) an \Def{initial object}. Clearly an initial object is unique up to isomorphism.

    \ILabel{def:zero_objects/final} Analogously, if for any other object \( B \in \Cat{C} \) there exists a unique morphism \( f: B \to A \), we call \( A \) a \Def{terminal object} or \Def{final object}.

    \ILabel{def:zero_objects/zero} If \( A \) is both an initial and final object, we say that \( A \) is a zero object. A category with a zero object is called a \Def{pointed category}.
  \end{DefEnum}
\end{definition}

\begin{definition}\label{def:categorical_subobject}\MarginCite[122]{MacLane1994}
  Let \( \Cat{C} \) be a category and \( X \in \Cat{C} \) be any object.

  Let \( u: Y \to X \) and \( v: Z \to X \) be \hyperref[def:morphism_invertibility]{monomorphisms}. If \( u = v \circ u' \) for some monomorphism \( u': Y \to Z \), we say that \Def{\( u \) factors through \( v \)} and write \( u \leq v \). If both \( u \leq v \) and \( v \leq u \), we say that \( u \) and \( v \) are equivalent and write \( u \cong v \).

  The equivalence classes among the monomorphisms with a common codomain \( X \) are called \Def{subobjects} of \( X \).
\end{definition}
