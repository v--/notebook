\subsection{Equivalence relations}\label{subsec:equivalence_relations}

\begin{definition}\label{def:equivalence_relation}
  A binary relation on \( A \) that is \hyperref[def:binary_relation/reflexive]{reflexive}, \hyperref[def:binary_relation/symmetric]{symmetric} and \hyperref[def:binary_relation/transitive]{transitive} is called an \term{equivalence relation}. In other words, an equivalence relation is a symmetric \hyperref[def:preordered_set]{preorder}.

  We usually denote equivalence relations by the congruence symbol \( \cong \).

  \begin{thmenum}
    \thmitem{def:equivalence_relation/coset} The \term{equivalence class} of \( x \in A \), also called its \term{coset}, is the set
    \begin{equation*}
      [x] \coloneqq \set{ y \in A \given x \cong y }
    \end{equation*}
    of all elements of \( A \) that are related to \( x \).

    \thmitem{def:equivalence_relation/quotient} The \term{quotient set} of \( A \) by \( \cong \) is the set
    \begin{equation*}
      A / {\cong} \ \coloneqq \set{ [x] \given x \in A }.
    \end{equation*}

     If we have an easy way to choose a representative from each coset, then \( A / {\cong} \) may be regarded as a subset of \( A \). In general, this is not a subset relation by only an \hyperref[def:first_order_homomorphism_invertibility/embedding]{embedding}.

    \thmitem{def:equivalence_relation/projection} The \term{canonical projection} is
    \begin{equation*}
      \begin{aligned}
        &\pi: A \to A / {\cong}  \\
        &\pi(x) \coloneqq [x].
      \end{aligned}
    \end{equation*}

    If we have a fixed \hyperref[def:choice_function]{choice function} \( c: A / {\cong} \to A \), we also define the \term{canonical embedding}
    \begin{equation*}
      \begin{aligned}
        &\iota: A / {\cong} \to A \\
        &\iota([x]) \coloneqq c(x).
      \end{aligned}
    \end{equation*}

    We sometimes have an obvious choice function, for example in \fullref{thm:polynomial_quotient_rings_equinumerous_with_module_of_polynomials}.

    In this case, the canonical projection may be regarded as a function from \( A \) to the subset \( c(A / {\cong}) \) of \( A \). Otherwise, the function \( \pi \) can be regarded as a \hyperref[def:function/multi-valued]{multi-valued function} from \( A \) to \( A \).
  \end{thmenum}
\end{definition}

\begin{proposition}\label{thm:equality_is_smallest_equivalence_relation}
  The equality \hyperref[def:relation]{relation} \( = \) is the intersection of all equivalence relations.
\end{proposition}
\begin{proof}
  It is equivalent to the \hyperref[def:binary_relation/diagonal]{diagonal relation} \( \Delta_X \). By \fullref{thm:derived_relations_characterization}, it is the smallest reflexive relation on \( A \), i.e. the intersection of all reflexive relations.
\end{proof}

\begin{definition}\label{def:set_partition}
  Let \( A \) be a set. A \term{cover} of \( A \) is a \hyperref[rem:family_of_sets]{family} \( \mscrA \subseteq \pow(A) \) of nonempty subsets of \( A \) such that \( A = \bigcup \mscrA \). We sometimes use the term more loosely and say that an arbitrary family of sets \( \mscrA \) is a cover of \( A \) if \( A \subseteq \bigcup \mscrA \). The two definitions are identical if we intersect each set in \( \mscrA \) with \( A \) and remove the empty sets.

  A \term{partition} of \( A \) is a pairwise \hyperref[def:subset]{disjoint} cover. In other words, the cover \( \mscrA \) is a partition if and only if each element of \( A \) belong to exactly one set in \( \mscrA \).
\end{definition}

\begin{proposition}\label{thm:equivalence_partition}
  Fix a set \( A \). Let \( {\sim} \) be a binary relation of \( A \). The following are equivalent:
  \begin{thmenum}
    \thmitem{thm:equivalence_partition/equivalence} \( {\sim} \) is an \hyperref[def:equivalence_relation]{equivalence relation}.

    \thmitem{thm:equivalence_partition/partition} There exists a \hyperref[def:set_partition]{partition} \( \mscrA \) of \( A \) such that \( x \sim y \) if and only if they belong to the same set in the partition \( \mscrA \).

    \thmitem{thm:equivalence_partition/function} There exists a set \( B \) and a \hyperref[def:function]{function} \( f: A \to B \) such that \( f(x) = f(y) \) if and only if \( x \sim y \).
  \end{thmenum}
\end{proposition}
\begin{proof}
  \ImplicationSubProof{thm:equivalence_partition/equivalence}{thm:equivalence_partition/partition} Let \( {\sim} \) be an equivalence relation on \( A \). The quotient set \( A / {\sim} \) is a partition. Indeed:
  \begin{itemize}
    \item Every element \( x \in A \) belongs exactly one equivalence class \( [x] \) by definition.

    \item The equivalence classes are disjoint. Indeed, assume the contrary. Then there exist \( x \) and \( y \) such that \( [x] \cap [y] \neq \varnothing \) and yet \( x \not\sim y \).

    Let \( z \in [x] \cap [y] \). Then \( z \sim x \) and \( z \sim y \), thus by transitivity of \( {\sim} \) we have \( x \sim z \sim y \) and hence \( x \sim y \), which contradicts our assumption that \( x \not\sim y \).

    Hence either \( [x] = [x] \) or \( [x] \cap [y] = \varnothing \). That is, different equivalence classes are disjoint.
  \end{itemize}

  \ImplicationSubProof{thm:equivalence_partition/partition}{thm:equivalence_partition/function} Let \( \mscrA \) be a partition of \( A \) such that \( x \sim y \) if and only if they both belong to the same set in \( \mscrA \).

  Given \( x \in A \), denote by \( A_x \) the set in \( \mscrA \) which contains \( x \). Define the function
  \begin{equation*}
    \begin{aligned}
      &f: A \to \mscrA \\
      &f(x) = A_x.
    \end{aligned}
  \end{equation*}

  This function is well defined since since \( \mscrA \) is a partition, which means that \( x \) belongs to exactly one set in \( \mscrA \).

  \ImplicationSubProof{thm:equivalence_partition/function}{thm:equivalence_partition/equivalence} Follows from the fact that \( = \) is an equivalence relation.
\end{proof}
