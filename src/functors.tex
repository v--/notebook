\subsection{Functors}\label{subsec:functors}

\begin{definition}\label{def:functor}\mcite[def. 1.2.1 \\ def. 1.2.10]{Leinster2016Basic}
  Fix some \hyperref[def:category]{categories} \( \cat{C} \) and \( \cat{D} \). A \term{functor} \( F: \cat{C} \to \cat{D} \) is a \hyperref[def:theory_of_graphs/quiver_homomorphism]{quiver homomorphism} between the underlying quivers that is compatible with composition and identities.

  Explicitly, a functor is a family of functions
  \begin{equation}\label{eq:def:functor_as_family_of_function}
    \begin{aligned}
      F_{\obj}:       &\obj(\cat{C}) \to \obj(\cat{D}) \\
      F_{\hom(A, B)}: &\cat{C}(A, B) \to \cat{D}(F_{\obj}(A), F_{\obj}(B)),
    \end{aligned}
  \end{equation}
  where \( F_{\hom(A, B)} \) is a distinct function for every pair of objects \( A \) and \( B \).

  In practice, we usually define the functor as the set
  \begin{equation}\label{eq:def:functor_as_single_function}
    F \coloneqq F_{\obj} \cup \bigcup\set{ F_{\hom(A, B)} \given A, B \in \obj(\cat{C}) }
  \end{equation}

  Since the domains of all constituent functions are disjoint, \( F \) is again a total single-valued function. This allows us to justify the notation \( F(A) \) for objects and \( F(f) \) for morphisms.

  The definition of a functor additionally requires the following compatibility conditions to hold:
  \begin{thmenum}[series=def:category]
    \thmitem[def:functor/CF1]{CF1} Functors must preserve composition, meaning that for any pair of morphism \( f: A \to B \) and \( g: B \to C \) in \( \cat{C} \), we have
    \begin{equation}\label{eq:def:category/CF1}\tag{\logic{CF1}}
      F(g \bincirc f) = F(g) \bincirc F(f).
    \end{equation}

    \thmitem[def:functor/CF2]{CF2} Functors must preserve identities, meaning that for any object \( A \in \cat{C} \) we must have
    \begin{equation}\label{eq:def:category/CF2}\tag{\logic{CF2}}
      F(\id_A) = \id_{F(A)}.
    \end{equation}
  \end{thmenum}
\end{definition}
\begin{defproof}
  The definition \eqref{eq:def:functor_as_family_of_function} ensures that the quiver homomorphism conditions \eqref{eq:def:theory_of_graphs/quiver_homomorphism/head} and \eqref{eq:def:theory_of_graphs/quiver_homomorphism/tail} hold.

  Indeed, for any morphism \( f: A \to B \) in \( \cat{C} \) we have
  \begin{equation*}
    F(\dom(f)) = F(A) = \dom(F(f)),
  \end{equation*}
  which implies \eqref{eq:def:theory_of_graphs/quiver_homomorphism/head}. We also have
  \begin{equation*}
    F(\co\dom(f)) = F(B) = \co\dom(F(f)),
  \end{equation*}
  which implies \eqref{eq:def:theory_of_graphs/quiver_homomorphism/tail}.
\end{defproof}

\begin{remark}\label{rem:functor_size}
  It is possible that \( \cat{C} \) is \( \mscrU \)-small in the sense of \fullref{def:category_size}, but the \hyperref[def:functor]{functor} \( F \), as the set \eqref{eq:def:functor_as_single_function}, is not \( \mscrU \)-small in the sense of \fullref{def:large_and_small_sets}. Without using universes, we cannot prove the existence of any functor from the category of smalls sets to itself, for example.
\end{remark}

\begin{definition}\label{def:category_of_small_categories}
  Suppose that we are given a \hyperref[def:grothendieck_universe]{Grothendieck universe} \( \mscrU \), which is safe to assume to be the smallest suitable one as explained in \fullref{def:large_and_small_sets}.

  We denote the \hyperref[def:category]{category} of \( \mscrU \)-small \hyperref[def:category]{categories} by \( \cat{\mscrU-Cat} \) or, if the universe is clear from the context, simply by \( \cat{Cat} \).

  \begin{itemize}
    \item The \hyperref[def:category/objects]{set of objects} \( \obj(\cat{Cat}) \) is the set of all \( \mscrU \)-small categories.

    \item The \hyperref[def:category/morphisms]{set of morphisms} \( \cat{Cat}(A, B) \) from \( A \) to \( B \) is the set of all \hyperref[def:functor]{functors} from \( A \) to \( B \).

    \item The \hyperref[def:category/composition]{composition of morphisms} is the \hyperref[def:multi_valued_function/composition]{function composition} of the functors regarded as the functions \eqref{eq:def:functor_as_single_function}. That is, the composition of \( F: \cat{C} \to \cat{D} \) and \( G: \cat{D} \to \cat{E} \) is the functor
    \begin{equation}\label{eq:def:category_of_small_categories/composition}
      \begin{aligned}
        &G \bincirc F: \cat{C} \to \cat{E}, \\
        &[G \bincirc F](A) \coloneqq G(F(A)), \\
        &[G \bincirc F](f) \coloneqq G(F(f)).
      \end{aligned}
    \end{equation}

    \item The \hyperref[def:category/identity]{identity morphism} of the category \( \cat{C} \) is the \term{identity functor}
    \begin{equation}\label{eq:def:category_of_small_categories/identity}
      \begin{aligned}
        &\id_{\cat{C}}: \cat{C} \to \cat{C}, \\
        &\id_{\cat{C}}(A) \coloneqq A, \\
        &\id_{\cat{C}}(f) \coloneqq f.
      \end{aligned}
    \end{equation}
  \end{itemize}
\end{definition}
\begin{defproof}
  To see that \( \cat{\mscrU-Cat} \) is indeed a category, we verify the conditions \ref{def:category/C1} and \ref{def:category/C2}.

  \SubProofOf{def:category/C1} For every two \( \mscrU \)-small categories \( \cat{C} \) and \( \cat{D} \) and every functor \( F: \cat{C} \to \cat{D} \), for every object \( A \in \cat{C} \) we have
  \begin{equation*}
    [\id_{\cat{D}} \bincirc F](A)
    =
    \id_{\cat{D}}(F(A))
    =
    F(A)
    =
    F(\id_{\cat{C}}(A))
    =
    [F \bincirc \id_{\cat{C}}](A)
  \end{equation*}
  and analogously for morphisms.

  Therefore, \( \id_{\cat{C}} \) and \( \id_{\cat{D}} \) satisfy \eqref{eq:def:category/C1}.

  \SubProofOf{def:category/C2} Associativity of functor composition is inherited from the associativity of function composition.
\end{defproof}

\begin{proposition}\label{thm:category_of_small_categories_properites}
  We collect here important properties of the category \hyperref[def:category_of_small_categories]{\( \cat{\mscrU-Cat} \)} of \( \mscrU \)-small categories. Most of them require forward references.
\end{proposition}

\begin{definition}\label{def:functor_image}
  The \term{image} of a functor \( F: \cat{C} \to \cat{D} \) is the \hyperref[def:quiver]{quiver} whose vertex set is
  \begin{equation*}
    V \coloneqq \set{ F(A) \given A \in \cat{C} }
  \end{equation*}
  and whose arc set is
  \begin{equation*}
    A \coloneqq \set{ F(f) \given A, B \in \cat{C} \T{and} f \in \cat{C}(A, B) }.
  \end{equation*}

  This quiver has no categorical structure --- it is merely a directed multigraph. As shown in \fullref{ex:functor_image_not_a_category}, imposing a categorical structure na\"ively may fail.
\end{definition}

\begin{definition}\label{def:categorical_diagram}
  Categorical diagrams are a generalization of \hyperref[def:tuple_and_cartesian_product/indexed_family]{indexed families} from set theory.

  Fix a category \( \cat{I} \), called an \term{index category}. A \term{diagram} of shape \( \cat{I} \) is simply a functor \( D: \cat{I} \to \cat{C} \), whose domain is \( \cat{I} \).

  It is often convenient to think of diagrams in terms of their \hyperref[def:functor_image]{functor images} \( D(\cat{I}) \) and to draw graphically the \hyperref[def:quiver_geometric_realization]{geometric realizations} of the \hyperref[def:quiver_transitive_closure]{transitive reduction} of the \hyperref[def:quiver]{quiver} \( D(\cat{I}) \), often excluding the identity morphisms and adding visual aids. In this regard, categorical diagrams correspond to the everyday sense of the word \enquote{diagram}.

  We do not really care about how the objects and morphisms in \( \cat{I} \) are labeled, hence we often use placeholder dots like in \fullref{fig:ex:functor_image_not_a_category}.
\end{definition}

\begin{example}\label{ex:functor_image_not_a_category}\mcite{MathSE:image_of_functor_is_not_a_category}
  \begin{figure}
    \hfill
    \includegraphics{figures/fig__ex__functor_image_not_a_category.pdf}
    \hfill
    \hfill
    \caption{A functor whose image is not a category.}\label{fig:ex:functor_image_not_a_category}
  \end{figure}

  Consider the functor \( F: \cat{C} \to \cat{D} \) from \cref{fig:ex:functor_image_not_a_category}.

  \begin{itemize}
    \item The solid arrows are the morphisms in \( \cat{C} \) and their images in \( F(\cat{C}) \).
    \item The double arrows denote the action of the functor \( F \).
    \item The dotted arrow exists in \( \cat{D} \) as the composition of the other two arrows, however it is missing in the image \( F(\cat{C}) \). Thus, composition is not fully defined in \( F(\cat{C}) \), and \( F(\cat{C}) \) fails to be a category.
  \end{itemize}
\end{example}

\begin{remark}\label{rem:universal_property}
  We sometimes have statements like \enquote{for a given \( x \), there exists a unique \( y \) such that for every \( z \) \ldots}. These statements correspond to formulas of the form
  \begin{equation*}
    \qExists y \qforall z \varphi,
  \end{equation*}
  where \( x \) is a free variable of \( \varphi \) and \( \qExists y \) is a metalogical abbreviation as explained in \fullref{rem:first_order_formula_conventions/exists_unique}.

  These formulas are technically not universal in the sense of \fullref{thm:implicit_universal_quantification}. In category theory, however, they are called \term{universal properties}.
\end{remark}
