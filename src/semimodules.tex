\subsection{Semimodules}\label{subsec:semimodules}

Semimodules are generalizations of monoid actions. Notation and terminology-wise, semimodules are somewhat special in that they are very much influenced by linear algebra and analysis, where vector spaces are crucial.

\begin{definition}\label{def:endomorphism_semiring}
  Let \( X \) be a monoid or, more generally, an object in a \hyperref[def:category]{category} that is \hyperref[def:concrete_category]{concrete} over \hyperref[def:monoid/category]{\( \cat{Mon} \)}.

  Let \( \End(X) \) be the \hyperref[def:endomorphism_monoid]{endomorphism monoid} over \( X \). These are necessarily monoid endomorphisms, however they may carry additional structure like being \hyperref[def:group/homomorphism]{group homomorphisms}, \hyperref[def:semimodule/homomorphism]{(semi)module homomorphisms}, \hyperref[def:semilattice/homomorphism]{(semi)lattice homomorphisms} or their \hyperref[rem:topological_first_order_structures]{continuous counterparts}.

  Define addition in \( \End(X) \) pointwise as \( [f + g](x) \coloneqq f(x) + g(x) \). Then \( \End(X) \) with pointwise addition and composition is a \hyperref[def:semiring]{semiring}, which we call the \term{endomorphism semiring} over \( X \).
\end{definition}

\begin{definition}\label{def:semimodule}
  Fix a \hyperref[def:semiring]{semiring} \( R \), whose elements we will call \term{scalars}, and an \hyperref[rem:additive_magma]{additive} \hyperref[def:magma/commutative]{commutative} \hyperref[def:monoid]{monoid} \( M \), whose elements we will call \term{vectors}.

  We say that \( M \) is a \term{semimodule} over \( R \) if they are compatible in any of the equivalent ways listed below. Analogously to \hyperref[def:monoid_action]{monoid actions}, if \( R \) is not commutative, we distinguish between left and right semimodules. Rather than \enquote{\( M \) is a semimodule over \( R \)}, it is often more convenient to say \enquote{\( M \) is an \( R \)-semimodule}.

  \begin{thmenum}[series=def:semimodule]
    \thmitem{def:semimodule/action} A left semimodule is a \hyperref[def:semiring/homomorphism]{homomorphism} from \( R \) to the \hyperref[def:endomorphism_semiring]{endomorphism semiring} \( \End(M) \). A right semimodule is a homomorphism from the \hyperref[def:semiring/opposite]{dual semiring} \( R^{-1} \) to \( \End(M) \).

    This definition is concise and natural, but unfortunately not very useful.

    \thmitem{def:semimodule/operation} The usual way to define a left semimodule is via a binary operation \( \cdot: R \times M \to M \) called \term{scalar multiplication} that satisfies the following conditions:
    \begin{thmenum}
      \thmitem{def:semimodule/operation/scalar_multiplication_action} Scalar multiplication is a \hyperref[def:monoid_action]{monoid action} of the multiplicative monoid \( (R, \cdot_R) \) on \( M \). The following conditions correspond to \eqref{eq:def:monoid_action/family/identity} and \eqref{eq:def:monoid_action/family/compatibility}:
      \begin{align}
        &1_R \cdot x = x, \label{eq:def:semimodule/operation/scalar_multiplication_action/identity} \\
        &(r \cdot_R s) \cdot x = r \cdot (s \cdot x). \label{eq:def:semimodule/operation/scalar_multiplication_action/compatibility}
      \end{align}

      The second condition can be regarded as a form of associativity.

      \thmitem{def:semimodule/operation/scalar_addition_distributivity} Scalar addition distributes over scalar multiplication:
      \begin{equation}\label{eq:def:semimodule/operation/scalar_addition_distributivity}
        (r +_R s) \cdot x = r \cdot x + s \cdot x.
      \end{equation}

      \thmitem{def:semimodule/operation/vector_addition_distributivity} Vector addition distributes over scalar multiplication:
      \begin{equation}\label{eq:def:semimodule/operation/vector_addition_distributivity}
        r \cdot (x + y) = r \cdot x + r \cdot y.
      \end{equation}

      \thmitem{def:semimodule/operation/absorption} The scalar and vector zeros are compatible:
      \begin{equation}\label{eq:def:semimodule/operation/absorption}
        0_R \cdot x = 0_M = r \cdot 0_M.
      \end{equation}
    \end{thmenum}

    In practice, we use the same symbol for both scalar and vector addition, and we denote both scalar and vector multiplication via juxtaposition.
  \end{thmenum}

  Semimodules have the following metamathematical properties:
  \begin{thmenum}[resume=def:semimodule]
    \thmitem{def:semimodule/theory} In order to fit the heterogeneous operation \( \cdot \) into the framework of \hyperref[def:first_order_semantics/satisfiability]{first-order logic models}, we can extend the \hyperref[def:monoid/theory]{theory of monoids} by adding, for every semiring element \( r \), a unary \hyperref[def:first_order_language/func]{functional symbol} \( m_r \). All conditions can then be reformulated via this operation. For example, \eqref{eq:def:semimodule/operation/scalar_multiplication_action/compatibility} corresponds to the axiom schema
    \begin{equation*}
      m_{rs}(\xi) = m_r(m_s(\xi)).
    \end{equation*}

    \thmitem{def:semimodule/homomorphism} A \hyperref[def:first_order_homomorphism]{first-order homomorphism} between two \( R \)-semimodules \( M \) and \( N \) is a function \( \varphi: M \to N \) that is a \hyperref[def:monoid/homomorphism]{monoid homomorphism} and satisfies \( \varphi \bincirc m_r^M = m_r^N \bincirc \varphi \).

    This can be expressed more clearly via the following two conditions, which we call \term{additivity} and \term{homogeneity}:
    \begin{align}
      \varphi(x + y) &= \varphi(x) + \varphi(y) \label{def:semimodule/homomorphism/additive} \\
         \varphi(rx) &= r \varphi(x) \label{def:semimodule/homomorphism/homogeneity}
    \end{align}

    Functions satisfying additivity and homogeneity are commonly called \term{linear}. These are a central object of study in \hyperref[sec:linear_algebra]{linear algebra} and, to a lesser extent, (linear) \hyperref[sec:functional_analysis]{functional analysis}.

    \thmitem{def:semimodule/submodel} The set \( A \subseteq M \) is a \hyperref[thm:substructure_is_model]{submodel} of \( M \) if it is a \hyperref[def:monoid/submodel]{submonoid} of \( M \) that is closed under scalar multiplication, i.e. \( rM = m_r[M] \subseteq M \) for every \( r \in R \). We say that \( A \) is an \( R \)-\term{sub-semimodule} of \( M \). If \( M \) is a module over some semiring extension \( T \) of \( R \), \( A \) may not be a \( T \)-sub-semimodule. For this reason, we should only use the term \enquote{sub-semimodule} of the underlying ring is clear from the context.

    As a consequence of \fullref{thm:positive_formulas_preserved_under_homomorphism}, the \hyperref[def:multi_valued_function/image]{image} of an \( R \)-semimodule homomorphism \( \varphi: M \to N \) is an \( R \)-sub-semimodule of \( M \).

    For an arbitrary set \( A \), we denote the \hyperref[def:first_order_generated_substructure]{generated submodel} by \( \linspan{ A } \) and call it the \term{linear span} of \( A \).

    \Fullref{rem:span_over_different_semirings} shows how it is important to be unambiguous about over which semiring we take the span of \( A \). In case of possible ambiguity, we will use subscripts like \( \linspan_R A \).

    The linear span can be characterized via \hyperref[def:linear_combination]{linear combinations} --- see \fullref{ex:def:first_order_substructure/vector_space}.

    \thmitem{def:semimodule/trivial} The \hyperref[thm:substructures_form_complete_lattice/bottom]{trivial} semimodule is the \hyperref[def:pointed_set/trivial]{trivial pointed set} \( \set{ 0 } \).

    \thmitem{def:semimodule/category} For a fixed semiring \( R \), the \hyperref[def:category_of_small_first_order_models]{category of \( \mscrU \)-small models} \( \ucat{SMod}_R \) is \hyperref[def:concrete_category]{concrete} over \hyperref[def:monoid]{\( \ucat{Mon} \)}.
  \end{thmenum}
\end{definition}
\begin{proof}
  \ImplicationSubProof{def:semimodule/action}{def:semimodule/operation} Fix a semiring homomorphism \( \varphi: R \to \End(M) \) and define the operation \( r \cdot x \coloneqq \varphi(r)(x) \).

  We will verify that all conditions from \fullref{def:semimodule/operation} hold for this operation.

  \begin{itemize}
    \item By definition, \( \varphi \) is a monoid action of \( (R, \cdot) \) on \( (M, \bincirc) \).

    \item Distributivity of scalar addition holds because \( \varphi \) is a \hyperref[def:magma/homomorphism]{magma homomorphism} from \( (R, +) \) to \( (M, +) \).

    \item Distributivity of vector addition holds because, for each \( r \), \( \varphi(r) \) is a magma endomorphism of \( (M, +) \).

    \item Since \( \varphi \) is a monoid homomorphism from \( (R,  +) \) to \( (R, \cdot) \), it preserves identities and hence
    \begin{equation*}
      0_R \cdot x = \varphi(0_R)(x) = [y \mapsto 0_M](x) = 0_M.
    \end{equation*}

    This proves half of \fullref{def:semimodule/operation/absorption}.

    \item Since, for each \( r \), \( \varphi(r) \) is a monoid endomorphism of \( (M, +) \), we have
    \begin{equation*}
      r \cdot 0_M = \varphi(r)(0_M) = 0_M.
    \end{equation*}

    This proves the other half of \fullref{def:semimodule/operation/absorption}.
  \end{itemize}

  \ImplicationSubProof{def:semimodule/operation}{def:semimodule/action} Let \( \cdot: R \times M \to M \) be an operation satisfying all conditions from \fullref{def:semimodule/operation}. Define the function \( \varphi(r) \coloneqq (x \mapsto r \cdot x) \). We will show that this is a semiring homomorphism.

  It preserves both identities because
  \begin{equation*}
    \varphi(0_R) = (x \mapsto 0) = 0_{\End(M)}
  \end{equation*}
  and
  \begin{equation*}
    \varphi(1_R) = (x \mapsto x) = \id_M.
  \end{equation*}

  We must also show that it preserves both binary operations. Clearly
  \begin{equation*}
    \varphi(r + s)
    =
    (x \mapsto (r + s) x)
    \reloset {\eqref{eq:def:semiring/right_distributivity}} =
    (x \mapsto r x + s x)
    =
    (x \mapsto r x) + (x \mapsto s x)
    =
    \varphi(r) + \varphi(s).
  \end{equation*}

  For multiplication, we have
  \begin{equation*}
    \varphi(rs)
    =
    (x \mapsto (rs)x)
    \reloset {\eqref{eq:def:magma/associative}} =
    (x \mapsto r(sx))
    =
    \parens[\Big]{ x \mapsto \varphi(r)\parens[\Big]{ \varphi(s)(x) } }
    =
    \varphi(r) \bincirc \varphi(s).
  \end{equation*}
\end{proof}

\begin{proposition}\label{thm:semiring_is_semimodule}
  Every semiring is both a left and right semimodule over itself with scalar multiplication given by the semiring multiplication.

  This result specializes to \fullref{thm:semiring_is_algebra}.
\end{proposition}
\begin{proof}
  Fix a semiring \( R \). We will show that \( \cdot \) satisfied the conditions in \fullref{def:semimodule/operation}.
  \begin{itemize}
    \item The identity law \eqref{eq:def:semimodule/operation/scalar_multiplication_action/identity} holds because \( 1 \) is a multiplicative identity of \( M \).
    \item The associativity-like law \eqref{eq:def:semimodule/operation/scalar_multiplication_action/compatibility} follows from associativity of multiplication.
    \item The two distributivity laws \eqref{eq:def:semimodule/operation/scalar_addition_distributivity} and \eqref{eq:def:semimodule/operation/vector_addition_distributivity} follow from left and right distributivity on \( R \).
    \item The absorption law \eqref{eq:def:semimodule/operation/absorption} follows from absorption on semirings.
  \end{itemize}

  All the above also hold for right semimodules rather than left.
\end{proof}

\begin{proposition}\label{thm:commutative_monoid_is_semimodule}
  The categories \( \hyperref[def:monoid/category]{\cat{CMon}} \) of commutative monoids and \( \hyperref[def:semimodule/category]{\cat{SMod}_\BbbN} \) of natural number semimodules are \hyperref[rem:category_similarity/isomorphism]{isomorphic}.

  More concretely, every commutative monoid \( M \) is a left semimodule over \( \BbbN \) with scalar multiplication given by \hyperref[rem:additive_magma/multiplication]{recursively defined multiplication}
  \begin{equation}\label{eq:thm:commutative_monoid_is_semimodule/operation}
    \begin{aligned}
      &\cdot: \BbbN \times M \to M \\
      &n \cdot x \coloneqq \begin{cases}
        0_M,           &n = 0, \\
        n \cdot x + x, &n > 1.
      \end{cases}
    \end{aligned}
  \end{equation}

  Conversely, in every semimodule over \( \BbbN \), scalar multiplication matches the recursively defined multiplication.

  This result specializes to \fullref{thm:semiring_is_natural_number_algebra} and \fullref{thm:abelian_group_is_module}.
\end{proposition}
\begin{proof}
  \SufficiencySubProof Let \( M \) be a commutative monoid. The operation \( \cdot: \BbbN \times M \to M \) defined in \fullref{thm:semiring_characteristic_homomorphism} satisfies the conditions in \fullref{def:semimodule/operation} as either a direct consequence of the definition or as a consequence of \fullref{thm:monoid_distributivity}.

  The homomorphisms are thus also compatible.

  \NecessitySubProof Let \( M \) be a semimodule over \( \BbbN \). We will use induction to show that \eqref{eq:thm:semiring_is_semimodule/operation} holds.
  \begin{itemize}
    \item For \( n = 0 \), this follows from the absorption law \eqref{eq:def:semimodule/operation/absorption}.
    \item If \( n \cdot x = n \cdot x + x \), then by scalar distributivity, \( (n + 1) \cdot x = n \cdot x + 1 \cdot x \). The multiplicative identity law \eqref{eq:def:semimodule/operation/scalar_multiplication_action/identity} then shows that \( 1 \cdot x = x \), which concludes our proof.
  \end{itemize}

  The homomorphisms are thus also compatible.
\end{proof}

\begin{definition}\label{def:function_support}
  The \term{support} of a function \( f: A \to R \) from a set \( A \) to a semiring \( R \) is the set
  \begin{equation*}
    \supp(f) \coloneqq \set{ x \in A \given f(x) \neq 0_R }.
  \end{equation*}
\end{definition}

\begin{definition}\label{def:semimodule_direct_product}
  The \term{direct product} of a family of \( R \)-\hyperref[def:semimodule]{semimodules} \( \seq{ M_k }_{k \in \mscrK} \) is their \hyperref[def:monoid_direct_product]{monoid direct product} \( \prod_{k \in \mscrK} M_k \) with the additional componentwise scalar product
  \begin{equation*}
    r \cdot \seq{ x_k }_{k \in \mscrK}
    \coloneqq
    \seq{ r \cdot x_k }_{k \in \mscrK}.
  \end{equation*}

  As in the case of general monoids, the \term{direct sum} \( \bigoplus_{k \in \mscrK} M_k \) is the submonoid of the direct product consisting only of \hyperref[def:cartesian_product/tuple]{tuples} with \hyperref[def:set_finiteness]{finite} \hyperref[def:function_support]{support}. That is, tuples with only finitely many nonzero components.
\end{definition}

\begin{proposition}\label{thm:semimodule_categorical_limits}
  We present a refinement to \fullref{thm:monoid_categorical_limits}.

  \begin{thmenum}
    \thmitem{thm:semimodule_categorical_limits/product} The \hyperref[def:discrete_category_limits]{categorical product} of the family \( \seq{ M_k }_{k \in \mscrK} \) in the category \hyperref[def:semimodule/category]{\( \cat{SMod} \)} of semimodules is their \hyperref[def:semimodule_direct_product]{direct product} \( \prod_{k \in \mscrK} M_k \).

    \thmitem{thm:semimodule_categorical_limits/coproduct} The \hyperref[def:discrete_category_limits]{categorical coproduct} of the family \( \seq{ M_k }_{k \in \mscrK} \) in the category \hyperref[def:semimodule/category]{\( \cat{CSMon} \)} of \hi{commutative} semimodules is their \hyperref[def:semimodule_direct_product]{direct sum} \( \bigoplus_{k \in \mscrK} M_k \).
  \end{thmenum}
\end{proposition}
\begin{proof}
  Simple refinement of \fullref{thm:monoid_categorical_limits}.
\end{proof}

\begin{definition}\label{def:free_semimodule}\mimprovised
  Fix a \hyperref[def:semiring]{semiring} \( R \). We associate with every set \( A \) its \term{free semimodule} \( F(A) \) over \( R \) defined as the set
  \begin{equation*}
    F(A) \coloneqq \bigoplus_{x \in A} R = \set{ t: A \to R \given t \T{has finite \hyperref[def:function_support]{support}} }.
  \end{equation*}

  In the case when \( R \) is the semiring of natural numbers, \( F(A) \) is the set of finite \hyperref[def:weighted_set/multiset]{multisets} over \( A \).

  We call \( A \) the \term{basis} of \( R \). As with general direct sums, we regard the function \( t \) as the indexed family \( \seq{ t_x }_{x \in A} \).

  By \fullref{thm:functions_over_model_form_model}, \( F(A) \) inherits addition and multiplication from \( R \) and is actually a semiring. Scalar multiplication can be defined as
  \begin{equation*}
    \begin{aligned}
      &\cdot: R \times F(A) \to F(A), \\
      &r \cdot \seq{ t_x }_{x \in A} \coloneqq \seq{ r \cdot t_x }_{x \in A}.
    \end{aligned}
  \end{equation*}

  Finally, define the canonical inclusion.
  \begin{equation*}
    \begin{aligned}
      &\iota_A: A \to F(A), \\
      &\iota_A(x) \coloneqq \parens[\Bigg]
        {
          y \mapsto \begin{rcases}
            \begin{cases}
              1_R, &y = x \\
              0_R, &y \neq x
            \end{cases}
          \end{rcases}
        }
    \end{aligned}
  \end{equation*}

  Free right semimodules require trivial adjustments.
\end{definition}

\begin{proposition}\label{thm:free_semimodule_universal_property}
  Fix a semiring \( R \) and a set \( A \). The \hyperref[def:free_semimodule]{free semimodule} \( F(A) \) over \( R \) is the unique up to a unique isomorphism semimodule that satisfies the following \hyperref[rem:universal_mapping_property]{universal mapping property}:
  \begin{displayquote}
    For every semimodule \( M \) over \( R \) and every function \( f: A \to M \), there exists a unique \( R \)-semimodule homomorphism \( \widetilde{f}: F(A) \to M \) such that the following diagram commutes:
    \begin{equation}\label{eq:thm:free_semimodule_universal_property/diagram}
      \begin{aligned}
        \includegraphics[page=1]{output/thm__free_semimodule_universal_property.pdf}
      \end{aligned}
    \end{equation}
  \end{displayquote}

  Via \fullref{rem:universal_mapping_property}, \( F \) becomes \hyperref[def:category_adjunction]{left adjoint} to the \hyperref[def:concrete_category]{forgetful functor} \( U: \cat{SMod}_R \to \cat{Set} \).
\end{proposition}
\begin{proof}
  For every function \( f: A \to M \), we want
  \begin{equation*}
    \widetilde{f}(\iota(x)) = f(x).
  \end{equation*}

  This suggests the definition
  \begin{equation*}
    \begin{aligned}
      &\widetilde{f}: F(A) \to M, \\
      &\widetilde{f}(\seq{ t_x }_{x \in A}) \coloneqq \sum_{x \in A}^n t_x \cdot f(x).
    \end{aligned}
  \end{equation*}

  We discuss well-definedness of infinitary operations in direct sums in \fullref{rem:binary_operation_syntax_trees/infinite/direct_sum}.
\end{proof}

\begin{definition}\label{def:linear_combination}\mimprovised
  A \term{linear combination} over a \hyperref[def:semiring]{(semiring} \( R \) is a finite sequence \( t_1, \ldots, t_n \) of scalars, which we call the \term{coefficients} of the combination. More abstractly, a linear combination is a member of the \hyperref[def:semimodule_direct_product]{direct sum} \( \bigoplus_{k=1}^\infty R \).

  Given an \( R \)-\hyperref[def:semimodule]{semimodule} \( M \) and a corresponding sequence of vectors \( x_1, \ldots, x_n \), we can \term{evaluate} the linear combination as
  \begin{equation}
    \sum_{k=1}^n t_k x_k
  \end{equation}
  to obtain a vector in \( M \). Evaluation defines an \( R \)-semimodule homomorphism
  \begin{equation*}
    \Phi: \underbrace{\bigoplus_{k=1}^\infty R}_{\T{scalars}} \times \underbrace{\bigoplus_{k=1}^\infty M}_{\T{vectors}} \to M.
  \end{equation*}

  The gist is that we treat linear combinations as syntactic objects and then, given a corresponding sequence of vectors, we interpret this syntactic object to obtain another vector. This corresponds to mathematical practice, although making this idea precise requires some level of mathematical maturity.

  \begin{thmenum}
    \thmitem{def:linear_combination/trivial} A \term{trivial} linear combination is the zero vector in \( \bigoplus_{k=1}^\infty R \). In practice, this corresponds to a finite sequence of zeros.

    \thmitem{def:linear_combination/affine} An \term{affine combination} is a linear combination such that \( \sum_{k=1}^n t_k = 1_R \).

    \thmitem{def:linear_combination/conic} If \( R \) is an \hyperref[def:ordered_semiring]{ordered semiring}, a \term{conic combination} in \( R \) is a linear combination with \hyperref[def:ordered_semiring]{nonnegative coefficients}.

    \thmitem{def:linear_combination/convex} A \term{convex combination} is a linear combination that is both affine and conic.
  \end{thmenum}
\end{definition}

\begin{proposition}\label{thm:span_via_linear_combinations}
  For a set \( A \) in an \( R \)-\hyperref[def:semimodule]{semimodule} \( M \), the \hyperref[def:semimodule/submodel]{linear span} of \( A \), defined as the \( R \)-submodule generated by \( A \) in the sense of \fullref{def:first_order_generated_substructure}, equals the set of all \hyperref[def:linear_combination]{linear combinations} over \( A \).

  Compare this result to \fullref{thm:generators_via_polynomials} for algebras.
\end{proposition}
\begin{proof}
  \Cref{fig:thm:span_via_linear_combinations} shows a \hyperref[def:concrete_syntax_tree]{syntax tree} for a given linear combination, which can be traversed and evaluated to obtain a vector in \( M \). Furthermore, it must be a member of \( \linspan A \) since the latter is closed under vector addition and scalar multiplication with members of \( A \). Hence, the set \( L \) of all linear combinations over \( A \) is a subset of \( \linspan A \).

  Generalizing the syntax tree construction from \cref{fig:thm:span_via_linear_combinations}, we see that \( L \) satisfies \fullref{def:first_order_substructure/inductive}, and is thus a submodule of \( M \). Since \( \linspan A \) is the smallest module containing \( A \), we have \( \linspan A = L \).

  \begin{figure}[h]
    \hfill
    \includegraphics[page=1]{output/thm__span_via_linear_combinations.pdf}
    \hfill\hfill
    \caption{A linear combination is simply a \hyperref[def:multi_valued_function/superposition]{superposition} of scalar multiplication and binary addition.}
    \label{fig:thm:span_via_linear_combinations}
  \end{figure}
\end{proof}

\begin{remark}\label{rem:span_over_different_semirings}
  If \( M \) is both an \( R \)-semimodule and a \( T \)-semimodule, \fullref{thm:span_via_linear_combinations} highlights a fundamental difference between the generated \( R \)-subalgebra and the generated \( T \)-subalgebra.
\end{remark}

\begin{definition}\label{def:multilinear_function}\mimprovised
  Generalizing \hyperref[def:semimodule/homomorphism]{linear maps}, if \( M_1, \ldots, M_n \) and \( N \) are \( R \)-modules, we say that the function
  \begin{equation*}
    f: M_1 \times \ldots \times M_n \to N
  \end{equation*}
  is \term{multilinear} (\term{bilinear} for \( n = 2 \)) if it is linear in each component. That is, for every tuple
  \begin{equation*}
    (x_1, \ldots, x_n) \in M_1 \times \cdots \times M_n,
  \end{equation*}
  and for every index \( k = 1, \ldots, n \), the following function is linear:
  \begin{equation*}
    y \mapsto f(x_1, \ldots, x_{k-1}, y, x_{k+1}, \ldots, x_n)
  \end{equation*}
\end{definition}

\begin{definition}\label{def:algebra_over_semiring}\mimprovised
  An \term{algebra}\footnote{Algebras are usually defined for fields or at least commutative rings. We extend this to semirings for the purposes of polynomial semirings.} \( M \) over a \hyperref[def:semiring/commutative]{commutative semiring} \( R \) is an \( R \)-\hyperref[def:semimodule]{semimodule} with an \hyperref[def:magma/associative]{associative} \hyperref[def:multilinear_function]{bilinear} vector multiplication operation. This makes \( M \) a non-unital ring. By default, we will also assume that \( M \) has a multiplicative unit, although non-unital algebras as just as valid as non-unital rings.

  As in the case of general rings, by \enquote{\( M \) is commutative}, we will mean that vector multiplication is commutative. Furthermore, although we assume it by default, if needed, we will distinguish between associative and non-associative algebra.

  We identify every element \( t \) of \( R \) with its canonical embedding \( t \cdot 1_M \) in \( M \), and thus we can also regard \( R \) as a sub-semiring of \( M \).

  Algebras have the following metamathematical properties:
  \begin{thmenum}
    \thmitem{def:algebra_over_semiring/theory} The \hyperref[def:first_order_theory]{first-order theory} for algebras extends the \hyperref[def:semimodule/theory]{theory of commutative semimodules}. We add a new \hyperref[rem:first_order_formula_conventions/infix]{infix} binary function symbol \( \star \) to the language, and add to the theory all semiring axioms from \fullref{def:semiring/theory} for \( + \) and \( \star \). We must also add axioms ensuring that \( \star \) is bilinear. Additivity follows from distributivity, hence it remains to account for homogeneity. Using the notation of \fullref{def:semimodule/theory}, this amounts to the following axiom schemas:
    \begin{align*}
      m_r(x) \star y &= m_r(x \star y), \\
      x \star m_r(y) &= m_r(x \star y).
    \end{align*}

    \thmitem{def:algebra_over_semiring/homomorphism} A \hyperref[def:first_order_homomorphism]{first-order homomorphism} between two \( R \)-algebras \( M \) and \( N \) is a linear map that also preserves vector multiplication.

    \thmitem{def:algebra_over_semiring/submodel} The set \( A \subseteq M \) is a \hyperref[thm:substructure_is_model]{submodel} of \( M \) if it is a \hyperref[def:monoid/submodel]{submodule} of \( M \) that is closed under algebra multiplication. We say that \( A \) is a \term{subalgebra}.

    As for general submodules, \fullref{rem:span_over_different_semirings} shows how it is important to be unambiguous about over which semiring we consider the subalgebra.

    \thmitem{def:algebra_over_semiring/trivial} The \hyperref[thm:substructures_form_complete_lattice/bottom]{trivial} semimodule is the \hyperref[def:pointed_set/trivial]{trivial pointed set} \( \set{ 0 } \).

    \thmitem{def:algebra_over_semiring/category} We denote the category of algebras over \( R \) by \( \cat{Alg}_R \) and the subcategory of commutative algebras by \( \cat{CAlg}_R \).
  \end{thmenum}
\end{definition}

\begin{proposition}\label{thm:semiring_is_algebra}
  Every \hyperref[def:semiring]{semiring} \( R \) is an \( R \)-\hyperref[def:algebra_over_semiring]{algebra} with both scalar and vector multiplication given by the multiplication in \( R \).

  This extends \fullref{thm:semiring_is_semimodule}.
\end{proposition}
\begin{proof}
  Follows from \fullref{thm:semiring_is_semimodule} by noting that bilinearity follows from left distributivity in \( R \).
\end{proof}

\begin{proposition}\label{thm:semiring_is_natural_number_algebra}
  The categories \( \hyperref[def:semiring/category]{\cat{SRing}} \) of semirings and \( \hyperref[def:algebra_over_semiring/category]{\cat{Alg}_\BbbN} \) of natural number algebras are \hyperref[rem:category_similarity/isomorphism]{isomorphic}.

  Compare this result to \fullref{thm:commutative_monoid_is_semimodule} and \fullref{thm:ring_is_integer_algebra}.
\end{proposition}
\begin{proof}
  Follows from \fullref{thm:commutative_monoid_is_semimodule} by noting that, as in the proof of \fullref{thm:semiring_is_algebra}, distributivity implies bilinearity.
\end{proof}

\begin{proposition}\label{thm:functions_over_semimodule}
  For a set \( A \) and an \( R \)-\hyperref[def:semimodule]{semimodule} \( M \), the set of all functions from \( A \) to \( M \) is itself a semimodule with the following operations:
  \begin{thmenum}
    \thmitem{thm:functions_over_semimodule/addition} Pointwise addition
    \begin{equation*}
      [f + g](x) \coloneqq f(x) + g(x)
    \end{equation*}

    \thmitem{thm:functions_over_semimodule/scalar} Pointwise scalar multiplication
    \begin{equation*}
      [t \cdot f](x) \coloneqq t \cdot f(x)
    \end{equation*}

    \thmitem{thm:functions_over_semimodule/multiplication} If \( M \) is an \hyperref[def:algebra_over_semiring]{algebra} over \( R \), for example if \( M = R \), we can also define pointwise multiplication, which will make the set of functions an algebra over \( R \)
    \begin{equation*}
      [f \cdot g](x) \coloneqq f(x) \cdot g(x)
    \end{equation*}
  \end{thmenum}

  If \( A \) is also an \( R \)-semimodule, we denote this set of functions by \( \hom(A, R) \).
\end{proposition}
\begin{proof}
  By \fullref{thm:functions_over_model_form_model}, \( X \) is both an \( R \)-semiring and an \( R \)-semimodule. Compatibility comes from left distributivity in \( R \).
\end{proof}

\begin{definition}\label{def:polynomial_semiring}\mcite[149]{Knapp2016BasicAlgebra}
  Polynomial are a purely algebraic framework for describing certain well-behaved functions.

  Fix a \hyperref[def:semiring/commutative]{commutative semiring} \( R \) and a set \( \mscrX \) of arbitrary \hyperref[def:formal_language/symbol]{symbols}, which we will call \term{indeterminates}.

  The \term{polynomial semiring} for the indeterminates \( \mscrX \) is the nested \hyperref[def:semimodule_direct_product]{direct sum}
  \begin{equation*}
    R[\mscrX] \coloneqq \bigoplus_{X \in \mscrX}^\infty \bigoplus_{k=0}^\infty R
  \end{equation*}
  with multiplication defined by the convolution
  \begin{equation*}
    c_{X,k} \coloneqq \sum_{i+j=k} a_{X,i} b_{X,j}.
  \end{equation*}

  We usually deal with either one the polynomial ring \( R[X] \) in one indeterminate \( X \in \mscrX \) or the ring \( R[X_1, \ldots, X_n] \) in finitely many indeterminates.

  We call elements of the polynomial ring \term{coefficients}. For each indeterminate \( X_0 \), we define its embedding \( \iota(X_0) \) with coefficients \( \seq{ a_{X,k} }_{X \in \mscrX,k=0,2,\ldots} \), where
  \begin{equation*}
    a_{X,k} \coloneqq \begin{cases}
      1_R, &X = X_0 \T{and} k = 1 \\
      0_R, &\T{otherwise.}
    \end{cases}
  \end{equation*}

  \term{Polynomials} are elements of the polynomial ring. \term{Monomials} are polynomials with at most one nonzero coefficient.

  As usual, we identify each indeterminate with its embedding. Thus, for every indeterminate \( X \in \mscrX \) and every \( n > 0 \), we have
  \begin{equation*}
    X^n = X^{n-1} \cdot X.
  \end{equation*}

  Along with the general convention in \fullref{rem:binary_operation_syntax_trees/infinite/direct_sum} regarding infinite sums with finitely many nonzero values, this justifies the notation for a polynomial \( p \) with coefficients \( \seq{ a_{X,k} } \) as a sum of monomials:
  \begin{equation}\label{eq:def:polynomial_semiring/form}
    p(\mscrX) = \sum_{X \in \mscrX} \sum_{k=0} a_{X,k} X^k
  \end{equation}
\end{definition}

\begin{proposition}\label{thm:polynomial_semiring_universal_property}
  Fix a \hyperref[def:semiring/commutative]{commutative semiring} \( R \) and a set \( \mscrX \) of indeterminates. The \hyperref[def:polynomial_semiring]{polynomial semiring} \( R[\mscrX] \) is the unique up to a unique isomorphism commutative \hyperref[def:algebra_over_semiring]{algebra} that satisfies the following \hyperref[rem:universal_mapping_property]{universal mapping property}:
  \begin{displayquote}
    For every commutative algebra \( M \) over \( R \) and every function \( f: \mscrX \to M \), there exists a unique \( R \)-algebra homomorphism \( \Phi_f: R[\mscrX] \to M \) such that the following diagram commutes:
    \begin{equation}\label{eq:thm:free_semimodule_universal_property/diagram}
      \begin{aligned}
        \includegraphics[page=1]{output/thm__polynomial_semiring_universal_property.pdf}
      \end{aligned}
    \end{equation}
  \end{displayquote}

  The function \( f \) evaluates each indeterminate in \( R \), while \( \Phi_f \) substitutes this value in every polynomial. We call \( \Phi_f \) the \term{substitution homomorphism} corresponding to the \term{variable assignment} \( f \). We can parameterize this by the evaluation functions to obtain the more general evaluation homomorphism
  \begin{equation*}
    \begin{aligned}
      &\Phi: R[\mscrX] \to \fun(\fun(\mscrX, M), M) \\
      &\Phi(p) \coloneqq (f \mapsto \Phi_f(p))
    \end{aligned}
  \end{equation*}

  In the case of \( n \) indeterminates, this reduces to \( \Phi: R[X] \to \fun(M^n, M) \). We call the values of \( \Phi \) \term{polynomial functions}. Given elements \( x_1, \ldots, x_n \) of \( M \), we write
  \begin{equation*}
    p(x_1, \ldots, x_n)
  \end{equation*}
  rather than
  \begin{equation*}
    \Phi(p)(x_1, \ldots, x_n).
  \end{equation*}

  Via \fullref{rem:universal_mapping_property}, \( R[\anon*] \) becomes \hyperref[def:category_adjunction]{left adjoint} to the \hyperref[def:concrete_category]{forgetful functor} \( U: \cat{CAlg}_R \to \cat{Set} \). The action of \( R[\anon*] \) on morphisms is given by \( \Phi \).
\end{proposition}
\begin{proof}
  For every indeterminate \( X \), we want
  \begin{equation*}
    \Phi_f(\iota(X)) = f(X).
  \end{equation*}

  This suggests defining \( \Phi_f \) for the polynomial
  \begin{equation*}
    p(\mscrX) = \sum_{X \in \mscrX} \sum_{k=0}^\infty a_{X,k} \iota(X)^k
  \end{equation*}
  as the evaluation
  \begin{equation*}
    \Phi_f(p) \coloneqq \sum_{X \in \mscrX} \sum_{k=0}^\infty a_{X,k} f(X)^k.
  \end{equation*}

  We discuss well-definedness of infinitary operations in direct sums in \fullref{rem:binary_operation_syntax_trees/infinite/direct_sum}.
\end{proof}

\begin{proposition}\label{thm:def:polynomial_semiring/properties}
  The following are basic properties of \hyperref[def:polynomial_semiring]{polynomial semirings}:
  \begin{thmenum}
    \thmitem{thm:def:polynomial_semiring/properties/iterated} The polynomial algebras \( R[X][Y] \) and \( R[X, Y] \) are isomorphic.

    \thmitem{thm:def:polynomial_semiring/properties/entire} If \( R \) is an \hyperref[def:divisibility/zero]{entire (commutative) semiring}, the \hyperref[def:polynomial_semiring]{polynomial semiring} \( R[X] \) is also entire.
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:polynomial_semiring/properties/iterated} Polynomials in \( R[X, Y] \) have the form
  \begin{equation*}
    p(X, Y) \coloneqq \sum_{k=0^{n_X}} \sum_{m=0^{n_Y}} a_{k,m} X^k Y^m.
  \end{equation*}

  Due to commutativity of addition, this can easily be rewritten as
  \begin{equation*}
    p(X, Y) = \sum_{m=0^{n_Y}} \parens[\Big]{ \sum_{k=0^{n_X}} a_{k,m} X^k } Y^m.
  \end{equation*}

  This shows how \( R[X, Y] \) can be embedded into \( R[X][Y] \). This embedding is surjective because the coefficients \( a_{k,m} \) range through \( R \). Therefore, the embedding is an isomorphism.

  \SubProofOf{thm:def:polynomial_semiring/properties/entire} Suppose that \( R \) is entire and that \( R[X] \) isn't. Then there exist nonzero polynomials \( p(X) \) and \( q(X) \) such that \( p(X) q(X) = 0 \). If \( a_n \) is the leading coefficient of \( p(X) \) and \( b_m \) --- of \( q(X) \), the leading coefficient of \( p(X) q(X) \) is \( a_n b_m \). Since \( p(X) q(X) \) is the zero polynomial, \( a_n b_m = 0 \), which contradicts the assumption that \( R \) is entire.

  Therefore, \( R[X] \) is entire.
\end{proof}

\begin{example}\label{ex:def:polynomial_semiring}
  We list several examples of \hyperref[def:polynomial_semiring]{polynomials} over semirings.
  \begin{thmenum}
    \thmitem{ex:def:polynomial_semiring/natural_numbers} Consider the polynomial \( p(X) \coloneqq aX^2 + bX + c \) in \( \BbbN[X] \). A function from the set \( \set{ X } \) to \( \BbbN \) corresponds to an element of \( \BbbN \), and hence evaluating the polynomial is done by simply replacing \( X \) symbolically in \( p \) and then evaluating the obtained \hyperref[rem:binary_operation_syntax_trees]{syntax tree}.

    By \fullref{thm:fundamental_theorem_of_algebra} and \fullref{def:algebraically_closed_field/exactly_n_roots}, \( p \) has two roots in the \hyperref[def:set_of_complex_numbers]{complex plane}. That is, we regard \( \BbbC \) as an algebra over \( \BbbN \) and use \fullref{thm:polynomial_semiring_universal_property} to obtain a polynomial function on \( \BbbC \). Furthermore, over the complex numbers the roots can be explicitly found using
    \begin{equation*}
      \frac {-b \pm \sqrt{b^2 - 4ac}} {2a}.
    \end{equation*}

    Finding a root of \( p \) over the natural numbers cannot be done in general, however. If \( p(n) = 0 \), by the ordering of the natural numbers we have
    \begin{equation*}
      p(n) = an^2 + bn + c \geq c,
    \end{equation*}
    and hence \( c \) must necessarily be \( 0 \). If \( c = 0 \), then zero is a root of the polynomial \( p(X) = aX^2 + bX \).

    Now let \( n \) be any root of \( p \). We have
    \begin{equation*}
      an^2 + bn \geq bn,
    \end{equation*}
    and hence \( bn \) must also be \( 0 \). Thus, either \( b = 0 \) or \( n = 0 \). If we want a root other than \( n \), both \( a \) and \( b \) must be \( 0 \).

    Therefore, the only natural number solution to the quadratic equation is \( 0 \), and it is only a solution if \( c = 0 \).

    \thmitem{ex:def:polynomial_semiring/tropical} Consider again the polynomial \( p(X) \coloneqq aX^2 + bX + c \) over \( \BbbN \), but this time evaluated over the \hyperref[def:tropical_semiring]{\( \min \)-plus semiring} \( (\BbbN \cup \set{ \infty }, \min, +) \).

    Expressed via the standard natural number operations, this polynomial becomes
    \begin{equation*}
      \min\set{ 2X + a, X + b, c }.
    \end{equation*}

    This allows us to express certain optimization problems via polynomials.

    This polynomial has a root if and only if \( a = b = c \). Roots in the tropical semiring are not very interesting, however.
  \end{thmenum}
\end{example}

\begin{remark}\label{rem:adjoining_via_polynomials}
  Let \( R \subseteq T \) be \hyperref[def:semiring/commutative]{commutative semirings} and let \( p \in S[X_1, \ldots, X_n] \) be a \hyperref[def:polynomial_semiring]{polynomial} over \( T \).

  Let \( s_1, \ldots, s_n \) be arbitrary elements of \( T \). Consider the \hyperref[thm:polynomial_semiring_universal_property]{substitution homomorphism}
  \begin{equation*}
    \Phi_{X_1 \mapsto s_1, \ldots, X_n \mapsto s_n}: S[X_1, \ldots, X_n] \to R.
  \end{equation*}

  Denote the image of this homomorphism by \( R[s_1, \ldots, s_n] \). This is a ring that satisfies
  \begin{equation*}
    R \subseteq R[s_1, \ldots, s_n] \subseteq S.
  \end{equation*}

  The elements of this ring are the elements of \( T \) that can be obtained by evaluating polynomials over \( R \) with the values \( s_1, \ldots, s_n \). The obtained ring includes the elements of \( R \) because they correspond to constant polynomials.

  This procedure is called \term{adjoining} \( s_1, \ldots, s_n \) to \( R \). It is the smallest semiring extension of \( R \) containing the adjoined elements.
\end{remark}

\begin{example}\label{ex:adjoining_root}
  The polynomial equation
  \begin{equation*}
    X + 1 = 0
  \end{equation*}
  has no natural number root as a consequence of \eqref{eq:def:peano_arithmetic/PA2}.

  It does have an integer root, however, \( X = -1 \). We can \hyperref[rem:adjoining_via_polynomials]{adjoin} \( -1 \) to the semiring \( \BbbN \) to obtain the semiring \( \BbbN[-1] \). But this latter semiring is (isomorphic to) \( \BbbZ \).

  Therefore, \( \BbbZ \) is the smallest extension of \( \BbbN \) that contains a root to the polynomial \( X + 1 \).

  This example extends to the theory of \hyperref[def:transcendetal_element]{transcendental and algebraic} elements of fields.
\end{example}

\begin{proposition}\label{thm:generators_via_polynomials}
  For a set \( A \) in an \( R \)-\hyperref[def:algebra_over_semiring]{algebra} \( M \), the \hyperref[def:algebra_over_semiring/submodel]{generated subalgebra} of \( A \), defined as the \( R \)-subalgebra generated by \( A \) in the sense of \fullref{def:first_order_generated_substructure}, equals the set
  \begin{equation*}
    \bigcup \set[\Big]{ R[a_1, \ldots, a_n] \given* a_1, \ldots, a_n \in A }
  \end{equation*}
  obtained by evaluating all multivariate polynomials over \( R \) with elements of \( A \).

  The \( \BbbN \)-subalgebras of \( M \) correspond to \hyperref[def:semiring/submodel]{sub-semirings} and the \( M \)-subalgebras correspond to \hyperref[def:semiring_ideal/generated]{ideals}.

  Compare this result to \fullref{thm:span_via_linear_combinations} for modules.
\end{proposition}
\begin{proof}
  Similar to \fullref{thm:span_via_linear_combinations}.
\end{proof}
