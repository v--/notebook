\subsection{Clarke generalized gradients}\label{subsec:clarke_gradients}

Let \( X \) be a Banach space and \( f: X \to \BbbR \) be locally Lipschitz.

\begin{definition}\label{def:clarke_gradient}\mcite\cite[def. 10.3]{Clarke2013}
  Let \( x \in X \) and \( U \subseteq X \) be a neighborhood of x where \( f \) is \( L \)-Lipschitz, i.e.

  \begin{equation*}
    \forall y, z \in U, \abs{f(y) - f(z)} \leq L \norm{y - z}.
  \end{equation*}

  We use the Clarke generalized \hyperref[def:nonsmooth_derivatives/clarke]{derivative},
  \begin{equation*}
    f^\circ(x)(h) \coloneqq \limsup_{\substack{y \to x \\ t \downarrow 0}} \frac {f(y + th) - f(y)} t
  \end{equation*}

  We define the \term{generalized gradient of \( f \) at \( x \)} to be the set
  \begin{equation*}
    \partial_C f(x) \coloneqq \{ x^* \in X^* \colon \forall h \in X, f^\circ(x)(h) \geq \inner {x^*} h \}.
  \end{equation*}

  We say that the vector \( h \) is a \term{descent direction of \( f \) at \( x \)} if
  \begin{equation*}
    \limsup_{t \downarrow 0} \frac {f(x + th) - f(x)} t < 0.
  \end{equation*}
\end{definition}

\begin{proposition}\label{thm:clarke_derivative_exists}
  The generalized derivative of a locally Lipschitz function \( f: X \to \BbbR \) exists for every \( x \in X \).
\end{proposition}
\begin{proof}
  Let \( x, h \in X \) and let \( U \) be a neighborhood of \( x \) where the Lipschitz condition holds with the constant \( L_U \). Then there exists \( \delta_0 > 0 \) such that \( B(x, \delta_0) \subseteq U \).

  Define \( \delta_1 \coloneqq \frac 1 2 \min \left\{\delta_0, \frac {\delta_0} {\norm h} \right\} < \delta_0 \), so that for \( y \in B(x, \delta_1) \) and \( t \in (0, \delta_1) \) we have
  \begin{balign*}
    \norm{(y + th) - x}
    \leq
    \norm{y - x} + t \norm h
    \leq
    \delta_1 + \delta_1 \norm h
    \leq
    \begin{cases}
      \frac {\delta_0} 2 (1 + \norm h),           & \norm h \leq 1 \\
      \frac {\delta_0} {2 \norm h} (1 + \norm h), & \norm h > 1.
    \end{cases}
  \end{balign*}

  In both cases we get that \( y + th \in B(x, \delta_0) \).

  The generalized derivative in \( x \) in the direction \( h \in X \) is then norm-bounded by
  \begin{balign*}
    \abs{f^\circ(x)(h)}
    =
    \abs{\limsup_{\substack{y \to x                             \\ t \downarrow 0}} \frac {f(y + th) - f(y)} t}
    =
    \abs{\lim_{\delta \to 0} \sup_{\substack{y \in B(x, \delta) \\ t \in (0, \delta)}} \frac {f(y + th) - f(y)} t}
    \leq                                                        \\ \leq
    \abs{\sup_{\substack{y \in B(x, \delta_1)                   \\ t \in (0, \delta_1)}} \frac {f(y + th) - f(y)} t}
    \leq
    \sup_{\substack{y \in B(x, \delta_1)                        \\ t \in (0, \delta_1)}} \frac {\abs{f(y + th) - f(y)}} t
    \leq                                                        \\ \leq
    \sup_{\substack{y \in B(x, \delta_1)                        \\ t \in (0, \delta_1)}} \frac {\norm{(y + th) - (y)}} t
    =
    \norm h.
  \end{balign*}

  The fact that \( f \) is locally Lipschitz gave us that the supremum is taken over a bounded set and thus the generalized derivative exists.
\end{proof}
