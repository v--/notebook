\subsection{Zermelo-Fraenkel set theory}\label{subsec:zermelo_fraenkel_set_theory}

\begin{definition}\label{def:choice_function}
  Let \( \mscrA \) be a (potentially empty) family of nonempty sets. A \term{choice function} on \( \mscrA \) is a (total) \hyperref[def:function]{function} \( f: \mscrA \to \bigcup \mscrA \) such that \( f(A) \in A \) for all \( A \in \mscrA \).

  A choice function on \( \mscrA \) \enquote{chooses} an element out of each member of \( \mscrA \). We sometimes have a canonical choice function, for example in \fullref{thm:polynomial_quotient_rings_equinumerous_with_module_of_polynomials}, however for general \hyperref[def:equivalence_relation/quotient]{quotient sets} the existence of a choice function is not by any means obvious.

  The existence of a choice function for family of nonempty sets is an important axiom of \logic{ZFC} --- see \fullref{def:zfc/choice}.
\end{definition}

\begin{definition}\label{def:zfc}
  The \hyperref[def:first_order_theory]{first-order theory} commonly abbreviated as \term{\logic{ZFC}} is based on the same language as \hyperref[def:naive_set_theory]{na\"ive set theory} but with different axioms. The three letters refer to:
  \begin{itemize}
    \item \hi{Z}ermelo, who formulated the entire theory except for the \hyperref[def:zfc/replacement]{axiom schema of replacement} and the \hyperref[def:zfc/foundation]{axiom of foundation}.
    \item\mcite[sec. 63.8]{OpenLogicFull} \hi{F}raenkel, who simultaneously with Skolem reformulated the theory within first-order logic while also introducing the axiom schema of replacement.
    \item The \hyperref[def:zfc/choice]{axiom of \hi{c}hoice}, which is part of Zermelo's original theory but is controversial enough to attract special attention --- see \fullref{subsec:axiom_of_choice}.
  \end{itemize}

  We are usually only interested in either \logic{ZFC}, which include all axioms listed in this definition. If we wish to avoid the axiom of choice --- for example when proving the equivalences in \fullref{thm:axiom_of_choice_equivalences} --- we instead use \logic{ZF}, which excludes the axiom of choice. The abbreviation of the latter theory is inaccurate historically but is nevertheless established.

  See \fullref{thm:zfc_existence_theorems} for proofs of existence of common sets.

  The full list of axioms is:
  \begin{thmenum}
    \thmitem{def:zfc/extensionality} The \term{axiom of extensionality}, as defined in \fullref{def:naive_set_theory/extensionality}. This is also the only axiom of the theory that does not deal with existence.

    \thmitem{def:zfc/specification}\mcite[sec. 62.2]{OpenLogicFull} The \term{axiom schema of specification}, also known as the axiom schema of \term{separation} or of \term{restricted comprehension}, states that given a set \( A \), any formula defines a subset of \( A \). For each formula \( \varphi \) not containing either \( \alpha \) nor \( \beta \) as free variables, the following is an axiom:
    \begin{equation}\label{eq:def:zfc/specification}
      \qforall \beta \qexists \alpha \qforall \xi (\xi \in \alpha \leftrightarrow \varphi \wedge \xi \in \beta).
    \end{equation}

    As explained in \fullref{def:naive_set_theory/unrestricted_comprehension} and \fullref{def:set_builder_notation}, this set may depend on parameters, which are other sets. We must formally take the \hyperref[thm:implicit_universal_quantification]{universal closure} of this set to quantify over all possible values for the parameters.

    Compare this axiom to \hyperref[def:naive_set_theory/unrestricted_comprehension]{unrestricted comprehension}. Informally, this axiom can be obtained by taking the result of unrestricted comprehension and intersecting it with some set \( A \). As mentioned in \fullref{def:set_builder_notation}, in set-builder notation such a set is usually denoted by
    \begin{equation*}
      \set{ x \in B \given \varphi\Bracks{x, u_1, \ldots, u_n} }.
    \end{equation*}

    Unlike unrestricted comprehension, some definable subset of the universe in the metatheory no longer have a corresponding set within the object logic.

    \thmitem{def:zfc/power_set}\mcite[sec. 62.5]{OpenLogicFull} The \term{axiom of power sets} states that \hyperref[def:basic_set_operations/power_set]{power set} of any set exists. Symbolically,
    \begin{equation}\label{eq:def:zfc/power_set}
      \qforall \alpha \qexists \beta \ref{eq:def:basic_set_operations/power_set/predicate}[\beta, \alpha].
    \end{equation}

    \thmitem{def:zfc/union}\mcite[sec. 62.3]{OpenLogicFull} The \term{axiom of unions} states that the \hyperref[def:basic_set_operations/union]{union} of any set exists. Symbolically,
    \begin{equation}\label{eq:def:zfc/union}
      \qforall \alpha \qexists \beta \ref{eq:def:basic_set_operations/union/predicate}[\beta, \alpha].
    \end{equation}

    \thmitem{def:zfc/pairing}\mcite[sec. 62.4]{OpenLogicFull} The \term{axiom of pairing} states that for any sets \( A \) and \( B \), the set \( \set{ A, B } \) exists. Symbolically,
    \begin{equation}\label{eq:def:zfc/pairing}
      \qforall \alpha \qforall \beta \qexists \gamma \qforall \xi \parens[\Big]{ \xi \in \gamma \leftrightarrow ( \xi \doteq \alpha \vee \xi \doteq \beta) }.
    \end{equation}

    \thmitem{def:zfc/infinity}\mcite[sec. 62.6]{OpenLogicFull} The \term{axiom of infinity} states that an \hyperref[def:inductive_set]{inductive set} exists. Symbolically,
    \begin{equation}\label{eq:def:zfc/infinity}
      \qexists \alpha \ref{eq:def:inductive_set/predicate}[\alpha].
    \end{equation}

    This axiom is a simple and convenient way to state that infinite sets exist. Without it, we can only deal with finite sets unless we include some other axiom to replace it.

    \thmitem{def:zfc/choice}\mcite[sec. 69.4]{OpenLogicFull} The \term{axiom of choice} states that a \hyperref[def:choice_function]{choice function} exists for any family of nonempty sets. To state the axiom via a formula, we will avoid functions and only state it in terms of the image of the choice function. That is, we will formulate that for each family \( \mscrA \) of nonempty sets there exists a set \( B \) such that \( A \cap B \) is a singleton set for each \( A \in \mscrA \). Symbolically,
    \begin{equation}\label{eq:def:zfc/choice}
      \qforall \alpha \parens[\Bigg]
        {
          \parens[\Big]{ \qforall {\xi \in \alpha} \neg \ref{eq:def:empty_set/predicate}[\xi] }
          \rightarrow
          \parens[\Big]{ \qexists \beta \qforall {\xi \in \alpha} \qExists {\eta \in \beta} \eta \in \xi }
        }
    \end{equation}
    where we have used the convention regarding existence and uniqueness described in \fullref{rem:first_order_formula_conventions/exists_unique}.

    See \fullref{subsec:axiom_of_choice} for further discussion of this axiom.

    \thmitem{def:zfc/replacement}\mcite[sec. 63.7]{OpenLogicFull} The \term{axiom schema of replacement} roughly states that every \hyperref[rem:function_definition]{mapping} that is definable via a formula of \logic{ZFC} is a function. As we have done for the \hyperref[def:zfc/choice]{axiom of choice}, we only formulate the axiom via the image of the function. More concretely, given a formula \( \varphi \) not containing \( \alpha \) nor \( \beta \) as free variables, the following is an axiom:
    \begin{equation}\label{eq:def:zfc/replacement}
      \qforall \alpha \parens[\Bigg]
        {
          \parens[\Big]{ \qforall {\xi \in \alpha} \qExists \eta \varphi }
          \rightarrow
          \parens[\Big]{ \qexists \beta \qforall \eta \parens[\Big]{ \eta \in \beta \leftrightarrow \qexists {\xi \in \alpha} \varphi } }
        }.
    \end{equation}

    As is the case with the \hyperref[def:zfc/specification]{axiom schema of specification}, the formula \( \varphi \) may depend on parameters, in which case we use its \hyperref[thm:implicit_universal_quantification]{universal closure}.

    \thmitem{def:zfc/foundation}\mcite[sec. 64.4]{OpenLogicFull} The \term{axiom of foundation} states that every nonempty set contains a member disjoint from the set itself. Symbolically,
    \begin{equation}\label{eq:def:zfc/foundation}
      \qforall \alpha \parens[\Big]
        {
          \neg \ref{eq:def:empty_set/predicate}[\alpha]
          \rightarrow
          \qexists {\beta \in \alpha} \neg \qexists \xi \parens{ \xi \in \alpha \wedge \xi \in \beta }
        }.
    \end{equation}
  \end{thmenum}
\end{definition}

\begin{proposition}\label{thm:zfc_existence_theorems}
  We will now prove that all sets we have considered up until now in \fullref{sec:set_theory} are sets in \hyperref[def:zfc]{\logic{ZFC}}. The uniqueness in all cases follows from the \hyperref[def:zfc/extensionality]{axiom of extensionality}.

  A very fundamental existence result is provided by the fact that we are assuming \hyperref[rem:standard_model_of_set_theory]{standard} and \hyperref[rem:transitive_model_of_set_theory]{transitive} models of \logic{ZFC}. Let \( \mscrV = (V, I) \) be such a model. Then if \( v \in V \) and \( u \in v \), transitivity implies that \( u \in V \). Since the model is also standard, this shows that both \( u \) and \( v \) are sets within the object theory. Thus, if \( A \) is a set within the object theory and if \( B \in A \) within the metatheory, then necessarily \( B \) itself is a set within the object theory.

  For example, \fullref{thm:zfc_existence_theorems/set_of_functions} shows that the set \( \fun(A, B) \) of functions exists within the object theory for any sets \( A \) and \( B \). Therefore every single function between \( A \) and \( B \) is a set within the object theory because it is a member of \( \fun(A, B) \).

  With that in mind, we will show the following:

  \begin{thmenum}
    \thmitem{thm:zfc_existence_theorems/subset} If \( A \) is a set, then for any formula \( \varphi \), the set \( \set{ x \in A \given \varphi[x] } \) exists and, furthermore, it is a \hyperref[def:subset]{subset} of \( A \). Only \hyperref[def:first_order_definability]{definable subsets} of \( A \) cannot be described in this way, however. See \fullref{thm:zfc_existence_theorems/power_set}.

    \thmitem{thm:zfc_existence_theorems/empty_set} There exists a unique \hyperref[def:empty_set]{empty set}, which we denote by \( \varnothing \).

    \thmitem{thm:zfc_existence_theorems/universe} No \hyperref[def:set]{universal set} (set of all sets) exists.

    \thmitem{thm:zfc_existence_theorems/singleton} For every set \( A \), there exists a \hyperref[rem:singleton_sets]{singleton set} \( \set{ A } \) that contains only \( A \).

    \thmitem{thm:zfc_existence_theorems/arbitrary_intersection} For any \hi{nonempty} family \( \mscrA \), the \hyperref[def:basic_set_operations/intersection]{intersection} \( \bigcap \mscrA \) exists.

    \thmitem{thm:zfc_existence_theorems/binary_intersection} For any two sets \( A \) and \( B \), their \hyperref[def:basic_set_operations/intersection]{intersection} \( A \cap B \) exists.

    \thmitem{thm:zfc_existence_theorems/arbitrary_union} For any family \( \mscrA \), the \hyperref[def:basic_set_operations/union]{union} \( \bigcup \mscrA \) exists.

    \thmitem{thm:zfc_existence_theorems/binary_union} For any two sets \( A \) and \( B \), their \hyperref[def:basic_set_operations/union]{union} \( A \cup B \) exists.

    \thmitem{thm:zfc_existence_theorems/difference} For any two sets \( A \) and \( B \), their \hyperref[def:basic_set_operations/difference]{difference} \( A \setminus B \) exists.

    \thmitem{thm:zfc_existence_theorems/power_set} For any set \( A \), its \hyperref[def:basic_set_operations/power_set]{power set} \( \pow(A) \) exists.

    As a consequence, even subsets of \( A \) which are not \hyperref[def:first_order_definability]{definable} exist.

    \thmitem{thm:zfc_existence_theorems/successor} For any set \( A \), its \hyperref[def:ordinal_successor]{successor} \( \op{succ}(A) \) exists.

    \thmitem{thm:zfc_existence_theorems/kuratowski_pair} For any two sets \( A \) and \( B \), their \hyperref[def:binary_cartesian_product]{Kuratowski pair} \( (A, B) \) exists.

    \thmitem{thm:zfc_existence_theorems/binary_cartesian_product} For any two sets \( A \) and \( B \), their \hyperref[def:binary_cartesian_product]{binary Cartesian product} \( A \times B \) exists.

    \thmitem{thm:zfc_existence_theorems/set_of_relations} For any two sets \( A \) and \( B \), the set of all relations between \( A \) and \( B \) exists.

    \thmitem{thm:zfc_existence_theorems/set_of_functions} For any two sets \( A \) and \( B \), the set \hyperref[def:function/set_of_functions]{\( \fun(A, B) \)} exists.

    \thmitem{thm:zfc_existence_theorems/quotient_set} For any set \( A \) and any \hyperref[def:equivalence_relation]{equivalence relation} \( \cong \), the \hyperref[def:equivalence_relation/quotient]{quotient set} \( A / {\cong} \) exists.

    \thmitem{thm:zfc_existence_theorems/cartesian_product} For any indexed family \( \set{ A_k }_{k \in \mscrK} \), their \hyperref[def:cartesian_product]{Cartesian product} \( \bigtimes_{k \in \mscrK} A_k \) exists.

    \thmitem{thm:zfc_existence_theorems/function_evaluation} Fix some sets \( A \) and \( B \) and some indexed family of functions \( \seq{ f_k }_{k \in \mscrK} \) where \( f: A \to B_k \) for \( k \in \mscrK \). For any \( x \in A \) the corresponding tuple \( \seq{ f_k(x) }_{k \in \mscrK} \) exists.
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:zfc_existence_theorems/subset} This is a trivial consequence of the \hyperref[def:zfc/specification]{axiom schema of specification}.

  \SubProofOf{thm:zfc_existence_theorems/empty_set} As a consequence of the \hyperref[def:zfc/infinity]{axiom of infinity}, there exists at least one inductive set. Let \( A \) be an inductive set. Then from the \hyperref[def:zfc/specification]{axiom schema of specification} it follows that
  \begin{equation*}
    \set{ x \in A \given \bot }
  \end{equation*}
  is a set. Furthermore, \( x \) belongs to this set if and only if \( x \) satisfies \( \bot \), which is impossible, hence the set is empty.

  As a consequence of the \term{axiom of extensionality}, this empty set is unique. As discussed in \fullref{def:empty_set}, we denote this unique empty set by \( \varnothing \).

  \SubProofOf{thm:zfc_existence_theorems/universe} Aiming at a contradiction, suppose that there was a universal set \( U \). Then we can easily reproduce \fullref{thm:russels_paradox} by using restricted (to \( U \)) rather than unrestricted comprehension.

  Unlike in na\"ive set theory, however, the existence of \( U \) is not an axiom of the theory. Therefore rather than demonstrating that \logic{ZFC} is inconsistent, Russel's paradox shows that certain sets like the universal set do not exist in \logic{ZFC}.

  \SubProofOf{thm:zfc_existence_theorems/singleton} Fix a set \( A \). The set \( \set{A} \), if it exists, is equal to \( \set{A} = \set{A, A} \), by the \hyperref[def:zfc/extensionality]{axiom of extensionality}.

  Thus by the \hyperref[def:zfc/pairing]{axiom of pairing}, the singleton set \( \set{A} = \set{A, A} \) actually exists.

  \SubProofOf{thm:zfc_existence_theorems/arbitrary_intersection} Let \( \mscrA \) be a nonempty family of sets. Their intersection \( \bigcap \mscrA \), if it exists, is a subset of every set \( A \in \mscrA \).

  Therefore, since the family \( \mscrA \) is nonempty, the \hyperref[def:zfc/specification]{axiom schema of specification} applied to any set in \( A \in \mscrA \) guarantees the existence of the intersection \( \bigcap \mscrA \). More precisely, for any \( A_0 \in \mscrA \), we can define the intersection of \( A \) as
  \begin{equation*}
    \bigcap \mscrA = \set{ x \in A_0 \given \qexists {A \in \mscrA} x \in A }.
  \end{equation*}

  \SubProofOf{thm:zfc_existence_theorems/binary_intersection} For sets \( A \) and \( B \), by the \hyperref[def:zfc/pairing]{axiom of pairing} the set \( \set{ A, B } \) exists. Then by \fullref{thm:zfc_existence_theorems/arbitrary_intersection}, the binary intersection
  \begin{equation*}
    A \cap B = \bigcap \set{ A, B }
  \end{equation*}
  also exists.

  \SubProofOf{thm:zfc_existence_theorems/arbitrary_union} The existence of arbitrary unions is merely a restatement of the \hyperref[def:zfc/union]{axiom of unions}.

  \SubProofOf{thm:zfc_existence_theorems/binary_union} Similarly to \fullref{thm:zfc_existence_theorems/binary_intersection}, for sets \( A \) and \( B \), by the \hyperref[def:zfc/pairing]{axiom of pairing} the set \( \set{ A, B } \) exists and by the \hyperref[def:zfc/union]{axiom of unions}, the binary union
  \begin{equation*}
    A \cup B = \bigcup \set{ A, B }
  \end{equation*}
  exists.

  \SubProofOf{thm:zfc_existence_theorems/difference} The difference \( A \setminus B \) is guaranteed to exist by \hyperref[def:zfc/specification]{restricted comprehension}:
  \begin{equation*}
    A \setminus B = \set{ x \in A \given x \not\in B }.
  \end{equation*}

  \SubProofOf{thm:zfc_existence_theorems/power_set} The existence of power sets is a restatement of the \hyperref[def:zfc/power_set]{axiom of power sets}.

  \SubProofOf{thm:zfc_existence_theorems/successor} The successor of \( A \) is
  \begin{equation*}
    \op{succ}(A) = \set{ A } \cup A.
  \end{equation*}

  Its existence follows from \fullref{thm:zfc_existence_theorems/singleton} and \fullref{thm:zfc_existence_theorems/binary_union}.

  \SubProofOf{thm:zfc_existence_theorems/kuratowski_pair} The existence of the Kuratowski pair
  \begin{equation*}
    (A, B) = \set{ \set{ A }, \set{ A, B } }
  \end{equation*}
  can be proven by the \hyperref[def:zfc/pairing]{axiom of pairing} applied first to \( \set{ A, B } \) and then to the pair itself.

  \SubProofOf{thm:zfc_existence_theorems/binary_cartesian_product} Let \( A \) and \( B \) be two sets. Any members \( x \in A \) and \( y \in B \) both belong to the union \( A \cup B \), which exists by \fullref{thm:zfc_existence_theorems/binary_union}. The unordered pair \( \set{ x, y } \) is a member of \( \pow(A \cup B) \), which exists by the \hyperref[def:zfc/power_set]{axiom of power sets}. Finally, the ordered pair \( (x, y) \) is a member of \( \pow(\pow(A \cup B)) \), which also exists by the same axiom.

  The binary Cartesian product \( A \times B \) is a subset of \( \pow(\pow(A \cup B)) \) obtained using \hyperref[def:zfc/specification]{restricted comprehension}:
  \begin{equation*}
    A \times B = \set[\Big]{ z \in \pow(\pow(A \cup B)) \given* \qexists {x \in A} \qexists {y \in B} z = (x, y) }.
  \end{equation*}

  \SubProofOf{thm:zfc_existence_theorems/set_of_relations} All relations between \( A \) and \( B \) are subsets of \( A \times B \), hence elements of \( \pow(A \times B) \). The latter exists by \fullref{thm:zfc_existence_theorems/binary_cartesian_product} and \fullref{thm:zfc_existence_theorems/power_set}.

  \SubProofOf{thm:zfc_existence_theorems/set_of_functions} The set of single-valued functions from \( A \) to \( B \) is a subset of \( \pow(A \times B) \), hence it exists by \fullref{thm:zfc_existence_theorems/set_of_relations} and \fullref{thm:zfc_existence_theorems/power_set}.

  \SubProofOf{thm:zfc_existence_theorems/quotient_set} Let \( A \) be an arbitrary set and \( \cong \) be a binary relation over \( A \). Then \( A / {\cong} \) is a subset of \( \pow(A) \) and hence it exists as a consequence of the \hyperref[def:zfc/power_set]{axiom of power sets} and the \hyperref[def:zfc/specification]{axiom schema of specification} --- see \fullref{thm:equivalence_partition/partition}.

  \SubProofOf{thm:zfc_existence_theorems/cartesian_product} By definition, the Cartesian product \( \bigtimes_{k \in \mscrK} A_k \) is a specific subset of \( \fun(\mscrK, A_k) \) and its existence is thus justified by \fullref{thm:zfc_existence_theorems/set_of_functions} and the \hyperref[def:zfc/specification]{axiom schema of specification}.

  \SubProofOf{thm:zfc_existence_theorems/cartesian_product} By definition, the Cartesian product \( \bigtimes_{k \in \mscrK} A_k \) is a specific subset of \( \fun(\mscrK, A_k) \) and its existence is thus justified by \fullref{thm:zfc_existence_theorems/set_of_functions} and the \hyperref[def:zfc/specification]{axiom schema of specification}.

  \SubProofOf{thm:zfc_existence_theorems/function_evaluation} The set \( \seq{ f_k }_{k \in \mscrK} \) exists because it is a member of \( \fun(\mscrK, \fun(A, B)) \), which set exists by \fullref{thm:zfc_existence_theorems/set_of_functions}.

   Then \( \seq{ f_k(x) }_{k \in \mscrK} \) is the function
   \begin{equation*}
     \begin{aligned}
       &g_x: \fun(\mscrK, B) \\
       &g_x(k) \coloneqq f_k(x).
     \end{aligned}
   \end{equation*}
\end{proof}

\begin{proposition}\label{thm:existence_of_multi_valued_function_selection}
  Every \hyperref[def:multi_valued_function/total]{total multi-valued function} has a \hyperref[def:function/selection]{selection}.

  Within \hyperref[def:zfc]{\logic{ZF}}, this proposition is equivalent to the \hyperref[def:zfc/choice]{axiom of choice} --- see \fullref{thm:axiom_of_choice_equivalences/selection}.
\end{proposition}
\begin{proof}
  Let \( F: A \multto B \) be a total multi-valued function. As described in \fullref{rem:multi_valued_functions}, we can instead take the \hyperref[def:indexed_family]{indexed family} \( \set{ F(a) }_{a \in A} \). Denote by \( f \) the \hyperref[def:function]{single-valued function} from \( A \) to the image \( \set{ F(a) \given a \in A } \subseteq \pow(B) \) of this indexed family (see \fullref{rem:multi_valued_functions}).

  Since \( F \) is \hyperref[def:multi_valued_function/total]{total}, the family \( \img(f) = \set{ F(a) }_{a \in A} \) is a (potentially empty) family of nonempty sets. Thus we can apply the axiom of choice to obtain a \hyperref[def:choice_function]{choice function} \( c: \img(f) \to B \).

  The composition \( c \bincirc f \) is then a single-valued function. Furthermore, we have
  \begin{equation*}
    (c \bincirc f)(a) \in f(a) = F(a)
  \end{equation*}
  so \( c \bincirc f \) is a selection of \( F \).

  This finishes the proof of the proposition. To see how it implies the axiom of choice, consider an indexed family \( \mscrA \) of nonempty sets. The identity \( \id_\mscrA \) is a single-valued function from \( \mscrA \) to itself, however we can also regard it as a multi-valued function from \( \mscrA \) to \( \bigcup \mscrA \). Any selection of this multi-valued function is then a choice function for \( \mscrA \).
\end{proof}

\begin{definition}\label{def:function_invertibility_categorical}
  As a bridge between \fullref{def:function_invertibility} and \fullref{def:morphism_invertibility}, we introduce the following concepts for a function \( f: A \to B \):
  \begin{thmenum}
    \thmitem{def:function_invertibility_categorical/left} A \term{left inverse} of \( f \) is a function \( g: B \to A \) such that \( g \bincirc f = \id_A \). If \( f \) has at least one left inverse, we say that it is \term{left-invertible}.

    \thmitem{def:function_invertibility_categorical/right} Similarly, a \term{right inverse} of \( f \) is a function \( g: B \to A \) such that \( f \bincirc g = \id_B \). If \( f \) has at least one right inverse, we say that it is \term{right-invertible}.

    \thmitem{def:function_invertibility_categorical/two_sided} If \( f \) is both left-invertible and right-invertible, \( f \) is \term{invertible} or, if clarification is needed, \term{fully invertible}. Its inverse function, which is unique by \fullref{thm:left_and_right_inverse_is_two_sided}, is then called the \term{two-sided inverse}.
  \end{thmenum}
\end{definition}

\begin{proposition}\label{thm:function_invertibility_categorical}
  We state this result here because it requires the \hyperref[def:zfc/choice]{axiom of choice} via \fullref{thm:existence_of_multi_valued_function_selection}.

  \begin{thmenum}
    \thmitem{thm:function_invertibility_categorical/empty} An \hyperref[def:multi_valued_function/empty]{empty function} is \hyperref[def:function_invertibility_categorical/left]{left-invertible} if and only if it is \hyperref[def:function_invertibility_categorical/left]{right-invertible}.

    For comparison, an empty function is always \hyperref[def:function_invertibility/injective]{injective} but it may not be \hyperref[def:function_invertibility/surjective]{surjective}.

    \thmitem{thm:function_invertibility_categorical/nonempty_injective} A nonempty function is \hyperref[def:function_invertibility/injective]{injective} if and only if it is \hyperref[def:function_invertibility_categorical/left]{left-invertible}.

    \thmitem{thm:function_invertibility_categorical/surjective} A function is \hyperref[def:function_invertibility/surjective]{surjective} if and only if it is \hyperref[def:function_invertibility_categorical/right]{right-invertible}.

    \thmitem{thm:function_invertibility_categorical/bijective} A function is \hyperref[def:function_invertibility/bijective]{bijective} if and only if it is \hyperref[def:function_invertibility_categorical/two_sided]{fully invertible}.
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:function_invertibility_categorical/empty} Let \( \varnothing: A \to B \) be the empty function from \( A \) to \( B \). The domain \( A \) is empty because otherwise the function itself would be nonempty. It follows that the empty function is always injective.

  It is possible for the range \( B \) to be nonempty, however any function from \( B \) to \( A \) is necessarily empty because the range \( A \) is empty. Thus there exists a function from \( B \) to \( A \) if and only if \( B = \varnothing \).

  If there does exist a function \( g \) from \( B \) to \( A \), then \( \id_A = g \bincirc f = f \bincirc g = \id_B \) with each of the four functions being empty.

  Therefore \( f \) is left-invertible if and only it is right-invertible.

  \SubProofOf{thm:function_invertibility_categorical/nonempty_injective} Let \( f: A \to B \) be a nonempty injective function. \Fullref{def:function_invertibility/injective/inverse} states that the \hyperref[def:multi_valued_function/inverse]{inverse} \( f^{-1}: B \to A \) is a partial single-valued function.

  Fix some value \( a \in A \) and define
  \begin{equation*}
    \begin{aligned}
      &g: B \to A \\
      &g(y) \coloneqq \begin{cases}
        f^{-1}(y), &y \in f(A) \\
        a, &\T{otherwise}
      \end{cases}.
    \end{aligned}
  \end{equation*}

  This function \( g \) is a left inverse of \( f \) because, for any \( x \in A \),
  \begin{equation*}
    (g \bincirc f)(x)
    =
    g(f(x))
    =
    f^{-1}(f(x))
    =
    x.
  \end{equation*}

  We can see that \( g \) would be unique except for our choice of \( a \). We may even define \( g \) to take different values in \( A \) outside of \( f(A) \). Thus \( g \) is non-unique in general.

  Conversely, suppose that \( f: A \to B \) is not necessarily injective and let \( g: B \to A \) be a left inverse of \( f \). Let \( x_1, x_2 \) be two different points in \( A \). Since \( g \bincirc f = \id_A \), clearly \( g(f(x_1)) \neq g(f(x_2)) \). If we suppose that \( f(x_1) = f(x_2) \), we would obtain a contradiction since then \( g(f(x_1)) \) would equal \( g(f(x_2)) \). Hence \( f(x_1) \neq f(x_2) \). Thus shows that \( f \) is injective.

  \SubProofOf{thm:function_invertibility_categorical/surjective} Let \( f: A \to B \) be a (potentially empty) surjective function. \Fullref{def:function_invertibility/injective/inverse} states that the \hyperref[def:multi_valued_function/inverse]{inverse} \( F^{-1}: B \to A \) is a total multi-valued function. We can apply \fullref{thm:existence_of_multi_valued_function_selection} to obtain a \hyperref[def:function/selection]{selection} \( g: B \to A \) of \( F^{-1} \). This selection is a right-inverse because, for any \( y \in B \),
  \begin{equation*}
    (f \bincirc g)(y)
    =
    f(g(y))
    =
    f(F^{-1}(y))
    =
    y.
  \end{equation*}

  Conversely, suppose that \( g: B \to A \) is a right inverse of \( f: A \to B \). Let \( y \in B \). We have that \( g(y) \) is in the preimage of \( y \) under \( f \) because \( f(g(y)) = y \). Thus the preimage is not empty for an arbitrary point in \( B \). We conclude that \( f \) is surjective.

  \SubProofOf{thm:function_invertibility_categorical/bijective} If \( f: A \to B \) is a bijective empty function, then it is surjective and, by \fullref{thm:function_invertibility_categorical/surjective}, it is right-invertible. By \fullref{thm:function_invertibility_categorical/empty}, it is also left-invertible. Thus it is fully invertible.

  Conversely, if an empty function \( f: A \to B \) is fully invertible, by \fullref{thm:function_invertibility_categorical/empty} we have \( A = B = \varnothing \) and hence it is bijective.

  Finally, if \( f: A \to B \) is \hi{nonempty} function, then by \fullref{thm:function_invertibility_categorical/nonempty_injective} and \fullref{thm:function_invertibility_categorical/surjective} it is bijective if and only if it is fully invertible.
\end{proof}

\begin{proposition}\label{thm:simple_foundation_theorems}
  We are not yet able to even state \fullref{thm:set_membership_is_well_founded}, however we will list several special cases which are also consequences of the \hyperref[def:zfc/foundation]{axiom of foundation}:

  \begin{thmenum}
    \thmitem{thm:simple_foundation_theorems/member_of_itself} No set is a member of itself.

    \thmitem{thm:simple_foundation_theorems/mutual_membership} For any two sets \( A \) and \( B \), it is not possible for both \( A \in B \) and \( B \in A \) to hold.
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:simple_foundation_theorems/member_of_itself} Let \( A \) be a set. By the \hyperref[def:zfc/foundation]{axiom of foundation}, the set \( \set{ A } \) contains a member that is disjoint from \( \set{ A } \) itself. But \( A \) is the only member, hence \( A \cap \set{ A } = \varnothing \).

  If we suppose that \( A \) contains itself, then \( A \in A \cap \set{ A } \), which contradicts what we just proved.

  \SubProofOf{thm:simple_foundation_theorems/mutual_membership} Let \( A \) and \( B \) be two sets.

  Aiming at a contradiction, suppose that \( A \in B \) and \( B \in A \). Then \( A \in \set{ A, B } \cap B \) and \( B \in \set{ A, B } \cap A \). But by the \hyperref[def:zfc/foundation]{axiom of foundation}, the set \( \set{ A, B } \) contains a member that is disjoint from \( \set{ A, B } \) itself and we just proved that both \( A \) and \( B \) are not disjoint.

  Therefore we cannot have both memberships \( A \in B \) and \( B \in A \).
\end{proof}

\begin{theorem}[Recursion theorem]\label{thm:omega_recursion}\mcite[73]{Enderton1977Sets}
  Let \( A \) be a nonempty set. Suppose that we are given some member \( a_1 \) of \( A \) and some transformation \( T: A \to A \). Then there exists a unique function \( f: \omega \to A \) such that
  \begin{itemize}
    \item \( f(\varnothing) = a_1 \).
    \item For every \( n \in \omega \) we have \( f(\op{succ}(n)) = T(f(n)) \).
  \end{itemize}

  Note that \( f \) is actually a \hyperref[def:sequence]{sequence}. We have not yet defined natural numbers within \logic{ZFC}, however, and this theorem is important for being able to do so. So we avoid talking about sequences to avoid circularity.

  See \fullref{rem:natural_number_recursion} for a simpler and more conventional notation for recursion on \( \omega \).
\end{theorem}
\begin{proof}
  Let \( G \subseteq \pow(\omega \times A) \) be the set of all \hyperref[def:partial_function]{partial single-valued functions} \( g: \omega \to A \) such that
  \begin{itemize}
    \item If \( g \) is defined at \( \varnothing \), then \( g(\varnothing) = a_1 \).
    \item For every \( n \in \omega \), if \( g \) is defined at \( \op{succ}(n) \), then \( g \) is also defined at \( n \) and
    \begin{equation*}
      g(\op{succ}(n)) = T(f(n)).
    \end{equation*}
  \end{itemize}

  Clearly \( G \) is nonempty because the function \( \set{ (\varnothing, a_1) } \) belongs to \( G \).

  The conditions imposed on the functions in \( G \) ensure that every function is defined in some \hyperref[def:poset_interval/ray]{initial segment} of the natural numbers. A more obvious approach is to require \( g \) to be defined at \( \op{succ}(n) \) if it is defined at \( n \), however we are trying to prove that such a function exists in the first place.

  Define \( f \coloneqq \bigcup G \). At this point \( f \) is a \hyperref[def:multi_valued_function]{multi-valued function}. We must now show that \( f \) has all the properties that we want.

  \SubProofOf[def:multi_valued_function/total]{totality} First, we will use \fullref{thm:omega_induction} to show that \( f \) is total. Clearly \( \varnothing \in \dom f \).

  Now fix \( n \in \dom f \). Then there exists a function \( g \in G \) defined at \( n \).

  \begin{itemize}
    \item If \( g \) is also defined at \( \op{succ}(n) \), this directly proves that \( \op{succ}(n) \in \dom f \).
    \item If \( g \) is not defined at \( \op{succ}(n) \), consider
    \begin{equation*}
      \widehat g \coloneqq g \cup \set{ (\op{succ}(n), T(g(n)) }.
    \end{equation*}

    The function \( \widehat g \) is again a single-valued partial function and thus it belongs to \( G \), hence \( \op{succ}(n) \in \dom f \).
  \end{itemize}

  Therefore \fullref{thm:omega_induction} allows us to conclude \( f: \omega \multto A \) is a total multi-valued function.

  \SubProofOf[def:function]{single-valuedness} Now that we know that \( f \) is total, we will prove that it is single-valued and thus is a function in the usual sense of the term.

  Clearly \( f \) is single-valued at \( \varnothing \).

  Now suppose that \( f \) is single-valued at \( n \). Since \( f \) is total, there exist at least one partial function in \( G \) that is defined at \( \op{succ}(n) \), from which it follows that it is also defined at \( n \).  Let \( g \) and \( h \) both be such (single-valued partial) functions.

  Then
  \begin{equation*}
    g(\op{succ}(n)) = T(g(n)) = T(f(n)) = T(h(n)) = h(\op{succ}(n)),
  \end{equation*}
  hence \( g \) and \( h \) coincide at \( \op{succ}(n) \), which in turn implies that \( f \) is single-valued at \( \op{succ}(n) \).

  Therefore \fullref{thm:omega_induction} allows us to conclude that \( f \) is a single-valued total function.

  \SubProofOf[def:function]{uniqueness} Now that it is clear that \( f \) satisfies the theorem, we must verify that it is unique.

  Suppose that \( f_1 \) and \( f_2 \) both satisfy the theorem. Clearly \( \varnothing \in H \). Fix some \( n \neq \varnothing \) and suppose that \( f_1(n) = f_2(n) \). Then
  \begin{equation*}
    f_2(\op{succ}(n)) = T(f_1(n)) = T(f_2(n)) = f_2(\op{succ}(n)).
  \end{equation*}

  Therefore \fullref{thm:omega_induction} allows us to conclude that \( f_1 = f_2 \). So there is at most one function that satisfies the theorem and we have already shown that \( f \) is such a function.
\end{proof}

\begin{definition}\label{def:omega_operations}
  We will use \fullref{thm:omega_recursion} for defining arithmetic operations for natural numbers. There constructions will be more elaborate than the basic recursive sequences defined in e.g. \fullref{thm:banach_fixed_point_theorem}.

  \begin{thmenum}
    \thmitem{def:omega_operations/addition} We will represent the addition operation \( \oplus \) as follows: fix the first summand \( n \) and then define a function \( \oplus_n: \omega \to \omega \) such that \( k = \oplus_n(m) \) gives us \( n \oplus m = k \). This is a particular instance of \hyperref[def:currying]{currying}.

    Fix \( n \in \omega \), let \( A = \omega \) and define
    \begin{equation*}
      \begin{aligned}
        &T_n: \omega \to \omega \\
        &T_n(k) \coloneqq \op{succ}(k).
      \end{aligned}
    \end{equation*}

    Now we use the initial point \( a_n = n \) to construct the function \( \oplus_n \).

    Define the addition function \( \oplus: \omega \times \omega \to \omega \) via its graph
    \begin{equation*}
      \set{ ((n, m), \oplus_n(m)) \given n, m \in \omega }.
    \end{equation*}

    \thmitem{def:omega_operations/multiplication} We define natural number multiplication analogously. For each \( n \in \omega \), define \( \odot_n \) via
    \begin{equation*}
      \begin{aligned}
        &T_n: \omega \to \omega \\
        &T_n(k) \coloneqq k \oplus n.
      \end{aligned}
    \end{equation*}
    and \( a_n = 0 \) and then define \( \odot: \omega \times \omega \to \omega \) via its graph
    \begin{equation*}
      \set{ ((n, m), \odot_n(m)) \given n, m \in \omega }.
    \end{equation*}
  \end{thmenum}
\end{definition}

\begin{theorem}\label{thm:omega_is_model_of_pa}
  The \hyperref[thm:smallest_inductive_set_existence]{smallest inductive set \( \omega \)} is a model of \hyperref[def:peano_arithmetic]{Peano arithmetic} with the following interpretation:
  \begin{thmenum}
    \thmitem{thm:omega_is_model_of_pa/zero} \hyperref[def:peano_arithmetic/zero]{Zero} is interpreted as \( \varnothing \).

    \thmitem{thm:omega_is_model_of_pa/succ} The \hyperref[def:peano_arithmetic/succ]{successor} operation \( s \) is interpreted as \( \op{succ} \).

    \thmitem{thm:omega_is_model_of_pa/plus} \hyperref[def:peano_arithmetic/plus]{Addition} is interpreted by the \( \oplus \) function given in \fullref{def:omega_operations/addition}.

    \thmitem{thm:omega_is_model_of_pa/mult} Similarly, \hyperref[def:peano_arithmetic/mult]{multiplication} is interpreted by \( \odot \) from \fullref{def:omega_operations/multiplication}.
  \end{thmenum}
\end{theorem}
\begin{proof}
  \SubProofOf{eq:def:peano_arithmetic/PA1} Let \( n, m \in \omega \) and suppose that \( \op{succ}(n) = \op{succ}(m) \).

  Aiming at a contradiction, suppose that \( n \neq m \). Then \( n \in \op{succ}(m) = m \cup \set{ m } \) and since \( n \neq m \) it is only possible that \( n \in m \). We can analogously prove, however, that \( m \in n \). This mutual containment contradicts \fullref{thm:simple_foundation_theorems/mutual_membership}.

  Therefore \( n = m \).

  \SubProofOf{eq:def:peano_arithmetic/PA2} Suppose that \( \varnothing \) has a predecessor \( n \in \omega \). Then
  \begin{equation*}
    \varnothing = \op{succ}(n) = n \cup \set{ n },
  \end{equation*}
  which implies that \( n \in \varnothing \). But this is contradicts the \hyperref[def:empty_set]{definition of \( \varnothing \)}.

  Therefore \( \varnothing \) has no predecessor.

  \SubProofOf{eq:def:peano_arithmetic/PA3} It follows from \fullref{thm:omega_induction} that \eqref{eq:thm:omega_induction} is a theorem of \logic{ZF}. Let \( \mscrV = (V, I) \) be our ambient \hyperref[rem:standard_model_of_set_theory]{standard} \hyperref[rem:transitive_model_of_set_theory]{transitive} model of \logic{ZFC}.

  Fix any variable assignment \( v: \boldop{Var} \to V \). As in the proof of \fullref{thm:omega_induction}, we consider the modified assignment \( v_{\beta \mapsto \omega} \) that \enquote{eliminates} the outer existential quantifier in \eqref{eq:thm:omega_induction}.

  To show that \eqref{eq:thm:omega_induction} really corresponds to \eqref{eq:def:peano_arithmetic/PA3} (and hence that \( \omega \) satisfies \eqref{eq:def:peano_arithmetic/PA3}), fix some formula \( \varphi \) of \hyperref[def:peano_arithmetic]{Peano arithmetic} (\hi{not \logic{ZFC}!}) and suppose that \( \xi, \zeta_1, \ldots, \zeta_n \) are all of its free variables. Fix also some parameter values \( u_1, \ldots, u_n \in \omega \) and, as in \fullref{def:set_builder_notation}, define the set
  \begin{equation*}
    A \coloneqq \set{ x \in \omega \given \varphi\Bracks{x, u_1, \ldots, x_n} }.
  \end{equation*}

  Since \eqref{eq:thm:omega_induction} is satisfied by \( v \), the inner formula in \eqref{eq:thm:omega_induction} (without the quantifiers over \( \beta \) and \( \alpha \)) is satisfied by \( v_{\beta \mapsto \omega, \alpha \mapsto A} \).

  Since our choice of parameters \( u_1, \ldots, u_n \) was arbitrary, we can conclude that the universal closure \eqref{eq:def:peano_arithmetic/PA3_quantified} of \eqref{eq:def:peano_arithmetic/PA3} is satisfied by \( \omega \) for every formula \( \varphi \) of \logic{PA}.

  \SubProofOf{eq:def:peano_arithmetic/PA4} For each \( n \in \omega \) the starting condition (i.e. \( m = \varnothing \)) in \fullref{def:omega_operations/addition} implies that \( n \oplus \varnothing = n \).

  \SubProofOf{eq:def:peano_arithmetic/PA5} For each \( n \in \omega \) the transformation \( T_n \) in \fullref{def:omega_operations/addition} is defined so that if \( \oplus_n(m) = k \), then \( \oplus_n(\op{succ}(m)) = \op{succ}(k) \).

  It follows that that \( n \oplus \op{succ}(m) = \op{succ}(n \oplus m) \) for all \( n, m \in \omega \).

  \SubProofOf{eq:def:peano_arithmetic/PA6} Analogously to \( \oplus \), the starting condition in \fullref{def:omega_operations/multiplication} implies that \( n \odot \varnothing = \varnothing \) for every \( n \in \omega \).

  \SubProofOf{eq:def:peano_arithmetic/PA7} Analogously to \( \oplus \), for each \( n \in \omega \) the transformation \( T_n \) in \fullref{def:omega_operations/multiplication} is defined so that if \( \odot_n(m) = k \), then \( \odot_n(\op{succ}(m)) = k \oplus n \).

  It follows that that \( n \odot \op{succ}(m) = n \odot m + n \) for all \( n, m \in \omega \).
\end{proof}

\begin{remark}\label{rem:natural_number_availability_zfc}
  Thanks to \fullref{thm:omega_is_model_of_pa}, we now have at our disposal the toolkit of the \hyperref[def:natural_numbers]{natural numbers} described in \fullref{subsec:natural_numbers} and in the end of \fullref{subsec:relations_and_functions}. We will assume, however, that the specific model we have chosen for \( \BbbN \) is \( (\omega, \varnothing, \op{succ}, \oplus, \odot) \).

  Another important note is that we take sequences to usually start with \( 1 \) rather than \( 0 \).
\end{remark}

\begin{remark}\label{rem:natural_number_recursion}
  With the availability of natural numbers, instead of the tedious constructions in \fullref{def:omega_operations/addition}, we can use a more conventional notation when applying \fullref{thm:omega_recursion}.

  As an example, we can define the Fibonacci sequence in the notation of \fullref{thm:omega_recursion} as follows:
  \begin{equation*}
    \begin{aligned}
      &T: \BbbN \times \BbbN \to \BbbN \times \BbbN \\
      &T(a, b) \coloneqq (b, a + b)
    \end{aligned}
  \end{equation*}
  and
  \begin{equation*}
    a_1 \coloneqq (0, 1).
  \end{equation*}

  The recursion theorem gives us a sequence of pairs
  \begin{equation*}
    \underbrace{(0, 1)}_{a_1}, \underbrace{(1, 1)}_{a_2}, \underbrace{(1, 2)}_{a_3}, \underbrace{(2, 3)}_{a_4}, \underbrace{(3, 5)}_{a_5}, \underbrace{(5, 8)}_{a_6}, \underbrace{(8, 13)}_{a_7}, \ldots
  \end{equation*}

  The pairs are only a technicality because otherwise we would not be able to define the sequence \( \seq{ a_k }_{k=1}^\infty \).

  By taking the second element of each pair, we obtain the sequence
  \begin{equation*}
    \underbrace{1}_{b_1}, \underbrace{1}_{b_2}, \underbrace{2}_{b_3}, \underbrace{3}_{b_4}, \underbrace{5}_{b_5}, \underbrace{8}_{b_6}, \underbrace{13}_{b_7}, \ldots.
  \end{equation*}

  In order to obtain the Fibonacci sequence, we must prefix the sequence \( \seq{ b_k }_{k=1}^\infty \) with \( b_0 = 0 \).

  This is undoubtedly much more complicated than writing
  \begin{equation*}
    b_k \coloneqq \begin{cases}
      0,                &k = 0, \\
      1,                &k = 1, \\
      b_{k-1} + b_{k-2} &k > 1.
    \end{cases}
  \end{equation*}

  To see that the latter notation is merely syntax sugar, note that the other sequence can be written as
  \begin{equation*}
    a_k \coloneqq \begin{cases}
      a_1,        &k = 1 \\
      T(a_{k-1}), &k > 1.
    \end{cases}
  \end{equation*}
\end{remark}
f
