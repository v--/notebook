\subsection{Algebras over semirings}\label{subsec:algebras_over_semirings}

Algebras are usually defined for fields or at least commutative rings. We extend this to semirings for the purposes of polynomial semirings.

\begin{definition}\label{def:algebra_over_semiring}\mimprovised
  An \term{algebra} over a \hyperref[def:semiring/commutative]{commutative semiring} \( R \) is an \( R \)-\hyperref[def:semimodule]{semimodule} \( M \) with an \hyperref[def:magma/associative]{associative} \hyperref[def:multilinear_function]{bilinear} vector multiplication operation. This makes \( M \) a nonunital ring. By default, we will also assume that \( M \) has a multiplicative unit, although nonunital algebras as just as valid as nonunital rings.

  As in the case of general rings, by \enquote{\( M \) is commutative}, we will mean that vector multiplication is commutative. Furthermore, although we assume it by default, if needed, we will distinguish between associative and non-associative algebra.

  We identify every element \( t \) of \( R \) with its canonical embedding \( t \cdot 1_M \) in \( M \), and thus we can also regard \( R \) as a sub-semiring of \( M \).

  Algebras have the following metamathematical properties:
  \begin{thmenum}
    \thmitem{def:algebra_over_semiring/theory} The \hyperref[def:first_order_theory]{first-order theory} for algebras extends the \hyperref[def:semimodule/theory]{theory of commutative semimodules}. We add a new \hyperref[rem:first_order_formula_conventions/infix]{infix} binary function symbol \( \star \) to the language, and add to the theory all semiring axioms from \fullref{def:semiring/theory} for \( + \) and \( \star \). We must also add axioms ensuring that \( \star \) is bilinear. Additivity follows from distributivity, hence it remains to account for homogeneity. Using the notation of \fullref{def:semimodule/theory}, this amounts to the following axiom schemas:
    \begin{align*}
      m_r(x) \star y &= m_r(x \star y), \\
      x \star m_r(y) &= m_r(x \star y).
    \end{align*}

    \thmitem{def:algebra_over_semiring/homomorphism} A \hyperref[def:first_order_homomorphism]{first-order homomorphism} between two \( R \)-algebras \( M \) and \( N \) is a linear map that also preserves vector multiplication.

    \thmitem{def:algebra_over_semiring/submodel} The set \( A \subseteq M \) is a \hyperref[thm:substructure_is_model]{submodel} of \( M \) if it is a \hyperref[def:monoid/submodel]{submodule} of \( M \) that is closed under algebra multiplication. We say that \( A \) is a \term{subalgebra}.

    As for general submodules, \fullref{rem:span_over_different_semirings} shows how it is important to be unambiguous about over which semiring we consider the subalgebra.

    As a consequence of \fullref{thm:positive_formulas_preserved_under_homomorphism}, the image of an \( R \)-algebra homomorphism is a subalgebra of its range.

    \thmitem{def:algebra_over_semiring/trivial} The \hyperref[thm:substructures_form_complete_lattice/bottom]{trivial} semimodule is the \hyperref[def:pointed_set/trivial]{trivial pointed set} \( \set{ 0 } \).

    \thmitem{def:algebra_over_semiring/category} We denote the category of algebras over \( R \) by \( \cat{Alg}_R \) and the subcategory of commutative algebras by \( \cat{CAlg}_R \).
  \end{thmenum}
\end{definition}

\begin{proposition}\label{thm:semiring_is_algebra}
  Every \hyperref[def:semiring]{semiring} \( R \) is an \( R \)-\hyperref[def:algebra_over_semiring]{algebra} with both scalar and vector multiplication given by the multiplication in \( R \).

  This extends \fullref{thm:semiring_is_semimodule}.
\end{proposition}
\begin{proof}
  Follows from \fullref{thm:semiring_is_semimodule} by noting that bilinearity follows from left distributivity in \( R \).
\end{proof}

\begin{proposition}\label{thm:semiring_is_natural_number_algebra}
  The categories \( \hyperref[def:semiring/category]{\cat{SRing}} \) of semirings and \( \hyperref[def:algebra_over_semiring/category]{\cat{Alg}_\BbbN} \) of natural number algebras are \hyperref[rem:category_similarity/isomorphism]{isomorphic}.

  Compare this result to \fullref{thm:commutative_monoid_is_semimodule} and \fullref{thm:ring_is_integer_algebra}.
\end{proposition}
\begin{proof}
  Follows from \fullref{thm:commutative_monoid_is_semimodule} by noting that, as in the proof of \fullref{thm:semiring_is_algebra}, distributivity implies bilinearity.
\end{proof}

\begin{proposition}\label{thm:functions_over_semimodule}
  For a set \( A \) and an \( R \)-\hyperref[def:semimodule]{semimodule} \( N \), the set of all functions from \( A \) to \( N \) is itself a semimodule with the following operations:
  \begin{thmenum}
    \thmitem{thm:functions_over_semimodule/addition} Pointwise addition
    \begin{equation*}
      [f + g](x) \coloneqq f(x) + g(x)
    \end{equation*}

    \thmitem{thm:functions_over_semimodule/scalar} Pointwise scalar multiplication
    \begin{equation*}
      [t \cdot f](x) \coloneqq t \cdot f(x)
    \end{equation*}

    \thmitem{thm:functions_over_semimodule/multiplication} If \( YN\) is an \hyperref[def:algebra_over_semiring]{algebra} over \( R \), for example if \( N = R \), we can also define pointwise multiplication, which will make the set of functions an algebra over \( R \)
    \begin{equation*}
      [f \cdot g](x) \coloneqq f(x) \cdot g(x)
    \end{equation*}
  \end{thmenum}

  If \( A \) is also an \( N \)-semimodule, we denote this set of functions by \( \hom(A, N) \).
\end{proposition}
\begin{proof}
  By \fullref{thm:functions_over_model_form_model}, \( N \) is both an \( R \)-semiring and an \( R \)-semimodule. Compatibility comes from left distributivity in \( N \).
\end{proof}

\begin{definition}\label{def:multi_index}\mimprovised
  A \term{multi-index} over the \hyperref[def:set]{plain set} \( \mscrK \) is a member of the \hyperref[def:free_semimodule]{free \( \BbbN \)-semimodule} \( \mscrK^{\oplus \BbbN} \) over \( \mscrK \). We endow \( \mscrK^{\oplus \BbbN} \) with the \hyperref[def:norm]{norm}
  \begin{equation*}
    \norm{ \alpha } \coloneqq \sum_{k \in \mscrK} \alpha_k
  \end{equation*}
  and the \hyperref[def:partially_ordered_set]{partial order}
  \begin{equation*}
    \alpha \leq \beta \T{if and only if} \qforall {k \in \mscrK} \alpha_k \leq \beta_k.
  \end{equation*}

  Multi-indices are \hyperref[def:weighted_set/multiset]{multisets} with extra structure.
\end{definition}

\begin{definition}\label{def:polynomial_semiring}
  Fix a \hyperref[def:semiring/commutative]{commutative (semi)ring} \( R \) and a set \( \mscrX \) of \hyperref[def:formal_language/symbol]{symbols}, which we will call \term{indeterminates}.

  Let \( \mscrM \) be the \hyperref[def:free_semimodule]{free \( R \)-(semi)module} over \( \mscrX \), written \hyperref[rem:additive_magma]{multiplicatively}. We will call the members of \( \mscrM \) \term{monomials}. Using a \hyperref[def:multi_index]{multi-index} \( \gamma \) over \( \mscrX \), every monomial can be written as
  \begin{equation*}
    \prod_{X \in \mscrX} X^{\gamma_X},
  \end{equation*}
  where \( \gamma_X \) are the coefficients in \( R^{\oplus \mscrX} \) of the monomial.

  The \term{polynomial (semi)ring} \( R[\mscrX] \) for the given indeterminates is the \hyperref[def:free_semimodule]{free \( R \)-(semi)module} over \( \mscrM \). That is, a polynomial \( p \in R[\mscrX] \) is an \( R \)-linear combination of monomials, and we denote polynomials by
  \begin{equation}\label{eq:def:polynomial_semiring/p}
    p(\mscrX) = \sum_\gamma a_\gamma \prod_{X \in \mscrX} X^{\gamma_X}.
  \end{equation}

  We call \( a_\gamma \) the \term{coefficients} of the polynomial. We use the components of the multi-index as powers in the monomials, but we use \( \gamma \) itself as an index for the coefficient \( a_\gamma \). Unfortunately, multi-indices are sometimes confusing, but often their brevity outweighs the possible confusion.

  We do not ignore the structure of \( \mscrM \). We conflate exponentiation in \( \mscrM \) in the sense of \fullref{def:monoid/exponentiation} with exponentiation in \( R[\mscrX] \) in the sense of \fullref{def:semiring/exponentiation}. Multiplication in \( \mscrM \) motivates us to define multiplication in \( R[\mscrX] \) via a convolution of the coefficients. We define the product of \( p(X) \) from \eqref{eq:def:polynomial_semiring/p} with
  \begin{equation}\label{eq:def:polynomial_semiring/q}
    q(\mscrX) = \sum_\gamma b_\gamma \prod_{X \in \mscrX} X^{\gamma_X}
  \end{equation}
  as
  \begin{equation}\label{eq:def:polynomial_semiring/pq}
    [pq](\mscrX) \coloneqq \sum_\gamma \parens*{ \sum_{\delta + \eta = \gamma} a_\delta b_\eta } \prod_{X \in \mscrX} X^{\gamma_X}.
  \end{equation}

  We simultaneously use multi-indices as vectors with pointwise summation (i.e. \( \delta + \eta = \gamma \)) and as indices of coefficients (i.e. \( a_\delta \) and \( b_\eta \)).

  We avoid writing the embedding \( \iota: \mscrX \to R[\mscrX] \), but it is sometimes beneficial to denote it explicitly, for example in \fullref{thm:polynomial_semiring_universal_property}.
\end{definition}

\begin{proposition}\label{thm:polynomial_semiring_universal_property}
  Fix a \hyperref[def:semiring/commutative]{commutative (semi)ring} \( R \) and a set \( \mscrX \) of indeterminates. The \hyperref[def:polynomial_semiring]{polynomial (semi)ring} \( R[\mscrX] \) is the unique up to a unique isomorphism commutative \hyperref[def:algebra_over_semiring]{algebra} that satisfies the following \hyperref[rem:universal_mapping_property]{universal mapping property}:
  \begin{displayquote}
    For every commutative \( R \)-algebra \( M \) and every function \( e: \mscrX \to M \), there exists a unique \( R \)-algebra homomorphism \( \Phi_e: R[\mscrX] \to M \) such that the following diagram commutes:
    \begin{equation}\label{eq:thm:free_semimodule_universal_property/diagram}
      \begin{aligned}
        \includegraphics[page=1]{output/thm__polynomial_semiring_universal_property.pdf}
      \end{aligned}
    \end{equation}
  \end{displayquote}

  The function \( e \) evaluates each indeterminate in \( R \), while \( \Phi_e \) substitutes this value in every polynomial. We call \( \Phi_e \) the \term{substitution homomorphism} corresponding to the \term{variable assignment} \( e \). We can parameterize this by the evaluation functions to obtain the functional evaluation homomorphism
  \begin{equation*}
    \begin{aligned}
      &\Phi: R[\mscrX] \to \fun(M^\mscrX, M) \\
      &\Phi(p) \coloneqq (f \mapsto \Phi_e(p))
    \end{aligned}
  \end{equation*}

  We call the values of \( \Phi \) \term{polynomial functions}. Given elements \( x_1, \ldots, x_n \) of \( M \), we write
  \begin{equation*}
    p(x_1, \ldots, x_n)
  \end{equation*}
  rather than
  \begin{equation*}
    \Phi(p)(x_1, \ldots, x_n).
  \end{equation*}

  Via \fullref{rem:universal_mapping_property}, \( R[\anon*] \) becomes \hyperref[def:category_adjunction]{left adjoint} to the \hyperref[def:concrete_category]{forgetful functor}
  \begin{equation*}
    U: \cat{CAlg}_R \to \cat{Set}.
  \end{equation*}

  The action of \( R[\anon*] \) on morphisms is given by \( \Phi \).
\end{proposition}
\begin{proof}
  For every indeterminate \( X \), we want
  \begin{equation*}
    \Phi_e(\iota(X)) = f(X).
  \end{equation*}

  This suggests defining \( \Phi_e \) for the polynomial
  \begin{equation*}
    p(\mscrX) = \sum_\gamma a_\gamma \prod_{X \in \mscrX} \iota(X)^{\gamma_X}
  \end{equation*}
  as the evaluation
  \begin{equation*}
    \Phi_e(p) \coloneqq \sum_\gamma a_\gamma \prod_{X \in \mscrX} f(X)^{\gamma_X}.
  \end{equation*}

  We discuss well-definedness of infinitary operations in direct sums in \fullref{rem:binary_operation_syntax_trees/infinite/direct_sum}.
\end{proof}

\begin{remark}\label{rem:polynomials_over_infinitely_many_indeterminates}
  As we saw in \fullref{def:polynomial_semiring} and \fullref{thm:polynomial_semiring_universal_property}, there is no formal problem in defining polynomial algebras over infinitely many indeterminates.

  There is a problem, however. Polynomials in one indeterminate, which we will call univariate in accordance to \fullref{def:multi_valued_function/arguments}, have a \hyperref[def:well_ordered_set]{well-ordering} on their monomials, induced by the degree of their monomials. This is defined and discussed in \fullref{subsec:univariate_polynomials}.

  Polynomials in more than one variable do not have a well-ordering by default. If the indeterminates themselves are well-ordered, as is the case for finitely many indeterminates, we may introduce, for example, a \hyperref[def:lexicographic_order]{reverse lexicographic order} on the monomials. Furthermore, for finitely many variables, \fullref{thm:def:polynomial_semiring/iterated} allows us to use \hyperref[rem:induction/peano_arithmetic]{natural number induction} on the number of variables in order to prove statements about multivariate polynomial rings.

  For infinitely many, especially uncountably many variables, however, the theory is seriously crippled by the lack of the tools described above. For this reason, only polynomials in finitely many variables are often considered.
\end{remark}

\begin{proposition}\label{thm:def:polynomial_semiring/properties}
  The following are basic properties of \hyperref[def:polynomial_semiring]{polynomial (semi)rings}:
  \begin{thmenum}
    \thmitem{thm:def:polynomial_semiring/iterated} The polynomial algebras \( R[\mscrX] \) and \( R[\mscrX \setminus \set{ X_0 }][X_0] \) are isomorphic for any \( X_0 \in \mscrX \) (in case \( \mscrX \) has more than one member).

    In particular,
    \begin{equation*}
      R[X_1, \ldots, X_{n-1}][X_n] \cong R[X_1, \ldots, X_n].
    \end{equation*}

    \thmitem{thm:def:polynomial_semiring/entire} The univariate \hyperref[def:polynomial_semiring]{polynomial semiring} \( R[X] \) is \hyperref[def:divisibility/zero]{entire} if and only if \( R \) is entire.

    \thmitem{thm:def:polynomial_semiring/units} If \( R \) is entire, the \hyperref[def:divisibility/unit]{units} in \( R[X_1, \ldots, X_n] \) are precisely the (embeddings of) the units of \( R \).
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:polynomial_semiring/iterated} Polynomials in \( R[\mscrX] \) have the form
  \begin{equation*}
    p(\mscrX) = \sum_{k=0}^\infty \sum_\gamma \parens*{ a_{(k,\gamma)} \prod_{\mathclap{X \in \mscrX \setminus \set{ X_0 }}} X^{\gamma_X} } X_0^k,
  \end{equation*}
  where \( \gamma \) is a \hyperref[def:multi_index]{multi-index} on \( \mscrX \).

  Due to associativity, commutativity and distributivity, this can be rewritten as
  \begin{equation*}
    p(\mscrX) = \sum_{k=0}^\infty \parens*{ \sum_\gamma a_{(k,\gamma)} \prod_{\mathclap{X \in \mscrX \setminus \set{ X_0 }}} X^{\gamma_X} } X_0^k.
  \end{equation*}

  This shows how \( R[\mscrX] \) can be embedded into \( R[\mscrX \setminus \set{ X_0 }][X_0] \). This embedding is surjective because the coefficients \( a_\gamma \) range through \( R \). Therefore, the embedding is an isomorphism.

  \SubProofOf{thm:def:polynomial_semiring/entire}

  \SufficiencySubProof Since \( R \) is an \( R \)-subalgebra of \( R[X] \), if the latter is entire, so is the former.

  \NecessitySubProof Suppose that \( R \) is entire and that \( R[X] \) isn't. Then there exist nonzero polynomials \( p(X) \) and \( q(X) \) such that \( p(X) q(X) = 0 \). If \( a_n \) is the leading coefficient of \( p(X) \) and \( b_m \) --- of \( q(X) \), the leading coefficient of \( p(X) q(X) \) is \( a_n b_m \). Since \( p(X) q(X) \) is the zero polynomial, \( a_n b_m = 0 \), which contradicts the assumption that \( R \) is entire.

  Therefore, \( R[X] \) is entire.

  \SubProofOf{thm:def:polynomial_semiring/units} As in \fullref{thm:def:polynomial_semiring/entire}, it is sufficient to prove the statement for one indeterminate.

  Clearly every constant is invertible as a constant polynomial.

  Now suppose that \( p(X) q(X) = 1 \). By definition of multiplication, the product has only one nonzero coefficient. Since \( R \) is entire, it follows that both \( p(X) \) and \( q(X) \) have only one nonzero coefficient, and are hence constants.
\end{proof}

\begin{example}\label{ex:def:polynomial_semiring}
  We list several examples of \hyperref[def:polynomial_semiring]{polynomials} over semirings.
  \begin{thmenum}
    \thmitem{ex:def:polynomial_semiring/natural_numbers} Consider the polynomial \( p(X) \coloneqq aX^2 + bX + c \) in \( \BbbN[X] \). A function from the set \( \set{ X } \) to \( \BbbN \) corresponds to an element of \( \BbbN \), and hence evaluating the polynomial is done by simply replacing \( X \) symbolically in \( p \) and then evaluating the obtained \hyperref[rem:binary_operation_syntax_trees]{syntax tree}.

    We seek the roots of \( p(X) \). We will only formally define roots in \fullref{def:polynomial_root}; for the purposes of the example, a root is a natural number \( n \) such that \( \Phi_n(p) = 0_R \).

    By \fullref{thm:fundamental_theorem_of_algebra} and \fullref{def:algebraically_closed_field/exactly_n_roots}, \( p \) has two roots in the \hyperref[def:set_of_complex_numbers]{complex plane}. That is, we regard \( \BbbC \) as an algebra over \( \BbbN \) and use \fullref{thm:polynomial_semiring_universal_property} to obtain a polynomial function on \( \BbbC \). Furthermore, over the complex numbers the roots can be explicitly found using
    \begin{equation*}
      \frac {-b \pm \sqrt{b^2 - 4ac}} {2a}.
    \end{equation*}

    Finding a root of \( p \) over the natural numbers cannot be done in general, however. If \( p(n) = 0 \), by the ordering of the natural numbers we have
    \begin{equation*}
      p(n) = an^2 + bn + c \geq c,
    \end{equation*}
    and hence \( c \) must necessarily be \( 0 \). If \( c = 0 \), then zero is a root of the polynomial \( p(X) = aX^2 + bX \).

    Now let \( n \) be any root of \( p \). We have
    \begin{equation*}
      an^2 + bn \geq bn,
    \end{equation*}
    and hence \( bn \) must also be \( 0 \). Thus, either \( b = 0 \) or \( n = 0 \). If we want a root other than \( n \), both \( a \) and \( b \) must be \( 0 \).

    Therefore, the only natural number solution to the quadratic equation is \( 0 \), and it is only a solution if \( c = 0 \).

    \thmitem{ex:def:polynomial_semiring/tropical} Consider again the polynomial \( p(X) \coloneqq aX^2 + bX + c \) over \( \BbbN \), but this time evaluated over the \hyperref[def:tropical_semiring]{\( \min \)-plus semiring} \( (\BbbN \cup \set{ \infty }, \min, +) \).

    Expressed via the standard natural number operations, this polynomial becomes
    \begin{equation*}
      \min\set{ 2X + a, X + b, c }.
    \end{equation*}

    This allows us to express certain optimization problems via polynomials.

    This polynomial has a root if and only if \( a = b = c \). Roots in the tropical semiring are not very interesting, however.
  \end{thmenum}
\end{example}

\begin{proposition}\label{thm:generators_via_polynomials}
  For a set \( A \) in an \( R \)-\hyperref[def:algebra_over_semiring]{algebra} \( M \), the \hyperref[def:algebra_over_semiring/submodel]{generated subalgebra} of \( A \), defined as the \( R \)-subalgebra generated by \( A \) in the sense of \fullref{def:first_order_generated_substructure}, equals the set
  \begin{equation*}
    \bigcup \set[\Big]{ R[a_1, \ldots, a_n] \given* a_1, \ldots, a_n \in A }
  \end{equation*}
  obtained by evaluating all multivariate polynomials over \( R \) with elements of \( A \).

  The \( \BbbN \)-subalgebras of \( M \) correspond to \hyperref[def:semiring/submodel]{sub-semirings} and the \( M \)-subalgebras correspond to \hyperref[def:semiring_ideal/generated]{ideals}.

  Compare this result to \fullref{thm:span_via_linear_combinations} for modules.
\end{proposition}
\begin{proof}
  Similar to \fullref{thm:span_via_linear_combinations}.
\end{proof}

\begin{proposition}\label{thm:adjoining_elements_to_semiring}
  Let \( R \subseteq S \) be \hyperref[def:semiring/commutative]{commutative semirings} and let \( A \subseteq S \) be an arbitrary subset.

  Fix a set \( \mscrX \) of indeterminates and a bijective function \( e: \mscrX \to A \) and consider the \hyperref[thm:polynomial_semiring_universal_property]{evaluation homomorphism}
  \begin{equation*}
    \Phi_e: R[\mscrX] \to S.
  \end{equation*}

  The image \( R[A] \) of \( \Phi_e \) is the smallest super-semiring of \( R \) that contains \( A \).

  We say that \( R[A] \) is obtained by \term{adjoining} the elements of \( A \) to \( R \).
\end{proposition}
\begin{proof}
  Follows from \fullref{thm:generators_via_polynomials}.
\end{proof}

\begin{example}\label{ex:adjoining_root}
  Continuing \fullref{ex:def:polynomial_semiring/natural_numbers}, consider the polynomial equation
  \begin{equation*}
    X + 1 = 0.
  \end{equation*}

  It has no natural number root as a consequence of \eqref{eq:def:peano_arithmetic/PA2}.

  It does have an integer root, however, \( -1 \). We can \hyperref[thm:adjoining_elements_to_semiring]{adjoin} \( -1 \) to the semiring \( \BbbN \) to obtain the semiring \( \BbbN[-1] \). But this latter semiring is (isomorphic to) \( \BbbZ \).

  Therefore, \( \BbbZ \) is the smallest extension of \( \BbbN \) that contains a root to the polynomial \( X + 1 \).

  This example extends to the theory of \hyperref[def:transcendetal_element]{transcendental and algebraic} elements of fields.
\end{example}

\begin{definition}\label{def:formal_power_series}\mimprovised
  If we extend the concept of \hyperref[def:polynomial_semiring]{polynomials} to allow countably many nonzero terms, we obtain a set \( R\Bracks{\mscrX} \) which we call the \term{formal power series} over \( R \) with indeterminates from the set \( \mscrX \).

  The evaluation homomorphism defined in \fullref{thm:polynomial_semiring_universal_property} is problematic, however, since algebraic operations are finitary by nature. This is discussed in \fullref{rem:binary_operation_syntax_trees/infinite}, along with how sometimes we can make sense of infinitary algebraic operations.
\end{definition}
