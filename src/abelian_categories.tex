\subsection{Abelian categories}\label{subsec:abelian_categories}

\begin{definition}\label{def:preadditive_category}\mcite[28]{MacLane1994}
  A \term{preadditive category \( \cat{C} \)} is any category enriched over the category \( \cat{Ab} \) of \hyperref[thm:ab_is_abelian]{abelian groups}, such that composition
  \begin{equation*}
    \circ_{A,B,C}: \cat{Ab}(B, C) \times \cat{Ab}(A, B) \to \cat{Ab}(A, C)
  \end{equation*}
  is bilinear, e.g. given group homomorphisms \( f, f': A \to B \) and \( g, g': B \to C \), we have
  \begin{equation*}
    (g + g') \circ (f + f') = g \circ f + g \circ f' + g' \circ f + g' \circ f'.
  \end{equation*}
\end{definition}

\begin{definition}\label{def:zero_morphism}
  Let \( \cat{C} \) be a category. We say that the morphism \( f: A \to B \) is
  \begin{thmenum}
    \thmitem{def:zero_morphism/left} a \term{left-zero morphism} or a \term{constant morphism} if \( f \circ g = f \circ h \) for any two morphisms \( g, h: A' \to A \) for any object \( A' \).
    \thmitem{def:zero_morphism/right} a \term{right-zero morphism} or a \term{coconstant morphism} if \( g \circ f = h \circ f \) for any two morphisms \( g, h: B \to B' \) for any object \( B' \).
    \thmitem{def:zero_morphism/bidirectional} a \term{zero morphism} if it is both a left-zero and a right-zero morphism. We denote it by \( 0_{A,B} \) if it is unique (for example, in \hyperref[def:preadditive_category]{preadditive categories}).
  \end{thmenum}
\end{definition}

\begin{proposition}\label{thm:preadditive_zero_morphisms}
  If \( \cat{C} \) is a \hyperref[def:preadditive_category]{preadditive category} and \( A, B \in \cat{C} \), the identity of \( \cat{C}(A, B) \) is the unique zero \hyperref[def:zero_morphism]{morphism} from \( A \) to \( B \).
\end{proposition}
\begin{proof}
  Denote the identity of \( \cat{C}(A, B) \) by \( 0_{A,B} \). We will show that it is a zero morphism in the sense of \fullref{def:zero_morphism}.

  Let \( C \in \cat{C} \) and fix a morphism \( f: B \to C \). Then, by linearity,
  \begin{balign*}
    f \circ 0_{A,B} + f \circ 0_{A,B}
    =
    f \circ (0_{A,B} + 0_{A,B})
    =
    f \circ 0_{A,B}.
  \end{balign*}

  Thus, \( f \circ 0_{A,B} = 0_{A,C} \). Since this holds for any function, we conclude that \( g \circ 0_{A,B} = h \circ 0_{A,B} = 0_{A,C} \) for any two morphisms in \( g, h \in \cat{C}(B,C) \) and hence \( 0_{A,B} \) is a left zero morphism. The proof that \( 0_{A,B} \) is a right zero morphism is identical. Hence, \( 0_{A,B} \) is a zero morphism.

  Now we will show that these are the only zero morphisms in \( \cat{C} \). Assume that \( z: A \to B \) is a zero morphism. Then
  \begin{equation*}
    z = 0_{B,B} \circ z = (0_{B,B} + 0_{B,B}) \circ z = z + z,
  \end{equation*}
  hence \( z = 0_{A,B} \).
\end{proof}

\begin{proposition}\label{thm:preadditive_category_biproducts}
  If \( \cat{C} \) is a preadditive category, the vertices of nonempty finite products and coproducts coincide.
\end{proposition}
\begin{proof}
  Let \( X: \cat{I} \to \cat{C} \) be a finite discrete diagram. Denote the objects \( X(k) \) by \( X_k \) and their product by
  \begin{equation*}
    (X, \pi) \coloneqq \varprojlim D
  \end{equation*}
  where \( X \) is an object in \( C \) and
  \begin{equation*}
    \pi = \{ \pi_k: X \to X_k \}_{k \in \cat{I}}
  \end{equation*}
  is the family of projections.

  Consider the object \( X_k \in \cat{C} \) with the family of morphisms
  \begin{balign*}
    \begin{dcases}
      \begin{drcases}
        \id_{X_k},       & \beta = k    \\
        0_{X_k,X_\beta}, & \beta \neq k
      \end{drcases}
    \end{dcases}_{\beta \in \cat{I}}
  \end{balign*}

  By the definition of \hyperref[def:categorical_product]{product}, there exists a unique family of morphisms \( \{ \iota_k \}_{k \in \cat{I}} \) such that the following diagram commutes
  \begin{equation*}
    \text{\todo{Add diagram}}\iffalse\begin{mplibcode}
      beginfig(1);
      input metapost/graphs;

      v1 := thelabel("$X_k$", origin);
      v2 := thelabel("$X_k$", (-1, 1) scaled u);
      v3 := thelabel("$P$", (1, 1) scaled u);

      a1 := straight_arc(v2, v1);
      a2 := straight_arc(v3, v1);

      d1 := straight_arc(v2, v3);

      draw_vertices(v);
      draw_arcs(a);

      drawarrow d1 dotted;

      label.llft("$\id_{X_k}$", straight_arc_midpoint of a1);
      label.lrt("$\pi_k$", straight_arc_midpoint of a2);
      label.top("$\iota_k$", straight_arc_midpoint of d1);
      endfig;
    \end{mplibcode}\fi
    \hspace{1cm}
    \text{\todo{Add diagram}}\iffalse\begin{mplibcode}
      beginfig(1);
      input metapost/graphs;

      v1 := thelabel("$X_k$", origin);
      v2 := thelabel("$X_\beta$", (-1, 1) scaled u);
      v3 := thelabel("$P$", (1, 1) scaled u);

      a1 := straight_arc(v2, v1);
      a2 := straight_arc(v3, v1);

      d1 := straight_arc(v2, v3);

      draw_vertices(v);
      draw_arcs(a);

      drawarrow d1 dotted;

      label.llft("$0_{X_k, X_\beta}$", straight_arc_midpoint of a1);
      label.lrt("$\pi_k$", straight_arc_midpoint of a2);
      label.top("$\iota_\beta$", straight_arc_midpoint of d1);
      endfig;
    \end{mplibcode}\fi
  \end{equation*}

  Define \( \iota \coloneqq \{ \iota_k \}_{k \in \cat{I}} \). We will prove that \( (X, \iota) \) is a \hyperref[def:categorical_coproduct]{coproduct}.

  Let \( \Gamma \in \cat{C} \) be an arbitrary object such that there exists a family of morphisms
  \begin{equation*}
    \{ \gamma_k: X_k \to \Gamma \}_{k \in \cat{I}}.
  \end{equation*}

  Define
  \begin{equation*}
    f \coloneqq \sum_{k \in I} (\gamma_k \circ \pi_k): X \to \Gamma.
  \end{equation*}

  Fix \( k \in \cat{I} \). Now we show that the following diagrams commute:
  \begin{equation*}
    \text{\todo{Add diagram}}\iffalse\begin{mplibcode}
      beginfig(1);
      input metapost/graphs;

      v1 := thelabel("$X_k$", origin);
      v2 := thelabel("$\Gamma$", (-1, 1) scaled u);
      v3 := thelabel("$X$", (1, 1) scaled u);

      a1 := straight_arc(v1, v2);
      a2 := straight_arc(v1, v3);

      d1 := straight_arc(v3, v2);

      draw_vertices(v);
      draw_arcs(a);

      drawarrow d1 dotted;

      label.llft("$\gamma_k$", straight_arc_midpoint of a1);
      label.lrt("$\iota_k$", straight_arc_midpoint of a2);
      label.top("$f$", straight_arc_midpoint of d1);
      endfig;
    \end{mplibcode}\fi
  \end{equation*}

  Indeed,
  \begin{balign*}
    f \circ \iota_k
    =
    \left(\sum_{\beta \in \cat{I}} \gamma_\beta \circ \pi_\beta \right) \circ \iota_k
    =
    \sum_{k \in \cat{I}} (\gamma_\beta \circ (\pi_\beta \circ \iota_k))
    =
    \gamma_k \circ \id_{X_k} + \sum_{\substack{\beta \in \cat{I} \\ {\beta \neq k}}} \gamma_\beta \circ 0_{X_k,X_\beta}
    =
    \gamma_k.
  \end{balign*}

  Note that the sum is well-defined since the indexing category \( \cat{I} \) is finite.

  Now we will show that the morphism \( f \) is unique.

  First define
  \begin{equation*}
    g \coloneqq \sum_{\beta \in \cat{I}} \iota_\beta \circ \pi_\beta: X \to X.
  \end{equation*}

  Note that for each \( k \in \cat{I} \),
  \begin{balign*}
    \pi_k \circ g
    =
    \pi_k \circ \left( \sum_{\beta \in \cat{I}} \iota_\beta \circ \pi_\beta \right)
    =
    \sum_{\beta \in \cat{I}} ((\pi_k \circ \iota_\beta) \circ \pi_\beta)
    =
    \id_k \circ \pi_k + \sum_{\substack{\beta \in \cat{I} \\ {\beta \neq k}}} 0_{X_k,X_\beta}
    =
    \pi_k.
  \end{balign*}

  We claim that \( g = \id_X \). Since \( X \) is a product, there exists a unique morphism such that the following diagram commutes for each \( k \in \cat{I} \):
  \begin{alignedeq}\label{thm:preadditive_biproducts/product_identity}
    \text{\todo{Add diagram}}\iffalse\begin{mplibcode}
      beginfig(1);
      input metapost/graphs;

      v1 := thelabel("$X_k$", origin);
      v2 := thelabel("$X$", (-1, 1) scaled u);
      v3 := thelabel("$X$", (1, 1) scaled u);

      a1 := straight_arc(v2, v1);
      a2 := straight_arc(v3, v1);
      d1 := straight_arc(v2, v3);

      draw_vertices(v);
      draw_arcs(a);

      drawarrow d1 dotted;

      label.llft("$g \circ \pi_k$", straight_arc_midpoint of a1);
      label.lrt("$\pi_k$", straight_arc_midpoint of a2);
      endfig;
    \end{mplibcode}\fi
  \end{alignedeq}

  Both \( g \) and \( \id_X \) satisfy the universal property in \fullref{thm:preadditive_biproducts/product_identity}, hence they are equal.

  To show that the morphism \( f \) is unique, assume that there exists \( f': \Gamma \to X \) such that for each \( k \in \cat{I} \),
  \begin{equation*}
    f' \circ \iota_k = \gamma_k.
  \end{equation*}

  But
  \begin{balign*}
    f - f'
     & =
    (f - f') \circ \id_X
    =    \\ &=
    (f - f') \circ \left( \sum_{k \in \cat{I}} \iota_k \circ \pi_k \right)
    =    \\ &=
    \sum_{k \in \cat{I}} ((f \circ \iota_k) \circ \pi_k - (f' \circ \iota_k) \circ \pi_k)
    =    \\ &=
    \sum_{k \in \cat{I}} (\gamma_k \circ \pi_k - \gamma_k \circ \pi_k)
    =
    0_{\Gamma,X},
  \end{balign*}
  thus \( f = f' \).

  Hence, the definition of coproduct is satisfied by \( (X, \iota) \).
\end{proof}

\begin{definition}\label{def:categorical_biproduct}
  Let \( \cat{C} \) be a preadditive category. A \term{biproduct} of the finite family \( \{ X_k \}_{k \in I} \) of objects in \( \cat{C} \) is a triple \( (X, \pi, \iota) \), such that \( (X, \pi) \) is a product, \( (X, \iota) \) is a coproduct.
\end{definition}

\begin{remark}\label{rem:preadditive_category_biproducts}
  By \fullref{thm:preadditive_category_biproducts}, if a nonempty finite product exists in a preadditive category, so does the corresponding coproduct, hence it is a biproduct. If the empty product exists, however, it may not be a coproduct.

  In order to ensure some regularity, \hyperref[def:additive_category]{additive categories} are introduced.
\end{remark}

\begin{definition}\label{def:additive_category}\mcite[196]{MacLane1994}
  A \hyperref[def:preadditive_category]{preadditive category} is called additive if it has all finite \hyperref[def:categorical_biproduct]{biproducts}, including empty biproducts (see \fullref{thm:additive_category_biproducts}).
\end{definition}

\begin{theorem}\label{thm:additive_category_biproducts}
  If \( \cat{C} \) is an additive category, the vertices of finite products and coproducts coincide, that is, they are biproducts.
\end{theorem}
\begin{proof}
  The proof follows from \fullref{thm:preadditive_category_biproducts} and the fact that the \hyperref[rem:empty_categorical_coproduct]{initial} and \hyperref[rem:empty_categorical_product]{terminal} object coincide.
\end{proof}

\begin{definition}\label{def:categorical_kernel}
  Let \( \cat{C} \) be a preadditive category and \( f: A \to B \) be a morphism in \( \cat{C} \). We define the \term{kernel} \( \ker(f) \) of \( f \) as the \hyperref[def:categorical_equalizer]{equalizer} of \( f \) and \( 0_{A,B} \). Thus, \( \ker(f) \) is a morphism from \( L \) (the limit vertex) to \( A \).

  Analogously, we define the \term{cokernel} \( \co\ker(f) \) of \( f \) as the \hyperref[def:categorical_coequalizer]{coequalizer} of \( f \) and \( 0_{A,B} \). Thus, \( \co\ker(f): B \to C \), where \( C \) is the colimit vertex.
\end{definition}

\begin{definition}\label{def:abelian_category}\mcite[196]{MacLane1994}
  An \hyperref[def:additive_category]{additive category} \( \cat{C} \) is called an \term{abelian category} if:
  \begin{thmenum}
    \item \( \cat{C} \) has a kernel and a cokernel for every \hyperref[def:categorical_kernel]{morphism}
    \item every monomorphism is a kernel and every epimorphism is a \hyperref[def:morphism_invertibility]{cokernel}
  \end{thmenum}
\end{definition}

\begin{proposition}\label{thm:abelian_category_morphism_factorization}\mcite[prop. 8.3.1]{MacLane1994}
  In an abelian category \( \cat{C} \), every morphism \( f: A \to B \) has a factorization \( f = \img f \circ \co\img f \), where
  \begin{itemize}
    \item \( \img f \coloneqq \ker(\co\ker f: B \to C_1): L_1 \to B \) is a monomorphism
    \item \( \co\img f \coloneqq \co\ker(\ker f: L_2 \to A): A \to C_2 \) is an epimorphism
  \end{itemize}
  Here \( L_1 \) and \( L_2 \) are the limit vertices and \( C_1 \) and \( C_2 \) are the colimit vertices as in \fullref{def:categorical_kernel}. Necessarily \( L_1 \cong C_2 \).
\end{proposition}

\begin{definition}\label{def:exact_morphism_pair}\mcite[196]{MacLane1994}
  In an abelian category \( \cat{C} \), a composable pair of morphisms \( f: A \to B \) and \( g: B \to C \) is said to be \term{exact} at \( B \) if \( \img f \cong \ker g \) as subobjects of \( B \) (or, equivalently, \( \co\ker f \cong \co\img g \); see \fullref{def:categorical_subobject}).
\end{definition}
