\subsection{Integral domains}\label{subsec:integral_domains}

\begin{definition}\label{def:integral_domain}
  An \term{integral domain} is an \hyperref[def:entire_semiring]{entire} \hyperref[def:ring/commutative]{commutative (unital) ring}.
\end{definition}

\begin{proposition}\label{thm:def:integral_domain/properties}
  \hyperref[def:integral_domain]{Integral domains} have the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:integral_domain/properties/subring} Any \hyperref[def:ring/submodel]{subring} of an integral domain is also an integral domain.

    \thmitem{thm:def:integral_domain/properties/polynomial_ring} The \hyperref[def:polynomial_semiring]{polynomial ring} \( R[X_1, \ldots, X_n] \) is an integral domain if and only if \( R \) is.
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:integral_domain/properties/subring} Trivial.

  \SubProofOf{thm:def:integral_domain/properties/polynomial_ring}

  \SufficiencySubProof* If \( R[X_1, \ldots, X_n] \) is an integral domain, by \fullref{thm:def:integral_domain/properties/subring}, so is \( R \).

  \NecessitySubProof* It is sufficient to prove the statement for one indeterminate. If \( p(X) \) and \( q(X) \) are nonzero polynomials, then so is \( p(X) q(X) \) by \fullref{thm:def:polynomial_degree/properties/product}.
\end{proof}

\begin{proposition}\label{thm:quotient_by_prime_ideal}
  The ideal \( P \) of the \hyperref[def:ring/commutative]{commutative ring} \( R \) is \hyperref[def:semiring_ideal/prime]{prime} if and only if the \hyperref[def:ring/quotient]{quotient ring} \( R / P \) is an \hyperref[def:integral_domain]{integral domain}.

  See \fullref{thm:quotient_by_maximal_ideal} for the corresponding statement for \hyperref[def:semiring_ideal/maximal]{maximal ideals} in possibly noncommutative rings.
\end{proposition}
\begin{proof}
  \SufficiencySubProof Suppose that \( P \) is a prime ideal. Clearly \( R / P \) is a commutative ring. Since \( P \) is a proper ideal, \( R / P \) must be nontrivial. We will show that it is an \hyperref[def:entire_semiring]{entire ring}.

  Let \( [x] [y] = [0] = P \). By definition,
  \begin{equation*}
    [x] [y] = (x + P) (y + P) = (xy + P),
  \end{equation*}
  which implies \( xy + P = P \) and hence \( xy \in P \). Since \( P \) is prime, by \fullref{thm:def:semiring_ideal/properties/prime_pointwise}, we have \( x \in P \) or \( y \in P \).

  Therefore, \( [x] = [0] \) or \( [y] = [0] \). Generalizing on \( x \) and \( y \), we can conclude that \( R / P \) is entire, and thus an integral domain.

  \NecessitySubProof Suppose that \( R / P \) is an integral domain. Since \( R / P \) is nontrivial, \( P \) must be a proper ideal. We will show that it satisfies \fullref{thm:def:semiring_ideal/properties/prime_pointwise}.

  Let \( xy \in P \). We have
  \begin{equation*}
    P = [0] = [xy] = [x] [y],
  \end{equation*}
  hence \( [x] \) and \( [y] \) are zero divisors in \( R / P \). But \( R / P \) is entire, hence either \( [x] \) or \( [y] \) must be zero. That is, either \( x \in P \) or \( y \in P \).

  Generalizing on \( x \) and \( y \), we can conclude that \( P \) is a prime ideal.
\end{proof}

\begin{definition}\label{def:domain_divisibility}\mimprovised
  We will introduce several notions related to \hyperref[def:divisibility]{divisibility} in \hyperref[def:integral_domain]{integral domains}.

  \begin{thmenum}
    \thmitem{def:domain_divisibility/associates} We say that \( x \) and \( y \) are \term{associates} if any of the following conditions hold:
    \begin{thmenum}
      \thmitem{def:domain_divisibility/associates/direct} Both \( x \mid y \) and \( y \mid x \).
      \thmitem{def:domain_divisibility/associates/unit} There exists a \hyperref[def:divisibility/unit]{unit} \( u \) such that \( x = uy \).
      \thmitem{def:domain_divisibility/associates/ideals} The \hyperref[def:semiring_ideal/principal]{principal ideals} \( \braket{ x } \) and \( \braket{ y } \) are equal.
    \end{thmenum}

    \thmitem{def:domain_divisibility/irreducible} We say that the nonzero nonunit element \( x \) is \term{irreducible} if any of the following conditions hold:
    \begin{thmenum}
      \thmitem{def:domain_divisibility/irreducible/direct} If \( x = yz \), then \( y \) or \( z \) is a unit.
      \thmitem{def:domain_divisibility/irreducible/ideals} \( \braket{ x } \) is maximal among all proper principal ideals. Maximality means that, if \( \braket{ x } \subseteq \braket{ y } \) for some nonzero nonunit \( y \), then \( \braket{ x } = \braket{ y } \).
    \end{thmenum}

    \thmitem{def:domain_divisibility/prime} We say that the nonzero element \( x \) is \term{prime} if any of the following equivalent conditions hold:
    \begin{thmenum}
      \thmitem{def:domain_divisibility/prime/direct} If \( x \mid yz \), then \( x \mid y \) or \( x \mid z \).
      \thmitem{def:domain_divisibility/prime/ideals} The ideal \( \braket{ x } \) is \hyperref[def:semiring_ideal/prime]{prime}.
    \end{thmenum}

    This definition is motivated by \fullref{thm:euclids_lemma}.

    \thmitem{def:domain_divisibility/coprime} We say that the nonzero elements \( x \) and \( y \) are \term{coprime} if any of the following equivalent conditions hold:
    \begin{thmenum}
      \thmitem{def:domain_divisibility/coprime/direct} There exist elements \( a \) and \( b \) such that \( ax + by = 1_D \).
      \thmitem{def:domain_divisibility/coprime/ideal} The ideals \( \braket{ x } \) and \( \braket{ y } \) are \hyperref[def:semiring_ideal/coprime]{coprime}.
    \end{thmenum}

    This definition is motivated by \fullref{thm:bezout_identity}.
  \end{thmenum}
\end{definition}
\begin{defproof}
  \SubProofOf{def:domain_divisibility/associates}
  \ImplicationSubProof{def:domain_divisibility/associates/direct}{def:domain_divisibility/associates/unit} If \( x \mid y \) and \( y \mid x \), then there exist \( a \) and \( b \) such that \( x = ay \) and \( y = bx \). Hence, \( x = abx \). Since we are working in an integral domain, we can cancel \( x \) to obtain \( ab = 1_R \). Therefore, both \( a \) and \( b \) are \hyperref[def:divisibility/unit]{units}.

  \ImplicationSubProof{def:domain_divisibility/associates/unit}{def:domain_divisibility/associates/ideals} Suppose that \( x = uy \) for some unit \( u \). If \( z \braket{ x } \), then \( x = uy \) divides \( z \) and hence \( y \) also divides \( z \), implying that \( \braket{ x } \subseteq \braket{ y } \). We obtain the converse inclusion by noting that \( y = u^{-1} x \).

  \ImplicationSubProof{def:domain_divisibility/associates/ideals}{def:domain_divisibility/associates/direct} If \( \braket{ x } = \braket{ y } \), then, by \fullref{thm:def:semiring_ideal/properties/division}, \( x \mid y \) and \( y \mid x \).

  \SubProofOf{def:domain_divisibility/irreducible}
  \ImplicationSubProof{def:domain_divisibility/irreducible/direct}{def:domain_divisibility/irreducible/ideals} Suppose that \( x \) is not a unit and that \( x = yz \) implies that \( y \) or \( z \) is a unit. Since we are working in an integral domain, \( x \) is necessarily nonzero.

  Let \( \braket{ x } \subseteq \braket{ w } \) for some nonunit \( w \). By \fullref{thm:def:semiring_ideal/properties/division}, \( w \mid x \). Then there exists some element \( a \) such that \( x = aw \). Since \( w \) is not a unit by assumption, \( a \) must be a unit. By the equivalent definitions of associates in a domain, \( \braket{ x } = \braket{ w } \).

  \ImplicationSubProof{def:domain_divisibility/irreducible/ideals}{def:domain_divisibility/irreducible/direct} Suppose that \( \braket{ x } \) is maximal among nonzero proper principal ideals.

  Let \( x = yz \). If, without loss of generality, \( \braket{ x } \subseteq \braket{ y } \), then \( \braket{ x } = \braket{ y } \) and, again by the equivalent conditions for associates, there exists some unit \( u \) such that \( x = uy \). Cancelling \( y \) in \( yu = yz \), we obtain \( u = z \). Hence, \( z \) is a unit.

  \SubProofOf{def:domain_divisibility/prime} Trivial.
  \SubProofOf{def:domain_divisibility/coprime} Trivial.
\end{defproof}

\begin{proposition}\label{thm:def:domain_divisibility/properties}
  The notions from \fullref{def:domain_divisibility} have the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:domain_divisibility/properties/prime_is_irreducible} Every \hyperref[def:domain_divisibility/prime]{prime element} is \hyperref[def:domain_divisibility/irreducible]{irreducible}.
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:domain_divisibility/properties/prime_is_irreducible} Let \( x \) be a prime element and suppose that \( x = yz \). Then \( x \) divides \( y \) or \( z \). If, without loss of generality, \( x \) divides \( y \), then \( x \) and \( y \) are \hyperref[def:divisibility/associates]{associates}, and, by the equivalence of conditions in \fullref{def:domain_divisibility/associates}, \( z \) must be a unit.
\end{proof}

\begin{definition}\label{def:gcd_and_lcm}\mimprovised
  Fix an \hyperref[def:integral_domain]{integral domain} and let \( x_1, \ldots, x_n \) be arbitrary elements.

  If the ideal
  \begin{equation*}
    \sup\set{ \braket{ x_1 }, \ldots, \braket{ x_n } } = \braket{ x_1 } + \cdots + \braket{ x_n } = \braket{ x_1, \ldots, x_n }
  \end{equation*}
  is principal, every generator is a maximal (with respect to divisibility) common divisor of \( x_1, \ldots, x_n \). By the equivalent definitions in \fullref{def:domain_divisibility/associates}, all such divisors are associates. Hence, up to multiplication by a unit, we speak about \enquote{the} \term{greatest common divisor} \( \gcd\set{ x_1, \ldots, x_n } \). Uniqueness is discussed in \fullref{rem:choice_of_associates}.

  Dually, if
  \begin{equation*}
    \inf\set{ \braket{ x_1 }, \ldots, \braket{ x_n } } = \braket{ x_1 } \cap \cdots \cap \braket{ x_n }
  \end{equation*}
  is principal, its generators, which we denote by \( \lcm\set{ x_1, \ldots, x_n } \), are the \term{least common multiples}.
\end{definition}

\begin{remark}\label{rem:choice_of_associates}
  If \( x \) and \( y \) are \hyperref[def:domain_divisibility/associates]{associates}, we generally have no reason to prefer \( x \) to \( y \). This leads to a non-uniqueness in certain contexts, e.g. choosing a generator for a principal ideal, as in the definition of \hyperref[def:gcd_and_lcm]{greatest common divisors}.

  \begin{itemize}
    \item In the domain \( \BbbZ \) of integers, there are two units, \( 1 \) and \( -1 \). It is conventional to choose the positive greatest common divisor.

    \item In a polynomial ring over the integers \( \BbbZ \), by \fullref{thm:def:polynomial_semiring/properties/units}, the units are again \( 1 \) and \( -1 \), and we can choose the leading coefficient to be positive.
  \end{itemize}
\end{remark}

\begin{example}\label{ex:coprime_ideals_gcd}
  If \( x \) and \( y \) are \hyperref[def:domain_divisibility/coprime]{coprime elements}, then \( \braket{ x } \) and \( \braket{ y } \) are \hyperref[def:semiring_ideal/coprime]{coprime ideals}, and any \hyperref[def:divisibility/unit]{unit} \( u \) of the semiring generates \( \braket{ x } + \braket{ y } \). We can always choose \( 1 \) to be this unit, meaning that \( \gcd(x, y) = 1 \).
\end{example}

\begin{example}\label{ex:def:domain_divisibility}
  We list some examples of the notions from \fullref{def:domain_divisibility}:
  \begin{thmenum}
    \thmitem{ex:def:domain_divisibility/integers} \hyperref[def:prime_number]{Prime numbers} are irreducible integers by their definition. By \fullref{thm:euclids_lemma}, they are also prime.

    The inverse \( -p \) of the prime number \( p \) is also irreducible and prime in \( \BbbZ \), but convention requires \enquote{prime numbers} to be positive.

    \thmitem{ex:def:domain_divisibility/irreducible_not_prime} Consider the ring of univariate \hyperref[def:polynomial_semiring]{polynomials} over \( \BbbR \) whose constant coefficient is rational.

    The polynomial \( X \) is irreducible. Indeed, if \( X = p(X) q(X) \), by \fullref{thm:def:polynomial_degree/properties/product}, one of \( p(X) \) or \( q(X) \) must be a constant polynomial, i.e. a unit.

    The polynomial \( X \) is not prime, however. We have \( X \mid (\sqrt 2 X)^2 \), but \( X \not\mid \sqrt 2 X \) because that would imply that \( \sqrt 2 \) is a polynomial in our ring, and it is not a rational number.
  \end{thmenum}
\end{example}

\begin{definition}\label{def:irreducible_factorization}\mimprovised
  An \term{irreducible factorization} or simply \term{factorization} of a nonzero element \( x \) in an \hyperref[def:integral_domain]{integral domain} is a finite sequence \( p_1, \ldots, p_n \) of \hyperref[def:domain_divisibility/irreducible]{irreducible elements} such that, for some \hyperref[def:divisibility/unit]{unit} \( u \),
  \begin{equation*}
    x = u p_1 \cdots p_n.
  \end{equation*}

  By cancellation of multiplication, the unit \( u \) is uniquely determined by the irreducible factors. If \( x \) is itself a unit, then it is its own factorization (i.e. \( n = 0 \)) because \( p \mid x \) for an irreducible \( p \) would imply that \( p \) is a unit and hence not irreducible.

  We say that two factorizations
  \begin{equation*}
    x = u p_1 \cdots p_n = v q_1 \cdots q_m
  \end{equation*}
  are equivalent if \( n = m \) and if there exists a \hyperref[def:symmetric_group/permutation]{permutation} \( \pi \in S_n \) such that \( q_{\pi(k)} \) and \( p_k \) are \hyperref[def:domain_divisibility/associates]{associated} for every \( k = 1, \ldots, n \).

  Finally, if any two factorizations of \( x \) are unique, we say that \( x \) \term{factors uniquely} into a product of irreducible factors.
\end{definition}

\begin{example}\label{ex:def:irreducible_factorization}
  We list some examples of \hyperref[def:irreducible_factorization]{irreducible factorization}:
  \begin{thmenum}
    \thmitem{ex:def:irreducible_factorization/integers} By \fullref{def:irreducible_factorization}, every integer has a unique factorization.

    \thmitem{ex:def:irreducible_factorization/nonunique} Consider the ring of real polynomials with a rational constant term discussed in \fullref{ex:def:domain_divisibility/irreducible_not_prime}.

    We have
    \begin{equation*}
      2X^2 = (\sqrt X) \cdot (\sqrt X) = 2 \cdot X \cdot X.
    \end{equation*}

    We have shown in \fullref{ex:def:domain_divisibility/irreducible_not_prime} that \( X \) is irreducible, and we can similarly show that \( \sqrt 2 X \) is irreducible. Thus, the above are two irreducible factorizations. They are not equivalent, however, since \( X \not\mid \sqrt 2 X \).
  \end{thmenum}
\end{example}

\begin{proposition}\label{thm:def:irreducible_factorization/properties}
  \hyperref[def:irreducible_factorization]{Irreducible factorizations} in domains have the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:irreducible_factorization/properties/existence} If every ascending chain of \hi{principal} ideals stabilizes in the sense of \fullref{def:noetherian_semimodule/acc}, then every element has at least one irreducible factorization.

    This condition is sometimes abbreviated as ACCP (ascending chain condition on principal ideals).

    \thmitem{thm:def:irreducible_factorization/properties/uniqueness} If every \hyperref[def:domain_divisibility/irreducible]{irreducible element} is \hyperref[def:domain_divisibility/prime]{prime}, then all factorizations of an element are equivalent (but there may be elements without a factorization).
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:irreducible_factorization/properties/existence} Suppose that every ascending chain of principal ideals stabilizes.

  Let \( x \) be an arbitrary element, and suppose that it does not have an irreducible factorization. In particular, \( x \) is not a unit and is not irreducible. Then there exist elements \( a_1 \) and \( b_1 \), which are not both irreducible and not both units, such that \( x = a_1 b_1 \). Via \hyperref[rem:natural_number_recursion]{natural number recursion}, we can build a sequence \( a_1, a_2, \ldots \) such that
  \begin{equation*}
    \cdots \mid a_2 \mid a_1 \mid x
  \end{equation*}
  and no two elements are associates. By \fullref{thm:def:semiring_ideal/properties/division}, this implies
  \begin{equation*}
    \braket{ x } \subsetneq \braket{ a_1 } \subsetneq \braket{ a_2 } \cdots.
  \end{equation*}

  The existence of such a sequence contradicts the ACCP. Therefore, \( x \) must have at least one irreducible factorization.

  \SubProofOf{thm:def:irreducible_factorization/properties/uniqueness} Suppose that every irreducible element is prime.

  We will prove by induction that, if \( x \) has a factorization of length \( n \), then any other factorization is equivalent to it.

  If \( n = 0 \), then \( x = u \) is a unit, and hence \( m = 0 \) and \( x = u = v \).

  Otherwise, suppose that factorizations of length \( n - 1 \) are unique and that we are given the factorizations
  \begin{equation}\label{eq:def:unique_factorization_domain/uniqueness_proof}
    x = u p_1 \cdots p_n = v q_1 \cdots q_m.
  \end{equation}

  Since \( p_1 \) is prime, \( p_1 \) divides \( q_{k_0} \) for some \( k_0 = 1, \ldots, m \). Thus, \( p_1 = w q_k \) for some unit \( w \). We can thus cancel \( p_1 \) to obtain
  \begin{equation*}
    u p_2 \cdots p_n = (vw) q_1 \cdots q_{k_0-1} q_{k_0+1} \cdots q_m.
  \end{equation*}

  By the inductive hypothesis, this factorization is unique. Hence, \( n = m \), and there exists a permutation \( \pi \in S_n \) such that \( p_k = q_{\pi(k)} \) for \( k = 2, \ldots, n \). Then
  \begin{equation*}
    \widehat{\pi}(k) \coloneqq \begin{cases}
      k_0,    & k = 1 \\
      \pi(i), & k > 1
    \end{cases}
  \end{equation*}
  is a permutation witnessing the equivalence of the factorizations \eqref{eq:def:unique_factorization_domain/uniqueness_proof}.
\end{proof}

\begin{definition}\label{def:unique_factorization_domain}
  We say that an \hyperref[def:integral_domain]{integral domain} is a \term{unique factorization domain} if any of the following equivalent conditions hold:
  \begin{thmenum}
    \thmitem{def:unique_factorization_domain/factorization} Every element \hyperref[def:irreducible_factorization]{factors uniquely} into a product of irreducible elements.

    \thmitem{def:unique_factorization_domain/primes_and_ideals} Every ascending chain of principal ideals stabilizes and every irreducible element is prime.
  \end{thmenum}
\end{definition}
\begin{defproof}
  \ImplicationSubProof{def:unique_factorization_domain/factorization}{def:unique_factorization_domain/primes_and_ideals}

  \SubProof*{Proof that irreducibles are prime} holds, hence we only need to prove that an irreducible element is prime.

  Let \( x \) be an irreducible element. Suppose that \( x \mid yz \), so that there exists some element \( a \) satisfying \( ax = yz \).
  Let \( y = u p_1 \cdots p_n \) and \( z = v q_1 \cdots q_m \) be irreducible factorizations. Then
  \begin{equation*}
    ax = (uv) p_1 \cdots p_n q_1 \cdots q_m.
  \end{equation*}

  The factorizations are equivalent, hence \( x \) must divide one of the other irreducible elements. If \( x \mid p_k \) for some \( k = 1, \ldots, n \), then \( x \mid y \). If \( x \mid q_k \) for some \( k = 1, \ldots, m \), then \( x \mid z \).

  \SubProof*{Proof of ascending chain condition} Suppose that every element has a unique factorization.

  Fix an ascending sequence of principal ideals
  \begin{equation*}
    \braket{ x_1 } \subseteq \braket{ x_2 } \subseteq \braket{ x_3 } \cdots.
  \end{equation*}

  By \fullref{thm:def:semiring_ideal/properties/division}, this implies that \( x_{k+1} \) divides \( x_k \) for \( k = 1, 2, \ldots \).

  Let \( x_1 = y x_2 \) and fix \hyperref[def:irreducible_factorization]{irreducible factorizations}
  \begin{align*}
    x_1 &= u p_1 \cdots p_n \\
    x_2 &= v q_1 \cdots q_m \\
    y   &= w r_1 \cdots r_k.
  \end{align*}

  Since the factorizations are unique, we have \( n = m + k \). If \( k = 0 \), then \( x_1 \) and \( x_2 \) are associated and \( \braket{ x_1 } = \braket{ x_2 } \). If \( k > 0 \), then \( \braket{ x_1 } \subsetneq \braket{ x_2 } \), and \( x_2 \) has a strictly shorter irreducible factorization.

  Proceeding by induction on the length of the factorization, we conclude that there are at most \( n \) strict inclusions in the sequence of ideals.

  \ImplicationSubProof{def:unique_factorization_domain/prime}{def:unique_factorization_domain/factorization} Follows from \fullref{thm:def:irreducible_factorization/properties/existence} and \fullref{thm:def:irreducible_factorization/properties/uniqueness}.
\end{defproof}

\begin{proposition}\label{thm:def:unique_factorization_domain/properties}
  \hyperref[def:unique_factorization_domain]{Unique factorization domains} have the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:unique_factorization_domain/properties/subring} Any \hyperref[def:ring/submodel]{subring} of a unique factorization domain is also a unique factorization domain.

    \thmitem{thm:def:unique_factorization_domain/properties/polynomial_ring} The \hyperref[def:polynomial_semiring]{polynomial ring} \( R[X_1, \ldots, X_n] \) is a unique factorization domain if and only if \( R \) is.
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:unique_factorization_domain/properties/subring} Trivial.
  \SubProofOf{thm:def:unique_factorization_domain/properties/polynomial_ring}
  \SufficiencySubProof* If \( R[X_1, \ldots, X_n] \) is a unique factorization domain, by \fullref{thm:def:integral_domain/properties/subring}, so is \( R \).

  \NecessitySubProof* It is sufficient to prove the statement for one indeterminate.
\end{proof}

\begin{definition}\label{def:principal_ideal_domain}
  We say that an \hyperref[def:integral_domain]{integral domain} is a \term{principal ideal domain} if every \hyperref[def:semiring_ideal]{ideal} is \hyperref[def:semiring_ideal/principal]{principal}.
\end{definition}

\begin{proposition}\label{thm:def:principal_ideal_domain/properties}
  \hyperref[def:principal_ideal_domain]{Principal ideal domains} have the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:principal_ideal_domain/properties/unique_factorization} Every principal ideal domain is a \hyperref[def:unique_factorization_domain]{unique factorization domain}.

    \thmitem{thm:def:principal_ideal_domain/properties/maximal_ideal_is_prime} \hyperref[def:semiring_ideal/prime]{Prime ideals} in a principal ideal domains are \hyperref[def:semiring_ideal/maximal]{maximal}.
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:principal_ideal_domain/properties/unique_factorization} Suppose that \( x \) is an irreducible element of a principal ideal domain. Then \( x \) satisfies \fullref{def:domain_divisibility/irreducible/ideals}, and hence \( \braket{ x } \) is a maximal ideal. By \fullref{thm:def:semiring_ideal/properties/maximal_is_prime}, maximal ideals are prime, and hence \( x \) is a prime element.

  Therefore, every irreducible element is prime, and the ideal is a unique factorization domain.

  \SubProofOf{thm:def:principal_ideal_domain/properties/maximal_ideal_is_prime} Let \( P \) be a prime ideal in a principal ideal domain. Then \( P = \braket{ p } \) for some prime element \( p \). By \fullref{thm:def:domain_divisibility/properties/prime_is_irreducible}, \( p \) is irreducible, and hence \( \braket{ p } \) is a maximal ideal.
\end{proof}

\begin{example}\label{thm:ufd_is_not_pid}\mcite{ProofWiki:polynomials_in_integers_is_not_principal_ideal_domain}
  The \hyperref[def:unique_factorization_domain]{unique factorization domain} \( \BbbZ[X] \) is not a \hyperref[def:principal_ideal_domain]{principal ideal domain}.

  Note that \( \BbbZ[X] \) is a unique factorization domain by \fullref{thm:polynomials_over_integral_domain_are_integral_domain}.

  Consider the ideal \( I \) of polynomials with an even constant term. Assume that \( I \) is generated by the polynomial \( p(X) \in \BbbZ[X] \). Since \( 2 \in I \), then \( p(X) \) divides \( 2 \), so \( p(X) \in \set{ -2, -1, 1, 2 } \). But then \( p(X) \) is a unit, and hence, \( I = \braket{p(X)} = \BbbZ[X] \), which contradicts the definition of \( I \).

  The obtained contradiction proves that \( \BbbZ[X] \) is not a principal ideal domain.
\end{example}

\begin{definition}\label{def:euclidean_domain}\mcite{nLab:euclidean_domain}
  Let \( D \) be an integral \hyperref[def:integral_domain]{domain}. Multiplication is not invertible in general, but we can instead define \term{Euclidean division} with remainders.

  We endow \( D \) with an additional function \( \delta: D \to \BbbZ_{\geq 0} \). Let \( a, b \in D \). If there exists a pair \( (q, r) \) such that
  \begin{equation*}
    a = bq + r
  \end{equation*}
  holds and either \( r = 0 \) or \( \delta(r) < \delta(b) \), we say that \( (R, \delta) \) is a \term{Euclidean domain}.

  We say that \( b \) \term{divides} \( a \) with \term{quotient} \( q \) and \term{remainder} \( r \).

  If the pair \( (q, r) \) is unique, we use the special notation
  \begin{balign*}
    q & = \quot(a, b),                    \\
    r & = \rem(a, b) = a - b \quot(a, b).
  \end{balign*}
\end{definition}

\begin{algorithm}\label{alg:euclidean_algorithm}
  Let \( D \) be an Euclidean domain. Fix \( a, b \in D \) with \( b \neq 0 \). The \term{Euclidean algorithm} for finding \( \gcd(a, b) \) proceeds as follows:
  \begin{thmenum}
    \thmitem{alg:euclidean_algorithm/initialization} Define \( r_0 \coloneqq a \) and \( r_1 \coloneqq b \).
    \thmitem{alg:euclidean_algorithm/step} Starting with \( i = 2 \), obtain \( q_i \) and \( r_i \) from \hyperref[def:euclidean_domain]{division}
    \begin{equation*}
      r_{i-2} = r_{i-1} q_i + r_i.
    \end{equation*}

    If \( r_i = 0 \), halt the algorithm with result \( \gcd(a, b) = r_i \).

    Otherwise, proceed by incrementing \( i \) and repeating this step.
  \end{thmenum}
\end{algorithm}
\begin{proof}
  Euclidean division ensures that \( \delta(r_i) < \delta(r_{i-1}) \) on every step. Thus, the algorithm terminates at some point. Denote by \( n \) the (minimum) number of steps necessary to obtain \( r_n = 0 \).

  We show by induction on \( k < n \) that \( r_n \) divides \( r_{n-k} \). The case \( k = 0 \) is obvious since \( r_n \) divides itself.

  Assume that \( r_n \) divides \( r_{n-i} \) for \( 0 < i < k \). Now since
  \begin{equation*}
    r_{n-k} = r_{n-(k-1)} q_{n-(k-2)} + r_{n-(k-2)}
  \end{equation*}
  and both of the terms on the right-hand side are factors of \( r_n \), the left-hand side \( r_{n-k} \) is also a factor.

  We conclude that \( r_n \) divides both \( r_{n-(n-1)} = r_1 = b \) and \( r_{n-n} = r_0 = a \).

  Furthermore, \( r_n \) is the greatest common divisor of \( a \) and \( b \). Indeed, assume that there exists \( d \in D \) such that \( r_n \mid d \) and both \( d \mid a \) and \( d \mid b \) hold. But he have
  \begin{equation*}
    a = b q_2 + r_2,
  \end{equation*}
  hence \( d \mid r_2 \). Proceeding by induction, we obtain that \( d \mid r_n \). But we assumed that \( r_n \mid d \), therefore \( r_n = d \) and \( r_n \) is the greatest common divisor of \( a \) and \( b \).
\end{proof}

\begin{proposition}\label{thm:euclidean_domain_is_pid}
  Every Euclidean \hyperref[def:euclidean_domain]{domain} is a principal ideal \hyperref[def:principal_ideal_domain]{domain}.

  Counterexamples to the converse are discussed in \cite{Anderson1988}.
\end{proposition}
\begin{proof}
  Fix an ideal \( I \) of the Euclidean domain \( D \). By \fullref{thm:natural_numbers_are_well_ordered}, the set \( \delta(I) \) has a minimum. Choose an element \( m \in I \) such that \( \delta(m) = \min \delta(I) \). We will prove that \( I = \braket m \).

  Let \( x \in I \). We divide it by \( m \) to obtain
  \begin{equation*}
    x = mq + r,
  \end{equation*}
  such that either \( r = 0 \) or \( \delta(r) < \delta(m) \). Since both \( x \) and \( m \) are in \( I \), we have \( r = mq - x \in I \). But \( m \) minimizes \( \delta \) over \( I \), thus \( \delta(m) \leq \delta(r) \), which contradicts \( \delta(r) < \delta(m) \). Therefore, \( r = 0 \) and
  \begin{equation*}
    x = mq,
  \end{equation*}
  which implies that \( x \in \braket m \). This proves \( I \subseteq \braket m \).

  Let \( x \in \braket m \), that is, \( x = mq \) for some \( q \in D \). Since \( I \) is an ideal and \( m \in I \), all multiples of \( m \) are in \( I \) and thus \( x \in I \). This proves \( \braket m \subseteq I \).

  We have now obtained \( \braket m = I \). Since \( I \) was an arbitrary ideal, we conclude that every ideal in \( D \) is principal.
\end{proof}

\begin{theorem}[Bezout's identity]\label{thm:bezout_identity}
  Let \( D \) be a principal ideal domain. Let \( a, b \in D \) with \( b \neq 0 \). Then \( \gcd(a, b) \) exists and, furthermore, there exist \( x, y \) such that
  \begin{equation*}
    ax + by = \gcd(a, b).
  \end{equation*}
\end{theorem}
\begin{proof}
  We will first prove the existence of \( \gcd(a, b) \). Define the ideal
  \begin{equation*}
    I \coloneqq \braket{a, b}.
  \end{equation*}

  Since every ideal is principal, there exists \( g \in I \) such that \( I = \braket g \). Let \( x, y \in D \) such that
  \begin{equation*}
    g = ax + by.
  \end{equation*}

  Note that \( g \) is a divisor of both \( a \) and \( b \) because \( a \in I \) and \( b \in I \). We will show that it is the greatest divisor. Let \( d \) be another divisor of both \( a \) and \( b \) such that \( g \mid d \) (or, equivalently, \( d \in \braket g \)).

  Let \( a = da' \) and \( b = db' \). We have
  \begin{equation*}
    g = ax + by = d(a'x + b'y),
  \end{equation*}
  which implies that \( d \mid g \). Thus, \( g = d \) and \( g \) is a greatest common denominator.
\end{proof}

\begin{algorithm}\label{alg:extended_euclidean_algorithm}
  Let \( D \) be an Euclidean domain. Fix \( a, b \in D \) with \( b \neq 0 \). We will explicitly find \( x \) and \( y \), so that \fullref{thm:bezout_identity} is satisfied:
  \begin{equation*}
    \gcd(a, b) = ax + by.
  \end{equation*}

  Let \( r_0, r_1, \ldots, r_n \) be the sequence of remainders from \fullref{alg:euclidean_algorithm}. The \term{extended Euclidean algorithm} proceeds as follows:

  \begin{thmenum}
    \thmitem{alg:extended_euclidean_algorithm/initialization} For \( i = 2 \), define
    \begin{balign*}
      x_2 & \coloneqq 1,    \\
      y_2 & \coloneqq -q_2.
    \end{balign*}

    \thmitem{alg:extended_euclidean_algorithm/step} For \( i = 2, \ldots, n \), define
    \begin{balign*}
      x_i & \coloneqq x_{i-2} - x_{i-1} q_i, \\
      y_i & \coloneqq y_{i-2} - y_{i-1} q_i.
    \end{balign*}

    \thmitem{alg:extended_euclidean_algorithm/completion} Halt the algorithm with result
    \begin{balign*}
      x & \coloneqq x_n, \\
      y & \coloneqq y_n.
    \end{balign*}
  \end{thmenum}
\end{algorithm}
\begin{proof}
  We will prove with induction on \( i = 2, \ldots, n \) that
  \begin{equation*}
    r_i = ax_i + by_i.
  \end{equation*}

  \begin{refenum}
    \refitem{alg:extended_euclidean_algorithm/initialization} For \( i = 2 \), we have
    \begin{balign*}
      r_0       & = r_1 q_2 + r_2, \\
      a         & = b q_2 + r_2,   \\
      a - b q_2 & = r_2,
    \end{balign*}
    that is, \( r_2 = a + b (-q_2) \).

    \refitem{alg:extended_euclidean_algorithm/step} For \( i = 3, \ldots, n \), we have
    \begin{balign*}
      r_{i-2}                                               & = r_{i-1} q_i + r_i,                 \\
      a x_{i-2} + b y_{i-2}                                 & = (a x_{i-1} + b y_{i-1}) q_i + r_i, \\
      a (x_{i-2} - x_{i-1} q_i) + b (y_{i-2} - y_{i-1} q_i) & = r_i.
    \end{balign*}

    \refitem{alg:extended_euclidean_algorithm/completion} Since \( r_n = \gcd(a, b) \), we conclude that
    \begin{equation*}
      \gcd(a, b) = a x_n + b y_n.
    \end{equation*}
  \end{refenum}
\end{proof}
