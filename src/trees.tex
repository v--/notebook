\subsection{Trees}\label{subsec:trees}

\begin{definition}\label{def:tree}\mcite[ch. 4, sec. 1.1]{GondranMinoux1984Graphs}
  The (finite or infinite) \hyperref[def:graph/undirected]{undirected graph} \( T = (V, E) \) is called a \term{tree} if any of the following equivalent conditions hold:
  \begin{thmenum}
    \thmitem{def:tree/connected_acyclic} \( T \) is \hyperref[def:graph_connectedness]{connected} and \hyperref[def:graph_cycle]{acyclic}.
    \thmitem{def:tree/maximally_acyclic} \( T \) is \term{maximally acyclic}, meaning that adding an edge between existing vertices would create a \hyperref[def:graph_cycle]{cycle}.
    \thmitem{def:tree/minimally_connected} \( T \) is \term{minimally connected}, meaning that removing an edge will make the graph \hyperref[def:graph_connectedness]{disconnected}.
    \thmitem{def:tree/single_path} For every pair of vertices in \( T \), there exists a unique \hyperref[def:graph_directed_path]{path} connecting them.

    This motivates the defining condition for \hyperref[def:arborescence]{arborescences}.
  \end{thmenum}

  It is conventional to use the term \term{node} for the vertices of a tree.
\end{definition}
\begin{proof}
  \ImplicationSubProof{def:tree/connected_acyclic}{def:tree/maximally_acyclic} Suppose that \( T \) is connected and acyclic. There is always an edge not in \( T \) because the graph \( (V, V \times V) \) contains cycles and \( T \) does not. Let \( \set{ u, v } \) be an edge not in \( T \) and let \( T' \) be the supergraph that adjoins only this new edge.

  Since \( T \) is connected, there exists a path \( p \) connecting \( u \) and \( v \). Appending \( \set{ u, v } \) to this path creates a cycle in \( T' \).

  Therefore, \( T' \) is not acyclic.

  \ImplicationSubProof{def:tree/maximally_acyclic}{def:tree/connected_acyclic} Suppose that \( T \) is maximally acyclic. We will show that it is connected.

  Suppose that \( T \) is not connected. Then there exist vertices \( u \) and \( v \) with no path between them. Let \( T' \) be the supergraph that adjoins only the edge \( \set{ u, v } \).

  Since there is no path between \( u \) and \( v \) in \( T \), \( T' \) is also acyclic. But this contradicts the maximality of \( T \).

  Therefore, \( T \) is connected.

  \ImplicationSubProof{def:tree/connected_acyclic}{def:tree/minimally_connected} Suppose that \( T \) is connected and acyclic. Let \( \set{ u, v } \) be any edge of \( T \) and let \( T' \) be the subgraph that does not contain this edge.

  Suppose that \( T' \) is connected. Let \( w \) be any vertex and let \( p \) be a path in \( T' \) from \( u \) to \( w \). Then adding \( \set{ u, v } \) creates a cycle in \( T \), which contradicts our assumption that \( T \) is acyclic.

  Therefore, \( T' \) is not connected.

  \ImplicationSubProof{def:tree/minimally_connected}{def:tree/connected_acyclic} Suppose that \( T \) is minimally connected. We will show that it is acyclic.

  Suppose that \( T \) has a cycle \( p \). We can thus remove any edge of \( p \) from \( T \) and the resulting subgraph will also be connected. This contradicts the minimality of \( T \).

  Therefore, \( T \) is acyclic.

  \ImplicationSubProof{def:tree/connected_acyclic}{def:tree/single_path} Suppose that \( T \) is connected and acyclic. Since \( T \) is connected, there exists at least one path between any two vertices. Since it is acyclic, this path must be unique because otherwise we could easily create a cycle by joining two such paths.

  \ImplicationSubProof{def:tree/single_path}{def:tree/connected_acyclic} Suppose that, for every pair of vertices in \( T \), there exists a unique path connecting them. It is clear that \( T \) is connected.

  Suppose that \( T \) has a cycle \( p \) from \( u \) to \( u \) passing through \( v \). We thus obtain two paths from \( u \) to \( v \) --- one not containing the first edge in \( p \) and one not containing the last edge. But this contradicts our assumption that any two paths from \( u \) to \( v \) are equal.

  Therefore, \( T \) is acyclic.
\end{proof}

\begin{example}\label{ex:def:tree}
  The towers \eqref{eq:ex:tower_diagram_graph/forward}, \eqref{eq:ex:tower_diagram_graph/backward} and \eqref{eq:ex:tower_diagram_graph/two_sided} from \fullref{ex:tower_diagram_graph} are simple examples of infinite trees.

  Examples of finite trees are the grammar derivations \cref{fig:ex:natural_arithmetic_grammar/derivation/unambiguous} and \cref{fig:ex:natural_arithmetic_grammar/derivation/ambiguous}.
\end{example}

\begin{definition}\label{def:arborescence}\mcite[ch. 4, sec. 3.1]{GondranMinoux1984Graphs}
  Let \( G = (V, E) \) be a \hyperref[def:graph_metamath]{directed graph} and \( r \in V \) be a vertex such that for every vertex \( v \in V \), there exists a unique directed path from \( r \) to \( v \). The pair \( (G, r) \) is called an \term{arborescence}. It is often more convenient to consider the triple \( G = (V, E, r) \) instead.

  If \( G \) is an undirected graph, by \fullref{def:tree/single_path} it is sufficient for \( G \) to be a tree in order for \( (G, r) \) to be an arborescence for every vertex \( r \in V \). A tree with a distinguished vertex is often also called a \term{rooted tree} rather than an arborescence. We sometimes implicitly assume that a tree has a root, although any vertex may act as a root.

  \begin{thmenum}
    \thmitem{def:arborescence/depth} The \term{depth} of a node \( v \) is the length of the path from \( r \) to \( v \). The term \term{level} is also sometimes used but with a slightly different meaning --- the greater the depth, the lower the level.

    \thmitem{def:arborescence/ancestry} If \( v \) has a strictly greater depth than \( u \), we say that \( u \) is an \term{ancestor} of \( v \) and that \( v \) is a \term{descendant} of \( u \).

    The ancestor of \( v \) at the lowest possible level is called the \term{parent} of \( v \). If \( u \) is a parent of \( v \), \( u \) is a \term{child} of \( v \).

    Finally, if \( u \) and \( v \) are on the same level, we call them \term{siblings}.

    \thmitem{def:arborescence/height} The \term{height} or \term{depth} of the entire tree \( T \), if it exists, is the supremum of the depths of all nodes.

    \thmitem{def:arborescence/width} The \term{width} or \term{breadth} of the entire tree \( T \), if it exists, is the supremum of the number of siblings among all vertices. It is equal to the degree of \( T \) minus \( 1 \).

    We use terminology similar to \fullref{def:relation/arity}, e.g. \enquote{binary tree}, \enquote{ternary tree}, \ldots.

    \thmitem{def:arborescence/subarborescence} A \hyperref[def:graph_metamath/submodel]{subgraph} of \( T \) that is itself an arborescence is called a \term{subarborescence}. The same holds for rooted subtrees.
  \end{thmenum}
\end{definition}

\begin{theorem}[K\"onig's lemma]\label{thm:konigs_lemma}
  Every \hyperref[def:graph_incidence/degree]{locally finite} \hyperref[def:arborescence]{arborescence} of \hyperref[def:graph/order]{infinite} \hyperref[def:graph/order]{order} contains a \hyperref[def:graph_adjancency_chain/simple]{simple path} of infinite length (or both).
\end{theorem}
\begin{proof}
  Let \( T = (V, E, r) \) be a locally finite infinite arborescence. We will build an infinite simple path
  \begin{equation*}
    p = (e_1, e_2, \cdots)
  \end{equation*}
  using \hyperref[rem:natural_number_recursion]{natural number recursion} starting at one. Let \( c \) be a \hyperref[def:choice_function]{choice function} on \( E \). Such a function exists by the \hyperref[def:zfc/choice]{axiom of choice}.
  \begin{itemize}
    \item Let \( e_1 \coloneqq r \).
    \item Fix \( k > 1 \). Since \( T \) is locally finite, all nodes at depth less than \( k \) are finitely many. But the arborescence is infinite, hence there must exist at least one child of \( t(e_{k-1}) \) of infinite degree. Using the choice function \( c \), we can pick one such child and denote it by \( v_k \).

    Define \( e_k \) to be the arc \( t(e_{k-1}) \to v_k \). The path
    \begin{equation*}
      (e_1, e_2, \ldots, e_{k-1}, e_k)
    \end{equation*}
    is simple by construction because \( T \) is an arborescence and thus contains no directed cycles.
  \end{itemize}

  Thus, we have constructed an infinite simple path.
\end{proof}
