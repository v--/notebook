\subsection{Modules}\label{subsec:modules}

\begin{definition}\label{def:module}
  A \term{module} is a \hyperref[def:semimodule]{semimodule} over a \hyperref[def:ring]{ring} rather than a \hyperref[def:semiring]{semiring}.

  This makes the identity law \eqref{eq:def:semimodule/operation/scalar_multiplication_action/identity} redundant.

  Modules have the following metamathematical properties:
  \begin{thmenum}
    \thmitem{def:module/theory} The first-order theory is identical to the \hyperref[def:semimodule/theory]{theory of semimodules}.

    \thmitem{def:module/homomorphism} A \hyperref[def:first_order_homomorphism]{first-order homomorphism} between two \( R \)-modules \( M \) and \( N \) is simply a \hyperref[def:semimodule/homomorphism]{linear map}.

    \thmitem{def:module/submodel} The set \( A \subseteq M \) is a \hyperref[thm:substructure_is_model]{submodel} of \( M \) if it is a sub-semimodule of \( M \), i.e. a subgroup of \( M \) that is closed under scalar multiplication. We say that \( A \) is a \term{submodule} of \( M \).

    As a consequence of \fullref{thm:positive_formulas_preserved_under_homomorphism}, the image of a module homomorphism is a submodule of its range.

    \thmitem{def:module/trivial} The \hyperref[thm:substructures_form_complete_lattice/bottom]{trivial} module is the \hyperref[def:pointed_set/trivial]{trivial pointed set} \( \set{ 0 } \).

    \thmitem{def:semimodule/bimodule} A \term{bimodule} is simply a \hyperref[def:semimodule/bisemimodule]{bisemimodule} over a ring.

    \thmitem{def:module/category} For a fixed ring \( R \), we denote the \hyperref[def:category_of_small_first_order_models]{category of \( \mscrU \)-small models} by \( \ucat{Mod}_R \).

    It is a very well-behaved category, even more than the category \hyperref[def:group/category]{\( \ucat{Grp} \)} of \( \mscrU \)-small groups.
    \begin{itemize}
      \item The trivial module \( \set{ 0 } \) is a zero object. Therefore, we can define kernels and cokernels, and cokernels for modules are particularly simple.

      \item The \hyperref[def:free_semimodule]{free semimodules} over a ring are modules, and \fullref{thm:free_semimodule_universal_property} ensures that this is left adjoint to the forgetful functor \( U: \ucat{Mod}_R \to \ucat{Set} \). Therefore, by \fullref{thm:first_order_categorical_invertibility}, the monomorphisms are exactly the injective homomorphisms, and that the \hyperref[def:subobject_and_quotient]{categorical subobjects} correspond to submodules.

      \item Every epimorphism in \( \ucat{Mod}_R \) is surjective. This will be proved in \fullref{thm:module_epimorphisms_are_surjective}. Along with \fullref{thm:group_epimorphisms_are_normal}, this shows that the \hyperref[def:subobject_and_quotient]{categorical quotient objects} correspond to \hyperref[def:module/quotient]{quotient modules}, which we will define shortly.
    \end{itemize}

    \thmitem{def:module/kernel} The \term{kernel} of an \( R \)-module homomorphism \( \varphi: M \to N \) is its \hyperref[def:zero_locus]{zero locus} \( \varphi^{-1}(0_N) \). This is a submodule of \( M \). It is precisely the kernel of the underlying group in the sense of \fullref{def:group/kernel}, and the \hyperref[def:zero_morphisms/cokernel]{categorical kernel} in the category of modules.

    \thmitem{def:module/quotient} The \hyperref[def:zero_morphisms/cokernel]{categorical cokernel} of an \( R \)-homomorphism \( \varphi: M \to N \) in the category \( \cat{Mod}_R \) is simply the additive \hyperref[def:group/quotient]{quotient group} \( N / \img \varphi \). The quotient group is again a module over \( R \) because \( N \) is closed under scalar multiplication and, for every coset \( x + N \),
    \begin{equation*}
      r(x + N) = rx + rN = rx + N
    \end{equation*}
    is again a coset in \( N / \img \varphi \).

    In particular, given a submodule \( N \) of \( M \), we can form the \term{quotient module} \( M / N \). In practice, quotients are conveniently characterized by \fullref{thm:quotient_module_universal_property}.

    \thmitem{def:module/simple} Analogously to \hyperref[def:group/simple]{simple groups}, if the only proper \hyperref[def:module/submodel]{submodule} of \( R \) is the \hyperref[def:module/trivial]{trivial module} \( \set{ 0_M } \), we say that \( M \) is a \term{simple module}.

    The trivial module itself is not simple, because it has no proper ideals.
  \end{thmenum}
\end{definition}

\begin{proposition}\label{thm:abelian_group_is_module}
  We have an \hyperref[rem:category_similarity/isomorphism]{isomorphism of categories} \( \hyperref[def:abelian_group]{\cat{Ab}} \cong \hyperref[def:module]{\cat{Mod}_\BbbZ} \).

  More concretely, every abelian group \( G \) is a left semimodule over \( \BbbZ \) with scalar multiplication given by \hyperref[rem:additive_magma/multiplication]{recursively defined multiplication}
  \begin{equation}\label{eq:thm:abelian_group_is_module/operation}
    \begin{aligned}
      &\cdot: \BbbZ \times G \to G \\
      &n \cdot x \coloneqq \begin{cases}
        0_G,           &n = 0, \\
        n \cdot x + x, &n > 1, \\
        -(n \cdot x),  &n < 1.
      \end{cases}
    \end{aligned}
  \end{equation}

  Conversely, in every semimodule over \( \BbbZ \), scalar multiplication matches the recursively defined multiplication.

  Compare this result to \fullref{thm:commutative_monoid_is_semimodule}.
\end{proposition}
\begin{proof}
  Simple refinement of \fullref{thm:commutative_monoid_is_semimodule}.
\end{proof}

\begin{theorem}[Quotient module universal property]\label{thm:quotient_module_universal_property}
  For every \( R \)-\hyperref[def:module]{module} \( M \) and every submodule \( N \) of \( M \), the \hyperref[def:module/quotient]{quotient module} \( R / I \) has the following \hyperref[rem:universal_mapping_property]{universal mapping property}:
  \begin{displayquote}
    Every \( R \)-module homomorphism \( \varphi: M \to K \) satisfying \( N \subseteq \ker \varphi \) \hyperref[def:factors_through]{uniquely factors through} \( M / N \). That is, there exists a unique \( R \)-module homomorphism \( \widetilde{\varphi}: M / N \to K \), such that the following diagram commutes:
    \begin{equation}\label{eq:thm:quotient_module_universal_property/diagram}
      \begin{aligned}
        \includegraphics[page=1]{output/thm__quotient_module_universal_property.pdf}
      \end{aligned}
    \end{equation}

    In the case where \( N = \ker \varphi \), \( \widetilde{\varphi} \) is an \hyperref[def:first_order_homomorphism_invertibility/embedding]{embedding}.
  \end{displayquote}

  Compare this result to \fullref{thm:quotient_group_universal_property} and \fullref{thm:quotient_algebra_universal_property}.
\end{theorem}
\begin{proof}
  Simple refinement of \fullref{thm:quotient_group_universal_property}.
\end{proof}

\begin{theorem}[Quotient submodule lattice theorem]\label{thm:quotient_submodule_lattice_theorem}
  Given a \hyperref[def:module/submodel]{submodule} \( N \) of \( M \), the function \( K \mapsto K / N \) is a \hyperref[def:semilattice/homomorphism]{lattice isomorphism} between the lattice of submodules of \( M \) containing \( N \) and the lattice of submodules of the \hyperref[def:module/quotient]{quotient} \( M / N \).

  Compare this result to \fullref{thm:quotient_subgroup_lattice_theorem} and \fullref{thm:quotient_ideal_lattice_theorem}.
\end{theorem}
\begin{proof}
  Simple refinement of \fullref{thm:quotient_subgroup_lattice_theorem}.
\end{proof}

\begin{proposition}\label{thm:module_epimorphisms_are_surjective}
  Every \hyperref[def:morphism_invertibility/right_cancellative]{epimorphism} in \hyperref[def:group/category]{\( \cat{Mod}_R \)} is \hyperref[def:function_invertibility/surjective]{surjective}.
\end{proposition}
\begin{proof}
  Let \( \varphi: M \to N \) be an \( R \)-module epimorphism. Consider the canonical projection \( \pi: N \to N / \img \varphi \) and the zero morphism \( z: N \to N / \img \varphi \). Clearly
  \begin{equation*}
    \pi \bincirc \varphi = z \bincirc \varphi,
  \end{equation*}
  and thus \( \pi = z \) is the zero morphism.

  By, \fullref{thm:def:group/kernel_cokernel_compatibility}, \( \ker \pi = \img \varphi \), and since \( \ker \pi = N \), it follows that \( \varphi \) is a surjective function.
\end{proof}

\begin{definition}\label{def:module_presentation}
  A \term{presentation} of the \( R \)-\hyperref[def:module]{module} \( M \) is an \hyperref[def:module/homomorphism]{epimorphism} \( \varphi: R^A \to M \), where \( R^A \) is a \hyperref[def:free_semimodule]{free semimodule}.

  By \fullref{thm:quotient_module_universal_property},
  \begin{equation*}
    M = \img \varphi \cong R^A / \ker \varphi.
  \end{equation*}

  Analogously to \hyperref[def:group_presentation]{group presentations}, we say that \( M \) is finitely generated/related/presented if there exists an appropriate presentation.
\end{definition}

\begin{definition}\label{def:linear_dependence}\mimprovised
  Let \( M \) be an \( R \)-\hyperref[def:module]{module} and fix a subset \( B \subseteq M \). We say that the elements of \( B \) are \term{linearly independent} if any of the following conditions hold:

  \begin{thmenum}
    \thmitem{def:linear_dependence/direct} A \hyperref[rem:linear_combinations]{linear combination} of \( B \) sums to zero if and only if it is \hyperref[rem:linear_combinations/trivial]{trivial}.

    \thmitem{def:linear_dependence/evaluation} The \hyperref[thm:free_semimodule_universal_property]{linear combination evaluation map}
    \begin{equation*}
      \begin{aligned}
        &\Phi_B: R^{\oplus B} \to M \\
        &\Phi_B( \seq{ t_b }_{b \in B} ) \coloneqq \sum_{b \in B} t_b b
      \end{aligned}
    \end{equation*}
    is \hyperref[def:function_invertibility/injective]{injective}.
  \end{thmenum}

  Unsurprisingly, if the elements of \( B \) are not \term{linearly independent}, we say that they are \term{linearly dependent}.
\end{definition}
\begin{defproof}
  \ImplicationSubProof{def:linear_dependence/direct}{def:linear_dependence/evaluation} Suppose that only the trivial linear combination of \( B \) sums to zero. If \( \sum_{b \in B} t_b b = \sum_{b \in B} r_b b \), then
  \begin{equation*}
    \sum_{b \in B} t_b b - \sum_{b \in B} r_b b
    \reloset {\eqref{eq:def:semiring/left_distributivity}} =
    \sum_{b \in B} (t_b - r_b) b
    =
    0,
  \end{equation*}
  implying that \( t_b = r_b \) for every \( b \in B \).

  Hence, \( \Phi_B \) is injective.

  \ImplicationSubProof{def:linear_dependence/evaluation}{def:linear_dependence/direct} Trivial.
\end{defproof}

\begin{remark}\label{rem:linear_dependence_base_ring}
  Like all concepts related to \hyperref[rem:linear_combinations]{linear combinations}, linear dependence may behave differently depending on the underlying ring. For example, every irrational number is a linear combination of itself, but it is not a linear combination of rational numbers.

  For simplicity, we will not specify the ring explicitly unless this may cause confusion.
\end{remark}

\begin{proposition}\label{thm:def:linear_dependence}
  \hyperref[def:linear_dependence]{Linear (in)dependence} in the \( R \)-module \( M \) has the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:linear_dependence/zero} The zero vector \( 0_M \) is by itself linearly dependent.

    \thmitem{thm:def:linear_dependence/antimonotonicity} If \( A \) is a linearly \hi{dependent} set and \( A \subseteq B \), then \( B \) is also a linearly dependent set.

    \thmitem{thm:def:linear_dependence/monotonicity} If \( B \) is a linearly \hi{independent} set and \( A \subseteq B \), then \( A \) is also a linearly independent set.

    \thmitem{thm:def:linear_dependence/span_dependent} For any set of vectors \( A \), if \( x \in \linspan A \setminus A \), then \( A \cup \set{ x } \) is a linearly dependent set.
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:linear_dependence/zero} Trivial.

  \SubProofOf{thm:def:linear_dependence/antimonotonicity} Trivial.

  \SubProofOf{thm:def:linear_dependence/monotonicity} Trivial.

  \SubProofOf{thm:def:linear_dependence/span_dependent} By \fullref{thm:span_via_linear_combinations}, there exists a linear combination of members of \( A \) such that
  \begin{equation*}
    x = \sum_{k=1}^n t_k x_k.
  \end{equation*}

  If \( x = 0_M \), then \( A \cup \set{ x } \) is linearly dependent by \fullref{thm:def:linear_dependence/zero} and \fullref{thm:def:linear_dependence/antimonotonicity}.

  If \( x \neq 0_M \), then \( A \cup \set{ x } \) is linearly dependent because \( x \) is a nontrivial linear combination of other vectors of \( A \).
\end{proof}

\begin{definition}\label{def:hamel_basis}\mimprovised
  Let \( M \) be a left \( R \)-\hyperref[def:module]{module} and fix a subset \( B \subseteq M \). We say that \( B \) is a \term{Hamel basis} or simply \term{basis} of \( M \) if any of the following equivalent conditions hold:

  \begin{thmenum}
    \thmitem{def:hamel_basis/independent} It is a \hyperref[thm:span_via_linear_combinations]{generating set} of \hyperref[def:linear_dependence]{linearly independent} elements.

    \thmitem{def:hamel_basis/evaluation} The \hyperref[thm:free_semimodule_universal_property]{linear combination evaluation map}
    \begin{equation*}
      \begin{aligned}
        &\Phi_B: R^{\oplus B} \to M \\
        &\Phi_B( \seq{ t_b }_{b \in B} ) \coloneqq \sum_{b \in B} t_b b
      \end{aligned}
    \end{equation*}
    is \hyperref[def:function_invertibility/bijective]{bijective}.

    \thmitem{def:hamel_basis/free} \( M \) is \hyperref[def:semimodule/homomorphism]{linearly isomorphic} to the \hyperref[def:free_semimodule]{free module} \( R^{\oplus B} \).

    It is established terminology to say that \( M \) is a free module.
  \end{thmenum}
\end{definition}
\begin{defproof}
  \ImplicationSubProof{def:hamel_basis/independent}{def:hamel_basis/evaluation} Suppose that \( B \) is a generating set of linearly independent elements.

  \Fullref{def:linear_dependence/evaluation} is satisfied, hence \( \Phi_B \) is injective.

  Furthermore, \( B \) is generating, meaning that \( \linspan B = M \). By \fullref{def:linear_dependence/evaluation}, it is surjective.

  \ImplicationSubProof{def:hamel_basis/evaluation}{def:hamel_basis/free} If \( \Phi_B \) is bijective, then it is a linear isomorphism.

  \ImplicationSubProof{def:hamel_basis/free}{def:hamel_basis/independent} Suppose that \( \Psi: R^{\oplus B} \to M \) is a linear isomorphism. By \fullref{def:linear_dependence/evaluation}, \( \Psi \) is surjective, and hence a generating set of \( M \). Furthermore, it satisfies \fullref{def:linear_dependence/evaluation}, meaning that \( B \) is a linearly independent set.
\end{defproof}

\begin{proposition}\label{thm:def:hamel_basis}
  \hyperref[def:hamel_basis]{Bases} of the \( R \)-module \( M \) have the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:hamel_basis/span} Every nonempty subset of \( M \) is a basis for its \hyperref[def:semimodule/submodel]{linear span}.

    \thmitem{thm:def:hamel_basis/maximal_independent} Every basis of \( M \) is maximal among \hyperref[thm:def:linear_dependence]{linearly independent} sets.

    The converse holds for vector spaces --- see \fullref{thm:def:vector_space/minimal_generating}.

    \thmitem{thm:def:hamel_basis/minimal_generating} Every basis of \( M \) is minimal among generating sets.

    The converse holds for vector spaces --- see \fullref{thm:def:vector_space/minimal_generating}.
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:hamel_basis/span} Trivial.

  \SubProofOf{thm:def:hamel_basis/maximal_independent} Follows from \fullref{thm:def:linear_dependence/span_dependent}.

  \SubProofOf{thm:def:hamel_basis/minimal_generating} Let \( B \) be a basis of \( M \) and suppose that \( A \subsetneq B \) is also a generating set of \( M \).

  Then there exists some vector \( x \in B \setminus A \). Since both sets are generating, \( \linspan A = \linspan B \). By \fullref{thm:def:linear_dependence/span_dependent}, \( A \cup \set{ x } \) is linearly dependent, and by \fullref{thm:def:linear_dependence/monotonicity}, \( B \) is linearly dependent. This contradicts the assumption that \( B \) has a basis.

  Therefore, no proper subset of \( B \) is generating for \( M \).
\end{proof}

\begin{definition}\label{def:basis_decomposition}
  If \( B \) is a basis of the \( R \)-\hyperref[def:module]{module} \( M \), we have some linear isomorphism \( \pi: M \to R^{\oplus B} \). We denote the \( b \)-th component of this function by \( \pi_b: M \to R \). This is also a linear map, which we call the \term{coordinate projection} for \( b \).

  For every vector \( x \) in \( M \), we have
  \begin{equation*}
    x = \sum_{b \in B} \pi_b(x) \cdot b.
  \end{equation*}

  This linear combination is unique, and we call it the \term{decomposition} of \( x \) along \( B \).

  As in \fullref{rem:linear_combinations}, we sometimes take only the basis vectors with nonzero coefficients as \enquote{the} decomposition.
\end{definition}
\begin{defproof}
  The decomposition is unique. Indeed, if
  \begin{equation*}
    x = \sum_{b \in B} t_b b = \sum_{b \in B} r_b b,
  \end{equation*}
  then
  \begin{equation*}
    \sum_{b \in B} (t_b - r_b) b = 0_M.
  \end{equation*}

  Since \( B \) is a basis, it is linearly independent and hence \( t_b = r_b \) for all \( b \) in \( B \).
\end{defproof}

\begin{definition}\label{def:vector_space}
  A \term{vector space} is a \hyperref[def:module]{left module} over a \hyperref[def:field]{field}.

  We denote the category of vector spaces over \( \BbbK \) by \( \cat{Vect}_{\BbbK} \).
\end{definition}

\begin{proposition}\label{thm:def:vector_space}
  \hyperref[def:vector_space]{Vector spaces} of the vector space over \( \BbbK \) \( V \) have the following basic properties:
  \begin{thmenum}
    \thmitem{thm:def:linear_dependence/span_independent} For a linearly independent set \( A \), if \( x \in V \setminus \linspan A \), then \( A \cup \set{ x } \) is also a linearly independent set.

    \thmitem{thm:def:vector_space/maximal_independent} Every maximally \hyperref[thm:def:linear_dependence]{linearly independent} subset of \( V \) is a basis.

    The converse holds more generally --- see \fullref{thm:def:hamel_basis/maximal_independent}.

    \thmitem{thm:def:vector_space/minimal_generating} Every minimal generating subset of \( V \) is a basis.

    The converse holds more generally --- see \fullref{thm:def:hamel_basis/minimal_generating}.

    \thmitem{thm:def:vector_space/dimension_lemma} If \( \linspan\set{ a_1, \ldots, a_n } \subseteq \linspan\set{ b_1, \ldots, b_m } \), then \( n \leq m \).
  \end{thmenum}
\end{proposition}
\begin{proof}
  \SubProofOf{thm:def:linear_dependence/span_independent} Suppose that \( x \in V \setminus \linspan A \) and let
  \begin{equation*}
    t_0 x + \sum_{k=1}^n t_k a_k = 0_M.
  \end{equation*}

  If \( t_0 = 0_\BbbK \), then \( \sum_{k=1}^n t_k a_k \in \linspan A \) and thus \( t_1 = \cdots = t_n = 0_\BbbK \).

  Otherwise, we can divide by \( t_0 \) to obtain
  \begin{equation*}
    x = -\sum_{k=1}^n \frac {t_k} {t_0} a_k,
  \end{equation*}
  which implies that \( x \in \linspan A \), contradicting our choice of \( x \).

  Therefore, \( A \cup \set{ x } \) satisfies \fullref{def:linear_dependence}.

  \SubProofOf{thm:def:vector_space/maximal_independent} Let \( A \) be a maximally linearly independent set.

  Suppose that it is not a generating set and let \( x \in V \setminus \linspan A \). By \fullref{thm:def:linear_dependence/span_independent}, the set \( A \cup \set{ x } \) is linearly independent, contradicting the maximality of \( A \).

  Therefore, \( A \) is a generating set for \( V \).

  \SubProofOf{thm:def:vector_space/minimal_generating} Let \( A \) be a minimal generating set. Suppose that it is linearly dependent. Then there exist distinct vectors \( x_1, \ldots, x_n \) in \( A \) and scalars \( t_1, \ldots, t_n \), at least one of which is nonzero, such that
  \begin{equation*}
    \sum_{k=1}^n t_k x_k = 0_M.
  \end{equation*}

  Let \( k_0 \) be the smallest index such that \( t_{k_0} \neq 0_R \). Then
  \begin{equation*}
    x_{k_0} = -\sum_{k \neq k_0} \frac {t_k} {t_{k_0}} a_k.
  \end{equation*}

  Then \( \linspan A = \linspan A \setminus \set{ x_{k_0} } \), contradicting the minimality of \( A \).

  \SubProofOf{thm:def:vector_space/dimension_lemma} We will use induction on \( n \). The base case \( n = 0 \) holds because \( \linspan{ 0_V } \) is the only submodule of the linear span of zero vectors.

  Suppose that the statement holds for \( n - 1 \) and note that \( b_m \) can be \hyperref[def:basis_decomposition]{decomposed} as
  \begin{equation*}
    b_m = \sum_{k=1}^n t_k a_k.
  \end{equation*}

  Then
  \begin{equation*}
    a_k = \frac 1 {t_{k_0}} b_m - \sum_{k \neq k_0} \frac {t_k} {t_{k_0}} a_{k_0}.
  \end{equation*}

  Thus,
  \begin{equation*}
    \linspan\set{ a_1, \ldots, a_n } = \linspan\set{ a_1, \ldots, a_{k_0 - 1}, a_{k_0 + 1}, \ldots, a_n, b_m }.
  \end{equation*}

  We can thus remove \( b_m \) to obtain the inclusion
  \begin{equation*}
    \linspan\set{ b_1, \ldots, b_{m-1} } \subseteq \linspan\set{ a_1, \ldots, a_{k_0 - 1}, a_{k_0 + 1}, a_n }.
  \end{equation*}

  From the inductive hypothesis, we conclude that \( m - 1 \leq n - 1 \), and hence \( m \leq n \).
\end{proof}

\begin{proposition}\label{thm:vector_space_dimension}
  All \hyperref[def:hamel_basis]{bases} of a \hyperref[def:vector_space]{vector space} are \hyperref[def:equinumerosity]{equinumerous}.

  We define the \term{dimension} \( \dim V \) of the vector space \( V \) as the \hyperref[thm:cardinality_existence]{cardinality} of any of its bases.
\end{proposition}
\begin{proof}
  Let \( A \) and \( B \) be bases of \( V \).

  \SubProof{Proof for finite bases} Suppose that \( a_1, \ldots, a_n \) are the vectors of \( A \) and, aiming at a contradiction, suppose that \( B \) is infinite.

  Every vector \( a_i \) of \( A \) can be \hyperref[def:basis_decomposition]{decomposed} along \( B \) as
  \begin{equation*}
    a_i = \sum_{j=1}^{m_i} t^{(i)}_j b^{(i)}_j.
  \end{equation*}
  for appropriate scalars from \( \BbbK \) and vectors from \( B \). Since this can be done for every \( a_i \) in \( A \), we conclude that
  \begin{equation*}
    V = \linspan\set{ a_1, \ldots, a_n } = \linspan\set{ b^{(1)}_1, \ldots, b^{(1)}_{m_1}, \ldots, b^{(n)}_1, \ldots, b^{(n)}_{m_n} }.
  \end{equation*}

  Hence, a finite subset of \( B \) generates \( V \), contradicting \fullref{thm:def:hamel_basis/minimal_generating}. Therefore, \( B \) must be a finite set.

  Let \( b_1, \ldots, b_m \) be the vectors of \( B \). By applying \fullref{thm:def:vector_space/dimension_lemma} twice, we conclude that \( n \leq m \) and \( m \leq n \), hence \( n = m \).

  \SubProof{Proof for infinite bases} Suppose that both \( A \) and \( B \) are infinite. Let \( S_x \) be the set of vectors in \( B \) with nonzero coefficients in the decomposition of \( x \in V \).
  \begin{itemize}
    \item \( S_x \) is necessarily a finite set.
    \item Every vector \( x \) in \( V \) belongs to \( S_a \) for some \( a \in A \).

    Indeed, \( x \) can be decomposed along \( A \) as
    \begin{equation*}
      x = \sum_{a \in A} \pi_a(x) \cdot a,
    \end{equation*}
    and \( x \in S_{a_k} \) whenever \( \pi(a) \neq 0_\BbbK \).

    \item For every basis vector \( b \) in \( B \), \( S_b = \set{ b } \).

    \item We have
    \begin{equation*}
      B \subseteq \bigcup_{a \in A} S_a
    \end{equation*}
  \end{itemize}

  Therefore,
  \begin{equation*}
    \card(B)
    \leq
    \card\parens[\Bigg]{ \bigcup_{a \in A} S_a }
    \leq
    \card\parens[\Bigg]{ \coprod_{a \in A} S_a }
    \leq
    \card(A \times \omega)
    \leq
    \card(A) \cdot \aleph_0
    \reloset {\ref{thm:simplified_cardinal_arithmetic/infinite}} \leq
    \card(A).
  \end{equation*}

  Since \( A \) and \( B \) were arbitrary bases, we can exchange them to obtain the converse inequality, and thus \( \card(A) = \card(B) \).
\end{proof}

\begin{proposition}\label{thm:commutative_module_rank}
  All \hyperref[def:hamel_basis]{bases} of a \hyperref[def:module]{module} over a nontrivial \hyperref[def:ring/commutative]{commutative ring} are \hyperref[def:semimodule/homomorphism]{linearly isomorphic}.

  We define the \term{rank} of a module as the \hyperref[thm:cardinality_existence]{cardinality} of any of its bases. This is a generalization of \hyperref[thm:vector_space_dimension]{vector space dimensions}.
\end{proposition}
\begin{proof}
  Suppose that \( A \) and \( B \) are bases of the \( R \)-module \( M \). Let \( I \) be a \hyperref[def:semiring_ideal/maximal]{maximal ideal} of \( R \).

  By \fullref{thm:quotient_by_maximal_ideal}, \( \BbbK = R / I \) is a field (this is a forward reference to \fullref{thm:quotient_by_maximal_ideal}). Given an isomorphism \( \Phi: R^{\oplus A} \to R^{\oplus B} \) with components \( \Phi_b: R^{\oplus A} \to R \), define
  \begin{equation*}
    \begin{aligned}
      &\Psi: \BbbK^{\oplus A} \to \BbbK^{\oplus B} \\
      &\Psi\parens[\Big]{ \seq{ t_a + I }_{a \in A} } \coloneqq \seq[\Big]{ \Phi_b(\seq{ t_a }_{a \in A}) + I }_{b \in B}
    \end{aligned}
  \end{equation*}

  This is clearly an isomorphism if it is well-defined. Suppose we are given \( t_a + I = t_a' + I \) for every \( a \in A \), i.e. \( t_a - t_a' \in I \). Then
  \small
  \begin{equation*}
    \Phi_b(\seq{ t_a }_{a \in A}) - \Phi_b(\seq{ t_a' }_{a \in A})
    =
    \Phi_b(\seq{ t_a }_{a \in A} - \seq{ t_a' }_{a \in A})
    =
    \Phi_b(\seq{ t_a - t_a' }_{a \in A})
    =
    \sum_{a \in A} (\underbrace{ t_a - t_a' }_I) \Phi_b(a)
    \in
    I.
  \end{equation*}
  \normalsize

  Thus,
  \begin{equation*}
    \Phi_b(\seq{ t_a }_{a \in A}) + I = \Phi_b(\seq{ t_a' }_{a \in A}) + I.
  \end{equation*}

  Therefore, \( \Psi \) is a well-defined linear isomorphism. Applying \fullref{thm:vector_space_dimension}, we conclude that \( A \) and \( B \) are equinumerous.
\end{proof}
