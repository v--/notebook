\subsection{Relations}\label{subsec:relations}

\begin{definition}\label{def:relation}
  Let \( A_1, \ldots, A_n \) be a finite family of sets and let
  \begin{equation*}
    R \subseteq A_1 \times \cdots \times A_n
  \end{equation*}
  be a subset of their \hyperref[def:binary_cartesian_product]{Cartesian product}.

  The \( (n + 1) \)-\hyperref[def:cartesian_product]{tuple} \( (R,  A_1, \ldots, A_n) \) is called an \( n \)-ary \term{relation}. We say that the tuple \( (x_1, \ldots, x_n) \in A_1 \times \cdots \times A_n \) is related with respect to \( R \).

  Relations are the semantical counterpart to \hyperref[def:first_order_structure/interpretation/predicate]{first-order predicates} and are equivalent to Boolean-valued functions (see \fullref{rem:boolean_valued_functions_and_predicates}).

  \begin{thmenum}
    \thmitem{def:relation/graph} The set \( R \) of tuples is called the \term{graph} of the relation. In case the tuple \( (A_1, \ldots, A_n) \) is clear from the context, we can identify the relation \( (R, A_1, \ldots, A_n) \) with its graph \( R \). We sometimes use the notation \( \gph(R) \) just for the sake of clarity.

    \thmitem{def:relation/signature} The \term{signature} of the relation is the tuple \( (A_1, \ldots, A_n) \). Obviously this definition only makes sense if we know what the signature is, either from the context or from the definition of the relation as the tuple \( (R, A_1, \ldots, A_n) \) rather than only via its graph \( R \).

    As a matter of fact, it is common to ignore the signature when defining relations --- see e.g. \cite[7]{Kelley1955} or \cite[def. 2.1]{OpenLogicFull}. If we do identify a relation only with its graph, however, some notions like \hyperref[def:binary_relation/range]{ranges} and \hyperref[def:binary_relation/image]{images} coincide despite being different and other notions like \hyperref[def:function_invertibility/surjection]{function surjectivity} make no sense.

    \thmitem{def:relation/arity} For some small values of \( n \), \( n \)-ary relations have established names:
    \begin{itemize}
      \item \term{Nullary} if \( n = 0 \)
      \item \term{Unary} if \( n = 1 \)
      \item \term{Binary} if \( n = 2 \)
      \item \term{Ternary} if \( n = 3 \)
    \end{itemize}

    This is not to be confused with \hyperref[def:multi_valued_function/arity]{function arity} nor with the arity of the tuple \( (R, A_1, \ldots, A_n) \).

    \thmitem{def:relation/single_set} If all \( A_k \) are equal to the set \( A \), we say that \( R \subseteq A^k \) is a \term{relation on} \( A \).
  \end{thmenum}
\end{definition}

\begin{example}\label{ex:relation}
  Relations are used in vastly different contexts:
  \begin{itemize}
    \item \hyperref[def:function]{Functions} are special binary relations.
    \item \hyperref[sec:order_theory]{Orders} are also special binary relations.
    \item \hyperref[def:directed_graph]{Directed graphs} are binary relations over finite sets.
    \item \hyperref[def:entourage]{Entourages} are binary relations in \hyperref[def:uniform_space]{uniform spaces}.
    \item Relations are equivalent to Boolean-valued functions (see \fullref{rem:boolean_valued_functions_and_predicates}) and are often used for defining semantics of predicate symbols in \hyperref[def:first_order_logic]{first-order logic}.
  \end{itemize}
\end{example}

\begin{definition}\label{def:binary_relation}
  Let \( R \subseteq A \times B \) be a binary relation. We introduce the following terminology:
  \begin{thmenum}[series=def:binary_relation]
    \thmitem{def:binary_relation/domain} The \term{domain} of \( R \) is the set
    \begin{equation*}
      \dom(R) \coloneqq \set{ x \in A \given \qexists {y \in B} (x, y) \in R }
    \end{equation*}
    of all members of \( A \) that belong to at least one tuple in the graph \( R \).

    \thmitem{def:binary_relation/image} The \term{image} of \( R \) is the set
    \begin{equation*}
      \img(R) \coloneqq \set{ y \in B \given \qexists {x \in A} (x, y) \in R }
    \end{equation*}
    of all members of \( Y \) that belong to at least one tuple in the graph \( R \).

    \thmitem{def:binary_relation/range} The set \( B \) is called the \term{range} or \term{codomain} of \( R \). There is no similar established terminology for \( A \).

    \thmitem{def:binary_relation/inverse}\mcite[def 2.31]{OpenLogicFull} The \term{inverse relation} of \( R \) is
    \begin{equation*}
      R^{-1} \coloneqq \set{ (y, x) \given (x, y) \in R }.
    \end{equation*}

    \thmitem{def:binary_relation/restriction} The \term{restriction} of \( R \) to \( A' \subseteq A \) is the binary relation \( (R\restr_{A'}, A', A') \) is
    \begin{equation*}
      R\restr_{A'} \coloneqq R \cap (A' \times A') = \set{ (x, y) \in R \given x \in A' \T{and} y \in A' }.
    \end{equation*}

    We say that \( R \) is an \term{extension} of \( R\restr_{A'} \).

    \thmitem{def:binary_relation/diagonal} A very special relation is the \term{diagonal relation} on a set \( A \):
    \begin{equation*}
      \increment_A \coloneqq \set{ (x, x) \given x \in A }.
    \end{equation*}

    \thmitem{def:binary_relation/composition} Given two relations \( R \subseteq A \times B \) and \( T \subseteq B \times C \), we define their composition as
    \begin{equation*}
      T \bincirc R \coloneqq \set*{ (x, z) \in A \times C \given* \qexists {y \in Y} \parens[\Big]{ (x, y) \in R \T{and} (y, z) \in T } }.
    \end{equation*}
  \end{thmenum}

  Whenever \( A = B \) and \( R \) is simply a binary relation over \( A \), the following are commonly used conditions that are often as axioms to some theory:
  \begin{thmenum}[resume=def:binary_relation]
    \thmitem{def:binary_relation/reflexive} \( R \) is \term{reflexive} if \( \Delta_A \subseteq R \), i.e. if every element of \( A \) is related with itself.

    The following formula is used as an axiom for \hyperref[def:poset/nonstrict]{nonstrict partial orders} and \hyperref[def:entourage]{entourages}:
    \begin{equation}\label{eq:def:binary_relation/reflexive}
      \qforall \xi (\xi \mathbin{R} \xi).
    \end{equation}

    Note that we use \fullref{rem:first_order_formula_conventions/infix} notation in the latter case. Using either infix or prefix notation is actually a necessity since we do not actually have a concept of an ordered tuple in general (not set-based) first-order theories --- see \fullref{rem:first_order_formula_conventions/infix}.

    \thmitem{def:binary_relation/irreflexive} \( R \) is \term{irreflexive} if \( \Delta_A \cap R = \varnothing \), i.e. if no element of \( A \) is related with itself.

    The following formula is used as an axiom for \hyperref[def:poset/strict]{strict partial orders}:
    \begin{equation}\label{eq:def:binary_relation/irreflexive}
      \neg \qexists \xi (\xi \mathbin{R} \xi).
    \end{equation}

    \thmitem{def:binary_relation/symmetric} \( R \) is \term{symmetric} if \( R = R^{-1} \).

    The following formula is used as an axiom for \hyperref[def:equivalence_relation]{equivalence relations}, \hyperref[def:undirected_graph]{undirected graphs} and \hyperref[def:entourage]{entourages}:
    \begin{equation}\label{eq:def:binary_relation/symmetric}
      \xi \mathbin{R} \eta \rightarrow \eta \mathbin{R} \xi.
    \end{equation}

    \thmitem{def:binary_relation/antisymmetric} \( R \) is \term{antisymmetric} if \( R \cap R^{-1} = \Delta_X \).

    The following formula is used as an axiom for \hyperref[def:poset]{partial orders}:
    \begin{equation}\label{eq:def:binary_relation/antisymmetric}
      (\xi \mathbin{R} \eta \wedge \eta \mathbin{R} \xi) \rightarrow \xi \doteq \eta.
    \end{equation}

    \thmitem{def:binary_relation/transitive} \( R \) is \term{transitive} if \( R = R \bincirc R \).

    The following formula is used as an axiom for \hyperref[def:poset]{preorders}:
    \begin{equation}\label{eq:def:binary_relation/transitive}
      (\xi \mathbin{R} \eta \wedge \eta \mathbin{R} \zeta) \rightarrow \xi \mathbin{R} \zeta.
    \end{equation}

    \thmitem{def:binary_relation/total} \( R \) is \term{total} if any two member of \( A \) are related.

    The following formula is used as an axiom for \hyperref[def:totally_ordered_set]{nonstrict total orders}:
    \begin{equation}\label{eq:def:binary_relation/total}
      \qforall \xi \qforall \eta (\xi \mathbin{R} \eta \vee \eta \mathbin{R} \xi).
    \end{equation}

    \thmitem{def:binary_relation/trichotomic} \( R \) is \term{trichotomic} if every two elements of \( A \) are either related or equal.

    The following formula is used as an axiom for \hyperref[def:totally_ordered_set]{strict total orders}:
    \begin{equation}\label{eq:def:binary_relation/trichotomic}
      \qforall \xi \qforall \eta (\xi \mathbin{R} \eta \vee \eta \mathbin{R} \xi \vee \eta = \xi).
    \end{equation}
  \end{thmenum}
\end{definition}

\begin{definition}\label{def:derived_relations}
  Let \( R \subseteq A^2 \) be a binary relation on the set \( A \).

  \begin{thmenum}
    \thmitem{def:derived_relations/reflexive} The \term{reflexive closure} of \( R \) is
    \begin{equation*}
      \cl^R(R) \coloneqq R \cup \Delta_X.
    \end{equation*}

    \thmitem{def:derived_relations/symmetric} The \term{symmetric closure} of \( R \) is
    \begin{equation*}
      \cl^S(R) \coloneqq R \cup R^{-1}.
    \end{equation*}

    \thmitem{def:derived_relations/transitive} The \term{transitive closure} \( \cl^T(R) \) of \( R \) is the smallest relation that contains \( R \) such that \( (x, y) \in R \) and \( (y, z) \in R \) together imply \( (x, z) \in \cl^T(R) \).

    The \term{transitive reduction} \( \red^T(R) \) of \( R \) is the smallest (with respect to set inclusion) relation such that \( \cl^T(\red^T(R)) = \cl^T(R) \).

    Using some forward references to \fullref{subsec:functions} and \fullref{subsec:natural_numbers}, the transitive closure can be defined inductively as
    \begin{equation*}
      \cl^T(R) \coloneqq \bigcup \set{ R^k \given k \in \BbbN },
    \end{equation*}
    where \( R^k \) is iterated \hyperref[def:binary_relation/composition]{composition}.
  \end{thmenum}
\end{definition}

\begin{proposition}\label{thm:derived_relations_characterization}
  The is reflexive (resp. symmetric or transitive) closure of a relation \( R \) is the smallest reflexive (resp. symmetric or transitive) relation that contains \( R \).
\end{proposition}
\begin{proof}
  Every other reflexive (resp. symmetric or transitive) relation contains the closure.
\end{proof}
